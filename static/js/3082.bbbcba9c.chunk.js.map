{"version":3,"file":"static/js/3082.bbbcba9c.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/graphics/controllers/StreamController.js","../node_modules/@arcgis/core/views/layers/StreamLayerView.js","../node_modules/@arcgis/core/views/3d/layers/StreamLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import t from\"../../../Graphic.js\";import r from\"../../../core/Accessor.js\";import{HandleOwnerMixin as s}from\"../../../core/HandleOwner.js\";import{isSome as i}from\"../../../core/maybe.js\";import{EsriPromiseMixin as o}from\"../../../core/Promise.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../../core/accessorSupport/decorators/subclass.js\";import{StreamFeatureManager as c}from\"../data/StreamFeatureManager.js\";import{createConnection as p}from\"../sources/connections/createConnection.js\";import{EventedSet as h}from\"../../../views/3d/support/EventedSet.js\";import{featureGeometryTypeKebabDictionary as l}from\"../../../geometry/support/typeUtils.js\";const d=2500;let u=class extends t{getObjectId(){return this.objectId}};e([a({type:Number,json:{read:!0}})],u.prototype,\"objectId\",void 0),u=e([n(\"esri.layers.graphics.controllers.StreamGraphic\")],u);class m{constructor(e){this.onUpdate=e,this._idToGraphic=new Map}destroy(){this._idToGraphic.clear()}add(e){this._idToGraphic.set(e.objectId,e)}get(e){return this._idToGraphic.get(e)}forEach(e){this._idToGraphic.forEach(e)}removeById(e){const t=this._idToGraphic.get(e);return t?(t.sourceLayer=t.layer=null,this._idToGraphic.delete(e),t):null}update(e,t){this.onUpdate(e,t)}get size(){return this._idToGraphic.size}}let y=class extends(s(o(r))){constructor(){super(...arguments),this._updateInfo={websocket:0,client:0},this.graphics=new h}initialize(){this.addResolvingPromise(this.layer.when((()=>this._startup())))}destroy(){this.clear()}_clearInterval(){this._updateIntervalId&&(clearInterval(this._updateIntervalId),this._updateIntervalId=0)}clear(){this._clearInterval(),this.connection&&(this.connection.destroy(),this.connection=null),this.store&&(this.store.destroy(),this.store=null),this.graphics.clear(),this.handles.removeAll()}get updating(){return!this.connection||\"connected\"===this.connection.connectionStatus}_startup(){const{parsedUrl:e,spatialReference:t,definitionExpression:r,geometryDefinition:s,objectIdField:i,timeInfo:o,purgeOptions:a,maxReconnectionAttempts:n,maxReconnectionInterval:h,customParameters:d}=this.layer,u=l.toJSON(this.layer.geometryType),y=t,f=this.layerView.view.spatialReference,_={geometry:s,where:r};this.clear(),this._set(\"connection\",p(e,y,f,u,_,n,h,d)),this._outSpatialReference=f.toJSON(),this.store=new m(this._onUpdate.bind(this)),this.featuresManager=new c(this.store,i,o.toJSON(),a),this.handles.add([this.connection.on(\"feature\",(e=>this._onFeature(e))),this.layer.watch(\"definitionExpression\",(()=>this._startup())),this.layer.watch(\"geometryDefinition\",(()=>this._startup())),this.layer.watch(\"purgeOptions\",(()=>this._startup()))]),this._initUpdateInterval()}_onFeature(e){this._updateInfo.websocket++,this.layerView.hasEventListener(\"data-received\")&&this.layerView.emit(\"data-received\",{attributes:e.attributes,centroid:e.centroid,geometry:e.geometry});try{i(e.geometry)&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._outSpatialReference);const t=u.fromJSON(e);t.sourceLayer=t.layer=this.layer,this.featuresManager.add(t)}catch{}}_onUpdate(e,t){i(t)&&this.graphics.removeMany(t),i(e)&&(this._updateInfo.client+=e.length,this.graphics.addMany(e))}_initUpdateInterval(){this._clearInterval();const{updateInterval:e}=this.layer;let t=performance.now();this._updateIntervalId=setInterval((()=>{const e=performance.now(),r=e-t;if(r>d){t=e;const s=Math.round(this._updateInfo.client/(r/1e3)),i=Math.round(this._updateInfo.websocket/(r/1e3));this._updateInfo.client=0,this._updateInfo.websocket=0,this.layerView.emit(\"update-rate\",{client:s,websocket:i})}this.featuresManager.checkForUpdates()}),e)}pauseStream(){this._clearInterval()}resumeStream(){this._initUpdateInterval()}};e([a()],y.prototype,\"connection\",void 0),e([a()],y.prototype,\"layer\",void 0),e([a()],y.prototype,\"layerView\",void 0),e([a({readOnly:!0})],y.prototype,\"updating\",null),y=e([n(\"esri.layers.graphics.controllers.StreamController\")],y);export{y as StreamController,u as StreamGraphic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import e from\"../../layers/support/FeatureFilter.js\";const s=s=>{let c=class extends s{constructor(...r){super(...r),this.connectionError=null,this.connectionStatus=\"disconnected\",this.filter=null}};return r([o({readOnly:!0})],c.prototype,\"connectionError\",void 0),r([o({aliasOf:\"controller.connection.connectionStatus\",readOnly:!0})],c.prototype,\"connectionStatus\",void 0),r([o({type:e})],c.prototype,\"filter\",void 0),c=r([t(\"esri.layers.mixins.StreamLayerView\")],c),c};export{s as StreamLayerView,s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Error.js\";import{property as t}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{StreamController as s}from\"../../../layers/graphics/controllers/StreamController.js\";import i from\"../../../rest/support/Query.js\";import{FeatureLikeLayerView3D as a}from\"./FeatureLikeLayerView3D.js\";import{LayerView3D as n}from\"./LayerView3D.js\";import{UpdatePolicy as l}from\"../webgl-engine/lib/basicInterfaces.js\";import c from\"../../layers/LayerView.js\";import{StreamLayerView as p}from\"../../layers/StreamLayerView.js\";let m=class extends(p(a(n(c)))){constructor(){super(...arguments),this.type=\"stream-3d\",this.updatePolicy=l.ASYNC,this.hasZ=!0,this.hasM=!1}initialize(){this.handles.add([this.watch(\"suspended\",(r=>{this.controller&&(r?this.controller.pauseStream():this.controller.resumeStream())}))])}get connectionError(){const r=this.get(\"controller.connection.errorString\");if(r)return new e(\"stream-controller\",r)}createQuery(){return new i({outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference})}queryLatestObservations(r,e){return this.queryEngine.executeQueryForLatestObservations(this._ensureQuery(r),null==e?void 0:e.signal)}createController(){return new s({layer:this.layer,layerView:this})}beforeSetController(){}};r([t({readOnly:!0})],m.prototype,\"updatePolicy\",void 0),r([t({readOnly:!0})],m.prototype,\"connectionError\",null),r([t()],m.prototype,\"controller\",void 0),r([t({readOnly:!0})],m.prototype,\"hasZ\",void 0),r([t({readOnly:!0})],m.prototype,\"hasM\",void 0),m=r([o(\"esri.views.3d.layers.StreamLayerView3D\")],m);const y=m;export{y as default};\n"],"names":["u","t","getObjectId","this","objectId","e","a","type","Number","json","read","prototype","n","m","constructor","onUpdate","_idToGraphic","Map","destroy","clear","add","set","get","forEach","removeById","sourceLayer","layer","delete","update","size","y","s","o","r","super","arguments","_updateInfo","websocket","client","graphics","h","initialize","addResolvingPromise","when","_startup","_clearInterval","_updateIntervalId","clearInterval","connection","store","handles","removeAll","updating","connectionStatus","parsedUrl","spatialReference","definitionExpression","geometryDefinition","objectIdField","i","timeInfo","purgeOptions","maxReconnectionAttempts","maxReconnectionInterval","customParameters","d","l","geometryType","f","layerView","view","_","geometry","where","_set","p","_outSpatialReference","toJSON","_onUpdate","bind","featuresManager","c","on","_onFeature","watch","_initUpdateInterval","hasEventListener","emit","attributes","centroid","fromJSON","removeMany","length","addMany","updateInterval","performance","now","setInterval","Math","round","checkForUpdates","pauseStream","resumeStream","readOnly","connectionError","filter","aliasOf","updatePolicy","hasZ","hasM","controller","createQuery","outFields","returnGeometry","outSpatialReference","queryLatestObservations","queryEngine","executeQueryForLatestObservations","_ensureQuery","signal","createController","beforeSetController"],"sourceRoot":""}