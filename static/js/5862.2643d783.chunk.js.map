{"version":3,"file":"static/js/5862.2643d783.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/I3SPointsWorkerHandle.js","../node_modules/@arcgis/core/views/3d/layers/SceneLayerGraphicsView3D.js","../node_modules/@arcgis/core/views/3d/layers/i3s/attributeEditing.js","../node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js","../node_modules/@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js","../node_modules/@arcgis/core/core/AsyncUpdate.js","../node_modules/@arcgis/core/views/3d/layers/support/SceneLayerViewRequiredFields.js","../node_modules/@arcgis/core/views/3d/layers/support/fieldProperties.js","../node_modules/@arcgis/core/views/layers/SceneLayerView.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{WorkerHandle as r}from\"../../../core/workers/WorkerHandle.js\";class e extends r{constructor(r){super(\"SceneLayerWorker\",\"dracoDecompressPointCloudData\",r,{hasInitialize:!0})}getTransferList(r){return[r.geometryBuffer]}}export{e as I3SPointsWorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Graphic.js\";import{binaryIndexOf as r}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Logger.js\";import{destroyMaybe as s,isNone as o,isSome as a,unwrap as n}from\"../../../core/maybe.js\";import{initial as d}from\"../../../core/reactiveUtils.js\";import{init as l}from\"../../../core/watchUtils.js\";import{property as u}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import{b as c}from\"../../../chunks/vec3.js\";import{f as p,c as g}from\"../../../chunks/vec3f64.js\";import{projectBuffer as m,projectVectorToVector as f,projectBoundingRect as y}from\"../../../geometry/projection.js\";import{create as _}from\"../../../geometry/support/aaBoundingRect.js\";import{extentContainsCoords3D as b}from\"../../../geometry/support/contains.js\";import{getGeometryZScaler as v}from\"../../../geometry/support/zscale.js\";import{makeDehydratedPoint as E,estimateSize as x}from\"../../../layers/graphics/dehydratedFeatures.js\";import{hydrateGraphic as I}from\"../../../layers/graphics/hydratedFeatures.js\";import S from\"../../../layers/graphics/controllers/I3SOnDemandController.js\";import w from\"../../../layers/support/FeatureFilter.js\";import D from\"../../../rest/support/Query.js\";import{I3SPointsWorkerHandle as O}from\"./I3SPointsWorkerHandle.js\";import{DrapeSourceType as F}from\"./interfaces.js\";import{LayerView3D as j}from\"./LayerView3D.js\";import A from\"./graphics/Graphics3DFeatureProcessor.js\";import C from\"./graphics/QueryEngine.js\";import{createInteractiveEditSession as N,processAttributeEdits as T}from\"./i3s/attributeEditing.js\";import{I3SAttributeOverrides as V}from\"./i3s/I3SAttributeOverrides.js\";import{checkSpatialReferences as G,containsDraco as M,whenGraphicAttributes as P,getCachedAttributeValue as R}from\"./i3s/I3SUtil.js\";import{DefinitionExpressionSceneLayerView as L}from\"./support/DefinitionExpressionSceneLayerView.js\";import{defineFieldProperties as H}from\"./support/fieldProperties.js\";import{PopupSceneLayerView as U}from\"./support/PopupSceneLayerView.js\";import{SceneLayerViewRequiredFields as q}from\"./support/SceneLayerViewRequiredFields.js\";import Q from\"../support/debugFlags.js\";import{GraphicsMap as k}from\"../support/GraphicsMap.js\";import{compute as B}from\"../support/orientedBoundingBox.js\";import{updatingProgress as z}from\"../support/updatingProperties.js\";import{UpdatePolicy as W}from\"../webgl-engine/lib/basicInterfaces.js\";import K from\"../../layers/SceneLayerView.js\";import{TaskPriority as Z}from\"../../support/Scheduler.js\";const Y=i.getLogger(\"esri.views.3d.layers.SceneLayerGraphicsView3D\"),J=H();let $=class extends(L(U(j(K)))){constructor(){super(...arguments),this.type=\"scene-layer-graphics-3d\",this._nodesAddedToStage=new Map,this.drapeSourceType=F.Features,this._queryEngine=null,this._memCache=null,this._interactiveEditingSessions=new Map,this.loadedGraphics=new k,this.holeFilling=\"always\",this.progressiveLoadFactor=1,this.supportsHeightUnitConversion=!0,this._coordinatesOutsideExtentErrors=0,this._maxCoordinatesOutsideExtentErrors=20}initialize(){var e,t;const r=this.layer;this.addResolvingPromise(r.indexInfo),this._attributeOverrides=new V(this.layer,null==(e=this.view.resourceController)?void 0:e.memoryController),G(r,this.view.spatialReference,this.view.viewingMode),this.fieldsHelper=new q({layerView:this}),this.updatingHandles.add((()=>r.rangeInfos),(e=>this._rangeInfosChanged(e)),d),this.updatingHandles.add((()=>r.renderer),((e,t)=>this._rendererChange(e,t))),this.updatingHandles.add((()=>[this.parsedDefinitionExpression,this.excludeObjectIdsSorted]),(()=>this._filterChange())),this.updatingHandles.add((()=>this.view.floors),(()=>this.processor.filterVisibility.filterChanged())),this.handles.add(l(Q,\"I3S_TREE_SHOW_TILES\",(e=>{if(e&&!this._treeDebugger){const e=this._controller.crsIndex;import(\"./support/I3STreeDebugger.js\").then((({I3STreeDebugger:t})=>{!this._treeDebugger&&Q.I3S_TREE_SHOW_TILES&&(this._treeDebugger=new t({lv:this,view:this.view,nodeSR:e}))}))}else e||!this._treeDebugger||Q.I3S_TREE_SHOW_TILES||(this._treeDebugger.destroy(),this._treeDebugger=null)}))),this._set(\"processor\",new A({owner:this,preferredUpdatePolicy:W.ASYNC,scaleVisibilityEnabled:!0,filterVisibilityEnabled:!0,timeExtentVisibilityEnabled:!1,frustumVisibilityEnabled:!1,elevationAlignmentEnabled:!0,elevationFeatureExpressionEnabled:!1,dataExtent:r.fullExtent,updateClippingExtent:e=>this._updateClippingExtent(e)})),null==(t=this.processor.elevationAlignment)||t.events.on(\"invalidate-elevation\",(e=>this._invalidateElevation(e))),this.supportsHeightUnitConversion&&(this._verticalScale=v(\"point\",r.spatialReference,this.view.spatialReference)),this.addResolvingPromise(this.processor.setup()),this._memCache=this.view.resourceController.memoryController.newCache(r.uid),this._controller=new S({layerView:this,scaleVisibilityEnabled:!1}),M(this.layer.geometryDefinitions)&&(this._worker=new O((e=>this.view.resourceController.schedule(e)))),this.handles.add(this.layer.on(\"apply-edits\",(e=>this.updatingHandles.addPromise(e.result)))),this.handles.add(this.layer.on(\"edits\",(e=>this._handleEdits(e)))),this.when((()=>{this._queryEngine=new C({layerView:this,priority:Z.FEATURE_QUERY_ENGINE}),this.updatingHandles.add((()=>this.maximumNumberOfFeatures),(e=>this._controller.featureTarget=e),d),this.updatingHandles.add((()=>this.suspended),(e=>{e&&this._removeAllNodeData()}))}))}destroy(){this._treeDebugger=s(this._treeDebugger),this._attributeOverrides=s(this._attributeOverrides),this._set(\"processor\",s(this.processor)),this._controller=s(this._controller),this._queryEngine=s(this._queryEngine),this._worker=s(this._worker),this._memCache=s(this._memCache),this._nodesAddedToStage.clear(),this.fieldsHelper=s(this.fieldsHelper)}get requiredFields(){var e,t;return null!=(e=null==(t=this.fieldsHelper)?void 0:t.requiredFields)?e:[]}get maximumNumberOfFeatures(){var e,t,r;const i=null==(e=this.processor)||null==(t=e.graphicsCore)?void 0:t.displayFeatureLimit;return null!=(r=null==i?void 0:i.maximumNumberOfFeatures)?r:0}set maximumNumberOfFeatures(e){null!=e?(this._override(\"maximumNumberOfFeatures\",e),this._controller.fixedFeatureTarget=!0):(this._clearOverride(\"maximumNumberOfFeatures\"),this._controller.fixedFeatureTarget=!1)}get maximumNumberOfFeaturesExceeded(){var e;return!this.suspended&&!(null==(e=this._controller)||!e.useMaximumNumberOfFeatures||this._controller.leavesReached)}get excludeObjectIdsSorted(){const e=this.layer.excludeObjectIds;return e.length?e.toArray().sort(((e,t)=>e-t)):null}get hasM(){return!1}get hasZ(){return!0}async whenGraphicAttributes(e,t){return P(this.layer,e,this._getObjectIdField(),t,(()=>[...this._nodesAddedToStage.values()]))}getGraphicFromGraphicUid(e){if(!this.loadedGraphics)return null;const t=I(this.loadedGraphics.find((t=>t.uid===e)),this.layer),r=this._getObjectIdField();return t&&t.attributes&&t.attributes[r]?(t.layer=this.layer,t.sourceLayer=this.layer,t):null}whenGraphicBounds(e,t){return this.processor.whenGraphicBounds(e,t)}computeAttachmentOrigin(e,t){return this.processor.computeAttachmentOrigin(e,t)}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}isUpdating(){var e,t,r;return!!(null!=(e=this._controller)&&e.updating||null!=(t=this.processor)&&t.updating||null!=(r=this.fieldsHelper)&&r.updating)}highlight(e){return this.processor.highlight(e,this.layer.objectIdField)}get updatePolicy(){return this.processor.graphicsCore.effectiveUpdatePolicy}createInteractiveEditSession(e){return N(this.attributeEditingContext,e)}async _extractBinaryPointData(e,t){const r={geometryBuffer:e.geometryBuffer};return o(this._worker)&&(this._worker=new O((e=>this.view.resourceController.schedule(e)))),this._worker.invoke(r,t).then((e=>{if(a(e)){return{positionData:e.positions,featureIds:e.featureIds}}throw new Error(\"Failed to decompress Draco point data\")}))}_checkExtent(e,t){e&&!b(e,t)&&(this._coordinatesOutsideExtentErrors<this._maxCoordinatesOutsideExtentErrors&&Y.error(\"Service Error: Coordinates outside of layer extent\"),this._coordinatesOutsideExtentErrors+1===this._maxCoordinatesOutsideExtentErrors&&Y.error(\"Maximum number of errors reached. Further errors are ignored.\"),this._coordinatesOutsideExtentErrors++)}async addNode(e,t,r){if(!te(t)&&!ee(t))return Promise.reject();if(this._nodesAddedToStage.has(e.index))return void Y.error(\"I3S node \"+e.id+\" already added\");const i=a(this.layer.fullExtent)?ie(this.layer.fullExtent.clone(),.5):null,s=this._controller.crsVertex,o=[],n={graphics:null,featureIds:null,attributeInfo:t.attributeDataInfo,node:e};if(te(t)?await this._addNodeBinaryPointData(e,n,t,i,o,r):ee(t)&&this._addNodeLegacyPointData(e,n,t,i,o),await this._attributeOverrides.apply(n.featureIds,t.attributeDataInfo,r),e.numFeatures=n.graphics.length,this._updateNodeMemory(e),re(n),o.length>0&&(this._computeObb(e,o,s),this._controller.updateVisibility(e.index)),!this._controller.isGeometryVisible(e))return this._cacheNodeData(n),Promise.resolve();if(a(this._verticalScale))for(const a of n.graphics)this._verticalScale(a.geometry);return this._nodesAddedToStage.set(e.index,n),this.loadedGraphics.addMany(n.graphics),this._filterNode(n),this._treeDebugger&&this._treeDebugger.update(),Promise.resolve()}_computeObb(e,t,r){const i=this._controller.crsIndex,s=i.isGeographic?this.view.renderSpatialReference:i;m(t,r,0,t,s,0,t.length/3);const o={data:t,size:3};e.serviceObb=B(o),i.isGeographic&&f(e.serviceObb.center,s,e.serviceObb.center,i)}isNodeLoaded(e){return this._nodesAddedToStage.has(e)}isNodeReloading(){return!1}updateNodeState(){}async _addNodeBinaryPointData(e,r,i,s,o,d){const l=await this._extractBinaryPointData(i,d);if(null==l)return Promise.reject();const u=this._getObjectIdField(),h=this._controller.crsVertex,g=this.view.spatialReference,f=this.processor.graphicsCore,{positionData:y,featureIds:_}=l,b=3,v=y.length/b,x=new Array;for(let I=0;I<v;I++){const r=a(e.serviceObb)?e.serviceObb.center:[0,0,0],i=I*b,d=p(y[i+0],y[i+1],y[i+2]);c(d,d,r),e.serviceObb||o.push(d[0],d[1],d[2]),a(s)&&this._checkExtent(s,d);const l=_[I],v={};null!=l&&(v[u]=l);const S=null==l?t.generateUID():l;m(d,h,0,oe,g,0,1);const w=E(oe[0],oe[1],oe[2],g),D=this.loadedGraphics.get(S);if(a(D))D.level<e.level&&(ae.property=\"geometry\",ae.graphic=D,ae.oldValue=n(D.geometry),ae.newValue=w,D.geometry=w,f.graphicUpdateHandler(ae)),x.push(D);else{const r=t.generateUID();x.push({objectId:S,uid:r,geometry:w,attributes:v,visible:!0,level:e.level})}}r.graphics=x,r.featureIds=Array.from(_)}_addNodeLegacyPointData(e,r,i,s,o){const n=this._getObjectIdField(),d=this._controller.crsVertex,l=this.view.spatialReference,u=[0,0,0],h=new Array,c=new Array;for(const p of i.pointData){const r=p.featureDataPosition,i=r.length,g=p.geometries&&p.geometries[0]||se[i],f=p.featureIds[0];if(\"points\"!==g.params.type)continue;a(s)&&this._checkExtent(s,r);const y={};null!=f&&(y[n]=f);const _=null==f?t.generateUID():f;let b;\"Embedded\"===g.type&&(b=g.params.vertexAttributes.position);for(let s=0;s<b.length;s+=i){for(let e=0;e<i;e++)u[e]=r[e]+b[s+e];const n=3===i;e.serviceObb||o.push(u[0],u[1],n?u[2]:0),m(u,d,0,oe,l,0,1);const h=E(oe[0],oe[1],n?oe[2]:void 0,l),p=this.loadedGraphics.get(_);a(p)?c.push(p):c.push({objectId:_,uid:t.generateUID(),geometry:h,attributes:y,visible:!0})}h.push(f)}r.graphics=c,r.featureIds=h}_updateNodeMemory(e){e.memory=4096+(a(e.numFeatures)?e.numFeatures*this.processor.graphicsCore.usedMemoryPerGraphic:0)}_cacheNodeData(e){const t=e.graphics.reduce(((e,t)=>x(t)+e),512+8*e.featureIds.length+1024);this._memCache.put(this._getMemCacheKey(e.node),e,t)}_getMemCacheKey(e){return`${e.index}`}_removeAllNodeData(){this._nodesAddedToStage.forEach((e=>{if(e){const t=e.node;this._updateNodeMemory(t),this._cacheNodeData(e)}})),this._nodesAddedToStage.clear(),this._treeDebugger&&this._treeDebugger.update(),this.loadedGraphics.clear()}removeNode(e){const t=this._removeNodeStageData(e);t&&(this._updateNodeMemory(t.node),this._cacheNodeData(t))}_removeNodeStageData(e){const t=this._nodesAddedToStage.get(e);return t?(this.loadedGraphics.removeMany(t.graphics),this._nodesAddedToStage.delete(e),this._treeDebugger&&this._treeDebugger.update(),t):null}async loadCachedNodeData(e){return this._memCache.pop(this._getMemCacheKey(e))}async addCachedNodeData(e,t,r,i){if(!this._nodesAddedToStage.has(e.index))return this.loadedGraphics.addMany(t.graphics),this._nodesAddedToStage.set(e.index,t),this._updateNodeMemory(e),await this.updateAttributes(e.index,r,i),this._filterNode(t),this._treeDebugger&&this._treeDebugger.update(),Promise.resolve();Y.error(\"I3S node \"+e.id+\" already added\")}getLoadedNodeIds(){const e=[];return this._nodesAddedToStage.forEach((t=>e.push(t.node.id))),e.sort()}getVisibleNodes(){const e=new Array;return this._nodesAddedToStage.forEach((t=>e.push(t.node))),e}getLoadedNodeIndices(e){this._nodesAddedToStage.forEach(((t,r)=>e.push(r)))}getLoadedAttributes(e){const t=this._nodesAddedToStage.get(e);if(t&&a(t.attributeInfo))return t.attributeInfo.loadedAttributes}getAttributeData(e){const t=this._nodesAddedToStage.get(e);if(t&&a(t.attributeInfo))return t.attributeInfo.attributeData}_setAttributeData(e,t){const r=this._nodesAddedToStage.get(e);r&&!o(r.attributeInfo)&&(r.attributeInfo.attributeData=t,this._attributeValuesChanged(r))}async updateAttributes(e,t,r){const i=this._nodesAddedToStage.get(e);i&&(await this._attributeOverrides.apply(i.featureIds,t,r),i.attributeInfo=t,this._attributeValuesChanged(i))}_attributeValuesChanged(e){if(re(e),this._filterNode(e),this.processor.graphicsCore.labelsEnabled){const t=e.graphics.map((e=>e.uid));this.processor.graphicsCore.updateLabelingInfo(t)}}_updateClippingExtent(e){return this._controller&&this._controller.updateClippingArea(e),!1}_getObjectIdField(){return this.layer.objectIdField||\"OBJECTID\"}async _rendererChange(e,t){const{layer:{fieldsIndex:r}}=this,i=new Set;let s,o;e?(await e.collectRequiredFields(i,r),s=Array.from(i).sort()):s=[],i.clear(),t?(await t.collectRequiredFields(i,r),o=Array.from(i).sort()):o=[],s.length===o.length&&s.every(((e,t)=>s[t]===o[t]))||this._reloadAllNodes()}_rangeInfosChanged(e){null!=e&&e.length>0&&Y.warn(\"Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.\")}_filterChange(){this._nodesAddedToStage.forEach((e=>this._filterNode(e)))}_reloadAllNodes(){this._removeAllNodeData(),this._controller&&this._controller.restartNodeLoading()}_filterNode(e){const t=this.parsedDefinitionExpression,i=this.excludeObjectIdsSorted,s=this._getObjectIdField();for(const a of e.graphics){const e=a.visible,n=!t||this._evaluateClause(t,a),d=o(i)||r(i,a.attributes[s])<0;a.visible=n&&d,e!==a.visible&&(ae.graphic=a,ae.property=\"visible\",ae.oldValue=e,ae.newValue=a.visible,this.processor.graphicsCore.graphicUpdateHandler(ae))}}_invalidateElevation(e){const t=this._controller.crsIndex;y(e.extent,e.spatialReference,ne,t),this._controller.updateElevationChanged(ne,t)}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};return a(this.filter)?this.filter.createQuery(e):new D(e)}queryFeatures(e,t){return this._queryEngine.executeQuery(this._ensureQuery(e),null==t?void 0:t.signal)}queryObjectIds(e,t){return this._queryEngine.executeQueryForIds(this._ensureQuery(e),null==t?void 0:t.signal)}queryFeatureCount(e,t){return this._queryEngine.executeQueryForCount(this._ensureQuery(e),null==t?void 0:t.signal)}queryExtent(e,t){return this._queryEngine.executeQueryForExtent(this._ensureQuery(e),null==t?void 0:t.signal)}_ensureQuery(e){return this._addDefinitionExpressionToQuery(o(e)?this.createQuery():D.from(e))}getUsedMemory(){var e,t,r;return null!=(e=null==(t=this.processor)||null==(r=t.graphicsCore)?void 0:r.usedMemory)?e:0}getUnloadedMemory(){var e,t,r,i,s;return.8*((null!=(e=null==(t=this._controller)?void 0:t.unloadedMemoryEstimate)?e:0)+(null!=(r=null==(i=this.processor)||null==(s=i.graphicsCore)?void 0:s.unprocessedMemoryEstimate)?r:0))}ignoresMemoryFactor(){return this._controller&&this._controller.fixedFeatureTarget}_handleEdits(e){T(this.attributeEditingContext,e)}get attributeEditingContext(){const e=this._getObjectIdField();return{sessions:this._interactiveEditingSessions,fieldsIndex:this.layer.fieldsIndex,objectIdField:e,forEachNode:e=>this._nodesAddedToStage.forEach((t=>e(t.node,t.featureIds))),attributeStorageInfo:this.i3slayer.attributeStorageInfo,attributeOverrides:this._attributeOverrides,getAttributeData:e=>this.getAttributeData(e),setAttributeData:(t,r,i)=>{this._setAttributeData(t,r);const s=this._nodesAddedToStage.get(t);if(a(i)){const t=this.loadedGraphics.get(i.attributes[e]);a(t)&&this.processor.graphicsCore.recreateGraphics([t])}else a(s)&&this.processor.graphicsCore.recreateGraphics(s.graphics)},clearMemCache:()=>{}}}get performanceInfo(){const e={displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:this.maximumNumberOfFeatures,totalNumberOfFeatures:-1,nodes:this._nodesAddedToStage.size,core:this.processor.graphicsCore.performanceInfo};return this._controller&&this._controller.updateStats(e),e}get test(){return{controller:this._controller,numNodes:this._nodesAddedToStage.size,numFeatures:this.loadedGraphics.length}}};e([u()],$.prototype,\"processor\",void 0),e([u({type:w})],$.prototype,\"filter\",void 0),e([u()],$.prototype,\"loadedGraphics\",void 0),e([u({aliasOf:\"layer\"})],$.prototype,\"i3slayer\",void 0),e([u()],$.prototype,\"_controller\",void 0),e([u()],$.prototype,\"updating\",void 0),e([u()],$.prototype,\"suspended\",void 0),e([u()],$.prototype,\"holeFilling\",void 0),e([u(z)],$.prototype,\"updatingProgress\",void 0),e([u({aliasOf:\"_controller.updatingProgress\"})],$.prototype,\"updatingProgressValue\",void 0),e([u(J.requiredFields)],$.prototype,\"requiredFields\",null),e([u(J.availableFields)],$.prototype,\"availableFields\",void 0),e([u()],$.prototype,\"fieldsHelper\",void 0),e([u({type:Number})],$.prototype,\"maximumNumberOfFeatures\",null),e([u({readOnly:!0})],$.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([u()],$.prototype,\"excludeObjectIdsSorted\",null),e([u({readOnly:!0,aliasOf:\"view.qualitySettings.sceneService.point.lodFactor\"})],$.prototype,\"lodFactor\",void 0),e([u({readOnly:!0})],$.prototype,\"hasM\",null),e([u({readOnly:!0})],$.prototype,\"hasZ\",null),$=e([h(\"esri.views.3d.layers.SceneLayerGraphicsView3D\")],$);const X=$;function ee(e){return\"pointData\"in e}function te(e){return\"geometryBuffer\"in e&&null!==e.geometryBuffer}function re(e){const t=e.attributeInfo;for(let r=0;r<e.graphics.length;r++){const i=e.graphics[r];if(i.attributes||(i.attributes={}),a(t)&&a(t.loadedAttributes))for(const{name:e}of t.loadedAttributes)t.attributeData[e]&&(i.attributes[e]=R(t.attributeData[e],r))}}function ie(e,t){return e.xmin-=t,e.ymin-=t,e.xmax+=t,e.ymax+=t,e.hasZ&&(e.zmin-=t,e.zmax+=t),e.hasM&&(e.mmin-=t,e.mmax+=t),e}const se={2:{type:\"Embedded\",params:{type:\"points\",vertexAttributes:{position:[0,0]}}},3:{type:\"Embedded\",params:{type:\"points\",vertexAttributes:{position:[0,0,0]}}}},oe=g(),ae={graphic:null,property:null,oldValue:null,newValue:null},ne=_();export{X as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../../../../core/lang.js\";import{isSome as e,isNone as n}from\"../../../../core/maybe.js\";import{attributeLookup as r}from\"../support/attributeUtils.js\";const o={setAttribute(){},rollback(){},commit(){}};var s;function i(e,r){const i=r.attributes[e.objectIdField],a=e.sessions.get(i);if(a)return a;const u=t(r.attributes),c=new Set;if(null==i)return o;const f=e.attributeOverrides.createInteractiveEditSession(i),l=new Map,d=(t,e)=>{const n=l.get(t);if(null==n){const n=e.indexOf(i);return l.set(t,n),n}return n};let I=s.EDITING;const b={setAttribute(t,o){if(I!==s.EDITING)return;const i=e.fieldsIndex.get(t);if(n(i))return;const a=e.attributeStorageInfo.findIndex((t=>t.name===i.name));if(a<0)return;f.set(a,o);const u=e.attributeStorageInfo[a];let l=!1;c.add(t),e.forEachNode(((t,n)=>{const s=d(t,n);if(-1===s)return;const i=e.getAttributeData(t.index);if(i){const n=i[u.name];n&&(n[s]=o,e.setAttributeData(t.index,i,r),l=!0)}})),l&&e.clearMemCache()},rollback(){if(I===s.EDITING){for(const t of c)this.setAttribute(t,u[t]);f.rollback(),I=s.ROLLED_BACK,e.sessions.delete(i)}},commit(){I===s.EDITING&&(f.commit(),I=s.COMMITTED,e.sessions.delete(i))}};return e.sessions.set(i,b),b}function a(t,n){const r=u(t,n);if(0===r.size)return;const o=new Map;for(let e=0;e<t.attributeStorageInfo.length;e++)o.set(t.attributeStorageInfo[e].name,e);let s=!1;r.forEach(((n,r)=>{const i=t.getAttributeData(r);let a=!1;n.forEach(((n,r)=>{const u=e(i)?i[r]:null,c=o.get(r);for(const{featureIndex:e,value:o,featureId:i}of n)u&&(u[e]=o,a=!0,s=!0),t.attributeOverrides.updateValue(i,c,o)})),a&&t.setAttributeData(r,i,null)})),s&&t.clearMemCache()}function u(t,e){const n=e.edits.updateFeatures;if(!n||0===n.length)return new I;const o=l(e),s=new I,i=new Map;for(let r=0;r<t.attributeStorageInfo.length;r++)i.set(t.attributeStorageInfo[r].name,r);const a=t.fieldsIndex,u=t.objectIdField,f=n.filter((t=>{const e=r(a,t.attributes,u);return o.has(e)}));return t.forEachNode(((e,n)=>{const o=new Set(n);for(const i of f){const f=r(a,i.attributes,u);if(!o.has(f))continue;const l=n.indexOf(f);for(const n in i.attributes){const r=t.fieldsIndex.normalizeFieldName(n),o=c(s,e.index,r),a=i.attributes[n];o.push({featureIndex:l,featureId:f,value:a})}}})),s}function c(t,e,n){const r=f(t,e),o=r.get(n);if(o)return o;const s=new Array;return r.set(n,s),s}function f(t,e){const n=t.get(e);if(n)return n;const r=new d;return t.set(e,r),r}function l(t){const e=new Set;if(!t.updatedFeatures)return e;for(const n of t.updatedFeatures)null!=n.objectId&&null==n.error&&e.add(n.objectId);return e}!function(t){t[t.EDITING=0]=\"EDITING\",t[t.ROLLED_BACK=1]=\"ROLLED_BACK\",t[t.COMMITTED=2]=\"COMMITTED\"}(s||(s={}));const d=Map,I=Map;export{i as createInteractiveEditSession,a as processAttributeEdits};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Logger.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WhereClause as o}from\"../../../../core/sql/WhereClause.js\";import{findFieldsCaseInsensitive as n}from\"../i3s/I3SUtil.js\";const t=e.getLogger(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\"),p=e=>{let p=class extends e{constructor(){super(...arguments),this._definitionExpressionErrors=0,this._maxDefinitionExpressionErrors=20,this.logError=r=>{this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&t.error(\"Error while evaluating definitionExpression: \"+r),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&t.error(\"Further errors are ignored\")}}get parsedDefinitionExpression(){if(!this.i3slayer||!this.i3slayer.definitionExpression)return null;try{const r=o.create(this.i3slayer.definitionExpression,this.i3slayer.fieldsIndex);if(!r.isStandardized)return t.error(\"definitionExpression is using non standard function\"),null;const e=[],i=r.fieldNames;return n(i,this.i3slayer.fields,{missingFields:e}),e.length>0?(t.error(`definitionExpression references unknown fields: ${e.join(\", \")}`),null):(this._definitionExpressionErrors=0,r)}catch(r){return t.error(\"Failed to parse definitionExpression: \"+r),null}}get definitionExpressionFields(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:null}_evaluateClause(r,e){try{return r.testFeature(e)}catch(i){return this.logError(i),!1}}_addDefinitionExpressionToQuery(r){if(!this.parsedDefinitionExpression)return r;const e=this.i3slayer.definitionExpression,i=r.clone();return i.where?i.where=`(${e}) AND (${i.where})`:i.where=e,i}};return r([i()],p.prototype,\"i3slayer\",void 0),r([i({readOnly:!0})],p.prototype,\"parsedDefinitionExpression\",null),r([i({readOnly:!0})],p.prototype,\"definitionExpressionFields\",null),p=r([s(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\")],p),p};export{p as DefinitionExpressionSceneLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Error.js\";import{isSome as s}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/set.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{unpackFieldNames as o,populateMissingFields as p}from\"../../../../layers/support/fieldUtils.js\";import{getFetchPopupTemplate as a,getRequiredFields as i}from\"../../../layers/support/popupUtils.js\";const c=c=>{let u=class extends c{_validateFetchPopupFeatures(e){const{layer:s}=this,{popupEnabled:t}=s;if(!t)return new r(\"scenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{layer:s});return a(s,e)?void 0:new r(\"scenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:s})}async prepareFetchPopupFeatures(e){}async fetchPopupFeatures(e,r){const t=this._validateFetchPopupFeatures(r);if(t)return Promise.reject(t);const c=s(r)?r.clientGraphics:null;if(!c||0===c.length)return Promise.resolve([]);const u=\"scene\"===this.layer.type&&s(this.layer.associatedLayer)?this.layer.associatedLayer:this.layer,n=o(this.layer.fieldsIndex,await i(u,a(this.layer,r)));await this.prepareFetchPopupFeatures(n);const l=new Set,h=[],y=[];for(const s of c)p(n,s,l)?y.push(s):h.push(s);return 0===y.length?Promise.resolve(h):this.whenGraphicAttributes(y,[...l]).catch((()=>y)).then((e=>h.concat(e)))}};return u=e([t(\"esri.views.3d.layers.support.PopupSceneLayerView\")],u),u};export{c as PopupSceneLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import e from\"./Accessor.js\";import s from\"./Logger.js\";import{runTracked as a}from\"./accessorSupport/tracking.js\";import{property as n}from\"./accessorSupport/decorators/property.js\";import{subclass as r}from\"./accessorSupport/decorators/subclass.js\";import{SimpleTrackingTarget as o}from\"./accessorSupport/tracking/SimpleTrackingTarget.js\";const c=e=>{let a=class extends e{constructor(){super(...arguments),this._numUpdating=0,this.asyncUpdateState=new Map}get updating(){return this._numUpdating>0}autoUpdateAsync(t,e){return p((e=>this._updateAsync(t,e)),e)}async _updateAsync(t,e){if(!this._startAsyncUpdate(t)){try{const s=await e();this._set(t,s)}catch(a){s.getLogger(this.declaredClass).warn(`Async update of \"${t}\" failed. Async update functions should not throw exceptions.`)}this._endAsyncUpdate(t)&&this._updateAsync(t,e)}}_startAsyncUpdate(t){var e;const s=null!=(e=this.asyncUpdateState.get(t))?e:i.None;return s&i.Updating?(this.asyncUpdateState.set(t,s|i.Invalidated),!0):(++this._numUpdating,this.asyncUpdateState.set(t,s|i.Updating),!1)}_endAsyncUpdate(t){var e;--this._numUpdating;const s=(null!=(e=this.asyncUpdateState.get(t))?e:i.None)&~i.Updating;return s&i.Invalidated?(this.asyncUpdateState.set(t,s&~i.Invalidated),!0):(this.asyncUpdateState.set(t,s),!1)}};return t([n({readOnly:!0})],a.prototype,\"updating\",null),t([n()],a.prototype,\"_numUpdating\",void 0),a=t([r(\"esri.core.AsyncUpdate\")],a),a};var i;function p(t,e){const s=()=>{c&&!i&&t(n)},n=()=>{if(!c||i)return e();c.clear(),i=!0;const t=a(c,e);return i=!1,t},r=()=>{c&&(c.destroy(),c=null)};let c=new o(s),i=!1;return t(n),{remove:r}}!function(t){t[t.None=0]=\"None\",t[t.Updating=1]=\"Updating\",t[t.Invalidated=2]=\"Invalidated\"}(i||(i={}));let d=class extends(c(e)){};d=t([r(\"esri.core.AsyncUpdate\")],d);export{d as AsyncUpdate,c as AsyncUpdateMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{AsyncUpdateMixin as r}from\"../../../../core/AsyncUpdate.js\";import{HandleOwner as s}from\"../../../../core/HandleOwner.js\";import t from\"../../../../core/Logger.js\";import{unwrapOr as i}from\"../../../../core/maybe.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{fixFields as a,collectLabelingFields as d,collectFilterFields as n}from\"../../../../layers/support/fieldUtils.js\";const p=t.getLogger(\"esri.views.3d.layers.support.SceneLayerViewRequiredFields\");let c=class extends(r(s)){constructor(e){super(e)}get requiredFields(){const{layerView:{layer:{fieldsIndex:e},definitionExpressionFields:r},rendererFields:s,labelingFields:t,viewFilterFields:o}=this;return a(e,[...i(r,[]),...i(s,[]),...i(t,[]),...i(o,[])])}initialize(){const e=this.layerView.layer;this.layer=e,this.handles.add([this.autoUpdateAsync(\"rendererFields\",(()=>{const{fieldsIndex:e,renderer:r}=this.layer;return r?y((s=>r.collectRequiredFields(s,e))):null})),this.autoUpdateAsync(\"labelingFields\",(()=>{const{layer:e}=this;return e.labelsVisible?y((r=>d(r,e))):null})),this.autoUpdateAsync(\"viewFilterFields\",(()=>{const{layer:e,filter:r}=this.layerView;return y((s=>n(s,e,r)))}))])}};async function y(e){const r=new Set;try{return await e(r),Array.from(r).sort()}catch(s){return p.error(s),null}}e([o()],c.prototype,\"layerView\",void 0),e([o()],c.prototype,\"layer\",void 0),e([o()],c.prototype,\"requiredFields\",null),e([o()],c.prototype,\"rendererFields\",void 0),e([o()],c.prototype,\"labelingFields\",void 0),e([o()],c.prototype,\"viewFilterFields\",void 0),c=e([l(\"esri.views.3d.layers.support.SceneLayerViewRequiredFields\")],c);export{c as SceneLayerViewRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{fixFields as e,unpackFieldNames as r}from\"../../../../layers/support/fieldUtils.js\";function i(){return{requiredFields:{type:[String],readOnly:!0},availableFields:{type:[String],readOnly:!0,get:function(){const{layer:i,layer:{fieldsIndex:t},requiredFields:l}=this;return i.outFields?e(t,[...r(t,i.outFields),...l]):e(t,l)}}}}export{i as defineFieldProperties};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/accessorSupport/interfaces.js\";import\"../../core/accessorSupport/tracking.js\";import\"../../core/accessorSupport/extensions/serializableProperty/reader.js\";import\"../../core/accessorSupport/extensions/serializableProperty/writer.js\";import t from\"./LayerView.js\";class o extends t{constructor(){super(...arguments),this.layer=null,this.filter=null}get availableFields(){return[]}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){throw new Error(\"Not implemented\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"Not implemented\")}queryFeatures(e,r){throw new Error(\"Not implemented\")}queryObjectIds(e,r){throw new Error(\"Not implemented\")}queryFeatureCount(e,r){throw new Error(\"Not implemented\")}createQuery(){throw new Error(\"Not implemented\")}queryExtent(e,r){throw new Error(\"Not implemented\")}}e([r()],o.prototype,\"layer\",void 0),e([r()],o.prototype,\"availableFields\",null),e([r()],o.prototype,\"maximumNumberOfFeatures\",null),e([r({readOnly:!0})],o.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([r()],o.prototype,\"filter\",void 0);export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n"],"names":["e","r","constructor","super","hasInitialize","getTransferList","geometryBuffer","Y","i","J","H","$","L","U","j","K","arguments","this","type","_nodesAddedToStage","Map","drapeSourceType","F","_queryEngine","_memCache","_interactiveEditingSessions","loadedGraphics","k","holeFilling","progressiveLoadFactor","supportsHeightUnitConversion","_coordinatesOutsideExtentErrors","_maxCoordinatesOutsideExtentErrors","initialize","t","layer","addResolvingPromise","indexInfo","_attributeOverrides","V","view","resourceController","memoryController","G","spatialReference","viewingMode","fieldsHelper","q","layerView","updatingHandles","add","rangeInfos","_rangeInfosChanged","d","renderer","_rendererChange","parsedDefinitionExpression","excludeObjectIdsSorted","_filterChange","floors","processor","filterVisibility","filterChanged","handles","l","Q","_treeDebugger","_controller","crsIndex","then","I3STreeDebugger","lv","nodeSR","destroy","_set","A","owner","preferredUpdatePolicy","W","scaleVisibilityEnabled","filterVisibilityEnabled","timeExtentVisibilityEnabled","frustumVisibilityEnabled","elevationAlignmentEnabled","elevationFeatureExpressionEnabled","dataExtent","fullExtent","updateClippingExtent","_updateClippingExtent","elevationAlignment","events","on","_invalidateElevation","_verticalScale","v","setup","newCache","uid","S","M","geometryDefinitions","_worker","O","schedule","addPromise","result","_handleEdits","when","C","priority","Z","maximumNumberOfFeatures","featureTarget","suspended","_removeAllNodeData","s","clear","requiredFields","graphicsCore","displayFeatureLimit","_override","fixedFeatureTarget","_clearOverride","maximumNumberOfFeaturesExceeded","useMaximumNumberOfFeatures","leavesReached","excludeObjectIds","length","toArray","sort","hasM","hasZ","async","P","_getObjectIdField","values","getGraphicFromGraphicUid","I","find","attributes","sourceLayer","whenGraphicBounds","computeAttachmentOrigin","canResume","rootNodeVisible","isUpdating","updating","highlight","objectIdField","updatePolicy","effectiveUpdatePolicy","createInteractiveEditSession","N","attributeEditingContext","o","invoke","a","positionData","positions","featureIds","Error","_checkExtent","b","error","te","ee","Promise","reject","has","index","id","xmin","ymin","xmax","ymax","zmin","zmax","mmin","mmax","ie","clone","crsVertex","n","graphics","attributeInfo","attributeDataInfo","node","_addNodeBinaryPointData","_addNodeLegacyPointData","apply","numFeatures","_updateNodeMemory","re","_computeObb","updateVisibility","isGeometryVisible","_cacheNodeData","resolve","geometry","set","addMany","_filterNode","update","isGeographic","renderSpatialReference","m","data","size","serviceObb","B","f","center","isNodeLoaded","isNodeReloading","updateNodeState","_extractBinaryPointData","u","h","g","y","_","x","Array","p","c","push","oe","w","E","D","get","level","ae","property","graphic","oldValue","newValue","graphicUpdateHandler","objectId","visible","from","pointData","featureDataPosition","geometries","se","params","vertexAttributes","position","memory","usedMemoryPerGraphic","reduce","put","_getMemCacheKey","forEach","removeNode","_removeNodeStageData","removeMany","delete","pop","updateAttributes","getLoadedNodeIds","getVisibleNodes","getLoadedNodeIndices","getLoadedAttributes","loadedAttributes","getAttributeData","attributeData","_setAttributeData","_attributeValuesChanged","labelsEnabled","map","updateLabelingInfo","updateClippingArea","fieldsIndex","Set","collectRequiredFields","every","_reloadAllNodes","warn","restartNodeLoading","_evaluateClause","extent","ne","updateElevationChanged","createQuery","outFields","returnGeometry","outSpatialReference","filter","queryFeatures","executeQuery","_ensureQuery","signal","queryObjectIds","executeQueryForIds","queryFeatureCount","executeQueryForCount","queryExtent","executeQueryForExtent","_addDefinitionExpressionToQuery","getUsedMemory","usedMemory","getUnloadedMemory","unloadedMemoryEstimate","unprocessedMemoryEstimate","ignoresMemoryFactor","T","sessions","forEachNode","attributeStorageInfo","i3slayer","attributeOverrides","setAttributeData","recreateGraphics","clearMemCache","performanceInfo","displayedNumberOfFeatures","totalNumberOfFeatures","nodes","core","updateStats","test","controller","numNodes","prototype","aliasOf","z","availableFields","Number","readOnly","X","name","R","setAttribute","rollback","commit","indexOf","EDITING","findIndex","ROLLED_BACK","COMMITTED","edits","updateFeatures","updatedFeatures","normalizeFieldName","featureIndex","featureId","value","updateValue","_definitionExpressionErrors","_maxDefinitionExpressionErrors","logError","definitionExpression","isStandardized","fieldNames","fields","missingFields","join","definitionExpressionFields","testFeature","where","_validateFetchPopupFeatures","popupEnabled","clientGraphics","associatedLayer","prepareFetchPopupFeatures","whenGraphicAttributes","catch","concat","_numUpdating","asyncUpdateState","autoUpdateAsync","remove","_updateAsync","_startAsyncUpdate","declaredClass","_endAsyncUpdate","None","Updating","Invalidated","rendererFields","labelingFields","viewFilterFields","labelsVisible","String","popupTemplate","getRequiredFields","lastEditInfoEnabled","typeIdField","globalIdField","relationships","includes","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate"],"sourceRoot":""}