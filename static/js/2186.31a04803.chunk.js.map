{"version":3,"file":"static/js/2186.31a04803.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/MapNotesLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import i from\"../../../Graphic.js\";import s from\"../../../core/Collection.js\";import{isSome as t,isNone as r}from\"../../../core/maybe.js\";import{init as h,on as a}from\"../../../core/watchUtils.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView2DMixin as c}from\"./LayerView2D.js\";import p from\"./graphics/GraphicContainer.js\";import n from\"./graphics/GraphicsView2D.js\";import l from\"../../layers/LayerView.js\";const g=\"sublayers\",d=\"layerView\",u=Object.freeze({remove(){},pause(){},resume(){}});let f=class extends(c(l)){constructor(){super(...arguments),this._highlightIds=new Map}async fetchPopupFeatures(e){return Array.from(this.graphicsViews(),(i=>i.hitTest(e).filter((e=>!!e.popupTemplate)))).flat()}*graphicsViews(){t(this._graphicsViewsFeatureCollectionMap)?yield*this._graphicsViewsFeatureCollectionMap.keys():t(this._graphicsViews)?yield*this._graphicsViews:yield*[]}async hitTest(e,i){const s=Array.from(this.graphicsViews(),(async i=>{const s=await i.hitTest(e);if(t(this._graphicsViewsFeatureCollectionMap)){const e=this._graphicsViewsFeatureCollectionMap.get(i);for(const i of s)!i.popupTemplate&&e.popupTemplate&&(i.popupTemplate=e.popupTemplate)}return s}));return(await Promise.all(s)).flat()}highlight(e){let t;return\"number\"==typeof e?t=[e]:e instanceof i?t=[e.uid]:Array.isArray(e)&&e.length>0?t=\"number\"==typeof e[0]?e:e.map((e=>e&&e.uid)):s.isCollection(e)&&(t=e.map((e=>e&&e.uid)).toArray()),t=t.filter((e=>null!=e)),t.length?(this._addHighlight(t),{remove:()=>{this._removeHighlight(t)}}):u}update(e){for(const i of this.graphicsViews())i.processUpdate(e)}attach(){const e=this.view,i=()=>this.requestUpdate(),s=this.layer.featureCollections;if(t(s)&&s.length){this._graphicsViewsFeatureCollectionMap=new Map;for(const t of s){const s=new p(this.view.featuresTilingScheme);s.fadeTransitionEnabled=!0;const r=new n({view:e,graphics:t.source,renderer:t.renderer,requestUpdateCallback:i,container:s});this._graphicsViewsFeatureCollectionMap.set(r,t),this.container.addChild(r.container),this.handles.add([h(t,\"visible\",(e=>r.container.visible=e)),h(r,\"updating\",(()=>this.notifyChange(\"updating\")))],d)}this._updateHighlight()}else t(this.layer.sublayers)&&this.handles.add(a(this.layer,\"sublayers\",\"change\",(()=>this._createGraphicsViews()),(()=>this._createGraphicsViews()),(()=>this._destroyGraphicsViews())),g)}detach(){this._destroyGraphicsViews(),this.handles.remove(g)}moveStart(){}moveEnd(){}viewChange(){for(const e of this.graphicsViews())e.viewChange()}isUpdating(){for(const e of this.graphicsViews())if(e.updating)return!0;return!1}_destroyGraphicsViews(){this.container.removeAllChildren(),this.handles.remove(d);for(const e of this.graphicsViews())e.destroy();this._graphicsViews=null,this._graphicsViewsFeatureCollectionMap=null}_createGraphicsViews(){if(this._destroyGraphicsViews(),r(this.layer.sublayers))return;const e=[],i=this.view,s=()=>this.requestUpdate();for(const t of this.layer.sublayers){const r=new p(this.view.featuresTilingScheme);r.fadeTransitionEnabled=!0;const a=new n({view:i,graphics:t.graphics,requestUpdateCallback:s,container:r});this.handles.add([t.on(\"graphic-update\",a.graphicUpdateHandler),h(t,\"visible\",(e=>a.container.visible=e)),h(a,\"updating\",(()=>this.notifyChange(\"updating\")))],d),this.container.addChild(a.container),e.push(a)}this._graphicsViews=e,this._updateHighlight()}_addHighlight(e){for(const i of e)if(this._highlightIds.has(i)){const e=this._highlightIds.get(i);this._highlightIds.set(i,e+1)}else this._highlightIds.set(i,1);this._updateHighlight()}_removeHighlight(e){for(const i of e)if(this._highlightIds.has(i)){const e=this._highlightIds.get(i)-1;0===e?this._highlightIds.delete(i):this._highlightIds.set(i,e)}this._updateHighlight()}_updateHighlight(){const e=Array.from(this._highlightIds.keys());for(const i of this.graphicsViews())i.setHighlight(e)}};f=e([o(\"esri.views.2d.layers.MapNotesLayerView2D\")],f);const m=f;export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"../../engine/webgl/enums.js\";import r from\"./BaseGraphicContainer.js\";class i extends r{renderChildren(r){this.attributeView.bindTextures(r.context,!1),this.children.some((e=>e.hasData))&&(super.renderChildren(r),r.drawPhase===e.MAP&&this._renderChildren(r),this.hasHighlight()&&r.drawPhase===e.HIGHLIGHT&&this._renderHighlight(r),this._boundsRenderer&&this._boundsRenderer.doRender(r))}_renderHighlight(e){const{painter:r}=e,i=r.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}}export{i as default};\n"],"names":["g","d","u","Object","freeze","remove","pause","resume","f","c","l","constructor","super","arguments","this","_highlightIds","Map","async","e","Array","from","graphicsViews","i","hitTest","filter","popupTemplate","flat","t","_graphicsViewsFeatureCollectionMap","keys","_graphicsViews","s","get","Promise","all","highlight","uid","isArray","length","map","toArray","_addHighlight","_removeHighlight","update","processUpdate","attach","view","requestUpdate","layer","featureCollections","p","featuresTilingScheme","fadeTransitionEnabled","r","n","graphics","source","renderer","requestUpdateCallback","container","set","addChild","handles","add","h","visible","notifyChange","_updateHighlight","sublayers","a","_createGraphicsViews","_destroyGraphicsViews","detach","moveStart","moveEnd","viewChange","isUpdating","updating","removeAllChildren","destroy","on","graphicUpdateHandler","push","has","delete","setHighlight","o","m","renderChildren","attributeView","bindTextures","context","children","some","hasData","drawPhase","_renderChildren","hasHighlight","_renderHighlight","_boundsRenderer","doRender","painter","effects","bind","defines","draw","unbind"],"sourceRoot":""}