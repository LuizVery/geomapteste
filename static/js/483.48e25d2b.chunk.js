"use strict";(globalThis.webpackChunkgeowebmap=globalThis.webpackChunkgeowebmap||[]).push([[483],{85403:(e,t,r)=>{r.d(t,{Y:()=>i});var o=r(92026);function l(e,t){return e?t?4:3:t?3:2}function i(e,t,r,i,n){if((0,o.Wi)(t)||!t.lengths.length)return null;const h="upperLeft"===(null==n?void 0:n.originPosition)?-1:1;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);const u=e.coords,c=[],d=r?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:g,coords:_}=t,f=l(r,i);let y=0;for(const o of g){const e=a(d,_,y,o,r,i,h);e&&c.push(e),y+=o*f}if(c.sort(((e,t)=>{let o=h*e[2]-h*t[2];return 0===o&&r&&(o=e[4]-t[4]),o})),c.length){let e=6*c[0][2];u[0]=c[0][0]/e,u[1]=c[0][1]/e,r&&(e=6*c[0][4],u[2]=0!==e?c[0][3]/e:0),(u[0]<d[0]||u[0]>d[1]||u[1]<d[2]||u[1]>d[3]||r&&(u[2]<d[4]||u[2]>d[5]))&&(u.length=0)}if(!u.length){const e=t.lengths[0]?s(_,0,g[0],r,i):null;if(!e)return null;u[0]=e[0],u[1]=e[1],r&&e.length>2&&(u[2]=e[2])}return e}function a(e,t,r,o,i,a){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;const n=l(i,a);let h=r,u=r+n,c=0,d=0,g=0,_=0,f=0;for(let l=0,I=o-1;l<I;l++,h+=n,u+=n){const r=t[h],o=t[h+1],l=t[h+2],a=t[u],s=t[u+1],n=t[u+2];let y=r*s-a*o;_+=y,c+=(r+a)*y,d+=(o+s)*y,i&&(y=r*n-a*l,g+=(l+n)*y,f+=y),r<e[0]&&(e[0]=r),r>e[1]&&(e[1]=r),o<e[2]&&(e[2]=o),o>e[3]&&(e[3]=o),i&&(l<e[4]&&(e[4]=l),l>e[5]&&(e[5]=l))}if(_*s>0&&(_*=-1),f*s>0&&(f*=-1),!_)return null;const y=[c,d,.5*_];return i&&(y[3]=g,y[4]=.5*f),y}function s(e,t,r,o,i){const a=l(o,i);let s=t,d=t+a,g=0,_=0,f=0,y=0;for(let l=0,I=r-1;l<I;l++,s+=a,d+=a){const t=e[s],r=e[s+1],l=e[s+2],i=e[d],a=e[d+1],I=e[d+2],N=o?h(t,r,l,i,a,I):n(t,r,i,a);if(N)if(g+=N,o){const e=c(t,r,l,i,a,I);_+=N*e[0],f+=N*e[1],y+=N*e[2]}else{const e=u(t,r,i,a);_+=N*e[0],f+=N*e[1]}}return g>0?o?[_/g,f/g,y/g]:[_/g,f/g]:r>0?o?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}function n(e,t,r,o){const l=r-e,i=o-t;return Math.sqrt(l*l+i*i)}function h(e,t,r,o,l,i){const a=o-e,s=l-t,n=i-r;return Math.sqrt(a*a+s*s+n*n)}function u(e,t,r,o){return[e+.5*(r-e),t+.5*(o-t)]}function c(e,t,r,o,l,i){return[e+.5*(o-e),t+.5*(l-t),r+.5*(i-r)]}},10983:(e,t,r)=>{r.r(t),r.d(t,{default:()=>N});var o=r(27366),l=r(52639),i=r(92026),a=r(94172),s=r(49861),n=(r(63780),r(93169),r(25243),r(69912)),h=r(67077),u=r(65156),c=r(2244),d=r(26279),g=r(42069),_=r(58890),f=r(54134),y=r(67581);let I=class extends((0,c.N)((0,g.A)(y.Z))){constructor(){super(...arguments),this.type="integrated-mesh-3d",this.lodFactor=1,this._elevationContext="im",this._isIntegratedMesh=!0,this._supportsLabeling=!1,this.drapeTargetType=d.al.WithoutRasterImage,this._overlayTexOffset=(0,h.f)(-1,-1,-1,-1),this._overlayTexScale=(0,h.c)(),this._overlayColor=null,this._overlayHighlight=null,this._overlayNormal=null}get progressiveLoadFactor(){return this.lodFactor>=1?.2:1}setDrapingTextures(e){this._clearDrapingTexture(f.fu.INNER),this._clearDrapingTexture(f.fu.OUTER);for(const t of e){const e=t.index,r=t.extent,o=t.needsColorWithoutRasterImage?t.getValidTarget(f.NH.ColorNoRasterImage):t.hasDrapedFeatureSource?t.getValidTarget(f.NH.Color):null;if((0,i.pC)(o)&&(0,u.SO)(r)>0){this._overlayTexOffset[2*e]=-r[0]/(0,u.bf)(r),this._overlayTexOffset[2*e+1]=-r[1]/(0,u.Cb)(r),this._overlayTexScale[2*e]=1/(0,u.bf)(r),this._overlayTexScale[2*e+1]=1/(0,u.Cb)(r);const l=t.getValidTarget(f.NH.Highlight),i=t.getValidTarget(f.NH.Water);this._overlayColor=o.getTexture(),this._overlayHighlight=l?l.getTexture():null,this._overlayNormal=i?i.getTexture():null}}this._forAllNodes((e=>(0,i.pC)(e)&&this._collection.updateMaterial(e.objectHandle,(e=>this._updateMaterialOverlay(e)))))}_clearDrapingTexture(e){this._overlayTexOffset[2*e]=-1,this._overlayTexOffset[2*e+1]=-1,this._overlayTexScale[2*e]=0,this._overlayTexScale[2*e+1]=0,this._overlayColor=null,this._overlayHighlight=null,this._overlayNormal=null}_updateMaterialOverlay(e){e.overlayColor=this._overlayColor,e.overlayHighlight=this._overlayHighlight,e.overlayNormal=this._overlayNormal,e.overlayTexOffset=this._overlayTexOffset,e.overlayTexScale=this._overlayTexScale}initialize(){this.updatingHandles.add((()=>this.layer.modifications),(()=>this._loadModifications()),a.nn)}_createLayerGraphic(){const e=new l.Z;return e.layer=this.layer,e.sourceLayer=this.layer,e}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}_loadModifications(){if(this.handles.remove("modifications"),(0,i.Wi)(this.layer.modifications))return void(this._modifications=[]);const e=this.layer.modifications;this.handles.add(this.updatingHandles.addOnCollectionChange((()=>e),(()=>this._modifications=e.toArray()),a.nn),"modifications")}};(0,o._)([(0,s.Cb)()],I.prototype,"layer",void 0),(0,o._)([(0,s.Cb)({aliasOf:"layer"})],I.prototype,"i3slayer",void 0),(0,o._)([(0,s.Cb)(_.q)],I.prototype,"updatingProgress",void 0),(0,o._)([(0,s.Cb)({readOnly:!0,aliasOf:"_controller.updatingProgress"})],I.prototype,"updatingProgressValue",void 0),(0,o._)([(0,s.Cb)({readOnly:!0,aliasOf:"view.qualitySettings.sceneService.integratedMesh.lodFactor"})],I.prototype,"lodFactor",void 0),(0,o._)([(0,s.Cb)({readOnly:!0})],I.prototype,"progressiveLoadFactor",null),I=(0,o._)([(0,n.j)("esri.views.3d.layers.SceneLayerView3D")],I);const N=I}}]);
//# sourceMappingURL=483.48e25d2b.chunk.js.map