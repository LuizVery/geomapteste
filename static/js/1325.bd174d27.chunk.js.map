{"version":3,"file":"static/js/1325.bd174d27.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/AnalysisLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Collection.js\";import\"../../../core/has.js\";import i from\"../../../core/Error.js\";import{isSome as a,isNone as t}from\"../../../core/maybe.js\";import{createTask as r,isAborted as n}from\"../../../core/promiseUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView3D as y}from\"./LayerView3D.js\";import c from\"../../layers/LayerView.js\";const m=\"analysis-view-handles\";let w=class extends(y(c)){constructor(s){super(s),this.type=\"analysis-3d\",this.allAnalysisViews=new e,this._creatingViewCount=0,this._analysisViewCreationTasks=new Map,this._analysisModules={\"area-measurement\":{module:null},\"direct-line-measurement\":{module:null},\"line-of-sight\":{module:null},slice:{module:null}}}initialize(){for(const s of this.layer.analyses)this._createAnalysisView(s);this.handles.add([this.layer.analyses.on(\"after-add\",(s=>{this._createAnalysisView(s.item)})),this.layer.analyses.on(\"after-remove\",(s=>{const e=this.allAnalysisViews.removeAt(this.allAnalysisViews.findIndex((e=>e.analysis===s.item)));a(e)&&e.destroy();const i=this._analysisViewCreationTasks.get(s.item);a(i)&&(i.abort(),this._analysisViewCreationTasks.delete(s.item))}))],m)}destroy(){this.handles.remove(m),this.allAnalysisViews.drain((s=>s.destroy())),this._analysisViewCreationTasks.clear(),this._creatingViewCount=0}whenAnalysisView(s){const e=this._analysisViewCreationTasks.get(s);if(a(e))return e.promise;const t=new i(\"layerview:no-analysisview-for-analysis\",\"The analysis has not been added to the AnalysisLayer of this layer view\",{analysis:s});return Promise.reject(t)}isUpdating(){return 0!==this._creatingViewCount||this.allAnalysisViews.some((s=>s.updating))}_createAnalysisView(s){this._analysisViewCreationTasks.set(s,r((e=>this._createAnalysisViewPromise(s,e))))}async _createAnalysisViewPromise(s,e){this._creatingViewCount+=1;const a=s.type,r=this._analysisModules[a];if(t(r.module)){const s=await this._loadAnalysisModule(a);r.module=s}const o=new r.module.default({analysis:s,view:this.view,parent:this});if(await o.when(),this._creatingViewCount-=1,n(e))throw o.destroy(),new i(\"layerview:no-analysisview-for-analysis\",\"The analysis has not been added to the AnalysisLayer of this layer view\",{analysis:s});return this.allAnalysisViews.add(o),o}_loadAnalysisModule(s){switch(s){case\"area-measurement\":return import(\"../analysis/AreaMeasurementAnalysisView3D.js\");case\"direct-line-measurement\":return import(\"../analysis/DirectLineMeasurementAnalysisView3D.js\");case\"line-of-sight\":return import(\"../analysis/LineOfSightAnalysisView3D.js\");case\"slice\":return import(\"../analysis/SliceAnalysisView3D.js\");default:return null}}};s([o()],w.prototype,\"type\",void 0),s([o()],w.prototype,\"layer\",void 0),s([o()],w.prototype,\"allAnalysisViews\",void 0),s([o()],w.prototype,\"_creatingViewCount\",void 0),w=s([l(\"esri.views.3d.layers.AnalysisLayerView3D\")],w);const d=w;export{d as default};\n"],"names":["m","w","y","c","constructor","s","super","this","type","allAnalysisViews","e","_creatingViewCount","_analysisViewCreationTasks","Map","_analysisModules","module","slice","initialize","layer","analyses","_createAnalysisView","handles","add","on","item","removeAt","findIndex","analysis","a","destroy","i","get","abort","delete","remove","drain","clear","whenAnalysisView","promise","t","Promise","reject","isUpdating","some","updating","set","r","_createAnalysisViewPromise","async","_loadAnalysisModule","o","default","view","parent","when","n","prototype","l","d"],"sourceRoot":""}