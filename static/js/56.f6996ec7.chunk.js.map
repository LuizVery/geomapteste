{"version":3,"file":"static/js/56.f6996ec7.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/2d/layers/TileLayerView2D.js","../node_modules/@arcgis/core/views/layers/TileLayerView.js","../node_modules/@arcgis/core/views/support/drapedUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Logger.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{watch as s}from\"../../../core/reactiveUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{equals as a}from\"../../../geometry/support/spatialReferenceUtils.js\";import{BitmapTileLayerView2D as o}from\"./BitmapTileLayerView2D.js\";import{LayerView2DMixin as h}from\"./LayerView2D.js\";import{createBlankImage as n,resampleImage as c}from\"./support/imageUtils.js\";import u from\"../tiling/TileInfoView.js\";import p from\"../tiling/TileKey.js\";import f from\"../tiling/TileQueue.js\";import m from\"../tiling/TileStrategy.js\";import y from\"../../layers/LayerView.js\";import{RefreshableLayerView as d}from\"../../layers/RefreshableLayerView.js\";import{TileLayerView as g}from\"../../layers/TileLayerView.js\";import{createQueryGeometry as w}from\"../../support/drapedUtils.js\";const _=[0,0];let I=class extends(g(d(o(h(y))))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this.layer=null}get resampling(){return!(\"resampling\"in this.layer)||!1!==this.layer.resampling}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume()}attach(){const e=\"tileServers\"in this.layer?this.layer.tileServers:null;this._tileInfoView=new u(this.layer.tileInfo,this.layer.fullExtent),this._fetchQueue=new f({tileInfoView:this._tileInfoView,concurrency:e&&10*e.length||10,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new m({cachePolicy:\"keep\",resampling:this.resampling,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.requestUpdate(),this.handles.add(s((()=>this.resampling),(()=>{this.doRefresh()}))),super.attach()}detach(){super.detach(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}supportsSpatialReference(e){var t;return a(null==(t=this.layer.tileInfo)?void 0:t.spatialReference,e)}createFetchPopupFeaturesQueryGeometry(e,t){return w(e,t,this.view)}async doRefresh(){this.updateRequested||this.suspended||(this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>this._enqueueTileFetch(e))))}isUpdating(){var e,t;return null!=(e=null==(t=this._fetchQueue)?void 0:t.updating)&&e}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(_,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this._bitmapView.addChild(t),this.requestUpdate(),t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>e.destroy())),this.requestUpdate()}async fetchTile(e,t={}){const s=\"tilemapCache\"in this.layer?this.layer.tilemapCache:null,{signal:r,resamplingLevel:l=0}=t;if(!s)try{return await this._fetchImage(e,r)}catch(h){if(!i(h)&&!this.resampling)return n(this._tileInfoView.tileInfo.size);if(l<3){const i=this._tileInfoView.getTileParentId(e.id);if(i){const s=new p(i),r=await this.fetchTile(s,{...t,resamplingLevel:l+1});return c(this._tileInfoView,r,s,e)}}throw h}const a=new p(0,0,0,0);let o;try{if(await s.fetchAvailabilityUpsample(e.level,e.row,e.col,a,{signal:r}),a.level!==e.level&&!this.resampling)return n(this._tileInfoView.tileInfo.size);o=await this._fetchImage(a,r)}catch(h){if(i(h))throw h;o=await this._fetchImage(e,r)}return this.resampling?c(this._tileInfoView,o,a,e):o}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once(\"attach\",(()=>this.requestUpdate()))}catch(s){i(s)||t.getLogger(this.declaredClass).error(s)}this.requestUpdate()}}async _fetchImage(e,t){return this.layer.fetchTile(e.level,e.row,e.col,{signal:t})}};e([r()],I.prototype,\"_fetchQueue\",void 0),e([r()],I.prototype,\"resampling\",null),I=e([l(\"esri.views.2d.layers.TileLayerView2D\")],I);const V=I;export{V as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{calculateTolerance as p}from\"../../renderers/support/clickToleranceUtils.js\";const i=i=>{let c=class extends i{async fetchPopupFeatures(e,s){const{layer:a}=this;if(!e)return Promise.reject(new r(\"tilelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:a}));if(\"tile\"!==a.type)return Promise.reject(new r(\"tilelayerview:fetchPopupFeatures\",\"Layer type should be 'tile'\",{type:a.type}));const i=this.get(\"view.scale\"),c=a.allSublayers.toArray().filter((e=>{const r=0===e.minScale||i<=e.minScale,t=0===e.maxScale||i>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&r&&t}));return o(c.map((async r=>{const o=r.createQuery(),a=t(s)?s.event:null,i=p({renderer:r.renderer,event:a});o.geometry=this.createFetchPopupFeaturesQueryGeometry(e,i),o.outFields=await r.popupTemplate.getRequiredFields();return(await r.queryFeatures(o)).features}))).then((e=>[].concat(...e.map((e=>e.value)).filter(Boolean))))}};return e([s()],c.prototype,\"layer\",void 0),c=e([a(\"esri.layers.mixins.TileLayerView\")],c),c};export{i as TileLayerView,i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n"],"names":["t","e","xoffset","Math","max","abs","yoffset","n","stops","length","r","s","size","filter","type","map","maxSize","minSize","o","f","floor","renderer","event","pointerType","visualVariables","symbol","uniqueValueInfos","forEach","classBreakInfos","_","I","g","d","h","y","constructor","super","arguments","this","_tileStrategy","_fetchQueue","layer","resampling","update","pause","state","resume","attach","tileServers","_tileInfoView","u","tileInfo","fullExtent","tileInfoView","concurrency","process","fetchTile","m","cachePolicy","acquireTile","releaseTile","requestUpdate","handles","add","doRefresh","detach","destroy","clear","container","removeAllChildren","moveStart","viewChange","moveEnd","supportsSpatialReference","a","spatialReference","createFetchPopupFeaturesQueryGeometry","w","view","async","updateRequested","suspended","reset","tiles","_enqueueTileFetch","isUpdating","updating","_bitmapView","createTile","i","bitmap","x","getTileCoords","key","resolution","getTileResolution","width","height","addChild","abort","id","removeChild","once","tilemapCache","signal","resamplingLevel","l","_fetchImage","getTileParentId","p","c","fetchAvailabilityUpsample","level","row","col","has","push","source","declaredClass","error","prototype","V","Promise","reject","get","allSublayers","toArray","minScale","maxScale","popupTemplate","popupEnabled","visible","createQuery","geometry","outFields","getRequiredFields","queryFeatures","features","then","concat","value","Boolean","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","xmin","min","ymin","xmax","ymax"],"sourceRoot":""}