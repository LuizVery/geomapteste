(this.webpackJsonpgeowebmap=this.webpackJsonpgeowebmap||[]).push([[98],{1114:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var a=r(35),n=r(8),i=r.n(n),u=r(15),c=r(3),s=r(4),o=r(6),l=r(7),f=r(0),p=r(20),b=r(2),y=r(23),h=r(1),v=(r(17),r(18),r(16),r(9)),O=r(922),j=function(e){var t=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"fetchPopupFeatures",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r){var n,c,s,o=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.layer,t){e.next=3;break}return e.abrupt("return",Promise.reject(new p.a("tilelayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:n})));case 3:if("tile"===n.type){e.next=5;break}return e.abrupt("return",Promise.reject(new p.a("tilelayerview:fetchPopupFeatures","Layer type should be 'tile'",{type:n.type})));case 5:return c=this.get("view.scale"),s=n.allSublayers.toArray().filter((function(e){var t=0===e.minScale||c<=e.minScale,r=0===e.maxScale||c>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&t&&r})),e.abrupt("return",Object(y.k)(s.map(function(){var e=Object(u.a)(i.a.mark((function e(a){var n,u,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.createQuery(),u=Object(b.k)(r)?r.event:null,c=Object(O.a)({renderer:a.renderer,event:u}),n.geometry=o.createFetchPopupFeaturesQueryGeometry(t,c),e.next=4,a.popupTemplate.getRequiredFields();case 4:return n.outFields=e.sent,e.next=7,a.queryFeatures(n);case 7:return e.abrupt("return",e.sent.features);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){var t;return(t=[]).concat.apply(t,Object(a.a)(e.map((function(e){return e.value})).filter(Boolean)))})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(e);return Object(f.a)([Object(h.b)()],t.prototype,"layer",void 0),t=Object(f.a)([Object(v.a)("esri.layers.mixins.TileLayerView")],t)}},1293:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return w}));var a=r(8),n=r.n(a),i=r(15),u=r(3),c=r(4),s=r(6),o=r(7),l=r(0),f=r(20),p=r(2),b=r(1),y=(r(17),r(18),r(16),r(9)),h=r(53),v=r(693),O=r(722),j=r(686),m=r(908),d=r(1114),x=r(947),g=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(u.a)(this,r),(e=t.apply(this,arguments)).type="tile-3d",e}return Object(c.a)(r,[{key:"imageFormatIsOpaque",get:function(){return"jpg"===this.layer.tileInfo.format}},{key:"hasMixedImageFormats",get:function(){return"mixed"===this.layer.tileInfo.format}},{key:"dataLevelRange",get:function(){if(this.tileInfo){var e=this.tileInfo.lods,t=e[0].scale,r=e[e.length-1].scale;return this.levelRangeFromScaleRange(t,r)}return{minLevel:0,maxLevel:0}}},{key:"initialize",value:function(){if("web-tile"===this.layer.type){var e=this.layer.get("fullExtent.spatialReference"),t=this.layer.get("tileInfo.spatialReference");if(Object(p.j)(e)||Object(p.j)(t)||!Object(h.b)(e,t)){var r="defaults"===this.layer.originOf("fullExtent")||Object(p.j)(this.layer.fullExtent)?"SceneView requires fullExtent to be specified by the user on WebTileLayer":"SceneView requires fullExtent to be specified in the same spatial reference as tileInfo on WebTileLayer";this.addResolvingPromise(Promise.reject(new f.a("layerview:incompatible-fullextent",r)))}}this._addTilingSchemeMatchPromise()}},{key:"createFetchPopupFeaturesQueryGeometry",value:function(e,t){return Object(x.a)(e,t,this.view)}},{key:"doRefresh",value:function(){var e=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.suspended||this.emit("data-changed");case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(Object(m.a)(Object(O.a)(Object(d.a)(Object(v.a)(j.a)))));Object(l.a)([Object(b.b)({readOnly:!0})],g.prototype,"imageFormatIsOpaque",null),Object(l.a)([Object(b.b)({readOnly:!0})],g.prototype,"hasMixedImageFormats",null),Object(l.a)([Object(b.b)({aliasOf:"layer.fullExtent"})],g.prototype,"fullExtent",void 0),Object(l.a)([Object(b.b)()],g.prototype,"layer",void 0),Object(l.a)([Object(b.b)({aliasOf:"layer.tileInfo"})],g.prototype,"tileInfo",void 0),Object(l.a)([Object(b.b)({readOnly:!0})],g.prototype,"dataLevelRange",null);var w=g=Object(l.a)([Object(y.a)("esri.views.3d.layers.TileLayerView3D")],g)},908:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var a=r(3),n=r(4),i=r(6),u=r(7),c=r(0),s=r(16),o=r(23),l=r(27),f=r(1),p=(r(17),r(18),r(9)),b=function(e){var t=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r,[{key:"initialize",value:function(){var e=this;this.handles.add(Object(l.b)(this,"layer","refresh",(function(){e.doRefresh().catch((function(t){Object(o.n)(t)||s.a.getLogger(e.declaredClass).error(t)}))})),"RefreshableLayerView")}}]),r}(e);return Object(c.a)([Object(f.b)()],t.prototype,"layer",void 0),t=Object(c.a)([Object(p.a)("esri.layers.mixins.RefreshableLayerView")],t)}},922:function(e,t,r){"use strict";function a(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function n(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){for(var t=0,r=0,a=0;a<e.length;a++){var n=e[a].size;"number"==typeof n&&(t+=n,r++)}return t/r}(e.stops):t}function i(e,t){if(!t)return e;var r=t.filter((function(e){return"size"===e.type})).map((function(t){var r=t.maxSize,a=t.minSize;return(n(r,e)+n(a,e))/2})),a=0,i=r.length;if(0===i)return e;for(var u=0;u<i;u++)a+=r[u];var c=Math.floor(a/i);return Math.max(c,e)}function u(e){var t=e&&e.renderer,r="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return r;var n="visualVariables"in t?i(r,t.visualVariables):r;if("simple"===t.type)return a(n,t.symbol);if("unique-value"===t.type){var u=n;return t.uniqueValueInfos.forEach((function(e){u=a(u,e.symbol)})),u}if("class-breaks"===t.type){var c=n;return t.classBreakInfos.forEach((function(e){c=a(c,e.symbol)})),c}return t.type,n}r.d(t,"a",(function(){return u}))},947:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));r(112);var a=r(2),n=r(79),i=(r(922),r(61));function u(e,t,r){var u,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new i.a;if("2d"===r.type)u=t*r.resolution;else if("3d"===r.type){var s=r.overlayPixelSizeInMapUnits(e),o=r.basemapSpatialReference;u=Object(a.k)(o)&&!o.equals(r.spatialReference)?Object(n.f)(o)/Object(n.f)(r.spatialReference):t*s}var l=e.x-u,f=e.y-u,p=e.x+u,b=e.y+u,y=r.spatialReference;return c.xmin=Math.min(l,p),c.ymin=Math.min(f,b),c.xmax=Math.max(l,p),c.ymax=Math.max(f,b),c.spatialReference=y,c}new i.a}}]);
//# sourceMappingURL=98.3457c4bb.chunk.js.map