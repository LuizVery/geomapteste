{"version":3,"file":"static/js/1060.d6750ac3.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/chunks/ImageMaterial.glsl.js","../node_modules/@arcgis/core/chunks/ShadedColorMaterial.glsl.js","../node_modules/@arcgis/core/chunks/SlicePlaneMaterial.glsl.js","../node_modules/@arcgis/core/portal/support/resourceExtension.js","../node_modules/@arcgis/core/core/accessorSupport/decorators/persistable.js","../node_modules/@arcgis/core/views/3d/analysis/AnalysisView3D.js","../node_modules/@arcgis/core/analysis/SlicePlane.js","../node_modules/@arcgis/core/views/3d/interactive/Manipulator3D.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ShadedColorMaterialTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ShadedColorMaterial.js","../node_modules/@arcgis/core/views/3d/interactive/manipulatorUtils.js","../node_modules/@arcgis/core/views/3d/interactive/analysisTools/slice/sliceToolConfig.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/SlicePlaneMaterialTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/SlicePlaneMaterial.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/SlicePlaneVisualElement.js","../node_modules/@arcgis/core/views/3d/interactive/analysisTools/slice/sliceToolUtils.js","../node_modules/@arcgis/core/views/3d/analysis/Slice/SliceController.js","../node_modules/@arcgis/core/views/3d/analysis/Slice/SliceVisualization.js","../node_modules/@arcgis/core/views/3d/analysis/SliceAnalysisView3D.js","../node_modules/@arcgis/core/views/3d/analysis/support/projectionUtils.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/LineVisualElement.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/Object3DVisualElement.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/VisualElement.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutputOptions.js\";import{Slice as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ReadLinearDepth as i}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{multipassTerrainTest as o}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{defaultMaskAlphaCutoff as t}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{ColorConversion as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{glsl as l}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as s}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{VertexAttribute as n}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";function g(g){const p=new s;return p.include(a,{linearDepth:!1}),p.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),p.attributes.add(n.POSITION,\"vec3\"),p.attributes.add(n.UV0,\"vec2\"),p.varyings.add(\"vpos\",\"vec3\"),g.multipassTerrainEnabled&&p.varyings.add(\"depth\",\"float\"),p.vertex.uniforms.add(\"textureCoordinateScaleFactor\",\"vec2\"),p.vertex.code.add(l`\n    void main(void) {\n      vpos = position;\n      ${g.multipassTerrainEnabled?\"depth = (view * vec4(vpos, 1.0)).z;\":\"\"}\n      vTexCoord = uv0 * textureCoordinateScaleFactor;\n      gl_Position = transformPosition(proj, view, vpos);\n    }\n  `),p.include(r,g),g.multipassTerrainEnabled&&(p.fragment.include(i),p.include(o,g)),p.fragment.uniforms.add(\"tex\",\"sampler2D\"),p.fragment.uniforms.add(\"opacity\",\"float\"),p.varyings.add(\"vTexCoord\",\"vec2\"),g.output===e.Alpha?p.fragment.code.add(l`\n    void main() {\n      discardBySlice(vpos);\n      ${g.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n\n      float alpha = texture2D(tex, vTexCoord).a * opacity;\n      if (alpha  < ${l.float(t)}) {\n        discard;\n      }\n\n      gl_FragColor = vec4(alpha);\n    }\n    `):(p.fragment.include(d),p.fragment.code.add(l`\n    void main() {\n      discardBySlice(vpos);\n      ${g.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n      gl_FragColor = texture2D(tex, vTexCoord) * opacity;\n\n      if (gl_FragColor.a < ${l.float(t)}) {\n        discard;\n      }\n\n      gl_FragColor = highlightSlice(gl_FragColor, vpos);\n      ${g.oitEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n    }\n    `)),p}const p=Object.freeze({__proto__:null,build:g});export{p as I,g as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{ScreenSizeScaling as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js\";import{ShaderOutput as r}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutputOptions.js\";import{Slice as i}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ReadLinearDepth as a}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{multipassTerrainTest as d}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{symbolAlphaCutoff as l}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{ColorConversion as n}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{glsl as s}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as t}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{VertexAttribute as g}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";function m(m){const c=new t;return c.include(o,{linearDepth:!1}),c.include(e,{}),c.include(i,m),c.fragment.include(n),c.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),c.fragment.uniforms.add(\"uColor\",\"vec4\"),c.attributes.add(g.POSITION,\"vec3\"),c.varyings.add(\"vWorldPosition\",\"vec3\"),m.multipassTerrainEnabled&&c.varyings.add(\"depth\",\"float\"),m.screenSizeEnabled&&c.attributes.add(g.OFFSET,\"vec3\"),m.shadingEnabled&&(c.vertex.uniforms.add(\"viewNormal\",\"mat4\"),c.fragment.uniforms.add(\"shadedColor\",\"vec4\").add(\"shadingDirection\",\"vec3\"),c.attributes.add(g.NORMAL,\"vec3\"),c.varyings.add(\"vViewNormal\",\"vec3\")),c.vertex.code.add(s`\n    void main(void) {\n      vWorldPosition = ${m.screenSizeEnabled?\"screenSizeScaling(offset, position)\":\"position\"};\n  `),m.shadingEnabled&&c.vertex.code.add(s`vec3 worldNormal = normal;\nvViewNormal = (viewNormal * vec4(worldNormal, 1)).xyz;`),c.vertex.code.add(s`\n    ${m.multipassTerrainEnabled?\"depth = (view * vec4(vWorldPosition, 1.0)).z;\":\"\"}\n    gl_Position = transformPosition(proj, view, vWorldPosition);\n  }\n  `),m.multipassTerrainEnabled&&(c.fragment.include(a),c.include(d,m)),c.fragment.code.add(s`\n    void main() {\n      discardBySlice(vWorldPosition);\n      ${m.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n    `),m.shadingEnabled?c.fragment.code.add(s`vec3 viewNormalNorm = normalize(vViewNormal);\nfloat shadingFactor = 1.0 - clamp(-dot(viewNormalNorm, shadingDirection), 0.0, 1.0);\nvec4 finalColor = mix(uColor, shadedColor, shadingFactor);`):c.fragment.code.add(s`vec4 finalColor = uColor;`),c.fragment.code.add(s`\n      if (finalColor.a < ${s.float(l)}) {\n        discard;\n      }\n      ${m.output===r.Alpha?s`gl_FragColor = vec4(finalColor.a);`:\"\"}\n\n      ${m.output===r.Color?s`gl_FragColor = highlightSlice(finalColor, vWorldPosition); ${m.oitEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}`:\"\"}\n    }\n    `),c}const c=Object.freeze({__proto__:null,build:m});export{c as S,m as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{glsl as d}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as e}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{VertexAttribute as r}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";function i(){const i=new e;return i.extensions.add(\"GL_OES_standard_derivatives\"),i.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),i.attributes.add(r.POSITION,\"vec3\"),i.attributes.add(r.UV0,\"vec2\"),i.varyings.add(\"vUV\",\"vec2\"),i.vertex.code.add(d`void main(void) {\nvUV = uv0;\ngl_Position = proj * view * vec4(position, 1.0);\n}`),i.fragment.uniforms.add(\"backgroundColor\",\"vec4\").add(\"gridColor\",\"vec4\").add(\"ratio\",\"float\").add(\"gridWidth\",\"float\"),i.fragment.code.add(d`void main() {\nconst float LINE_WIDTH = 1.0;\nvec2 uvScaled = vUV * gridWidth;\nvec2 gridUV = (fract(uvScaled + 0.5) - 0.5) / (LINE_WIDTH * fwidth(uvScaled));\nvec2 grid = (1.0 - step(0.5, gridUV)) * step(-0.5, gridUV);\ngrid.x *= step(0.5, uvScaled.x) * step(uvScaled.x, gridWidth - 0.5);\ngrid.y *= step(0.5, uvScaled.y) * step(uvScaled.y, gridWidth - 0.5);\nfloat gridFade = max(grid.x, grid.y);\nfloat gridAlpha = gridColor.a * gridFade;\ngl_FragColor =\nvec4(backgroundColor.rgb * backgroundColor.a, backgroundColor.a) * (1.0 - gridAlpha) +\nvec4(gridColor.rgb, 1.0) * gridAlpha;\n}`),i}const a=Object.freeze({__proto__:null,build:i});export{a as S,i as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{getPathExtension as i}from\"../../core/urlUtils.js\";function p(i){return o[n(i)]||e}function n(i){return i instanceof Blob?i.type:t(i.url)}function t(p){const n=i(p);return g[n]||a}const o={},a=\"text/plain\",e=o[a],g={png:\"image/png\",jpeg:\"image/jpeg\",jpg:\"image/jpg\",bmp:\"image/bmp\",gif:\"image/gif\",json:\"application/json\",txt:\"text/plain\",xml:\"application/xml\",svg:\"image/svg+xml\",zip:\"application/zip\",pbf:\"application/vnd.mapbox-vector-tile\",gz:\"application/gzip\"};for(const l in g)o[g[l]]=l;export{p as getResourceContentExtension};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as t,isNone as r,get as e}from\"../../maybe.js\";import{isMultiOriginJSONMixin as o}from\"../../multiOriginJSONSupportUtils.js\";import{isAbsolute as i,isBlobProtocol as n,join as s,getPathExtension as u}from\"../../urlUtils.js\";import{generateUUID as p}from\"../../uuid.js\";import{getOwnPropertyMetadata as a}from\"../metadata.js\";import{nameToId as c}from\"../PropertyOrigin.js\";import{propertyJSONMeta as l}from\"./property.js\";import{getResourceContentExtension as f}from\"../../../portal/support/resourceExtension.js\";import{r as m,t as y,M as h,i as d,p as g}from\"../../../chunks/persistableUrlUtils.js\";function w(r){const e=t(r)&&r.origins?r.origins:[void 0];return(t,o)=>{const i=v(r,t,o);for(const r of e){const e=l(t,r,o);for(const t in i)e[t]=i[t]}}}function v(r,e,o){if(t(r)&&\"resource\"===r.type)return U(r,e,o);switch(t(r)&&r.type?r.type:\"other\"){case\"other\":return{read:!0,write:!0};case\"url\":{const{read:t,write:r}=g;return{read:t,write:r}}}}function U(e,s,u){const p=a(s,u);return{type:String,read:(t,r,e)=>{const o=m(t,r,e);return p.type===String?o:\"function\"==typeof p.type?new p.type({url:o}):void 0},write:{writer(s,a,l,f){if(!f||!f.resources)return\"string\"==typeof s?void(a[l]=y(s,f)):void(a[l]=s.write({},f));const m=R(s),g=m?y(m,{...f,verifyItemRelativeUrls:f&&f.verifyItemRelativeUrls?{writtenUrls:f.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null},h.NO):null,w=p.type!==String&&(!o(this)||f&&f.origin&&this.originIdOf(u)>c(f.origin));f&&f.portalItem&&t(g)&&!i(g)?w?I(this,u,s,g,a,l,f,e):O(g,a,l,f):f&&f.portalItem&&(r(g)||t(d(g))||n(g)||w)?j(this,u,s,g,a,l,f,e):a[l]=g}}}}function j(t,r,o,i,u,a,c,l){const m=p(),y=b(o,i,c),h=s(e(l,\"prefix\"),m),d=`${h}.${f(y)}`,g=c.portalItem.resourceFromPath(d);n(i)&&c.resources.pendingOperations.push(P(i).then((t=>{g.path=`${h}.${f(t)}`,u[a]=g.itemRelativeUrl})).catch((()=>{}))),S(t,r,g,y,c.resources.toAdd),u[a]=g.itemRelativeUrl}function I(t,r,e,o,i,n,s,p){const a=s.portalItem.resourceFromPath(o),c=b(e,o,s);f(c)===u(a.path)?(S(t,r,a,c,s.resources.toUpdate),i[n]=o):j(t,r,e,o,i,n,s,p)}function O(t,r,e,o){o.resources.toKeep.push({resource:o.portalItem.resourceFromPath(t)}),r[e]=t}function S(t,r,e,o,i){i.push({resource:e,content:o,finish:e=>{N(t,r,e)}})}function b(t,r,e){return\"string\"==typeof t?{url:r}:new Blob([JSON.stringify(t.toJSON(e))],{type:\"application/json\"})}async function P(t){const r=(await import(\"../../../request.js\")).default,{data:e}=await r(t,{responseType:\"blob\"});return e}function R(t){return r(t)?null:\"string\"==typeof t?t:t.url}function N(t,r,e){\"string\"==typeof t[r]?t[r]=e.url:t[r].url=e.url}export{w as persistable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{isSome as t}from\"../../../core/maybe.js\";import{EsriPromiseMixin as s}from\"../../../core/Promise.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";const p=p=>{let i=class extends(s(p)){constructor(){super(...arguments),this.parent=null}get updating(){return!1}get visible(){const r=!t(this.parent)||this.parent.visible&&!this.parent.suspended;return this.analysis.visible&&r}};return r([o({readOnly:!0})],i.prototype,\"type\",void 0),r([o({constructOnly:!0})],i.prototype,\"analysis\",void 0),r([o({constructOnly:!0})],i.prototype,\"parent\",void 0),r([o({constructOnly:!0})],i.prototype,\"view\",void 0),r([o({readOnly:!0})],i.prototype,\"updating\",null),r([o({readOnly:!0})],i.prototype,\"visible\",null),i=r([e(\"esri.views.3d.analysis.AnalysisView3D\")],i),i};export{p as AnalysisView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import\"../geometry.js\";import{ClonableMixin as t}from\"../core/Clonable.js\";import{JSONSupport as r}from\"../core/JSONSupport.js\";import{equalsMaybe as e}from\"../core/maybe.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import{cast as i}from\"../core/accessorSupport/decorators/cast.js\";import{subclass as p}from\"../core/accessorSupport/decorators/subclass.js\";import{ensureNumber as a}from\"../core/accessorSupport/ensureType.js\";import{persistable as m}from\"../core/accessorSupport/decorators/persistable.js\";import{cyclicalDeg as l}from\"../views/3d/support/mathUtils.js\";import n from\"../geometry/Point.js\";let c=class extends(t(r)){constructor(o){super(o),this.type=\"plane\",this.position=null,this.heading=0,this.tilt=0,this.width=10,this.height=10}equals(o){return this.heading===o.heading&&this.tilt===o.tilt&&e(this.position,o.position)&&this.width===o.width&&this.height===o.height}};o([s({readOnly:!0,json:{read:!1,write:!0}})],c.prototype,\"type\",void 0),o([s({type:n}),m()],c.prototype,\"position\",void 0),o([s({type:Number,nonNullable:!0,range:{min:0,max:360}}),m(),i((o=>l.normalize(a(o),0,!0)))],c.prototype,\"heading\",void 0),o([s({type:Number,nonNullable:!0,range:{min:0,max:360}}),m(),i((o=>l.normalize(a(o),0,!0)))],c.prototype,\"tilt\",void 0),o([s({type:Number,nonNullable:!0}),m()],c.prototype,\"width\",void 0),o([s({type:Number,nonNullable:!0}),m()],c.prototype,\"height\",void 0),c=o([p(\"esri.analysis.SlicePlane\")],c);const h=c;export{h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport\"../../../geometry.js\";import{neverReached as e}from\"../../../core/compilerUtils.js\";import t from\"../../../core/Evented.js\";import{deg2rad as i}from\"../../../core/mathUtils.js\";import{isSome as s,isNone as o,unwrapOr as n,unwrap as r}from\"../../../core/maybe.js\";import{createScreenPointArray as a,createRenderScreenPointArray3 as c,screenPointObjectToArray as l,castRenderScreenPointArray as h}from\"../../../core/screenUtils.js\";import{once as d}from\"../../../core/accessorSupport/utils.js\";import{f as u}from\"../../../chunks/mat3.js\";import{c as _}from\"../../../chunks/mat3f64.js\";import{c as g,s as m,m as f,i as p}from\"../../../chunks/mat4.js\";import{c as b}from\"../../../chunks/mat4f64.js\";import{a as v}from\"../../../chunks/vec2.js\";import{b as y,t as j,m as L,a as S,g as R,h as w,s as O,f as T}from\"../../../chunks/vec3.js\";import{c as A,Z as E}from\"../../../chunks/vec3f64.js\";import{canProjectWithoutEngine as D,projectPoint as F,sphericalPCPFtoLonLatElevation as z,computeENUToSphericalPCPFLocalRotation as k}from\"../../../geometry/projection.js\";import{getReferenceEllipsoid as I}from\"../../../geometry/projectionEllipsoid.js\";import{containsPointObject as P}from\"../../../geometry/support/aaBoundingRect.js\";import{create as M,distance2 as C,fromPoints as x,closestRayDistance2 as B}from\"../../../geometry/support/lineSegment.js\";import{create as W,fromPositionAndNormal as U,intersectRay as V}from\"../../../geometry/support/plane.js\";import{create as N}from\"../../../geometry/support/ray.js\";import{sv3d as G}from\"../../../geometry/support/vectorStacks.js\";import{clonePoint as H}from\"../../../layers/graphics/hydratedFeatures.js\";import{getElevationAtPoint as Y}from\"../support/ElevationProvider.js\";import{fromScreen as Z}from\"../support/geometryUtils/ray.js\";import q from\"../webgl-engine/lib/Camera.js\";import{Object3D as J}from\"../webgl-engine/lib/Object3D.js\";import{UpdatePolicy as K}from\"../webgl-engine/lib/basicInterfaces.js\";import{WebGLLayer as Q}from\"../webgl-engine/lib/WebGLLayer.js\";import{ManipulatorStateCustomFlags as X,ManipulatorStateFlags as $}from\"../../interactive/interfaces.js\";import ee from\"../../../geometry/Point.js\";class te{constructor(e){this.camera=new q,this._elevation={offset:0,override:null},this.collisionType={type:\"point\"},this.collisionPriority=0,this._renderObjects=[],this.autoScaleRenderObjects=!0,this._available=!0,this._noDisplayCount=0,this._radius=10,this._worldSized=!1,this.focusMultiplier=2,this.touchMultiplier=2.5,this.worldOriented=!1,this._modelTransform=b(),this._worldFrame=null,this._renderLocation=A(),this._renderLocationDirty=!0,this._location=new ee({x:0,y:0,z:0}),this._elevationAlignedLocation=new ee,this._elevationAlignedLocationDirty=!0,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.cursor=null,this._grabbing=!1,this.dragging=!1,this._hovering=!1,this._selected=!1,this._state=X.None,this._focused=!1,this.events=new t.EventEmitter,this._screenLocation={screenPointArray:a(),renderScreenPointArray:c(),pixelSize:0},this._screenLocationDirty=!0,this._applyObjectTransform=null,this._engineResourcesAddedToStage=!1,this._engineResources=null,this._attached=!1,this._engineLayer=null,this._materialIdReferences=null,this._location.spatialReference=e.view.spatialReference;for(const t in e)this[t]=e[t];this.view.state&&this.view.state.camera&&this.camera.copyFrom(this.view.state.camera)}destroy(){this._removeResourcesFromStage(),this._engineResources=null,this.view=null,this.camera=null}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this._elevationAlignedLocationDirty=!0,this._renderLocationDirty=!0,this._updateEngineObject()}get renderObjects(){return this._renderObjects}set renderObjects(e){this._removeResourcesFromStage(),this._engineResources=null,this._renderObjects=e.slice(),this._updateEngineObject()}set available(e){e!==this._available&&(this._available=e,this._updateEngineObject())}get available(){return this._available}disableDisplay(){return this._noDisplayCount++,1===this._noDisplayCount&&this._updateEngineObject(),{remove:d((()=>{this._noDisplayCount--,0===this._noDisplayCount&&this._updateEngineObject()}))}}set radius(e){e!==this._radius&&(this._radius=e,this._updateEngineObject())}get radius(){return this._radius}set worldSized(e){e!==this._worldSized&&(this._worldSized=e,this._updateEngineObject())}get worldSized(){return this._worldSized}get modelTransform(){return this._modelTransform}set modelTransform(e){ie(e)&&(this._screenLocationDirty=!0),g(this._modelTransform,e),this._updateEngineObject()}get renderLocation(){return this._renderLocationDirty&&(this._renderLocationDirty=!1,this.view.renderCoordsHelper.toRenderCoords(this.elevationAlignedLocation,this._renderLocation),this.worldOriented?(this._worldFrame||(this._worldFrame=b()),se(this.view,this._renderLocation,this._worldFrame)):this._worldFrame&&(this._worldFrame=null)),this._renderLocation}set renderLocation(e){this.view.renderCoordsHelper.fromRenderCoords(e,this._location),this.elevationAlignedLocation=this._location}get location(){return this._location}set location(e){H(e,this._location),this._renderLocationDirty=!0,this._screenLocationDirty=!0,this._elevationAlignedLocationDirty=!0,this._updateEngineObject(),this.events.emit(\"location-update\",{location:this._location})}get elevationAlignedLocation(){return this._elevationAlignedLocationDirty?(this._evaluateElevationAlignment(),this._updateElevationAlignedLocation(),this._elevationAlignedLocation):this._elevationAlignedLocation}set elevationAlignedLocation(e){H(e,this._location),this._evaluateElevationAlignment(),this._location.z-=this._elevation.offset,this._updateElevationAlignedLocation(),this._updateEngineObject(),this.events.emit(\"location-update\",{location:this._location})}_updateElevationAlignedLocation(){this._elevationAlignedLocation.x=this.location.x,this._elevationAlignedLocation.y=this.location.y;const e=s(this._elevation.override)?this._elevation.override:this.location.z||0;this._elevationAlignedLocation.z=e+this._elevation.offset,this._elevationAlignedLocation.spatialReference=this.location.spatialReference,this._renderLocationDirty=!0,this._screenLocationDirty=!0,this._elevationAlignedLocationDirty=!1}grabbableForEvent(){return!0}get grabbing(){return this._grabbing}set grabbing(e){e!==this._grabbing&&(this._grabbing=e,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}get hovering(){return this._hovering}set hovering(e){e!==this._hovering&&(this._hovering=e,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}get selected(){return this._selected}set selected(e){e!==this._selected&&(this._selected=e,this._updateEngineObject(),this.events.emit(\"select-changed\",{action:e?\"select\":\"deselect\"}))}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,this._updateEngineObject())}updateStateEnabled(e,t){t?this.state|=e:this.state&=~e}_setFocused(e){e!==this._focused&&(this._focused=e,this.events.emit(\"focus-changed\",{action:!0===e?\"focus\":\"unfocus\"}))}get focused(){return this._focused}get screenLocation(){return this._ensureScreenLocation(),this._screenLocation}_ensureScreenLocation(){if(!this._screenLocationDirty)return;this._screenLocation.pixelSize=this.camera.computeScreenPixelSizeAt(this.renderLocation),this._screenLocationDirty=!1;let e;if(ie(this._modelTransform)){const t=this._calculateModelTransformOffset(fe);e=y(t,t,this.renderLocation)}else e=this.renderLocation;this.camera.projectToRenderScreen(e,this._screenLocation.renderScreenPointArray),this.camera.renderToScreen(this._screenLocation.renderScreenPointArray,this._screenLocation.screenPointArray)}get applyObjectTransform(){return this._applyObjectTransform}set applyObjectTransform(e){this._applyObjectTransform=e,this._screenLocationDirty=!0,this._updateEngineObject()}intersectionDistance(t,i){if(!this.available)return null;const s=l(t,oe),n=this._getCollisionRadius(i),r=-1*this.collisionPriority;switch(this.collisionType.type){case\"point\":if(v(this.screenLocation.screenPointArray,s)<n*n)return this.screenLocation.renderScreenPointArray[2]+r;break;case\"line\":{const e=this.collisionType.paths,t=this._getWorldToScreenObjectScale(),i=this._calculateObjectTransform(t,le),a=n*this.screenLocation.pixelSize,c=Z(this.camera,s,re);if(o(c))return null;for(const s of e){if(0===s.length)continue;const e=L(de,s[0],i);for(let t=1;t<s.length;t++){const o=L(ue,s[t],i),n=B(x(e,o,ne),c);if(null!=n&&n<a*a){const t=y(G.get(),e,o);S(t,t,.5);const i=h(G.get());return this.camera.projectToRenderScreen(t,i),i[2]+r}R(e,o)}}break}case\"disc\":{var a;const e=this.collisionType.direction,t=null!=(a=this.collisionType.offset)?a:E,i=this._getWorldToScreenObjectScale(),c=this._calculateObjectTransform(i,le),l=n*this.screenLocation.pixelSize,h=Z(this.camera,s,re);if(o(h))return null;const d=u(ae,c),_=j(ge,e,d),g=L(me,t,c);U(g,_,he);const m=_e;if(V(he,h,m)&&w(m,g)<l*l)return this.screenLocation.renderScreenPointArray[2]+r;break}case\"ribbon\":{const{paths:e,direction:t}=this.collisionType,i=this._getWorldToScreenObjectScale(),a=this._calculateObjectTransform(i,le),c=n*this.camera.computeScreenPixelSizeAt(this.renderLocation),l=Z(this.camera,s,re);if(o(l))return null;const d=u(ae,a),_=j(ge,t,d),g=this._calculateModelTransformPosition(me);U(g,_,he);const m=_e;if(!V(he,l,m))break;for(const s of e){if(0===s.length)continue;const e=L(de,s[0],a);for(let t=1;t<s.length;t++){const i=L(ue,s[t],a),o=C(x(e,i,ne),m);if(null!=o&&o<c*c){const t=y(G.get(),e,i);S(t,t,.5);const s=h(G.get());return this.camera.projectToRenderScreen(t,s),s[2]+r}R(e,i)}}break}default:e(this.collisionType)}return null}attach(e={manipulator3D:{}}){var t;if(!this.view._stage)return;const i=e.manipulator3D;if(o(i.engineLayerId)){const e=new Q({isPickable:!1,updatePolicy:K.SYNC});this.view._stage.add(e),i.engineLayerId=e.id,this._engineLayer=e}else null!=(t=this.view._stage)&&t.getObject&&(this._engineLayer=this.view._stage.getObject(i.engineLayerId));i.engineLayerReferences=(i.engineLayerReferences||0)+1,this._materialIdReferences=i.materialIdReferences,o(this._materialIdReferences)&&(this._materialIdReferences=new Map,i.materialIdReferences=this._materialIdReferences),this.camera.copyFrom(this.view.state.camera),this._attached=!0,this._updateEngineObject(),D(this._location.spatialReference,this.view.spatialReference)||(this.location=new ee({x:0,y:0,z:0,spatialReference:this.view.spatialReference}))}detach(e={manipulator3D:{}}){const t=e.manipulator3D;t.engineLayerReferences--;const i=0===t.engineLayerReferences;i&&(t.engineLayerId=null),this._removeResourcesFromStage(i),this._engineResources=null,this._engineLayer=null,this._materialIdReferences=null,this._attached=!1}onViewChange(){this.camera.copyFrom(this.view.state.camera),this._screenLocationDirty=!0,this._updateEngineObject()}onElevationChange(e){F(this.location,pe,e.spatialReference),P(e.extent,pe)&&(this.location=this._location)}_evaluateElevationAlignment(e=this.location){if(o(this.elevationInfo))return!1;let t=null,i=0;const s=n(this.elevationInfo.offset,0);switch(this.elevationInfo.mode){case\"on-the-ground\":t=n(Y(this.view.elevationProvider,e,\"ground\"),0);break;case\"relative-to-ground\":i=n(Y(this.view.elevationProvider,e,\"ground\"),0)+s;break;case\"relative-to-scene\":i=n(Y(this.view.elevationProvider,e,\"scene\"),0)+s;break;case\"absolute-height\":i=s}return(i!==this._elevation.offset||t!==this._elevation.override)&&(this._elevation.offset=i,this._elevation.override=t,!0)}_updateEngineObject(){if(!this._attached)return;if(!this.available)return void this._removeResourcesFromStage();const e=this._getWorldToScreenObjectScale(),t=le;if(!0===this.autoScaleRenderObjects){const i=this._getFocusedSize(this._radius,this.focused)*e;this._calculateObjectTransform(i,t)}else this._calculateObjectTransform(e,t);const{objectsByState:i}=this._ensureEngineResources(),s=(this.focused?$.Focused:$.Unfocused)|(this.selected?$.Selected:$.Unselected),o=this._noDisplayCount>0;for(const{stateMask:n,objects:r}of i){if(o){for(const e of r)e.setVisible(!1);continue}const e=(n&$.All)!==$.None,i=(n&X.All)!==X.None,a=!e||(s&n)==(n&$.All),c=!i||(this.state&n)==(n&X.All);if(a&&c)for(const s of r)s.setVisible(!0),s.transformation=t;else for(const t of r)t.setVisible(!1)}}_ensureEngineResources(){if(o(this._engineResources)){const e=r(this._engineLayer),t=[],i=new Set;this.renderObjects.forEach((({material:e})=>{i.has(e)||(t.push(e),i.add(e))}));const s=(e,t)=>{const{geometry:i,material:s,transform:o}=t;Array.isArray(i)?i.forEach((t=>e.addGeometry(t,s,o))):e.addGeometry(i,s,o)},o=new Map;this._renderObjects.forEach((e=>{const t=new J({castShadow:!1});s(t,e);const i=e.stateMask||0,n=o.get(i)||[];n.push(t),o.set(i,n)}));const n=[];o.forEach(((e,t)=>n.push({stateMask:t,objects:e}))),this._engineResources={objectsByState:n,layer:e,materials:t}}return this._addResourcesToStage(),this._engineResources}_addResourcesToStage(){if(this._engineResourcesAddedToStage||o(this._engineResources))return;const{objectsByState:e,layer:t,materials:i}=this._engineResources;i.forEach((e=>{const t=r(this._materialIdReferences),i=t.get(e.id)||0;0===i&&this.view._stage.add(e),t.set(e.id,i+1)})),e.forEach((({objects:e})=>{t.addMany(e),this.view._stage.addMany(e)})),this._engineResourcesAddedToStage=!0}_removeResourcesFromStage(e=!1){if(!this._engineResourcesAddedToStage||o(this._engineResources)||!this.view._stage)return;const{objectsByState:t,layer:i,materials:s}=this._engineResources;t.forEach((({objects:e})=>{i.removeMany(e),this.view._stage.removeMany(e)})),s.forEach((e=>{const t=r(this._materialIdReferences),i=t.get(e.id);1===i?(this.view._stage.remove(e),t.delete(e.id)):t.set(e.id,i-1)})),e&&this.view._stage.remove(i),this._engineResourcesAddedToStage=!1}_getCollisionRadius(e){return this._getFocusedSize(this.radius,!0)*(\"touch\"===e?this.touchMultiplier:1)}_getFocusedSize(e,t){return e*(t?this.focusMultiplier:1)}_getWorldToScreenObjectScale(){return this._worldSized?1:this.screenLocation.pixelSize}_calculateModelTransformPosition(e){const t=this._getWorldToScreenObjectScale(),i=this._calculateObjectTransform(t,ce);return O(e,i[12],i[13],i[14])}_calculateModelTransformOffset(e){const t=this._calculateModelTransformPosition(e);return T(e,t,this.renderLocation)}_calculateObjectTransform(e,t){return m(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1),this._worldFrame&&f(t,t,this._worldFrame),f(t,t,this._modelTransform),t[12]+=this.renderLocation[0],t[13]+=this.renderLocation[1],t[14]+=this.renderLocation[2],t[15]=1,s(this._applyObjectTransform)&&this._applyObjectTransform(t),t}get test(){let e=!1;if(s(this._engineResources))for(const t in this._engineResources.objectsByState){const i=this._engineResources.objectsByState[t];for(const t of i.objects)if(t.isVisible){e=!0;break}if(e)break}return{areAnyResourcesVisible:e}}}function ie(e){return 0!==e[12]||0!==e[13]||0!==e[14]}function se(e,t,s){switch(e.viewingMode){case\"local\":return p(s),!0;case\"global\":{const o=I(e.renderCoordsHelper.spatialReference);return z(t,0,de,0,o.radius),k(i(de[0]),i(de[1]),s),!0}}}const oe=a(),ne=M(),re=N(),ae=_(),ce=b(),le=b(),he=W(),de=A(),ue=A(),_e=A(),ge=A(),me=A(),fe=A(),pe=new ee({x:0,y:0,z:0,spatialReference:null});export{te as Manipulator3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import{c as e}from\"../../../../chunks/vec4f64.js\";import{bindScreenSizeScalingUniforms as i}from\"../core/shaderLibrary/ScreenSizeScaling.glsl.js\";import{ShaderOutput as t}from\"../core/shaderLibrary/ShaderOutputOptions.js\";import{bindSliceUniformsWithOrigin as o}from\"../core/shaderLibrary/Slice.glsl.js\";import{bindMultipassTerrainTexture as s}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindProjectionMatrix as a,bindView as n,bindCameraPosition as l}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as p}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as d}from\"../core/shaderTechnique/ShaderTechnique.js\";import{parameter as c,ShaderTechniqueConfiguration as h}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{CullFaceOptions as m,TransparencyPassType as u}from\"../lib/basicInterfaces.js\";import{blendingDefault as b,oitBlending as g,oitDepthWrite as f,OITPolygonOffset as v}from\"../lib/OrderIndependentTransparency.js\";import{Program as E}from\"../lib/Program.js\";import{VertexAttribute as T}from\"../lib/VertexAttribute.js\";import{S as y}from\"../../../../chunks/ShadedColorMaterial.glsl.js\";import{CompareFunction as S}from\"../../../webgl/enums.js\";import{makePipelineState as j,cullingParams as P,defaultDepthWriteParams as w,defaultColorWriteParams as C}from\"../../../webgl/renderState.js\";class O extends d{initializeProgram(r){const e=O.shader.get(),i=this.configuration,t=e.build({output:i.output,slicePlaneEnabled:i.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,screenSizeEnabled:i.screenSizeEnabled,shadingEnabled:i.shadingEnabled,oitEnabled:i.transparencyPassType===u.Color,multipassTerrainEnabled:i.multipassTerrainEnabled,cullAboveGround:i.cullAboveGround});return new E(r.rctx,t,N)}bindPass(r,e){const{screenSizeEnabled:t,shadingEnabled:o}=this.configuration,{color:n,shadingTint:l,shadingDirection:p}=r;a(this.program,e.camera.projectionMatrix),this.program.setUniform4fv(\"uColor\",n),e.multipassTerrainEnabled&&(this.program.setUniform2fv(\"nearFar\",e.camera.nearFar),this.program.setUniform2fv(\"inverseViewport\",e.inverseViewport),s(this.program,e)),o&&(this.program.setUniform4fv(\"shadedColor\",this._blendColor(F,l,n)),this.program.setUniform3fv(\"shadingDirection\",p),this.program.setUniformMatrix4fv(\"viewNormal\",e.camera.viewInverseTransposeMatrix)),t&&i(this.program,r,e)}bindDraw(r){n(this.program,r),l(this.program,r.origin,r.camera.viewInverseTransposeMatrix),o(this.program,this.configuration,r),this.program.rebindTextures()}_blendColor(r,e,i){const t=1-e[3],o=e[3]+i[3]*t;return 0===o?(r[3]=o,r):(r[0]=(e[0]*e[3]+i[0]*i[3]*t)/o,r[1]=(e[1]*e[3]+i[1]*i[3]*t)/o,r[2]=(e[2]*e[3]+i[2]*i[3]*t)/o,r[3]=i[3],r)}_setPipelineState(r){const e=this.configuration,i=r===u.NONE,o=r===u.FrontFace;return j({blending:e.output!==t.Color&&e.output!==t.Alpha||!e.transparent?null:i?b:g(r),culling:P(e.cullFace),depthTest:{func:o?S.LESS:e.shadingEnabled?S.LEQUAL:S.LESS},depthWrite:i?e.writeDepth&&w:f(r),colorWrite:C,polygonOffset:i||o?null:v})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}}O.shader=new p(y,(()=>import(\"./ShadedColorMaterial.glsl.js\")));class x extends h{constructor(){super(...arguments),this.output=t.Color,this.cullFace=m.None,this.slicePlaneEnabled=!1,this.transparent=!1,this.writeDepth=!0,this.screenSizeEnabled=!0,this.shadingEnabled=!0,this.transparencyPassType=u.NONE,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}r([c({count:t.COUNT})],x.prototype,\"output\",void 0),r([c({count:m.COUNT})],x.prototype,\"cullFace\",void 0),r([c()],x.prototype,\"slicePlaneEnabled\",void 0),r([c()],x.prototype,\"transparent\",void 0),r([c()],x.prototype,\"writeDepth\",void 0),r([c()],x.prototype,\"screenSizeEnabled\",void 0),r([c()],x.prototype,\"shadingEnabled\",void 0),r([c({count:u.COUNT})],x.prototype,\"transparencyPassType\",void 0),r([c()],x.prototype,\"multipassTerrainEnabled\",void 0),r([c()],x.prototype,\"cullAboveGround\",void 0);const N=new Map([[T.POSITION,0],[T.NORMAL,1],[T.OFFSET,2]]),F=e();export{O as ShadedColorMaterialTechnique,x as ShadedColorMaterialTechniqueConfiguration,N as ShadedColorMaterialVertexAttrLocations};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{n as e,s as t,a as r,b as i}from\"../../../../chunks/vec3.js\";import{c as s}from\"../../../../chunks/vec3f64.js\";import{center as a,scale as n}from\"../../../../geometry/support/aaBoundingBox.js\";import{BufferViewVec3f as o}from\"../../../../geometry/support/buffer/BufferView.js\";import{newLayout as u}from\"../../support/buffer/InterleavedLayout.js\";import{ShaderOutput as l}from\"../core/shaderLibrary/ShaderOutputOptions.js\";import{CullFaceOptions as c}from\"../lib/basicInterfaces.js\";import h from\"../lib/GLMaterial.js\";import{outputFromPass as p}from\"../lib/GLMaterials.js\";import{DefaultMaterialParameters as f,Material as m}from\"../lib/Material.js\";import{RenderSlot as d}from\"../lib/RenderSlot.js\";import{assert as b}from\"../lib/Util.js\";import{VertexAttribute as E}from\"../lib/VertexAttribute.js\";import{writeDefaultAttributes as g,writePosition as T}from\"./internal/bufferWriterUtils.js\";import{intersectTriangleGeometry as S}from\"./internal/MaterialUtil.js\";import{ShadedColorMaterialTechniqueConfiguration as A,ShadedColorMaterialVertexAttrLocations as P,ShadedColorMaterialTechnique as v}from\"../shaders/ShadedColorMaterialTechnique.js\";class F extends m{constructor(e){super(e,C),this.supportsEdges=!0,this.techniqueConfig=new A,this._vertexAttributeLocations=P}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.parameters.cullFace,this.techniqueConfig.slicePlaneEnabled=this.parameters.slicePlaneEnabled,this.techniqueConfig.transparent=this.parameters.transparent,this.techniqueConfig.writeDepth=this.parameters.writeDepth,this.techniqueConfig.screenSizeEnabled=this.parameters.screenSizeEnabled,this.techniqueConfig.shadingEnabled=this.parameters.shadingEnabled,this.techniqueConfig.transparencyPassType=t.transparencyPassType,this.techniqueConfig.multipassTerrainEnabled=t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=t.cullAboveGround,this.techniqueConfig}getPassParameters(){return this.parameters}intersect(e,s,o,u,l,c,h){if(this.parameters.screenSizeEnabled){const o=e.vertexAttributes.get(E.OFFSET),p={applyToVertex:(e,s,a,n)=>{const l=t(j,o.data[3*n+0],o.data[3*n+1],o.data[3*n+2]),c=t(x,e,s,a);return r(l,l,this.parameters.screenSize*u.camera.computeRenderPixelSizeAt(l)),i(c,c,l),[c[0],c[1],c[2]]},applyToAabb:e=>{const t=a(e,j);return n(e,this.parameters.screenSize*u.camera.computeRenderPixelSizeAt(t))}};S(e,s,u,l,c,p,h)}else S(e,s,u,l,c,void 0,h)}requiresSlot(e,t){if(p(t)===l.Highlight)return e===d.OPAQUE_MATERIAL;let r=d.OPAQUE_MATERIAL;return this.parameters.transparent&&(r=this.parameters.writeDepth?d.TRANSPARENT_MATERIAL:d.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL),e===r||e===d.DRAPED_MATERIAL}createGLMaterial(e){return e.output===l.Color||e.output===l.Alpha||e.output===l.Highlight?new q(e):null}createBufferWriter(){return new O(this.parameters.screenSizeEnabled)}}class q extends h{updateParameters(e){return this.ensureTechnique(v,e)}beginSlot(e){return this.updateParameters(e)}bind(e,t){t.bindPass(this._material.getPassParameters(),e)}}const C={color:[1,1,1,1],shadingTint:[0,0,0,.25],shadingDirection:e(s(),[.5,-.5,-.5]),transparent:!1,writeDepth:!0,slicePlaneEnabled:!1,cullFace:c.None,screenSizeEnabled:!1,screenSize:14,shadingEnabled:!0,...f};class O{constructor(e){this.screenSizeEnabled=e;const t=u().vec3f(E.POSITION).vec3f(E.NORMAL);this.screenSizeEnabled&&t.vec3f(E.OFFSET),this.vertexBufferLayout=t}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return e.indices.get(E.POSITION).length}write(e,t,r,i){if(g(t,this.vertexBufferLayout,e.transformation,e.invTranspTransformation,r,i),this.screenSizeEnabled){if(!t.vertexAttributes.has(E.OFFSET))throw new Error(`${E.OFFSET} vertex attribute required for screenSizeEnabled ShadedColorMaterial`);{const s=t.vertexAttributes.get(E.OFFSET),a=t.indices.get(E.OFFSET);b(3===s.size);const n=r.getField(E.OFFSET,o);if(!n)throw new Error(\"unable to acquire view for \"+E.OFFSET);T(a,s.data,e.invTranspTransformation,n,i)}}}}const j=s(),x=s();export{F as ShadedColorMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../core/maybe.js\";import{a as r}from\"../../../chunks/mat4.js\";import{f as n,c as o,m as a,n as c}from\"../../../chunks/vec3.js\";import{f as i}from\"../../../chunks/vec4f64.js\";import{sv3d as s,sm4d as l}from\"../../../geometry/support/vectorStacks.js\";import{hydrateGeometry as m}from\"../../../layers/graphics/hydratedFeatures.js\";import{Manipulator3D as p}from\"./Manipulator3D.js\";import{computeCentroid as u}from\"../layers/graphics/graphicUtils.js\";import{CullFaceOptions as g}from\"../webgl-engine/lib/basicInterfaces.js\";import f from\"../webgl-engine/lib/GeometryUtil.js\";import{RenderOccludedFlag as h}from\"../webgl-engine/lib/Material.js\";import{ColorMaterial as d}from\"../webgl-engine/materials/ColorMaterial.js\";import{ShadedColorMaterial as j}from\"../webgl-engine/materials/ShadedColorMaterial.js\";function w(e,t=h.OccludeAndTransparent,r=!0){const n=i(e[0],e[1],e[2],e.length>3?e[3]:1),o=e[3]<1;return r?new j({color:n,transparent:o,writeDepth:!0,cullFace:g.Back,renderOccluded:t}):new d({color:n,transparent:o,writeDepth:!0,cullFace:g.Back,renderOccluded:t})}function b(e,t=h.OccludeAndTransparent){const r=i(e[0],e[1],e[2],4===e.length?e[3]:1);return new d({color:r,transparent:!0,writeDepth:!0,cullFace:g.Front,renderOccluded:t})}function y(e,t,r){return new p({view:e,renderObjects:[{geometry:f.createSphereGeometry(1,32,32),material:w(i(t[0],t[1],t[2],null!=r?r:1))}]})}function O(e,t,c,i){const m=n(s.get(),e,c),p=k(m,o(s.get(),i,m),c,l.get());r(p,p);const u=a(s.get(),t,p);return Math.atan2(u[1],u[0])}function k(e,t,r,n){const a=c(s.get(),e),i=c(s.get(),t),l=o(s.get(),a,i);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=0,n[4]=i[0],n[5]=i[1],n[6]=i[2],n[7]=0,n[8]=l[0],n[9]=l[1],n[10]=l[2],n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function F(t,r){const n=t.getViewForGraphic(r);return e(n)&&\"computeAttachmentOrigin\"in n?n.computeAttachmentOrigin(r,t.spatialReference):null}function v(t,r,n){const o=F(t,n);e(o)?r.elevationAlignedLocation=o:A(r,n.geometry)}function A(e,r){if(t(r))return;const n=\"mesh\"===r.type?r.anchor:u(r);t(n)||(e.location=m(n))}export{O as calculateInputRotationTransform,k as calculateTranslateRotateFromBases,w as createManipulatorMaterial,b as createManipulatorOutlineMaterial,y as createSphereManipulator,F as getGraphicAttachmentOrigin,v as placeAtGraphic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport o from\"../../../../../core/has.js\";import{deg2rad as t}from\"../../../../../core/mathUtils.js\";const r=o(\"mac\")?\"Meta\":\"Control\",s=\"Shift\",a=2,c=1.15,m=1.15,h=1.1,e=2500,i=.02,f=Math.cos(t(45)),p=Math.cos(t(5)),M=.95,j=.3,l=.7,n=[1,.5,0],x=2,C=1,S=[...n,l],U=[0,0,0,.04],b=[...n,.5],d=[...n,1],g=[1,1,1,1],k=[1,.8,.6,1],q=[1,.93,.86,1],u=[...n,1],v=[...n,1],w=3,y=11,z=22.5,A=40,B=48,D=2.25,E=[...n,1],F=4,G=1,H=.3,I=6,J=4,K=12,L=40,N=27,O=1600,P=.4;export{a as DISPLAY_FOCUS_MULTIPLIER,b as GRID_COLOR,i as INITIAL_DEPTH_OFFSET_FRAC,P as INITIAL_PLANE_HALF_SIZE_VIEW_PROPORTION,U as PLANE_BACKGROUND_COLOR,O as PLANE_MIN_BASIS_SCREEN_LEN2,S as PLANE_OUTLINE_COLOR,C as PLANE_OUTLINE_WIDTH,x as PLANE_PREVIEW_OUTLINE_WIDTH,e as POINTER_MOVE_TIMER_MS,M as PREVIEW_FADE_DOT_THRESHOLD,j as PREVIEW_FADE_DURATION_SECONDS,E as RESIZE_HANDLE_COLOR,I as RESIZE_HANDLE_CORNER_INPUT_RADIUS,F as RESIZE_HANDLE_CORNER_WIDTH,J as RESIZE_HANDLE_EDGE_INPUT_RADIUS,H as RESIZE_HANDLE_EDGE_PADDING_FRAC,G as RESIZE_HANDLE_EDGE_WIDTH,d as ROTATE_HEADING_CALLOUT_COLOR,N as ROTATE_HEADING_DISC_RADIUS,h as ROTATE_HEADING_DISC_RADIUS_FOCUS_MULTIPLIER,L as ROTATE_HEADING_OFFSET_DISTANCE,K as ROTATE_HEADING_TIP_LENGTH,k as SHIFT_RESTART_ARROW_CAP_COLOR,B as SHIFT_RESTART_ARROW_LENGTH,D as SHIFT_RESTART_ARROW_OUTLINE_WIDTH,g as SHIFT_RESTART_ARROW_TIP_COLOR,u as SHIFT_RESTART_CALLOUT_COLOR,A as SHIFT_RESTART_OFFSET_DISTANCE,v as SHIFT_RESTART_OUTLINE_COLOR,m as SHIFT_RESTART_TIP_FOCUS_MULTIPLIER,z as SHIFT_RESTART_TIP_LENGTH,y as SHIFT_RESTART_TIP_RADIUS,q as SHIFT_RESTART_TUBE_COLOR,c as SHIFT_RESTART_TUBE_FOCUS_MULTIPLIER,w as SHIFT_RESTART_TUBE_RADIUS,p as SMALL_ANGLE_DOT_THRESHOLD,f as VERTICAL_DOT_THRESHOLD,r as forceHorizontalModifier,s as forceVerticalModifier};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{bindProjectionMatrix as r,bindView as e}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as i}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as o}from\"../core/shaderTechnique/ShaderTechnique.js\";import{Default3D as t}from\"../lib/DefaultVertexAttributeLocations.js\";import{Program as a}from\"../lib/Program.js\";import{S as s}from\"../../../../chunks/SlicePlaneMaterial.glsl.js\";import{BlendFactor as l,CompareFunction as m}from\"../../../webgl/enums.js\";import{makePipelineState as n,separateBlendingParams as d,defaultColorWriteParams as g}from\"../../../webgl/renderState.js\";class h extends o{initializeProgram(r){const e=h.shader.get().build();return new a(r.rctx,e,t)}bindPass(e,i){r(this.program,i.camera.projectionMatrix),this.program.setUniform4fv(\"backgroundColor\",e.backgroundColor),this.program.setUniform4fv(\"gridColor\",e.gridColor),this.program.setUniform1f(\"gridWidth\",e.gridWidth)}bindDraw(r){e(this.program,r),this.program.rebindTextures()}initializePipeline(){return n({blending:d(l.ONE,l.ONE,l.ONE_MINUS_SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA),depthTest:{func:m.LESS},colorWrite:g})}}h.shader=new i(s,(()=>import(\"./SlicePlaneMaterial.glsl.js\")));export{h as SlicePlaneMaterialTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{unwrap as r}from\"../../../../core/maybe.js\";import{ShaderOutput as e}from\"../core/shaderLibrary/ShaderOutputOptions.js\";import{ShaderTechniqueConfiguration as t}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import i from\"../lib/GLMaterial.js\";import{Material as o,DefaultMaterialParameters as n}from\"../lib/Material.js\";import{RenderSlot as s}from\"../lib/RenderSlot.js\";import{DefaultBufferWriter as a,PositionUVLayout as u}from\"./internal/DefaultBufferWriter.js\";import{intersectTriangleGeometry as l}from\"./internal/MaterialUtil.js\";import{SlicePlaneMaterialTechnique as c}from\"../shaders/SlicePlaneMaterialTechnique.js\";class m extends o{constructor(r){super(r,f),this._config=new t}intersect(r,e,t,i,o,n,s){return l(r,e,i,o,n,void 0,s)}createBufferWriter(){return new a(u)}requiresSlot(r){return r===s.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL}createGLMaterial(r){return r.output===e.Color?new h(r):null}getTechniqueConfig(){return this._config}}class h extends i{constructor(r){super(r),this.ensureTechnique(c,null)}updateParameters(){return r(this.technique)}beginSlot(){return r(this.technique)}bind(r,e){e.bindPass(this._material.parameters,r)}}const f={backgroundColor:[1,0,0,.5],gridColor:[0,1,0,.5],gridWidth:4,...n};export{m as SlicePlaneMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as r}from\"../../../../core/maybe.js\";import{c as e}from\"../../../../chunks/vec4.js\";import{f as t}from\"../../../../chunks/vec4f32.js\";import{Object3DVisualElement as i}from\"./Object3DVisualElement.js\";import a from\"../../webgl-engine/lib/GeometryUtil.js\";import{RenderOccludedFlag as s}from\"../../webgl-engine/lib/Material.js\";import{SlicePlaneMaterial as d}from\"../../webgl-engine/materials/SlicePlaneMaterial.js\";class l extends i{constructor(r){super(r),this._material=null,this._renderOccluded=s.OccludeAndTransparent,this._gridWidth=1,this._gridColor=t(1,0,0,1),this._backgroundColor=t(1,0,0,1),this.applyProps(r)}get renderOccluded(){return this._renderOccluded}set renderOccluded(r){r!==this._renderOccluded&&(this._renderOccluded=r,this._updateMaterial())}get gridWidth(){return this._gridWidth}set gridWidth(r){this._gridWidth!==r&&(this._gridWidth=r,this._updateMaterial())}get gridColor(){return this._gridColor}set gridColor(r){e(this._gridColor,r),this._updateMaterial()}get backgroundColor(){return this._backgroundColor}set backgroundColor(r){e(this._backgroundColor,r),this._updateMaterial()}createExternalResources(){this._material=new d(this.materialParameters)}destroyExternalResources(){this._material=null}forEachExternalMaterial(e){r(this._material)&&e(this._material)}createGeometries(e){if(r(this._material)){const r=a.createSquareGeometry();e.addGeometry(r,this._material)}}get materialParameters(){return{backgroundColor:this._backgroundColor,gridWidth:this._gridWidth,gridColor:this._gridColor,renderOccluded:this._renderOccluded}}_updateMaterial(){r(this._material)&&this._material.setParameters(this.materialParameters)}}export{l as SlicePlaneVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport\"../../../../../geometry.js\";import e from\"../../../../../analysis/SlicePlane.js\";import{neverReached as t}from\"../../../../../core/compilerUtils.js\";import r from\"../../../../../core/Logger.js\";import{rad2deg as s,deg2rad as i}from\"../../../../../core/mathUtils.js\";import{isNone as n,isSome as o}from\"../../../../../core/maybe.js\";import{castRenderScreenPointArray3 as a}from\"../../../../../core/screenUtils.js\";import{g as c,b as l,h as u,m as d,r as m,i as p,j as g,k as f}from\"../../../../../chunks/mat4.js\";import{c as b}from\"../../../../../chunks/mat4f64.js\";import{r as h}from\"../../../../../chunks/quat.js\";import{a as T,g as y,d as O,c as w,n as I,b as E,l as R,f as j,p as A,s as M,v as L}from\"../../../../../chunks/vec3.js\";import{a as P,c as k,f as C}from\"../../../../../chunks/vec3f64.js\";import{tryProjectWithZConversion as _}from\"../../../../../geometry/projection.js\";import{Axis as v}from\"../../../../../geometry/support/Axis.js\";import{r as N,f as U,i as V,c as S,n as x,u as G}from\"../../../../../chunks/boundedPlane.js\";import{fromPositionAndNormal as F,fromVectorsAndPoint as H}from\"../../../../../geometry/support/plane.js\";import{create as D}from\"../../../../../geometry/support/ray.js\";import{angleAroundAxis as z}from\"../../../../../geometry/support/vector.js\";import{sv3d as X,sm4d as Y,sq4d as Z}from\"../../../../../geometry/support/vectorStacks.js\";import{applyProjectionAndElevationAlignment as B}from\"../../../analysis/support/projectionUtils.js\";import{Manipulator3D as W}from\"../../Manipulator3D.js\";import{calculateTranslateRotateFromBases as q}from\"../../manipulatorUtils.js\";import{SHIFT_RESTART_TIP_RADIUS as $,RESIZE_HANDLE_EDGE_PADDING_FRAC as J,VERTICAL_DOT_THRESHOLD as K,SMALL_ANGLE_DOT_THRESHOLD as Q,PLANE_MIN_BASIS_SCREEN_LEN2 as ee,INITIAL_PLANE_HALF_SIZE_VIEW_PROPORTION as te,SHIFT_RESTART_OFFSET_DISTANCE as re,SHIFT_RESTART_ARROW_OUTLINE_WIDTH as se,SHIFT_RESTART_ARROW_TIP_COLOR as ie,SHIFT_RESTART_ARROW_CAP_COLOR as ne,SHIFT_RESTART_TUBE_COLOR as oe,SHIFT_RESTART_OUTLINE_COLOR as ae,SHIFT_RESTART_CALLOUT_COLOR as ce,ROTATE_HEADING_OFFSET_DISTANCE as le,ROTATE_HEADING_DISC_RADIUS as ue,ROTATE_HEADING_CALLOUT_COLOR as de,PLANE_OUTLINE_COLOR as me,PLANE_OUTLINE_WIDTH as pe,PLANE_BACKGROUND_COLOR as ge,GRID_COLOR as fe,RESIZE_HANDLE_CORNER_INPUT_RADIUS as be,RESIZE_HANDLE_EDGE_INPUT_RADIUS as he,ROTATE_HEADING_TIP_LENGTH as Te,ROTATE_HEADING_DISC_RADIUS_FOCUS_MULTIPLIER as ye,RESIZE_HANDLE_COLOR as Oe,DISPLAY_FOCUS_MULTIPLIER as we,RESIZE_HANDLE_EDGE_WIDTH as Ie,SHIFT_RESTART_ARROW_LENGTH as Ee,SHIFT_RESTART_TUBE_RADIUS as Re,SHIFT_RESTART_TIP_LENGTH as je,SHIFT_RESTART_TUBE_FOCUS_MULTIPLIER as Ae,SHIFT_RESTART_TIP_FOCUS_MULTIPLIER as Me,RESIZE_HANDLE_CORNER_WIDTH as Le}from\"./sliceToolConfig.js\";import{LineVisualElement as Pe}from\"../../visualElements/LineVisualElement.js\";import{SlicePlaneVisualElement as ke}from\"../../visualElements/SlicePlaneVisualElement.js\";import{RenderCoordsHelper as Ce}from\"../../../support/RenderCoordsHelper.js\";import{fromRender as _e}from\"../../../support/geometryUtils/ray.js\";import{CullFaceOptions as ve}from\"../../../webgl-engine/lib/basicInterfaces.js\";import{Geometry as Ne}from\"../../../webgl-engine/lib/Geometry.js\";import Ue from\"../../../webgl-engine/lib/GeometryUtil.js\";import{RenderOccludedFlag as Ve}from\"../../../webgl-engine/lib/Material.js\";import{VertexAttribute as Se}from\"../../../webgl-engine/lib/VertexAttribute.js\";import{ColorMaterial as xe}from\"../../../webgl-engine/materials/ColorMaterial.js\";import{ImageMaterial as Ge}from\"../../../webgl-engine/materials/ImageMaterial.js\";import{NativeLineMaterial as Fe}from\"../../../webgl-engine/materials/NativeLineMaterial.js\";import{RibbonLineMaterial as He}from\"../../../webgl-engine/materials/RibbonLineMaterial.js\";import{ManipulatorStateCustomFlags as De,ManipulatorStateFlags as ze}from\"../../../../interactive/interfaces.js\";import Xe from\"../../../../../geometry/Extent.js\";const Ye=r.getLogger(\"esri.views.3d.interactive.analysisTools.slice.sliceToolUtils\");function Ze(e,t,r,s,i,n,o,a){return Be(t,o.worldUpAtPosition(e,X.get()),i,n,a.basis1,a.basis2),T(a.basis1,a.basis1,r),T(a.basis2,a.basis2,s),y(a.origin,e),H(a.basis2,a.basis1,a.origin,a.plane),a}function Be(e,t,r,s,i,n){const o=O(e,t),a=X.get(),c=X.get();switch(s===Ct.HORIZONTAL_OR_VERTICAL?Math.abs(o)>K?Ct.HORIZONTAL:Ct.VERTICAL:s){case Ct.VERTICAL:{const s=Math.abs(o)<=Q?e:r.viewUp;w(a,s,t),y(c,t);break}case Ct.HORIZONTAL:w(a,r.viewUp,t),w(c,t,a);break;case Ct.TILTED:{const s=Math.abs(o)<=Q?t:r.viewUp;w(a,s,e),w(c,e,a);break}}const l=w(X.get(),a,c);O(l,r.viewForward)>0&&T(c,c,-1),I(i,a),I(n,c)}function We(e,t,r){const s=t.worldUpAtPosition(e.origin,X.get()),i=e.basis1,n=It(e,s),o=Math.round(n/Nt)*Nt;return N(e,o-n,i,r)}function qe(e,t,r,s,i,n){const o=y(X.get(),i.origin);E(o,o,T(X.get(),i.basis1,e.direction[0]<0?1:-1)),E(o,o,T(X.get(),i.basis2,e.direction[1]<0?1:-1));const a=R(i.basis1),c=R(i.basis2),l=j(X.get(),r,o),u=j(X.get(),t,o);let d=0,m=0;if(ut(e)){const t=lt(i),r=lt(n);d=a-.5*e.direction[0]*O(i.basis1,u)/a,m=c-.5*e.direction[1]*O(i.basis2,u)/c;const s=r/t;d*=s,m*=s}const p=d+.5*e.direction[0]*O(i.basis1,l)/a,g=m+.5*e.direction[1]*O(i.basis2,l)/c,f=T(X.get(),i.basis1,p/a),b=T(X.get(),i.basis2,g/c);(p<=0||at(n.origin,f,s)<=ee)&&y(f,n.basis1),(g<=0||at(n.origin,b,s)<=ee)&&y(b,n.basis2);const h=y(X.get(),o);return E(h,h,T(X.get(),f,e.direction[0]<0?-1:1)),E(h,h,T(X.get(),b,e.direction[1]<0?-1:1)),U(h,f,b,n)}function $e(e,t){return te*Math.min(t.width,t.height)*t.computeRenderPixelSizeAt(e)}function Je(e,t,r,s){const i=w(X.get(),t,r);return w(i,i,t),F(e,i,s)}function Ke(e,t){return q(e.basis1,e.basis2,e.origin,t)}function Qe(e,t,r,s){const i=t.worldUpAtPosition(e.origin,X.get()),n=X.get();switch(r){case kt.HEADING:y(n,i);break;case kt.TILT:y(n,e.basis1)}return F(e.origin,n,s)}function et(e,t,r,s){const i=ot(r,nt.NEGATIVE_X),n=Y.get();c(n,t,i.edge*Math.PI/2);const o=I(X.get(),i.basis);let l=T(X.get(),o,i.direction*s.computeScreenPixelSizeAt(i.position)*re);E(l,l,i.position);const u=s.projectToRenderScreen(l,a(X.get())),d=tt(s,u);_e(s,u,vt),I(vt.direction,vt.direction);const m=X.get();!d&&V(r,vt,m)&&(l=m),n[12]=0,n[13]=0,n[14]=0,e.modelTransform=n,e.renderLocation=P(l),d?e.state|=_t:e.state&=~_t}function tt(e,t){const[r,s,i,n]=e.viewport,o=Math.min(i,n)/16;let a=!0;return t[0]<r+o?(t[0]=r+o,a=!1):t[0]>r+i-o&&(t[0]=r+i-o,a=!1),t[1]<s+o?(t[1]=s+o,a=!1):t[1]>s+n-o&&(t[1]=s+n-o,a=!1),a}function rt(e,t,r,s){const i=R(s.basis1),n=R(s.basis2),o=ct(s),a=lt(s),c=M(X.get(),0,0,0);E(c,T(X.get(),s.basis1,t.direction[0]),T(X.get(),s.basis2,t.direction[1])),E(c,s.origin,c);let m=0,p=1;if(ut(t))1===t.direction[0]&&-1===t.direction[1]?m=Nt:1===t.direction[0]&&1===t.direction[1]?m=Math.PI:-1===t.direction[0]&&1===t.direction[1]&&(m=3*Math.PI/2),p=a;else{const e=0!==t.direction[0]?1:2;m=1===e?Nt:0,p=(1===e?n:i)-o}const g=l(Y.get(),m);u(g,g,M(X.get(),p,p,p)),d(g,r,g),g[12]=0,g[13]=0,g[14]=0,e.modelTransform=g,e.renderLocation=c}function st(e,t,r,s){const i=s.worldUpAtPosition(r.origin,X.get()),n=ot(r,nt.POSITIVE_X),o=l(Y.get(),n.edge*Math.PI/2);m(o,o,-It(r,i)),d(o,t,o),o[12]=0,o[13]=0,o[14]=0,e.modelTransform=o,e.renderLocation=n.position}function it(e,t,r){const s=ot(r,nt.POSITIVE_Y),i=l(Y.get(),s.edge*Math.PI/2);m(i,i,Nt),d(i,t,i),i[12]=0,i[13]=0,i[14]=0,e.modelTransform=i,e.renderLocation=s.position}var nt;function ot(e,t){switch(t){case nt.POSITIVE_X:return{basis:e.basis1,direction:1,position:E(X.get(),e.origin,e.basis1),edge:t};case nt.POSITIVE_Y:return{basis:e.basis2,direction:1,position:E(X.get(),e.origin,e.basis2),edge:t};case nt.NEGATIVE_X:return{basis:e.basis1,direction:-1,position:j(X.get(),e.origin,e.basis1),edge:t};case nt.NEGATIVE_Y:return{basis:e.basis2,direction:-1,position:j(X.get(),e.origin,e.basis2),edge:t}}}function at(e,t,r){const s=r.projectToRenderScreen(E(X.get(),e,t),a(X.get())),i=r.projectToRenderScreen(j(X.get(),e,t),a(X.get()));return A(j(s,s,i))}function ct(e){const t=R(e.basis1),r=R(e.basis2);return J*Math.min(t,r)}function lt(e){return ct(e)}function ut(e){return 0!==e.direction[0]&&0!==e.direction[1]}function dt(e,t=St.CENTER_ON_ARROW){const r=t===St.CENTER_ON_CALLOUT?re:0,s=[C(r,0,-Ee/2),C(r,0,Ee/2)],i=Tt(s,!0),n=(e,t)=>bt(s,s,{tubeRadius:Re,tipRadius:$,tipLength:je,tubeFocusMultiplier:Ae,tipFocusMultiplier:Me,padding:e,bothEnds:!0,flat:null,focusTipLength:!0,addCap:t}),o=n(0,!1),a=n(se,!0),c=new xe({color:ie,cullFace:ve.Back,renderOccluded:Ve.Opaque}),l=new xe({color:ne,cullFace:ve.Back,renderOccluded:Ve.Opaque}),u=new xe({color:oe,cullFace:ve.Back,renderOccluded:Ve.Opaque}),d=new xe({color:ae,transparent:!0,writeDepth:!1,cullFace:ve.Front,renderOccluded:Ve.Transparent}),m=Ue.createPolylineGeometry([[r,0,0],[r-re,0,0]]),p=Ue.createPolylineGeometry([[r,0,0],[r-re,0,0]]),g=new Fe({color:ce,renderOccluded:Ve.OccludeAndTransparent});return new W({view:e,renderObjects:[...o.normal.map((({part:e,geometry:t,transform:r})=>({geometry:t,material:\"tip\"===e?c:\"cap\"===e?l:u,transform:r,stateMask:ze.Unfocused|Pt}))),...a.normal.map((({geometry:e,transform:t})=>({geometry:e,material:d,transform:t,stateMask:ze.Unfocused|Pt}))),{geometry:m,material:g,stateMask:ze.Unfocused|Pt|_t},...o.focused.map((({part:e,geometry:t,transform:r})=>({geometry:t,material:\"tip\"===e?c:\"cap\"===e?l:u,transform:r,stateMask:ze.Focused|Pt}))),...a.focused.map((({geometry:e,transform:t})=>({geometry:e,material:d,transform:t,stateMask:ze.Focused|Pt}))),{geometry:p,material:g,stateMask:ze.Focused|Pt|_t}],autoScaleRenderObjects:!1,collisionType:{type:\"line\",paths:[i]},collisionPriority:1,radius:$,state:Pt})}function mt(e,t){const r=new Ge({transparent:!0,writeDepth:!1,textureId:t.id,renderOccluded:Ve.Opaque}),s=le,i=ue,n=i*ye,o=e=>{const t=new Uint32Array([0,1,2,2,3,0]);return new Ne([[Se.POSITION,{size:3,data:[s-e,-e,0,s+e,-e,0,s+e,e,0,s-e,e,0],exclusive:!0}],[Se.UV0,{size:2,data:[0,0,1,0,1,1,0,1]}]],[[Se.POSITION,t],[Se.UV0,t]])},a=Ue.createPolylineGeometry([[0,0,0],[s-i,0,0]]),c=Ue.createPolylineGeometry([[0,0,0],[s-n,0,0]]),l=new Fe({color:de,renderOccluded:Ve.OccludeAndTransparent}),u=[{geometry:o(i),material:r,stateMask:ze.Unfocused|Pt},{geometry:a,material:l,stateMask:ze.Unfocused|Pt},{geometry:o(n),material:r,stateMask:ze.Focused|Pt},{geometry:c,material:l,stateMask:ze.Focused|Pt}];return new W({view:e,renderObjects:u,autoScaleRenderObjects:!1,collisionType:{type:\"disc\",direction:[0,0,1],offset:[s,0,0]},collisionPriority:1,radius:i/2,state:Pt})}function pt(e){const t=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0],[-1,-1,0]];return new Pe({view:e,attached:!0,color:me,width:pe,writeDepthEnabled:!1,renderOccluded:Ve.OccludeAndTransparent,geometry:[t]})}function gt(e){return new ke({view:e,attached:!0,backgroundColor:[...ge],gridColor:fe,gridWidth:4,renderOccluded:Ve.OccludeAndTransparent})}function ft(e,t){const r=ut(t),s=r?[C(1,0,0),C(0,0,0),C(0,1,0)]:[C(1,0,0),C(-1,0,0)],i=Ue.createPolylineGeometry(s),n=Oe,o=e=>new He({color:n,width:e,renderOccluded:Ve.OccludeAndTransparent}),a=()=>new Fe({color:n,renderOccluded:Ve.OccludeAndTransparent}),c=r?Le:Ie,l=c*we,u=Ie,d=e=>e>1?o(e):a(),m=[{geometry:i,material:d(c),stateMask:ze.Unfocused|Ut},{geometry:i,material:d(l),stateMask:ze.Focused|Ut},{geometry:i,material:d(u),stateMask:Vt}],p=new W({view:e,renderObjects:m,collisionType:{type:\"line\",paths:[s]},autoScaleRenderObjects:!1,worldSized:!0,radius:r?be:he});return p.state=Ut,p}function bt(e,t,r){const s=s=>{const i=(s?t:e).slice(0),n=j(X.get(),i[0],i[1]);I(n,n);const a=j(X.get(),i[i.length-1],i[i.length-2]);if(I(a,a),r.padding>0){const e=T(k(),a,-r.padding);if(i[i.length-1]=E(e,e,i[i.length-1]),r.bothEnds){const e=T(k(),n,-r.padding);i[0]=E(e,e,i[0])}}const c=s?r.tipFocusMultiplier:1,l=r.tipLength*(r.focusTipLength?c:1),m=r.tipRadius*c,y=p(Y.get());if(r.padding>0){const e=l/4,t=M(X.get(),0,e,0),s=1+r.padding/e;g(y,y,t),u(y,y,M(X.get(),s,s,s)),g(y,y,T(t,t,-1/s))}const O=p(b()),w=C(0,1,0),R=f(b(),h(Z.get(),w,a));R[12]=i[i.length-1][0],R[13]=i[i.length-1][1],R[14]=i[i.length-1][2],d(R,R,y);const A=[{part:\"tube\",geometry:ht(r.tubeRadius*(s?r.tubeFocusMultiplier:1)+r.padding,r.flat,i),transform:O}];let L,P;if(o(r.flat)?L=Ue.createExtrudedTriangle(l,m,m,r.flat.thickness):(L=Ue.createConeGeometry(l,m,24,!1,!1,!0),P=Ue.createConeGeometry(l,m,24,!1,!0,!1)),A.push({part:\"tip\",geometry:L,transform:R}),P&&A.push({part:\"cap\",geometry:P,transform:R}),r.bothEnds){const e=f(b(),h(Z.get(),w,n));e[12]=i[0][0],e[13]=i[0][1],e[14]=i[0][2],d(e,e,y),A.push({part:\"tip\",geometry:L,transform:e}),P&&A.push({part:\"cap\",geometry:P,transform:e})}return A};return{normal:s(!1),focused:s(!0)}}function ht(e,t,r){const s=[];if(o(t))s.push([e,t.thickness/2],[-e,t.thickness/2],[-e,-t.thickness/2],[e,-t.thickness/2]);else{const t=12;for(let r=0;r<t;r++){const i=r/t*2*Math.PI;s.push([Math.cos(i)*e,Math.sin(i)*e])}}return Ue.createPathExtrusionGeometry(s,r,[],[],!1)}function Tt(e,t){const r=j(k(),e[e.length-1],e[e.length-2]);if(I(r,r),T(r,r,Te),E(r,r,e[e.length-1]),t){const t=j(k(),e[0],e[1]);return I(t,t),T(t,t,Te),E(t,t,e[0]),[t,...e,r]}return[...e,r]}function yt(t,r,i,o=new e){if(n(t))return null;const{renderCoordsHelper:a}=r,c=a.fromRenderCoords(t.origin,r.spatialReference);if(n(c))return null;const l=_(c,i);if(n(l))return null;o.position=l;const u=a.worldUpAtPosition(t.origin,X.get()),d=a.worldBasisAtPosition(t.origin,v.Y,X.get()),m=2*R(t.basis1),p=2*R(t.basis2),g=Ce.renderUnitScaleFactor(r.spatialReference,i);return o.width=m*g,o.height=p*g,o.tilt=s(It(t,u)),o.heading=s(Et(t,u,d)),o}function Ot(e,t,r){if(n(e)||n(e.position))return null;const{spatialReference:s}=e.position,i=wt(At(e,{renderCoordsHelper:t,spatialReference:s},r),t,s);return!e.position.hasZ&&o(i)&&(i.zmin=null,i.zmax=null),i}function wt(e,t,r){if(n(e))return null;const s=e.origin,i=X.get(),o=X.get(),a=X.get(),c=X.get();let l,u,d,m,p,g;E(i,s,e.basis1),E(i,i,e.basis2),E(o,s,e.basis1),L(o,o,e.basis2),L(a,s,e.basis1),L(a,a,e.basis2),L(c,s,e.basis1),E(c,c,e.basis2);for(const f of[i,o,a,c]){const e=t.fromRenderCoords(f,f,r);if(n(e))return null;l=null==l?e[0]:Math.min(l,e[0]),u=null==u?e[0]:Math.max(u,e[0]),d=null==d?e[1]:Math.min(d,e[1]),m=null==m?e[1]:Math.max(m,e[1]),p=null==p?e[2]:Math.min(p,e[2]),g=null==g?e[2]:Math.max(g,e[2])}return new Xe({xmin:l,xmax:u,ymin:d,ymax:m,zmin:p,zmax:g,spatialReference:r})}function It(e,t){return z(t,e.basis2,e.basis1)+Nt}function Et(e,t,r){return z(e.basis1,r,t)-Nt}function Rt(e,t,r,s,n,o,a=S()){return o.toRenderCoords(e,a.origin)?(o.worldBasisAtPosition(a.origin,v.X,a.basis1),o.worldBasisAtPosition(a.origin,v.Y,a.basis2),H(a.basis2,a.basis1,a.origin,a.plane),N(a,-i(t),x(a),a),N(a,i(r),a.basis1,a),T(a.basis1,a.basis1,s/2),T(a.basis2,a.basis2,n/2),G(a),a):(Ye.error(`Failed to project slice plane position, projection from ${e.spatialReference.wkid} is not supported`),null)}function jt(e,t){if(n(e)||n(e.position))return null;const r=B(e.position,t.spatialReference,t.elevationProvider);if(n(r))return null;const s=Ce.renderUnitScaleFactor(e.position.spatialReference,t.spatialReference),i=e.width*s,o=e.height*s;return{position:r,heading:e.heading,tilt:e.tilt,renderWidth:i,renderHeight:o}}function At(e,t,r,s=S()){const i=jt(e,t);return n(i)?null:Mt(i,t,r,s)}function Mt(e,t,r,s=S()){if(n(e))return null;const i=Rt(e.position,e.heading,e.tilt,e.renderWidth,e.renderHeight,t.renderCoordsHelper,s);return!r.tiltEnabled&&o(i)&&We(i,t.renderCoordsHelper,i),i}function Lt(e){switch(e.type){case\"analysis\":case\"building-scene\":case\"csv\":case\"feature\":case\"geo-rss\":case\"geojson\":case\"graphics\":case\"group\":case\"integrated-mesh\":case\"kml\":case\"map-notes\":case\"ogc-feature\":case\"point-cloud\":case\"route\":case\"scene\":case\"stream\":case\"voxel\":case\"subtype-group\":case\"unknown\":case\"unsupported\":case\"wfs\":case null:return!1;case\"base-dynamic\":case\"base-elevation\":case\"base-tile\":case\"bing-maps\":case\"elevation\":case\"imagery\":case\"imagery-tile\":case\"map-image\":case\"open-street-map\":case\"tile\":case\"vector-tile\":case\"wcs\":case\"web-tile\":case\"wms\":case\"wmts\":return!0;default:return t(e.type),!1}}!function(e){e[e.POSITIVE_X=0]=\"POSITIVE_X\",e[e.POSITIVE_Y=1]=\"POSITIVE_Y\",e[e.NEGATIVE_X=2]=\"NEGATIVE_X\",e[e.NEGATIVE_Y=3]=\"NEGATIVE_Y\"}(nt||(nt={}));const Pt=De.Custom1;var kt,Ct;!function(e){e[e.HEADING=1]=\"HEADING\",e[e.TILT=2]=\"TILT\"}(kt||(kt={})),function(e){e[e.HORIZONTAL_OR_VERTICAL=0]=\"HORIZONTAL_OR_VERTICAL\",e[e.HORIZONTAL=1]=\"HORIZONTAL\",e[e.VERTICAL=2]=\"VERTICAL\",e[e.TILTED=3]=\"TILTED\"}(Ct||(Ct={}));const _t=De.Custom2,vt=D(),Nt=Math.PI/2,Ut=De.Custom1,Vt=De.Custom2;var St;function xt(e){const t=\"building-scene-3d\"===e.type?e:null;return o(t)}!function(e){e[e.CENTER_ON_CALLOUT=0]=\"CENTER_ON_CALLOUT\",e[e.CENTER_ON_ARROW=1]=\"CENTER_ON_ARROW\"}(St||(St={}));export{Pt as DidPointerMoveRecentlyFlag,_t as IsShiftEdgeOnScreenFlag,St as OffsetMode,kt as RotationAxis,Ct as SliceOrientation,Tt as addArrowTips,Ke as calculateBoundedPlaneTranslateRotate,lt as calculateDiagonalResizeHandleScale,$e as calculatePlaneHalfSize,ct as calculateResizeHandlePadding,at as calculateScreenSpaceBasisLength2,bt as createArrowGeometry,gt as createGridVisualElement,pt as createOutlineVisualElement,Ze as createPlane,ft as createResizeManipulator,mt as createRotateManipulator,Qe as createRotatePlane,dt as createShiftManipulator,Je as createShiftPlane,We as forceHorizontalOrVertical,Lt as isAlwaysDrapedLayer,ut as isDiagonalResizeHandle,xt as isIBuildingSceneLayerView3D,Be as normalToBases,wt as planeToExtent,yt as planeToShape,jt as projectAndElevationAlignShape,Mt as projectedShapeToPlane,Ut as resizeNormal,Vt as resizeOutlineOnly,qe as resizePlane,Ot as shapeToExtent,At as shapeToPlane,rt as updateResizeHandle,st as updateRotateHeadingHandle,it as updateRotateTiltHandle,et as updateShiftRestartHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import i from\"../../../../analysis/SlicePlane.js\";import t from\"../../../../core/Accessor.js\";import a from\"../../../../core/Handles.js\";import s from\"../../../../core/Logger.js\";import{isNone as l,isSome as n}from\"../../../../core/maybe.js\";import{watch as r}from\"../../../../core/reactiveUtils.js\";import{whenOnce as o}from\"../../../../core/watchUtils.js\";import{property as c}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as h}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c as d}from\"../../../../chunks/boundedPlane.js\";import y from\"../../../../layers/Layer.js\";import u from\"../../../../layers/buildingSublayers/BuildingComponentSublayer.js\";import{logFailedGeometryProjectionError as p}from\"../support/projectionUtils.js\";import{isAlwaysDrapedLayer as w,isIBuildingSceneLayerView3D as v,projectAndElevationAlignShape as f,projectedShapeToPlane as m,planeToShape as _}from\"../../interactive/analysisTools/slice/sliceToolUtils.js\";const V=s.getLogger(\"esri.views.3d.analysis.Slice.SliceController\");let g=class extends t{constructor(e){super(e),this._handles=new a,this._internalChange=!1,this._currentSlicePlane=null,this.state=\"ready\"}get ready(){return\"ready\"===this.state}initialize(){this._handles.add(this.analysis.excludedLayers.on(\"before-add\",(e=>{const i=e.item;null!=i&&(i instanceof y||i instanceof u)?i instanceof y&&w(i)?(V.error(\"excludedLayers\",`Layer '${i.title}, id:${i.id}' of type '${i.type}' can not be individually excluded from slicing. Use 'excludeGroundSurface' instead.`),e.preventDefault()):this.analysis.excludedLayers.includes(i)&&e.preventDefault():(V.error(\"excludedLayers\",\"Invalid layer type, layer must derive from Layer or BuildingComponentSublayer\"),e.preventDefault())}))),C(this.view,this),this._handles.add([r((()=>this.analysisViewData.plane),(()=>{this._internalChange||this._updateSlicePlaneFromBoundedPlane(),this._updateLayerViews()}),{sync:!0}),r((()=>this.analysis.excludeGroundSurface),(()=>this._updateLayerViews()),{sync:!0}),this.analysis.excludedLayers.on(\"change\",(()=>this._updateLayerViews())),r((()=>[this.analysisViewData.active,this.analysisViewData.visible]),(()=>{this._updateActiveController(),this._updateViewSlicePlane()}),{sync:!0}),r((()=>this._allLayerAndSubLayerViews),(()=>this._updateLayerViews()))]),this._handles.add([r((()=>this.analysis.shape),(()=>{this._internalChange||(this._updateBoundedPlaneFromSlicePlane(),this._updateViewSlicePlane())}),{sync:!0})],\"analysis\"),this._set(\"state\",\"ready\"),this._updateActiveController(),this._updateBoundedPlaneFromSlicePlane(),this._updateViewSlicePlane()}destroy(){\"destroyed\"!==this.state&&(this.analysisViewData.active&&(this.analysisViewData.active=!1,this.view.slicePlane=null),j(this.view,this),this._handles.destroy(),this.set(\"view\",null),this._set(\"state\",\"destroyed\"))}async whenReady(){return await o(this,\"ready\"),this}get _allLayerAndSubLayerViews(){const e=this.view.allLayerViews.items;return e.concat(e.filter(v).flatMap((({sublayerViews:e})=>e.items)))}_updateBoundedPlaneFromSlicePlane(){const e=this.analysis.shape,i=this._currentSlicePlane;if(l(i)&&l(e)||n(i)&&n(e)&&e.equals(i))return;let t=null,a=null;if(n(e)&&n(e.position)){const i=e.position.spatialReference,s=f(e,this.view);l(s)&&p(this.analysis,i,V),t=m(s,this.view,{tiltEnabled:this.analysis.tiltEnabled},d()),n(t)&&(a={heading:e.heading,tilt:e.tilt,position:e.position,width:e.width,height:e.height})}this._currentSlicePlane=a,this._internalChange=!0,this.analysisViewData.plane=t,this._internalChange=!1}_updateSlicePlaneFromBoundedPlane(){const e=this.analysisViewData.plane,t=_(e,this.view,this.view.spatialReference,new i);let a=null;n(t)&&(a={heading:t.heading,tilt:t.tilt,position:t.position,width:t.width,height:t.height}),this._currentSlicePlane=a,this._internalChange=!0,this.analysis.shape=t,this._internalChange=!1,this._updateViewSlicePlane()}_updateActiveController(){if(b)return;const e=L(this.view);if(this.analysisViewData.active)n(e.activeController)&&e.activeController!==this?(b=!0,e.activeController.analysisViewData.active=!1,b=!1):n(e.activeController)&&e.activeController,this._updateLayerViews(),e.activeController=this;else{if(n(e.activeController)&&e.activeController!==this)return;n(e.activeController)&&e.activeController===this&&(e.activeController=null,this._updateLayerViews())}}_updateViewSlicePlane(){\"ready\"===this.state&&P(this.view)}_updateLayerViews(){const e=n(this.analysisViewData.plane)&&this.analysisViewData.visible&&this.analysisViewData.active,i=[],t=e=>{\"layers\"in e?e.layers.forEach(t):i.push(e)};this.analysis.excludedLayers.forEach(t),this.view.allLayerViews.forEach((t=>{t.destroyed||(\"slicePlaneEnabled\"in t&&(t.slicePlaneEnabled=e&&i.indexOf(t.layer)<0),\"sublayerViews\"in t&&t.sublayerViews.forEach((t=>{t.slicePlaneEnabled=e&&i.indexOf(t.sublayer)<0})))})),null!=this.view.basemapTerrain&&(this.view.basemapTerrain.slicePlaneEnabled=e&&!this.analysis.excludeGroundSurface)}};e([c({readOnly:!0})],g.prototype,\"state\",void 0),e([c()],g.prototype,\"view\",void 0),e([c()],g.prototype,\"analysis\",void 0),e([c()],g.prototype,\"analysisViewData\",void 0),e([c()],g.prototype,\"ready\",null),e([c()],g.prototype,\"_allLayerAndSubLayerViews\",null),g=e([h(\"esri.views.3d.analysis.Slice.SliceController\")],g);const S=new Map;let b=!1;function P(e){const i=L(e).activeController;n(i)&&n(i.analysisViewData.plane)&&i.analysisViewData.visible?e.slicePlane=i.analysisViewData.plane:e.slicePlane=null}function C(e,i){S.has(e)||S.set(e,{all:[],activeController:null}),S.get(e).all.push(i)}function L(e){return S.get(e)}function j(e,i){if(!S.has(e))throw new Error(\"view expected in global slice register\");const t=S.get(e),a=t.all.lastIndexOf(i);if(-1===a)throw new Error(\"controller expected in global slice register\");t.all.splice(a,1),0===t.all.length&&S.delete(e)}export{g as SliceController};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import i from\"../../../../core/Accessor.js\";import e from\"../../../../core/Handles.js\";import{isNone as s,isSome as a,destroyMaybe as r}from\"../../../../core/maybe.js\";import{watch as o,syncAndInitial as l}from\"../../../../core/reactiveUtils.js\";import{whenOnce as n}from\"../../../../core/watchUtils.js\";import{property as d}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as h}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{u as p,m}from\"../../../../chunks/mat4.js\";import{s as u,l as c}from\"../../../../chunks/vec3.js\";import{sv3d as y,sm4d as _}from\"../../../../geometry/support/vectorStacks.js\";import{PLANE_OUTLINE_COLOR as v,PLANE_OUTLINE_WIDTH as w,PLANE_PREVIEW_OUTLINE_WIDTH as V,PLANE_BACKGROUND_COLOR as f,GRID_COLOR as g}from\"../../interactive/analysisTools/slice/sliceToolConfig.js\";import{createGridVisualElement as b,createOutlineVisualElement as j,calculateBoundedPlaneTranslateRotate as E}from\"../../interactive/analysisTools/slice/sliceToolUtils.js\";import{createStipplePatternSimple as S}from\"../../webgl-engine/materials/lineStippleUtils.js\";let k=class extends i{constructor(t){super(t),this._handles=new e,this._gridVisualElement=null,this._outlineVisualElement=null,this.state=\"pending\",this.showGrid=!1,this.editable=!0}get ready(){return\"ready\"===this.state}initialize(){this._initialize()}async _initialize(){if(\"destroyed\"===this.state||\"ready\"===this.state)return;await n(this.view,\"ready\",!0);const t=this.analysisViewData;if(s(t))throw new Error(\"expected internal object to be valid\");this._gridVisualElement=b(this.view),this._outlineVisualElement=j(this.view),this._handles.add([o((()=>({visible:a(t.plane)&&this.analysisViewData.visible,active:this.analysisViewData.active,editable:this.editable,showGrid:this.showGrid})),(t=>this._updateMaterials(t)),l),o((()=>t.plane),(t=>this._updatePlane(t)),l)],\"internal\"),this._set(\"state\",\"ready\")}destroy(){\"destroyed\"!==this.state&&\"pending\"!==this.state&&(this._handles.destroy(),this._gridVisualElement=r(this._gridVisualElement),this._outlineVisualElement=r(this._outlineVisualElement),this.set(\"view\",null),this._set(\"state\",\"destroyed\"))}async whenReady(){return await n(this,\"ready\"),this}_updatePlane(t){if(s(t))return;const i=u(y.get(),c(t.basis1),c(t.basis2),1),e=p(_.get(),i),a=E(t,_.get()),r=m(e,a,e);this._outlineVisualElement.transform=r,this._gridVisualElement.transform=r}_updateMaterials({visible:t,active:i,editable:e,showGrid:s}){this._outlineVisualElement.color=v,this._outlineVisualElement.width=e?w:V,this._outlineVisualElement.stipplePattern=i?null:S(5);const a=s?g:[0,0,0,0];this._gridVisualElement.backgroundColor=f,this._gridVisualElement.gridColor=a,this._gridVisualElement.visible=t,this._outlineVisualElement.visible=t}};t([d({readOnly:!0})],k.prototype,\"state\",void 0),t([d()],k.prototype,\"view\",void 0),t([d()],k.prototype,\"analysis\",void 0),t([d()],k.prototype,\"analysisViewData\",void 0),t([d()],k.prototype,\"ready\",null),t([d()],k.prototype,\"showGrid\",void 0),t([d()],k.prototype,\"editable\",void 0),k=t([h(\"esri.views.3d.analysis.Slice.SliceVisualization\")],k);export{k as SliceVisualization};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../../chunks/tslib.es6.js\";import i from\"../../../core/Accessor.js\";import{destroyMaybe as a}from\"../../../core/maybe.js\";import{property as t}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{AnalysisView3D as e}from\"./AnalysisView3D.js\";import{SliceController as r}from\"./Slice/SliceController.js\";import{SliceVisualization as l}from\"./Slice/SliceVisualization.js\";let n=class extends(e(i)){constructor(s){super(s),this.type=\"slice-view-3d\",this.analysisVisualization=null,this.analysisController=null,this.plane=null,this.active=!0,this.showGrid=!1,this.editable=!1}initialize(){this.analysisVisualization=new l({view:this.view,analysis:this.analysis,analysisViewData:this}),this.analysisController=new r({view:this.view,analysis:this.analysis,analysisViewData:this})}destroy(){this.analysisVisualization=a(this.analysisVisualization),this.analysisController=a(this.analysisController)}async when(){return await this.analysisVisualization.whenReady(),await this.analysisController.whenReady(),this}get testData(){return{visualization:this.analysisVisualization,controller:this.analysisController}}};s([t()],n.prototype,\"type\",void 0),s([t()],n.prototype,\"analysis\",void 0),s([t()],n.prototype,\"plane\",void 0),s([t()],n.prototype,\"active\",void 0),s([t({aliasOf:\"analysisVisualization.showGrid\"})],n.prototype,\"showGrid\",void 0),s([t({aliasOf:\"analysisVisualization.editable\"})],n.prototype,\"editable\",void 0),n=s([o(\"esri.views.3d.analysis.SliceAnalysisView3D\")],n);const y=n;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isNone as o,isSome as e,unwrapOr as r}from\"../../../../core/maybe.js\";import{tryProjectWithZConversion as t}from\"../../../../geometry/projection.js\";import{getElevationAtPoint as i}from\"../../support/ElevationProvider.js\";function n(n,a,p,s=!1){const c=t(n,a);return o(c)?null:(c.hasZ&&!s||!e(p)||(c.z=r(i(p,c),0)),c)}function a(o,e,r){r.warnOnce(`Failed to project analysis geometry (id: '${o.id}'), projection from spatial reference (wkid: '${e.wkid}') to view spatial reference is not supported. Projection may be possible after calling projection.load().`)}export{n as applyProjectionAndElevationAlignment,a as logFailedGeometryProjectionError};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../core/maybe.js\";import{f as r}from\"../../../../chunks/mat4.js\";import{c as s}from\"../../../../chunks/mat4f64.js\";import{s as i}from\"../../../../chunks/vec3.js\";import{Z as o,c as n}from\"../../../../chunks/vec3f64.js\";import{g as l,c as h}from\"../../../../chunks/vec4.js\";import{f as a,c as p,a as d}from\"../../../../chunks/vec4f32.js\";import{Object3DVisualElement as f}from\"./Object3DVisualElement.js\";import{createGeometry as u,RemoveDuplicateStartEnd as _}from\"../../layers/graphics/lineUtils.js\";import{RenderOccludedFlag as c}from\"../../webgl-engine/lib/Material.js\";import{RibbonLineMaterial as m}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";class g extends f{constructor(e){super(e),this._renderOccluded=c.OccludeAndTransparent,this._width=1,this._color=a(1,0,1,1),this._innerWidth=1,this._innerColor=null,this._stipplePattern=null,this._stippleOffColor=null,this._stipplePreferContinuous=!0,this._writeDepthEnabled=!0,this._falloff=0,this._polygonOffset=!1,this.applyProps(e)}setGeometryFromRenderSpacePoint(e){const t=1e3,r=[];r.push([[e[0]-t,e[1]+0,e[2]+0],[e[0]+t,e[1]+0,e[2]+0]]),r.push([[e[0]-0,e[1]-t,e[2]+0],[e[0]+0,e[1]+t,e[2]+0]]),r.push([[e[0]-0,e[1]+0,e[2]-t],[e[0]+0,e[1]+0,e[2]+t]]),this.geometry=r}setGeometryFromExtent(e){const t=this.view.spatialReference,r=n(),s=n(),o=100,l=[];i(r,e[0],e[1],o),this.view.renderCoordsHelper.toRenderCoords(r,t,s),l.push([s[0],s[1],s[2]]),i(r,e[2],e[1],o),this.view.renderCoordsHelper.toRenderCoords(r,t,s),l.push([s[0],s[1],s[2]]),i(r,e[2],e[3],o),this.view.renderCoordsHelper.toRenderCoords(r,t,s),l.push([s[0],s[1],s[2]]),i(r,e[0],e[3],o),this.view.renderCoordsHelper.toRenderCoords(r,t,s),l.push([s[0],s[1],s[2]]),i(r,e[0],e[1],o),this.view.renderCoordsHelper.toRenderCoords(r,t,s),l.push([s[0],s[1],s[2]]),i(r,e[0],e[1],o),this.view.renderCoordsHelper.toRenderCoords(r,t,s),l.push([s[0],s[1],s[2]]),this.geometry=[l]}setGeometryFromFrustum(e){const t=[];e.lines.forEach((e=>{t.push([e.origin[0],e.origin[1],e.origin[2]]),t.push([e.endpoint[0],e.endpoint[1],e.endpoint[2]])})),this.geometry=[t]}setGeometryFromBoundedPlane(e){const t=[],r=e.origin,s=e.basis1,i=e.basis2,o=.5,l=n(),h=n(),a=n(),p=n();l[0]=r[0]-s[0]*o-i[0]*o,l[1]=r[1]-s[1]*o-i[1]*o,l[2]=r[2]-s[2]*o-i[2]*o,h[0]=r[0]-s[0]*o+i[0]*o,h[1]=r[1]-s[1]*o+i[1]*o,h[2]=r[2]-s[2]*o+i[2]*o,a[0]=r[0]+s[0]*o+i[0]*o,a[1]=r[1]+s[1]*o+i[1]*o,a[2]=r[2]+s[2]*o+i[2]*o,p[0]=r[0]+s[0]*o-i[0]*o,p[1]=r[1]+s[1]*o-i[1]*o,p[2]=r[2]+s[2]*o-i[2]*o,t.push([l[0],l[1],l[2]]),t.push([h[0],h[1],h[2]]),t.push([a[0],a[1],a[2]]),t.push([p[0],p[1],p[2]]),t.push([l[0],l[1],l[2]]),this.geometry=[t]}setGeometryFromSegment(e){const t=e.endRenderSpace;this.transform=r(C,t);const{points:s}=e.createRenderGeometry(t,this.view.renderCoordsHelper);this.geometry=[s]}setGeometryFromSegments(e,t=o){this.transform=r(C,t),this.geometry=e.map((e=>e.createRenderGeometry(t,this.view.renderCoordsHelper).points))}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){l(e,this._color)||(h(this._color,e),this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(r){e(r)?!t(this._innerColor)&&l(r,this._innerColor)||(this._innerColor=h(p(),r),this._updateMaterial()):e(this._innerColor)&&(this._innerColor=null,this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(t){const r=e(t)!==e(this._stipplePattern);this._stipplePattern=t,r?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(r){(t(r)||t(this._stippleOffColor)||!l(r,this._stippleOffColor))&&(this._stippleOffColor=e(r)?d(r):null,this._updateMaterial())}get stipplePreferContinuous(){return this._stipplePreferContinuous}set stipplePreferContinuous(e){this._stipplePreferContinuous!==e&&(this._stipplePreferContinuous=e,this._updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){e!==this._polygonOffset&&(this._polygonOffset=e,this._updateMaterial())}createExternalResources(){this._material=new m(this.materialParameters)}destroyExternalResources(){this._material=null}createGeometries(e){const t=this._createLineGeometries();if(0!==t.length)for(let r=0;r<t.length;++r){const s=u(t[r]);e.addGeometry(s,this._material)}}forEachExternalMaterial(e){e(this._material)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:this._stipplePreferContinuous,isClosed:!1,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}_updateMaterial(){this.attached&&this._material.setParameters(this.materialParameters)}_createLineGeometries(){const e=this.geometry;if(t(e)||0===e.length)return[];const r=[];return e.forEach((e=>{const t=e.length,s=new Float64Array(3*t);e.forEach(((e,t)=>{s[3*t+0]=e[0],s[3*t+1]=e[1],s[3*t+2]=e[2]}));const i={overlayInfo:null,attributeData:{position:s},removeDuplicateStartEnd:_.KEEP};r.push(i)})),r}}const C=s();export{g as LineVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as s}from\"../../../../core/maybe.js\";import{c as r}from\"../../../../chunks/mat4.js\";import{c as t}from\"../../../../chunks/mat4f64.js\";import{VisualElement as i}from\"./VisualElement.js\";import{UpdatePolicy as o}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Object3D as a}from\"../../webgl-engine/lib/Object3D.js\";import{WebGLLayer as c}from\"../../webgl-engine/lib/WebGLLayer.js\";class n extends i{constructor(e){super(e.view),this._resources=null,this._transform=t()}get object(){return e(this._resources)?this._resources.object:null}get transform(){return this._transform}set transform(s){r(this._transform,s),e(this._resources)&&(this._resources.object.transformation=this._transform)}recreate(){this.attached&&this.createResources()}recreateGeometry(){if(s(this._resources))return;const e=this._resources.object,r=this.view._stage;r.removeMany(e.geometries),e.removeAllGeometries(),this.createGeometries(e),this.visible||e.setVisible(this.visible),r.addMany(e.geometries)}createResources(){this.destroyResources();const e=this.view._stage;if(!e)return;const s=new c({isPickable:!1,updatePolicy:o.SYNC});e.add(s);const r=new a({castShadow:!1});r.transformation=this._transform,this.createExternalResources(),this.createGeometries(r),e.addMany(r.geometries),this.forEachExternalMaterial((s=>e.add(s))),e.add(r),s.add(r),this.visible||r.setVisible(!1),this._resources={layer:s,object:r}}destroyResources(){const e=this.view._stage;!s(this._resources)&&e&&(e.remove(this._resources.object),e.remove(this._resources.layer),this.forEachExternalMaterial((s=>{e.remove(s),s.dispose()})),e.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}updateVisibility(e){s(this._resources)||this._resources.object.setVisible(e)}}export{n as Object3DVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass t{constructor(t){this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=t,this.view.watch(\"ready\",(t=>{this._resourcesCreated&&(t?this._createResources():this._destroyResources())}))}applyProps(t){let e=!1;for(const s in t)s in this?\"attached\"===s?e=t[s]:this[s]=t[s]:console.error(\"Cannot set unknown property\",s);this.attached=e}destroy(){this.attached=!1}get attached(){return this._attached}set attached(t){t!==this._attached&&this.view._stage&&(this._attached=t,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources())}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this.attached&&this.updateVisibility(t))}_createResources(){this.createResources(),this._resourcesCreated=!0,this.visible||this.updateVisibility(!1)}_destroyResources(){this.destroyResources(),this._resourcesCreated=!1}}export{t as VisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../shaderModules/interfaces.js\";function i(i){i.vertex.uniforms.add(\"cameraPosition\",\"vec3\").add(\"perScreenPixelRatio\",\"float\").add(\"screenSize\",\"float\"),i.vertex.code.add(e`float computeRenderPixelSizeAt( vec3 pWorld ){\nvec3 viewForward = - vec3(view[0][2], view[1][2], view[2][2]);\nfloat viewDirectionDistance = abs(dot(viewForward, pWorld - cameraPosition));\nreturn viewDirectionDistance*perScreenPixelRatio;\n}\nvec3 screenSizeScaling(vec3 position, vec3 anchor){\nreturn position * screenSize * computeRenderPixelSizeAt(anchor) + anchor;\n}`)}function r(e,i,r){e.setUniform1f(\"perScreenPixelRatio\",r.camera.perScreenPixelRatio),e.setUniform1f(\"screenSize\",i.screenSize)}export{i as ScreenSizeScaling,r as bindScreenSizeScalingUniforms};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{ShaderOutput as t}from\"../core/shaderLibrary/ShaderOutputOptions.js\";import{bindSliceUniformsWithOrigin as r}from\"../core/shaderLibrary/Slice.glsl.js\";import{bindMultipassTerrainTexture as i}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindProjectionMatrix as s,bindView as o}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as a}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as n}from\"../core/shaderTechnique/ShaderTechnique.js\";import{parameter as l,ShaderTechniqueConfiguration as p}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{CullFaceOptions as c,TransparencyPassType as u}from\"../lib/basicInterfaces.js\";import{Default3D as d}from\"../lib/DefaultVertexAttributeLocations.js\";import{oitBlending as m,oitDepthTest as h,oitDepthWrite as b,getOITPolygonOffset as f}from\"../lib/OrderIndependentTransparency.js\";import{Program as g}from\"../lib/Program.js\";import{stencilWriteMaskOn as y,stencilToolMaskBaseParams as T,stencilBaseAllZerosParams as P}from\"../lib/StencilUtils.js\";import{I as j}from\"../../../../chunks/ImageMaterial.glsl.js\";import{BlendFactor as v}from\"../../../webgl/enums.js\";import{simpleBlendingParams as O,makePipelineState as S,cullingParams as E,defaultDepthWriteParams as w,defaultColorWriteParams as N}from\"../../../webgl/renderState.js\";class _ extends n{initializeProgram(e){const t=_.shader.get(),r=this.configuration,i=t.build({output:r.output,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,oitEnabled:r.transparencyPassType===u.Color,multipassTerrainEnabled:r.multipassTerrainEnabled,cullAboveGround:r.cullAboveGround});return new g(e.rctx,i,d)}bindPass(e,t){s(this.program,t.camera.projectionMatrix),this.program.setUniform1f(\"opacity\",e.opacity),t.multipassTerrainEnabled&&(this.program.setUniform2fv(\"nearFar\",t.camera.nearFar),this.program.setUniform2fv(\"inverseViewport\",t.inverseViewport),i(this.program,t))}bindDraw(e){o(this.program,e),r(this.program,this.configuration,e),this.program.rebindTextures()}_setPipelineState(e,r){const i=this.configuration,s=e===u.NONE,o=e===u.FrontFace;return S({blending:i.output!==t.Color&&i.output!==t.Alpha||!i.transparent?null:s?x:m(e),culling:E(i.cullFace),depthTest:{func:h(e)},depthWrite:s?i.writeDepth&&w:b(e),colorWrite:N,stencilWrite:i.sceneHasOcludees?y:null,stencilTest:i.sceneHasOcludees?r?T:P:null,polygonOffset:s||o?null:f(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0),this._setPipelineState(this.configuration.transparencyPassType,!1)}getPipelineState(e,t){return t?this._occludeePipelineState:super.getPipelineState(e,t)}}_.shader=new a(j,(()=>import(\"./ImageMaterial.glsl.js\")));const x=O(v.ONE,v.ONE_MINUS_SRC_ALPHA);class A extends p{constructor(){super(...arguments),this.output=t.Color,this.cullFace=c.None,this.slicePlaneEnabled=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!0,this.sceneHasOcludees=!1,this.transparencyPassType=u.NONE,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}e([l({count:t.COUNT})],A.prototype,\"output\",void 0),e([l({count:c.COUNT})],A.prototype,\"cullFace\",void 0),e([l()],A.prototype,\"slicePlaneEnabled\",void 0),e([l()],A.prototype,\"transparent\",void 0),e([l()],A.prototype,\"enableOffset\",void 0),e([l()],A.prototype,\"writeDepth\",void 0),e([l()],A.prototype,\"sceneHasOcludees\",void 0),e([l({count:u.COUNT})],A.prototype,\"transparencyPassType\",void 0),e([l()],A.prototype,\"multipassTerrainEnabled\",void 0),e([l()],A.prototype,\"cullAboveGround\",void 0);export{_ as ImageMaterialTechnique,A as ImageMaterialTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as e}from\"../core/shaderLibrary/ShaderOutputOptions.js\";import{CullFaceOptions as t}from\"../lib/basicInterfaces.js\";import{outputFromPass as r}from\"../lib/GLMaterials.js\";import i from\"../lib/GLMaterialTexture.js\";import{DefaultMaterialParameters as a,Material as s}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as n}from\"../lib/OrderIndependentTransparency.js\";import{RenderSlot as u}from\"../lib/RenderSlot.js\";import{DefaultBufferWriter as l,PositionUVLayout as o}from\"./internal/DefaultBufferWriter.js\";import{intersectTriangleGeometry as c}from\"./internal/MaterialUtil.js\";import{ImageMaterialTechniqueConfiguration as h,ImageMaterialTechnique as p}from\"../shaders/ImageMaterialTechnique.js\";class m extends s{constructor(e){super(e,f),this.supportsEdges=!0,this.techniqueConfig=new h}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.parameters.cullFace,this.techniqueConfig.slicePlaneEnabled=this.parameters.slicePlaneEnabled,this.techniqueConfig.transparent=this.parameters.transparent,this.techniqueConfig.writeDepth=this.parameters.writeDepth,this.techniqueConfig.sceneHasOcludees=this.parameters.sceneHasOcludees,this.techniqueConfig.transparencyPassType=t.transparencyPassType,this.techniqueConfig.enableOffset=t.camera.relativeElevation<n,this.techniqueConfig.multipassTerrainEnabled=t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=t.cullAboveGround,this.techniqueConfig}intersect(e,t,r,i,a,s,n){c(e,t,i,a,s,void 0,n)}requiresSlot(t,i){if(t===u.DRAPED_MATERIAL)return!0;if(r(i)===e.Highlight)return t===u.OPAQUE_MATERIAL;return t===(this.parameters.transparent?this.parameters.writeDepth?u.TRANSPARENT_MATERIAL:u.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:u.OPAQUE_MATERIAL)}createGLMaterial(t){return t.output===e.Color||t.output===e.Alpha||t.output===e.Highlight?new d(t):void 0}createBufferWriter(){return new l(o)}}class d extends i{constructor(e){super({...e,...e.material.parameters})}updateParameters(e){const t=this._material.parameters;return this.updateTexture(t.textureId),this.ensureTechnique(p,e)}_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.sceneHasOcludees&&(this._material.setParameters({sceneHasOcludees:e.hasOccludees}),this.updateParameters(e))}beginSlot(t){return this._output!==e.Color&&this._output!==e.Alpha||this._updateOccludeeState(t),this.updateParameters(t)}bind(e,t){this.bindTextures(t.program),this.bindTextureScale(t.program),t.bindPass(this._material.parameters,e)}}const f={transparent:!1,writeDepth:!0,slicePlaneEnabled:!1,cullFace:t.None,sceneHasOcludees:!1,opacity:1,textureId:null,initTextureTransparent:!0,...a};export{m as ImageMaterial};\n"],"names":["g","p","s","include","a","linearDepth","vertex","uniforms","add","attributes","n","varyings","multipassTerrainEnabled","code","l","r","fragment","i","o","output","e","t","d","oitEnabled","Object","freeze","__proto__","build","m","c","screenSizeEnabled","shadingEnabled","extensions","Blob","type","url","png","jpeg","jpg","bmp","gif","json","txt","xml","svg","zip","pbf","gz","w","origins","u","String","read","write","writer","f","resources","y","R","verifyItemRelativeUrls","writtenUrls","rootPath","h","this","origin","originIdOf","portalItem","resourceFromPath","b","path","S","toUpdate","j","I","toKeep","push","resource","O","U","v","pendingOperations","async","default","data","responseType","P","then","itemRelativeUrl","catch","toAdd","content","finish","N","JSON","stringify","toJSON","constructor","super","arguments","parent","updating","visible","suspended","analysis","readOnly","prototype","constructOnly","position","heading","tilt","width","height","equals","Number","nonNullable","range","min","max","M","_","W","A","ee","x","z","spatialReference","initializeProgram","shader","get","configuration","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","transparencyPassType","cullAboveGround","E","rctx","bindPass","color","shadingTint","shadingDirection","program","camera","projectionMatrix","setUniform4fv","setUniform2fv","nearFar","inverseViewport","_blendColor","F","setUniform3fv","setUniformMatrix4fv","viewInverseTransposeMatrix","bindDraw","rebindTextures","_setPipelineState","blending","transparent","culling","cullFace","depthTest","func","depthWrite","writeDepth","colorWrite","C","polygonOffset","initializePipeline","count","Map","T","k","Math","cos","backgroundColor","gridColor","setUniform1f","gridWidth","_config","intersect","createBufferWriter","requiresSlot","createGLMaterial","getTechniqueConfig","ensureTechnique","updateParameters","technique","beginSlot","bind","_material","parameters","_renderOccluded","_gridWidth","_gridColor","_backgroundColor","applyProps","renderOccluded","_updateMaterial","createExternalResources","materialParameters","destroyExternalResources","forEachExternalMaterial","createGeometries","addGeometry","setParameters","Ye","We","worldUpAtPosition","X","basis1","It","round","Nt","nt","basis2","Et","Rt","toRenderCoords","worldBasisAtPosition","H","plane","G","error","wkid","jt","B","elevationProvider","Ce","renderWidth","renderHeight","Mt","renderCoordsHelper","tiltEnabled","POSITIVE_X","POSITIVE_Y","NEGATIVE_X","NEGATIVE_Y","De","kt","Ct","HEADING","TILT","HORIZONTAL_OR_VERTICAL","HORIZONTAL","VERTICAL","TILTED","D","PI","St","xt","CENTER_ON_CALLOUT","CENTER_ON_ARROW","V","_handles","_internalChange","_currentSlicePlane","state","ready","initialize","excludedLayers","on","item","title","id","preventDefault","includes","has","set","all","activeController","view","analysisViewData","_updateSlicePlaneFromBoundedPlane","_updateLayerViews","sync","excludeGroundSurface","active","_updateActiveController","_updateViewSlicePlane","_allLayerAndSubLayerViews","shape","_updateBoundedPlaneFromSlicePlane","_set","destroy","slicePlane","Error","lastIndexOf","splice","length","delete","allLayerViews","items","concat","filter","flatMap","sublayerViews","fromRenderCoords","L","layers","forEach","destroyed","indexOf","layer","sublayer","basemapTerrain","_gridVisualElement","_outlineVisualElement","showGrid","editable","_initialize","ke","attached","ge","fe","Ve","Pe","me","writeDepthEnabled","geometry","_updateMaterials","_updatePlane","q","transform","stipplePattern","analysisVisualization","analysisController","whenReady","testData","visualization","controller","aliasOf","hasZ","warnOnce","_width","_color","_innerWidth","_innerColor","_stipplePattern","_stippleOffColor","_stipplePreferContinuous","_writeDepthEnabled","_falloff","_polygonOffset","setGeometryFromRenderSpacePoint","setGeometryFromExtent","setGeometryFromFrustum","lines","endpoint","setGeometryFromBoundedPlane","setGeometryFromSegment","endRenderSpace","points","createRenderGeometry","setGeometryFromSegments","map","_geometry","recreateGeometry","innerWidth","innerColor","recreate","stippleOffColor","stipplePreferContinuous","falloff","_createLineGeometries","isClosed","Float64Array","overlayInfo","attributeData","removeDuplicateStartEnd","_resources","_transform","object","transformation","createResources","_stage","removeMany","geometries","removeAllGeometries","setVisible","addMany","destroyResources","isPickable","updatePolicy","castShadow","remove","dispose","updateVisibility","_attached","_resourcesCreated","_visible","watch","_createResources","_destroyResources","console","perScreenPixelRatio","screenSize","opacity","stencilWrite","sceneHasOcludees","stencilTest","enableOffset","_occludeePipelineState","getPipelineState","supportsEdges","techniqueConfig","relativeElevation","material","updateTexture","textureId","_updateOccludeeState","hasOccludees","_output","bindTextures","bindTextureScale","initTextureTransparent"],"sourceRoot":""}