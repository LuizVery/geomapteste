{"version":3,"file":"static/js/5421.a8296676.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/WMTSLayerView3D.js","../node_modules/@arcgis/core/views/layers/RefreshableLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Collection.js\";import i from\"../../../core/Logger.js\";import{isSome as r,isNone as s}from\"../../../core/maybe.js\";import{whenTrueOnce as o}from\"../../../core/watchUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{getTileMaxtrixSetFromActiveLayer as n}from\"../../../layers/support/layerUtils.js\";import{LayerView3D as h}from\"./LayerView3D.js\";import{TiledLayerView3D as m}from\"./TiledLayerView3D.js\";import p from\"../../layers/LayerView.js\";import{RefreshableLayerView as c}from\"../../layers/RefreshableLayerView.js\";const d=i.getLogger(\"esri.views.3d.layers.WMTSLayerView3d\");let f=class extends(c(m(h(p)))){constructor(){super(...arguments),this.type=\"wmts-3d\"}get hasMixedImageFormats(){return!0}_getCompatibleTileInfoMatrixSet(e,i=!1){const s=n(this.layer);if(r(s)){if(t.isCollection(s)){const t=s.find((t=>{const s=e(t);return r(s)&&(i?d.error(\"The selected tile matrix set is not compatible with the view\",s):this.addResolvingPromise(Promise.reject(s))),null==s}));return t}const o=e(s);return r(o)&&(i?d.error(\"The selected tile matrix set is not compatible with the view\",o):this.addResolvingPromise(Promise.reject(o))),s}return null}initialize(){this._getCompatibleTileInfoMatrixSet((e=>this._getTileInfoSupportError(e.tileInfo,e.fullExtent)));const e=o(this.view,\"basemapTerrain.tilingSchemeLocked\").then((()=>{const e=this._getCompatibleTileInfoMatrixSet((e=>this._getTileInfoSupportError(e.tileInfo,e.fullExtent)||this._getTileInfoCompatibilityError(e.tileInfo,this.view.basemapTerrain.tilingScheme)));s(e)||(this.layer.activeLayer.tileMatrixSetId!==e.id&&(this.layer.activeLayer.tileMatrixSetId=e.id),this.tileInfo=e.tileInfo,this.layer.fullExtent=e.fullExtent)}));this.addResolvingPromise(e),this.when((()=>this._initialized()))}refresh(){this.emit(\"data-changed\")}canResume(){if(!super.canResume())return!1;const e=this.layer.activeLayer.tileMatrixSet;return e&&!this._getTileInfoError(e.tileInfo,e.fullExtent)}async doRefresh(){this.suspended||this.emit(\"data-changed\")}_initialized(){this.updatingHandles.add((()=>{var e,t;return null==(e=this.layer)||null==(t=e.activeLayer)?void 0:t.styleId}),(()=>this.refresh())),this.updatingHandles.add((()=>{var e;return null==(e=this.layer)?void 0:e.activeLayer}),(e=>{const t=this._getCompatibleTileInfoMatrixSet((e=>this._getTileInfoSupportError(e.tileInfo,e.fullExtent)||this._getTileInfoCompatibilityError(e.tileInfo,this.view.basemapTerrain.tilingScheme)),!0);r(t)&&e.tileMatrixSetId!==t.id&&(this.layer.activeLayer.tileMatrixSetId=t.id),this.notifyChange(\"suspended\"),this.canResume()&&this.refresh()}))}_getTileInfoError(e,t){return this._getTileInfoSupportError(e,t)||this._getTileInfoCompatibilityError(e,this.view.basemapTerrain.tilingScheme)}};e([a({readOnly:!0})],f.prototype,\"hasMixedImageFormats\",null),e([a()],f.prototype,\"layer\",void 0),e([a()],f.prototype,\"suspended\",void 0),f=e([l(\"esri.views.3d.layers.WMTSLayerView3D\")],f);const u=f;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/reactiveUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";const i=i=>{let c=class extends i{initialize(){this.handles.add(o((()=>this.layer),\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([a(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{i as RefreshableLayerView,i as default};\n"],"names":["d","i","f","c","m","h","p","constructor","super","arguments","this","type","hasMixedImageFormats","_getCompatibleTileInfoMatrixSet","e","s","n","layer","r","t","find","error","addResolvingPromise","Promise","reject","o","initialize","_getTileInfoSupportError","tileInfo","fullExtent","view","then","_getTileInfoCompatibilityError","basemapTerrain","tilingScheme","activeLayer","tileMatrixSetId","id","when","_initialized","refresh","emit","canResume","tileMatrixSet","_getTileInfoError","suspended","updatingHandles","add","styleId","notifyChange","a","readOnly","prototype","l","u","handles","doRefresh","dataChanged","catch","declaredClass"],"sourceRoot":""}