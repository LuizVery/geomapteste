{"version":3,"file":"static/js/1120.d9bbd52d.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/chunks/PointRenderer.glsl.js","../node_modules/@arcgis/core/views/3d/layers/PointCloudWorkerHandle.js","../node_modules/@arcgis/core/views/3d/layers/i3s/LoDUtil.js","../node_modules/@arcgis/core/views/3d/layers/i3s/PagedNodeIndex.js","../node_modules/@arcgis/core/views/3d/layers/i3s/PointCloudRendererUtil.js","../node_modules/@arcgis/core/views/3d/layers/i3s/PointGraphic.js","../node_modules/@arcgis/core/views/3d/layers/i3s/PointHighlights.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/PointRendererTechnique.js","../node_modules/@arcgis/core/views/3d/layers/i3s/PointRenderer.js","../node_modules/@arcgis/core/views/3d/layers/PointCloudLayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutputOptions.js\";import{Slice as i}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{OutputHighlight as o}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\";import{RgbaFloatEncoding as t}from\"../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";import{glsl as r}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as a}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{VertexAttribute as n}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";function s(s){const c=new a,d=s.output===e.Color,l=s.output===e.Depth,p=s.output===e.Highlight;return c.extensions.add(\"GL_OES_standard_derivatives\"),c.include(i,s),c.attributes.add(n.POSITION,\"vec3\"),c.attributes.add(n.COLOR,\"vec3\"),c.vertex.uniforms.add(\"modelView\",\"mat4\").add(\"proj\",\"mat4\").add(\"screenMinMaxSize\",\"vec2\").add(\"pointScale\",\"vec2\").add(\"clipMin\",\"vec3\").add(\"clipMax\",\"vec3\"),l?(c.vertex.uniforms.add(\"nearFar\",\"vec2\"),c.varyings.add(\"depth\",\"float\")):s.output!==e.Highlight&&c.varyings.add(\"vColor\",\"vec3\"),c.vertex.code.add(r`\n    void main(void) {\n      // Move clipped points outside of clipspace\n      if (position.x < clipMin.x || position.y < clipMin.y || position.z < clipMin.z ||\n        position.x > clipMax.x || position.y > clipMax.y || position.z > clipMax.z) {\n        gl_Position = vec4(0.0,0.0,0.0,2.0);\n        gl_PointSize = 0.0;\n        return;\n      }\n\n      if (rejectBySlice(position)) {\n        gl_Position = vec4(0.0,0.0,0.0,2.0);\n        gl_PointSize = 0.0;\n        return;\n      }\n\n      // Position in camera space\n      vec4 camera = modelView * vec4(position, 1.0);\n\n      float pointSize = pointScale.x;\n      vec4 position = proj * camera;\n     ${s.drawScreenSize?r`\n      float clampedScreenSize = pointSize;`:r`\n      float pointRadius = 0.5 * pointSize;\n      vec4 cameraOffset = camera + vec4(0.0, pointRadius, 0.0, 0.0);\n      vec4 positionOffset = proj * cameraOffset;\n      float radius = abs(positionOffset.y - position.y);\n      float viewHeight = pointScale.y;\n      // screen diameter = (2 * r / w) * (h / 2)\n      float screenPointSize = (radius / position.w) * viewHeight;\n      float clampedScreenSize = clamp(screenPointSize, screenMinMaxSize.x, screenMinMaxSize.y);\n      // Shift towards camera, to move rendered point out of terrain i.e. to\n      // the camera-facing end of the virtual point when considering it as a\n      // 3D sphere.\n      camera.xyz -= normalize(camera.xyz) * pointRadius * clampedScreenSize / screenPointSize;\n      position = proj * camera;`}\n\n     gl_PointSize = clampedScreenSize;\n     gl_Position = position;\n\n     ${l?r`depth = (-camera.z - nearFar[0]) / (nearFar[1] - nearFar[0]);`:\"\"}\n     ${d?r`vColor = color;`:\"\"}\n    }\n  `),c.fragment.include(t,s),p&&c.include(o),c.fragment.code.add(r`\n    void main(void) {\n      vec2 vOffset = gl_PointCoord - vec2(0.5, 0.5);\n      float r2 = dot(vOffset, vOffset);\n\n      if (r2 > 0.25) {\n        discard;\n      }\n      ${l?r`gl_FragColor = float2rgba(depth);`:\"\"}\n      ${p?r`outputHighlight();`:\"\"}\n      ${d?r`gl_FragColor = vec4(vColor, 1.0);`:\"\"}\n    }\n  `),c}const c=Object.freeze({__proto__:null,build:s});export{c as P,s as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../core/maybe.js\";import{WorkerHandle as r}from\"../../../core/workers/WorkerHandle.js\";class e extends r{constructor(t){super(\"PointCloudWorker\",\"transform\",t)}getTransferList(r){const e=[r.geometryBuffer];if(t(r.primaryAttributeData)&&r.primaryAttributeData.buffer&&e.push(r.primaryAttributeData.buffer),t(r.modulationAttributeData)&&r.modulationAttributeData.buffer&&e.push(r.modulationAttributeData.buffer),t(r.filterAttributesData))for(const u of r.filterAttributesData)t(u)&&u.buffer&&e.push(u.buffer);for(const t of r.userAttributesData)t.buffer&&e.push(t.buffer);return e}}export{e as PointCloudWorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{d as e}from\"../../../../chunks/vec3.js\";function t(e,t,g){for(let n=0;n<t.length;n++)r[n]=!1,o[n]=null;for(let r=0;r<e.length;r++)n[r]=!1,l[r]=null;for(let n=0;n<t.length;n++){const o=h(t[n],e,g);o>=0&&(r[n]=!0,null!=l[o]?l[o].push(t[n]):l[o]=[t[n]])}for(let l=0;l<e.length;l++){const r=h(e[l],t,g);r>=0&&(n[l]=!0,null!=o[r]?o[r].push(e[l]):o[r]=[e[l]])}const u=[];for(let r=0;r<e.length;r++)null!=l[r]||n[r]||u.push({load:[],remove:[e[r]]});for(let n=0;n<t.length;n++)null!=o[n]||r[n]||u.push({load:[t[n]],remove:[]});for(let n=0;n<t.length;n++)null!=o[n]&&(o[n].length>1||o[n][0]!==t[n])&&u.push({load:[t[n]],remove:o[n]});for(let n=0;n<e.length;n++)null!=l[n]&&(l[n].length>1||l[n][0]!==e[n])&&u.push({load:l[n],remove:[e[n]]});return u}const n=[!1],l=[null],r=[!1],o=[null];function h(e,t,n){let l=e;for(;l>0;){const e=t.indexOf(l);if(e>=0)return e;l=n.getParentId(l)}return t.indexOf(l)}function g(t,n,l){return t.sort(((t,r)=>{if(0===t.load.length&&0===r.load.length)return 0;if(0===t.load.length)return-1;if(0===r.load.length)return 1;if(0===t.remove.length&&0===r.remove.length){const o=l.getRenderCenter(t.load[0]),h=l.getRenderCenter(r.load[0]);return e(o,n)-e(h,n)}if(0===t.remove.length)return-1;if(0===r.remove.length)return 1;if(1===t.load.length&&1===r.load.length){const o=l.getRenderCenter(t.load[0]),h=l.getRenderCenter(r.load[0]);return e(o,n)-e(h,n)}if(1===t.load.length)return-1;if(1===r.load.length)return 1;{const o=l.getRenderCenter(t.remove[0]),h=l.getRenderCenter(r.remove[0]);return e(o,n)-e(h,n)}}))}function u(e,t,n){for(let l=0;l<e.length;++l){const r=e[l];r.load.length>t&&1===r.remove.length&&d(e,r,n)}}function d(e,t,n){const l=[t.remove[0]],r=[];for(;1===l.length;){const e=l.pop();r.length=0;for(let o=0;o<t.load.length;o++){let h=t.load[o],g=n.getParentId(h);for(;g!==e;)h=g,g=n.getParentId(h);let u=l.indexOf(h);u<0&&(u=l.length,l.push(h),r.push([])),r[u].push(t.load[o])}}t.load=l;for(let o=0;o<l.length;o++)r[o].length>1?e.push({remove:[l[o]],load:r[o]}):l[o]=r[o][0]}export{t as nodeDiff,g as sortFrontToBack,u as splitWorkEntries,d as splitWorkEntry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{create as e,contains as t,intersects as s}from\"../../../../geometry/support/aaBoundingBox.js\";import{transformObb as n}from\"./I3SUtil.js\";import{set as i,toAaBoundingBox as r,intersectPlane as o,ObbArray as p}from\"../../support/orientedBoundingBox.js\";class h{constructor(e,t,s){this._pages=[],this.pageSize=0,this._nodeSR=null,this._renderSR=null,this._nodeSR=e,this._renderSR=t,this.pageSize=s}addPage(e,t,s=0){for(;this._pages.length<e;)this._pages.push(null);const n=g(t,this._nodeSR,this._renderSR,s);this._pages[e]={nodes:t,renderObbs:n,parents:new Uint32Array(this.pageSize)},u(this._pages,this.pageSize)}hasPage(e){return!!this._pages[e]}getNode(e){const t=this.pageSize;return this._pages[l(e,t)].nodes[c(e,t)]}getRenderObb(e){const t=this.pageSize;return this._pages[l(e,t)].renderObbs[c(e,t)]}getRenderCenter(e){return this.getRenderObb(e).center}setRenderObb(e,t){const s=this.pageSize;i(t,this._pages[l(e,s)].renderObbs[c(e,s)])}getParentId(e){const t=this.pageSize;return this._pages[l(e,t)].parents[c(e,t)]}hasNodes(e,t){const s=l(e,this.pageSize),n=l(e+t-1,this.pageSize);for(let i=s;i<=n;i++)if(null==this._pages[i])return!1;return!0}forEachNodeId(e){for(let t=0;t<this._pages.length;t++){const s=this._pages[t];if(s)for(let n=0;n<s.nodes.length;n++)e(t*this.pageSize+n)}}createVisibilityTraverse(){const t={index:this,queue:[],masks:[],tempAabb:e()};return(e,s)=>a(t,e,s)}}function a(e,n,i){const p=e.index;if(!p.hasNodes(0,1))return;const h=e.queue;h.length=0,h.push(0);const a=e.masks;for(a.length=0,a.push(0);h.length>0;){const g=h.pop();let u=a.pop();const c=p.getNode(g),d=p.getRenderObb(g);let f=!0;if(null!=n.clippingBox){const i=1<<n.frustum.length;if(0==(u&i)){const o=r(d,e.tempAabb);t(n.clippingBox,o)?u|=i:s(n.clippingBox,o)||(f=!1)}}for(let e=0;e<n.frustum.length&&f;e++){const t=1<<e;if(0==(u&t)){const s=o(d,n.frustum[e]);s>0?f=!1:s<0&&(u|=t)}}if(i.predicate(g,c,f)){const e=c.firstChild,t=c.childCount;let s=!1;const n=l(e,p.pageSize),r=l(e+t-1,p.pageSize);for(let o=n;o<=r;o++)if(!p.hasPage(o)){i.pageMiss(g,o),s=!0;break}if(!s)for(let i=0;i<t;i++)h.push(e+i),a.push(u)}}}function g(e,t,s,i){const r=new p(e.length);for(let o=0;o<e.length;o++)n(e[o].obb,t,r.obbs[o],s,i);return r.obbs}function u(e,t){const s=[0];for(;s.length;){const n=s.pop(),i=e[l(n,t)].nodes[c(n,t)];for(let r=0;r<i.childCount;r++){const o=i.firstChild+r;null!=e[l(o,t)]&&(e[l(o,t)].parents[c(o,t)]=n,s.push(o))}}}function l(e,t){return e/t|0}function c(e,t){return e%t}export{h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction t(t){const e=t.renderer,n=e&&e.type,o=e&&t.renderer.toJSON()||null;let r=null,i=!1;\"point-cloud-unique-value\"===n||\"point-cloud-stretch\"===n||\"point-cloud-class-breaks\"===n?r=u(t.attributeStorageInfo,e.field):\"point-cloud-rgb\"===n?(r=l(t.attributeStorageInfo,e.field),i=null!=r):(r=l(t.attributeStorageInfo,\"RGB\"),i=null!=r);let a=null;return e&&e.colorModulation&&(a=u(t.attributeStorageInfo,e.colorModulation.field)),{rendererJSON:o,isRGBRenderer:i,primaryAttribute:r,modulationAttribute:a}}function e(t){const e=t.filters;return e?e.map((e=>({filterJSON:e.toJSON(),attributeInfo:u(t.attributeStorageInfo,e.field)}))):[]}function n(t){const e=t&&t.pointSizeAlgorithm;return e&&\"splat\"===e.type?e:null}function o(t){const e=t&&t.pointSizeAlgorithm;return e&&\"fixed-size\"===e.type?e:null}function r(t){const e=t&&t.pointSizeAlgorithm;return!(!e||!e.type)&&\"fixed-size\"===e.type}function l(t,e){for(const n of t)if(n.name===e&&null!=n.attributeValues&&\"UInt8\"===n.attributeValues.valueType&&3===n.attributeValues.valuesPerElement)return{name:e,storageInfo:n,useElevation:!1};return null}function u(t,e){for(const n of t)if(n.name===e){const t=\"embedded-elevation\"===n.encoding;return{name:e,storageInfo:t?null:n,useElevation:t}}return\"elevation\"===e.toLowerCase()?{name:e,storageInfo:null,useElevation:!0}:null}export{u as getAttributeInfo,e as getFilterInfo,o as getFixedSizeAlgorithm,t as getRendererInfo,n as getSplatSizeAlgorithm,r as rendererUsesFixedSizes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import o from\"../../../../Graphic.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as e}from\"../../../../core/accessorSupport/decorators/subclass.js\";let t=class extends o{constructor(r){super(r)}};r([s({constructOnly:!0,clonable:\"reference\"})],t.prototype,\"pointCloudMetadata\",void 0),t=r([e(\"esri.views.3d.layers.i3s.PointGraphic\")],t);export{t as PointGraphic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{makeHandle as e}from\"../../../../core/handleUtils.js\";import{isSome as t}from\"../../../../core/maybe.js\";import{Object3DState as i}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Object3DStateID as h}from\"../../webgl-engine/lib/Object3DStateID.js\";class s{constructor(e){this._context=e,this._highlights=new Set}get hasHighlights(){return this._highlights.size>0}destroy(){this._highlights=null}add(t){const i=new o(t);return this._highlights.add(i),this._enableSet(i),e((()=>this._removeSet(i)))}_removeSet(e){this._disableSet(e),this._highlights.delete(e)}_enableSet(e){e.enabled||(e.enabled=!0,this._context.forEachNode((t=>this._enableSetForNode(e,t))))}_enableSetForNode(e,t){if(!e.enabled)return;const i=e.ids.get(t.id);i&&i.forEach((i=>this._context.addHighlight(t,i,e.id)))}_disableSet(e){e.enabled&&(e.enabled=!1,this._context.forEachNode((t=>this._disableSetForNode(e,t))))}_disableSetForNode(e,t){e.enabled||this._context.removeHighlight(t,e.id)}nodeAdded(e){this._highlights.forEach((t=>this._enableSetForNode(t,e)))}nodeRemoved(e){this._highlights.forEach((t=>this._disableSetForNode(t,e)))}removeAll(){this._highlights.forEach((e=>this._disableSet(e)))}}class o{constructor(e){this.id=new h(i.Highlight),this.ids=new Map,this.enabled=!1;for(const i of e)t(i)&&this._add(i.nodeId,i.pointId)}_add(e,t){const i=this.ids.get(e);i?i.add(t):this.ids.set(e,new Set([t]))}}export{s as PointHighlights};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{ShaderOutput as r}from\"../core/shaderLibrary/ShaderOutputOptions.js\";import{ReloadableShaderModule as t}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as i}from\"../core/shaderTechnique/ShaderTechnique.js\";import{parameter as o,ShaderTechniqueConfiguration as s}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as n}from\"../lib/DefaultVertexAttributeLocations.js\";import{Program as l}from\"../lib/Program.js\";import{stencilWriteMaskOn as a,stencilBaseAllZerosParams as c}from\"../lib/StencilUtils.js\";import{P as u}from\"../../../../chunks/PointRenderer.glsl.js\";import{CompareFunction as d}from\"../../../webgl/enums.js\";import{makePipelineState as p,defaultDepthWriteParams as h,defaultColorWriteParams as m}from\"../../../webgl/renderState.js\";class f extends i{constructor(e,r,t){super(e,r,t)}initializeProgram(e){const r=f.shader.get(),t=this.configuration,i=r.build({output:t.output,slicePlaneEnabled:t.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!0,drawScreenSize:t.drawScreenSize});return new l(e.rctx,i,n)}initializePipeline(){return p({depthTest:{func:d.LESS},depthWrite:h,colorWrite:m,stencilWrite:this.configuration.sceneHasOcludees?a:null,stencilTest:this.configuration.sceneHasOcludees?c:null})}}f.shader=new t(u,(()=>import(\"./PointRenderer.glsl.js\")));class b extends s{constructor(){super(...arguments),this.output=r.Color,this.slicePlaneEnabled=!1,this.drawScreenSize=!1,this.sceneHasOcludees=!1}}e([o({count:r.COUNT})],b.prototype,\"output\",void 0),e([o()],b.prototype,\"slicePlaneEnabled\",void 0),e([o()],b.prototype,\"drawScreenSize\",void 0),e([o()],b.prototype,\"sceneHasOcludees\",void 0);export{f as PointRendererTechnique,b as PointRendererTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as i,unwrap as t,disposeMaybe as s}from\"../../../../core/maybe.js\";import r from\"../../../../core/PooledArray.js\";import{f as n,m as o}from\"../../../../chunks/mat4.js\";import{c as h}from\"../../../../chunks/mat4f32.js\";import{f as a,l,a as c,o as d,d as u,p as m,s as p}from\"../../../../chunks/vec3.js\";import{c as g}from\"../../../../chunks/vec3f32.js\";import{c as f}from\"../../../../chunks/vec3f64.js\";import{s as _}from\"../../../../chunks/vec4.js\";import{create as x,POSITIVE_INFINITY as S,offset as z,contains as b,containsPoint as P,equals as w,set as R}from\"../../../../geometry/support/aaBoundingBox.js\";import{create as A}from\"../../../../geometry/support/plane.js\";import{fromPoints as y}from\"../../../../geometry/support/ray.js\";import{PointHighlights as M}from\"./PointHighlights.js\";import{minimumDistancePlane as j,maximumDistancePlane as H,intersectLine as q,toAaBoundingBox as v}from\"../../support/orientedBoundingBox.js\";import{ShaderOutput as I}from\"../../webgl-engine/core/shaderLibrary/ShaderOutputOptions.js\";import{bindSliceUniforms as T}from\"../../webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{bindOutputHighlight as L}from\"../../webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\";import{Default3D as E}from\"../../webgl-engine/lib/DefaultVertexAttributeLocations.js\";import{newIntersectorResult as F}from\"../../webgl-engine/lib/Intersector.js\";import{IntersectorType as V,StoreResults as U}from\"../../webgl-engine/lib/IntersectorInterfaces.js\";import{RenderPass as O}from\"../../webgl-engine/lib/RenderPass.js\";import{VertexAttribute as N}from\"../../webgl-engine/lib/VertexAttribute.js\";import{PointRendererTechniqueConfiguration as C,PointRendererTechnique as D}from\"../../webgl-engine/shaders/PointRendererTechnique.js\";import{BufferObject as B}from\"../../../webgl/BufferObject.js\";import{DataType as W,PrimitiveType as G,Usage as k}from\"../../../webgl/enums.js\";import{VertexArrayObject as Y}from\"../../../webgl/VertexArrayObject.js\";import{VertexElementDescriptor as J}from\"../../../webgl/VertexElementDescriptor.js\";const K={positions:[new J(N.POSITION,3,W.FLOAT,0,12)],colors:[new J(N.COLOR,3,W.UNSIGNED_BYTE,0,3,!0)]};class Q{constructor(e){this._params=e,this.type=V.PCL,this.isGround=!1,this._bindParameters={inverseViewport:[0,0],highlightDepthTexture:null},this._highlights=new M({forEachNode:e=>this.forEachNode(e),addHighlight:(e,i,t)=>this._addHighlight(e,i,t),removeHighlight:(e,i)=>this._removeHighlight(e,i)}),this.canRender=!0,this.layerUid=\"\",this._useFixedSizes=!1,this._scaleFactor=1,this._minSizePx=0,this._useRealWorldSymbolSizes=!1,this._size=0,this._sizePx=0,this._slicePlaneEnabled=!1,this._clipBox=x(S),this._techniqueConfig=new C,this.tempMatrix4=h(),this.tempVec3=g(),this.nodes=new r}get needsHighlight(){return this._highlights.hasHighlights}initializeRenderContext(e){this._context=e,this._techniqueRep=this._context.shaderTechniqueRepository,e.requestRender()}uninitializeRenderContext(){}intersect(e,i,t,s){const r=f(),n=f(),o=f(),h=f(),p=A(),g=e.camera.perScreenPixelRatio/2,S=e.camera.near,w=this._getSizeParams();a(n,s,t);const R=1/l(n);c(n,n,R),d(o,n),_(p,n[0],n[1],n[2],-u(n,t));const M=new ne,I=new ne,T=new Array,L=x(),E=x(this._clipBox);z(E,-t[0],-t[1],-t[2],E),this.nodes.forAll((l=>{const c=l.splatSize*this._scaleFactor;let d=j(l.obb,p),f=H(l.obb,p);d-=ee(c,d+S,w,g,l.isLeaf),f-=ee(c,f+S,w,g,l.isLeaf);const _=f<0,x=null!=M.dist&&null!=I.dist&&M.dist<d*R&&I.dist>f*R;if(_||x)return;const A=$(c,f+S,w,g,l.isLeaf);if(!q(l.obb,t,n,A))return;const y=A*A;v(l.obb,L),z(L,-t[0],-t[1],-t[2],L);const F=!b(E,L);a(h,l.origin,t);const V=l.coordinates.length/3;for(let a=0;a<V;a++){if(r[0]=h[0]+l.coordinates[3*a],r[1]=h[1]+l.coordinates[3*a+1],r[2]=h[2]+l.coordinates[3*a+2],F&&!P(E,r))continue;const d=u(r,n),p=m(r)-d*d;if(p>y)continue;let f=d+S;const _=ee(c,f,w,g,l.isLeaf);if(d-_<0)continue;f-=_;const x=$(c,f,w,g,l.isLeaf);if(p>x*x)continue;const z=(d-_)*R,b=e=>(e.point=ie(l,a,e.point),e.dist=z,e.normal=o,e.node=l,e.pointId=a,e.layerUid=this.layerUid,e);if((null==M.dist||z<M.dist)&&(null==i||i(t,s,z))&&b(M),e.options.store!==U.MIN&&(null==I.dist||z>I.dist)&&(null==i||i(t,s,z))&&b(I),e.options.store===U.ALL&&(null==i||i(t,s,z))){const e=new ne;T.push(b(e))}}}));const V=e=>{const{layerUid:i,node:t,pointId:s}=e;return{point:e.point,layerUid:i,graphicUid:s,createGraphic:()=>this._params.createGraphic(t,s,e.point)}},O=(e,i)=>{const t=V(i);e.set(this.type,t,i.dist,i.normal)};if(oe(M)){const i=e.results.min;(null==i.dist||M.dist<i.dist)&&O(i,M)}if(oe(I)&&e.options.store!==U.MIN){const i=e.results.max;(null==i.dist||I.dist>i.dist)&&O(i,I)}if(e.options.store===U.ALL){const i=y(t,s);for(const t of T){const s=F(i);O(s,t),e.results.all.push(s)}}}prepareTechnique(e){if(0===this.nodes.length||e.pass!==O.MATERIAL&&e.pass!==O.MATERIAL_DEPTH&&e.pass!==O.MATERIAL_HIGHLIGHT)return null;this.nodes.forAll((i=>{null==i.vao&&this._initNode(e,i)}));const i=this._getSizeParams();return this._techniqueConfig.drawScreenSize=i.drawScreenSpace,this._techniqueConfig.slicePlaneEnabled=this._slicePlaneEnabled,this._techniqueConfig.sceneHasOcludees=e.hasOccludees,this._techniqueConfig.output=e.pass===O.MATERIAL_DEPTH?I.Depth:e.pass===O.MATERIAL_HIGHLIGHT?I.Highlight:I.Color,this._techniqueRep.releaseAndAcquire(D,this._techniqueConfig,this._technique)}render(e,i){const t=e.rctx,s=t.useTechnique(i),r=this._clipBox,h=!w(r,S,((e,i)=>e===i));h||(p(this.tempVec3,-1/0,-1/0,-1/0),s.setUniform3fv(\"clipMin\",this.tempVec3),p(this.tempVec3,1/0,1/0,1/0),s.setUniform3fv(\"clipMax\",this.tempVec3)),s.setUniformMatrix4fv(\"proj\",e.camera.projectionMatrix);e.pass===O.MATERIAL_DEPTH&&s.setUniform2fv(\"nearFar\",e.camera.nearFar),e.isHighlightPass&&(this._bindParameters.inverseViewport[0]=1/e.camera.fullViewport[2],this._bindParameters.inverseViewport[1]=1/e.camera.fullViewport[3],this._bindParameters.highlightDepthTexture=e.highlightDepthTexture,L(s,this._bindParameters));const a=this._getSizeParams(),l=e.camera.pixelRatio;a.drawFixedSize&&s.setUniform2f(\"pointScale\",a.fixedSize*l,e.camera.fullHeight);const c=this._slicePlaneEnabled?e.sliceHelper&&e.sliceHelper.plane:null;this.nodes.forAll((d=>{if(0===d.coordinates.length||e.isHighlightPass&&!d.highlights)return;if(s.setUniform2f(\"screenMinMaxSize\",a.screenMinSize*l,Z(d.isLeaf)*l),!a.drawFixedSize){const i=d.splatSize*this._scaleFactor;s.setUniform2f(\"pointScale\",i*l,e.camera.fullHeight/l)}const u=d.origin;h&&(p(this.tempVec3,r[0]-u[0],r[1]-u[1],r[2]-u[2]),s.setUniform3fv(\"clipMin\",this.tempVec3),p(this.tempVec3,r[3]-u[0],r[4]-u[1],r[5]-u[2]),s.setUniform3fv(\"clipMax\",this.tempVec3)),n(this.tempMatrix4,u),o(this.tempMatrix4,e.camera.viewMatrix,this.tempMatrix4),s.setUniformMatrix4fv(\"modelView\",this.tempMatrix4),T(s,i.configuration,c,{origin:u}),t.bindVAO(d.vao),e.isHighlightPass?this._renderHighlightFragments(t,d):t.drawArrays(G.POINTS,0,d.coordinates.length/3)}))}_renderHighlightFragments(e,s){const r=s.highlights;if(i(r))return;let n=t(r[0].component),o=n+1;for(let i=1;i<r.length;i++){const s=t(r[i].component);if(s!==o){const i=o-n;i>0&&e.drawArrays(G.POINTS,n,i),n=s}o=s+1}const h=o-n;h>0&&e.drawArrays(G.POINTS,n,h)}set useFixedSizes(e){this._useFixedSizes!==e&&(this._useFixedSizes=e,this._requestRender())}get useFixedSizes(){return this._useFixedSizes}set scaleFactor(e){this._scaleFactor!==e&&(this._scaleFactor=e,this._requestRender())}get scaleFactor(){return this._scaleFactor}set minSizePx(e){this._minSizePx!==e&&(this._minSizePx=e,this._requestRender())}get minSizePx(){return this._minSizePx}set useRealWorldSymbolSizes(e){this._useRealWorldSymbolSizes!==e&&(this._useRealWorldSymbolSizes=e,this._requestRender())}get useRealWorldSymbolSizes(){return this._useRealWorldSymbolSizes}set size(e){this._size!==e&&(this._size=e,this._requestRender())}get size(){return this._size}set sizePx(e){this._sizePx!==e&&(this._sizePx=e,this._requestRender())}get sizePx(){return this._sizePx}set clippingBox(e){R(this._clipBox,e||S)}get slicePlaneEnabled(){return this._slicePlaneEnabled}set slicePlaneEnabled(e){this._slicePlaneEnabled!==e&&(this._slicePlaneEnabled=e,this._requestRender())}addNode(e){this.nodes.push(e),this._highlights.nodeAdded(e),this._requestRender()}removeNode(e){let i=null;return this.nodes.filterInPlace((t=>t.id!==e||(i=t,t.vao=s(t.vao),this._highlights.nodeRemoved(t),!1))),this._requestRender(),i}forEachNode(e){this.nodes.forAll(e)}removeAll(){this.nodes.forAll((e=>e.vao=s(e.vao))),this._highlights.removeAll(),this.nodes.clear(),this._requestRender()}highlight(e){return this._highlights.add(e)}_addHighlight(e,i,t){e.highlights=se(e.highlights,i,t),this._requestRender()}_removeHighlight(e,i){e.highlights=re(e.highlights,i),this._requestRender()}_initNode(e,i){const t=e.rctx;i.vao=new Y(t,E,K,{positions:B.createVertex(t,k.STATIC_DRAW,i.coordinates),colors:B.createVertex(t,k.STATIC_DRAW,i.rgb)})}_requestRender(){this._context&&this._context.requestRender()}_getSizeParams(){const e=this._useFixedSizes,i=e&&!this._useRealWorldSymbolSizes;return{drawScreenSpace:i,drawFixedSize:e,fixedSize:i?this._sizePx:this._size,screenMinSize:e?0:this._minSizePx}}}function X(e){return e.hasOwnProperty(\"splatSize\")}function Z(e){return e?256:64}function $(e,i,t,s,r){if(t.drawScreenSpace)return t.fixedSize*i*s;const n=Z(r)*i*s;return t.drawFixedSize?Math.min(t.fixedSize/2,n):t.screenMinSize>0?Math.min(Math.max(t.screenMinSize*i*s,e/2),n):Math.min(e/2,n)}function ee(e,i,t,s,r){return t.drawScreenSpace?0:$(e,i,t,s,r)}function ie(e,t,s){return i(s)&&(s=f()),s[0]=e.origin[0]+e.coordinates[3*t],s[1]=e.origin[1]+e.coordinates[3*t+1],s[2]=e.origin[2]+e.coordinates[3*t+2],s}function te(i){return e(i.component)?i.component:-1}function se(e,t,s){i(e)&&(e=[]);const r={component:t,id:s};e.push(r);const n=te(r);let o=e.length-1;for(;o>0&&n<te(e[o-1]);)[e[o-1],e[o]]=[e[o],e[o-1]],--o;return e}function re(e,t){if(i(e))return e;const s=e.filter((e=>e.id!==t));return 0===s.length?null:s}class ne{constructor(){this.node=null,this.pointId=null,this.point=null,this.dist=null,this.normal=null,this.layerUid=\"\"}}function oe(i){return e(i.dist)&&e(i.point)&&e(i.pointId)&&e(i.node)}export{Q as PointRenderer,X as isInstanceOfNode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{result as t,forEach as i}from\"../../../core/asyncUtils.js\";import r from\"../../../core/Collection.js\";import s from\"../../../core/Logger.js\";import{unwrapOr as o,isSome as n,isNone as a,mapSome as d}from\"../../../core/maybe.js\";import{eachAlways as l,isAbortError as h,eachAlwaysValues as u,throwIfAborted as p}from\"../../../core/promiseUtils.js\";import{initial as c}from\"../../../core/reactiveUtils.js\";import{pt2px as _}from\"../../../core/screenUtils.js\";import{estimateSize as m,isArrayBuffer as g}from\"../../../core/typedArrayUtil.js\";import{getMetersPerVerticalUnitForSR as f}from\"../../../core/unitUtils.js\";import{property as y}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as b}from\"../../../core/accessorSupport/decorators/subclass.js\";import{d as w}from\"../../../chunks/vec3.js\";import{a as N}from\"../../../chunks/vec3f32.js\";import{projectBoundingRect as P}from\"../../../geometry/projection.js\";import{create as x}from\"../../../geometry/support/aaBoundingBox.js\";import{containsPoint as v,create as C}from\"../../../geometry/support/aaBoundingRect.js\";import{create as S,fromNormalAndOffset as I}from\"../../../geometry/support/plane.js\";import{makeDehydratedPoint as A}from\"../../../layers/graphics/dehydratedFeatures.js\";import k from\"../../../layers/support/CodedValue.js\";import V from\"../../../layers/support/CodedValueDomain.js\";import\"../../../layers/support/Domain.js\";import\"../../../layers/support/InheritedDomain.js\";import\"../../../layers/support/RangeDomain.js\";import{unpackFieldNames as R}from\"../../../layers/support/fieldUtils.js\";import{PromiseQueue as L}from\"../../../layers/support/PromiseQueue.js\";import{getMetersPerUnit as j}from\"../../../symbols/support/unitConversionUtils.js\";import{LayerView3D as U}from\"./LayerView3D.js\";import{PointCloudWorkerHandle as D}from\"./PointCloudWorkerHandle.js\";import{checkPointCloudLayerValid as Q,checkPointCloudLayerCompatibleWithView as F}from\"./i3s/I3SUtil.js\";import{nodeDiff as z,sortFrontToBack as M,splitWorkEntries as W}from\"./i3s/LoDUtil.js\";import O from\"./i3s/PagedNodeIndex.js\";import{getSplatSizeAlgorithm as E,getFixedSizeAlgorithm as G,getRendererInfo as B,getFilterInfo as H,rendererUsesFixedSizes as q,getAttributeInfo as T}from\"./i3s/PointCloudRendererUtil.js\";import{getAttributeValues as $,readGeometry as J,elevationFromPositions as K}from\"./i3s/PointCloudWorkerUtil.js\";import{PointGraphic as X}from\"./i3s/PointGraphic.js\";import{PointRenderer as Y,isInstanceOfNode as Z}from\"./i3s/PointRenderer.js\";import{PopupSceneLayerView as ee}from\"./support/PopupSceneLayerView.js\";import{projectToBoundingBox as te}from\"../support/extentUtils.js\";import{ClientType as ie}from\"../support/index.js\";import{minimumDistancePlane as re}from\"../support/orientedBoundingBox.js\";import{updatingProgress as se}from\"../support/updatingProperties.js\";import{RenderSlot as oe}from\"../webgl-engine/lib/RenderSlot.js\";import ne from\"../../layers/LayerView.js\";import{isScaleRangeActive as ae,extractSafeScaleBounds as de,scaleBoundsPredicate as le}from\"../../support/layerViewUtils.js\";import{TaskPriority as he}from\"../../support/Scheduler.js\";const ue=s.getLogger(\"esri.views.3d.layers.PointCloudLayerView3D\"),pe=8,ce=S();let _e=class extends(ee(U(ne))){constructor(){super(...arguments),this.type=\"point-cloud-3d\",this.maximumPointCount=4e6,this.slicePlaneEnabled=!1,this._renderer=null,this._rendererAdded=!1,this._renderedNodes=new Set,this._nodeScales=new Map,this._updateViewNeeded=!0,this._lodFactor=1,this._maxLoggedBoxWarnings=5,this._pageMultiplier=1,this._nodeLoadEpoch=0,this._indexQueue=[],this._workQueue=new Array,this._idleQueue=new L,this._indexPagesLoading=new Map,this._loadingNodes=new Map,this._recalcWork=!0,this._layerIsVisible=!1,this._codedDomainPopulationPromise=null,this._codedDomainPopulationAbortController=null,this._totalWork=0,this._index=null,this._loadingInitNodePage=!1,this._nodeIdArray=[]}get pointScale(){const e=E(this.layer&&this.layer.renderer),t=1;return e&&null!=e.scaleFactor?e.scaleFactor:t}get useRealWorldSymbolSizes(){const e=G(this.layer&&this.layer.renderer),t=!1;return e&&null!=e.useRealWorldSymbolSizes?e.useRealWorldSymbolSizes:t}get pointSize(){const e=G(this.layer&&this.layer.renderer),t=0;return e&&null!=e.size?e.size:t}get inverseDensity(){const e=96;return this.layer&&this.layer.renderer?1*e/this.layer.renderer.pointsPerInch:5}get availableFields(){const e=B(this.layer),t=new Set;e.primaryAttribute&&t.add(e.primaryAttribute.name),e.modulationAttribute&&t.add(e.primaryAttribute.name);const i=H(this.layer);if(i)for(const r of i)t.add(r.attributeInfo.name);if(this.layer.outFields)for(const r of R(this.layer.fieldsIndex,this.layer.outFields))t.add(r);return Array.from(t)}get _clippingBox(){if(!this.view||!this.view.clippingArea)return null;const e=x(),t=this.view.renderSpatialReference;return te(this.view.clippingArea,e,t)?e:null}get _elevationOffset(){const e=this.layer&&this.layer.elevationInfo;if(e&&\"absolute-height\"===e.mode){const t=f(this.layer.spatialReference),i=j(e.unit);return o(e.offset,0)*i/t}return 0}initialize(){const e=this.view.resourceController;this._worker=new D((t=>e.schedule(t))),this.addResolvingPromise(this._worker.promise),this._tmpPoint=A(0,0,0,this.layer.spatialReference),Q(this.layer),F(this.layer,this.view),this._indexRequester=e.createStreamDataRequester(ie.I3S_INDEX),this._dataRequester=e.createStreamDataRequester(ie.I3S_DATA),this._initRenderer();const t=this._initNodePages(),i=this.view.resourceController.memoryController;this._memCache=i.newCache(this.layer.uid),this.updatingHandles.add((()=>this._clippingBox),(()=>this._setUpdateViewNeeded()),c),this.updatingHandles.add((()=>this._elevationOffset),(()=>this._elevationOffsetChanged()),c),this.updatingHandles.add((()=>this.layer.renderer),(()=>this._rendererChanged()),c),this.updatingHandles.add((()=>this.layer.filters),(()=>this._reload()),c),this.updatingHandles.add((()=>this.layer.outFields),(()=>this._reload()),c),this.updatingHandles.add((()=>this.layer.effectiveScaleRange),(()=>this._setUpdateViewNeeded())),this.updatingHandles.add((()=>this.view.state.contentCamera),(()=>this._setUpdateViewNeeded())),this.handles.add([this.view.basemapTerrain.on(\"scale-change\",(e=>this._scaleUpdateHandler(e))),i.events.on(\"quality-changed\",(()=>this._setUpdateViewNeeded()))]),this.addResolvingPromise(t),this.when((()=>{this.handles.add([e.scheduler.registerTask(he.POINT_CLOUD_LAYER,this),e.scheduler.registerIdleStateCallbacks((()=>this._idleBegin()),(()=>this._idleEnd())),this.updatingHandles.add((()=>this.suspended),(e=>{e?this._clearNodeState():this._setUpdateViewNeeded()}),c)])}),(()=>{this.updatingHandles.removeAll(),this.handles.removeAll()}))}_setUpdateViewNeeded(){this._updateViewNeeded=!0,this._updateLoading()}destroy(){this.cancelLoading(),this._worker&&(this._worker.destroy(),this._worker=null),this._destroyRenderer(),this._memCache.destroy(),this._memCache=null,this._codedDomainPopulationAbortController&&(this._codedDomainPopulationAbortController.abort(),this._codedDomainPopulationAbortController=null),this._codedDomainPopulationPromise=null}_initRenderer(){this._renderer=new Y({createGraphic:(e,t,i)=>this._createGraphic(e,t,i)}),this._renderer.layerUid=this.layer.uid,this.updatingHandles.add((()=>this._clippingBox),(e=>this._renderer.clippingBox=e),c),this.updatingHandles.add((()=>this.suspended),(e=>this._setPointsVisible(!e)),c),this.updatingHandles.add((()=>this.pointScale),(e=>this._renderer.scaleFactor=e),c),this._renderer.minSizePx=Math.sqrt(2),this.updatingHandles.add((()=>this.useRealWorldSymbolSizes),(e=>this._renderer.useRealWorldSymbolSizes=e),c),this.updatingHandles.add((()=>this.pointSize),(e=>{const t=_(e);this._renderer.size=e,this._renderer.sizePx=t}),c),this.updatingHandles.add((()=>this.slicePlaneEnabled),(e=>this._renderer.slicePlaneEnabled=e),c),this.updatingHandles.add((()=>this.inverseDensity),(()=>this._setUpdateViewNeeded()),c),this.updatingHandles.add((()=>this.maximumPointCount),(()=>this._setUpdateViewNeeded()),c),this.updatingHandles.add((()=>this.view.qualitySettings.sceneService.pointCloud.lodFactor),(e=>{this._lodFactor=e,this._setUpdateViewNeeded()}),c)}_destroyRenderer(){this._renderer.removeAll(),this._setPointsVisible(!1)}_createGraphic(e,t,i){const r=n(e.pointIdFilterMap)?e.pointIdFilterMap[t]:t,s=this.view.computeMapPointFromVec3d(i),o=this._createGraphicAttributes(e,r);return new X({pointCloudMetadata:{nodeId:e.id,pointIndexInNode:t,attributePointIndexInNode:r,epoch:this._nodeLoadEpoch},geometry:s,attributes:o,layer:this.layer,sourceLayer:this.layer})}_createGraphicAttributes(e,t){const i={};for(const r of e.attributes)this._encodeGraphicAttribute(r.attributeInfo,r.values,t,i);return i}_encodeGraphicAttribute(e,t,i,r){const s=e.storageInfo&&e.storageInfo.attributeValues,o=s?s.valuesPerElement:1;if(1===o)r[e.name]=t[i];else if(\"UInt8\"===s.valueType&&o<=4){let s=0;const n=i*o;for(let e=n;e<n+o;e++)s=(s<<8)+t[e];r[e.name]=s}else r[e.name]=void 0}_setPointsVisible(e){e&&!this._rendererAdded?(this.view._stage.addRenderPlugin([oe.OPAQUE_PLUGIN],this._renderer),this._rendererAdded=!0):!e&&this._rendererAdded&&(this.view._stage.removeRenderPlugin(this._renderer),this._rendererAdded=!1)}_rendererChanged(){this._renderer.useFixedSizes=q(this.layer.renderer),this._reload()}_reload(){this._clearNodeState(),this._memCache.clear(),this._setUpdateViewNeeded()}_elevationOffsetChanged(){this._clearNodeState(),this._memCache.clear(),this._initNodePages()}_scaleUpdateHandler(e){const t=this.layer.effectiveScaleRange;ae(t.minScale,t.maxScale)?P(e.extent,e.spatialReference,fe,this.layer.spatialReference)&&(this._nodeScales.forEach(((t,i)=>{if(!this._renderedNodes.has(i))return void this._nodeScales.delete(i);const r=this._index.getNode(i);v(fe,r.obb.center)&&this._nodeScales.set(i,e.scale)})),this._setUpdateViewNeeded()):this._nodeScales.clear()}_displayNodes(e){this._workQueue=z([...this._renderedNodes],e,this._index),M(this._workQueue,this.view.state.contentCamera.viewForward,this._index),W(this._workQueue,pe,this._index),this._updateQueues(),this._totalWork=this._computeWork(),this._updateLoading(),this._layerIsVisible=e.length>0||this._loadingInitNodePage,this.notifyChange(\"suspended\")}cancelLoading(){this._cancelNodeLoading(),this._cancelIndexLoading()}_cancelNodeLoading(){const e=new Array;this._loadingNodes.forEach((({abortController:t})=>e.push(t))),this._loadingNodes.clear();for(const t of e)t.abort();this._workQueue=[],this._idleQueue.cancelAll(),this._totalWork=this._computeWork(),this._updateLoading()}_updateQueues(){const e=new Set;this._workQueue.forEach((t=>t.load.forEach((t=>e.add(t)))));const t=new Array,i=new Map;this._loadingNodes.forEach(((r,s)=>{e.has(s)?i.set(s,r):t.push(r)})),this._loadingNodes=i;for(const{abortController:r}of t)r.abort();this._workQueue=this._workQueue.filter((e=>{for(const t of e.load)if(this._loadingNodes.has(t))return this._recalcWork=!0,!1;return!0})),this._totalWork=this._computeWork(),this._updateLoading()}_cancelIndexLoading(){this._indexQueue=[],this._indexPagesLoading.forEach((({abortController:e})=>e.abort())),this._indexPagesLoading.clear(),this._totalWork=this._computeWork(),this._updateLoading()}_clearNodeState(){this._nodeLoadEpoch++,this._renderedNodes.forEach((e=>this._removeFromRenderer(e))),this._cancelNodeLoading()}_idleBegin(){this._setUpdateViewNeeded()}_idleEnd(){this._setUpdateViewNeeded()}get running(){return this.suspended?this._updateViewNeeded:this._updateViewNeeded||this._indexQueue.length>0||this._workQueue.length>0||this._idleQueue.running}runTask(e){if(this.suspended){if(this._updateViewNeeded){this._updateViewNeeded=!1;const e=this._isRootNodeVisible();e!==this._layerIsVisible&&(this._layerIsVisible=e,this.notifyChange(\"suspended\")),this._updateLoading()}}else{for(e.run((()=>this._updateWorkQueues()));this._indexQueue.length>0&&e.run((()=>this._processIndexQueue())););this._processWorkQueue(e),this._idleQueue.runTask(e)}}_processIndexQueue(){const e=this._indexQueue.shift(),t=this._loadNodePage(e);return this._indexPagesLoading.set(e,t),t.promise.then((t=>{this._index.addPage(e,t,this._elevationOffset),this._setUpdateViewNeeded()})).then((()=>{this._indexPagesLoading.delete(e)}),(()=>{this._indexPagesLoading.delete(e)})),!0}_processWorkQueue(e){for(;!e.done;){const t=this._scheduleWorkEntry();if(a(t))return;this._processWorkEntry(t),e.madeProgress()}}_scheduleWorkEntry(){let e=this._workQueue.length;for(;e--;){const e=this._workQueue.shift();if(!e.remove.find((e=>!this._renderedNodes.has(e))))return e;this._workQueue.push(e)}return null}_processWorkEntry(e){if(0!==e.load.length)Promise.all(e.load.map((e=>{const t=new AbortController,i=this._memCache.pop(e.toString());return n(i)?this._loadingNodes.set(e,{abortController:t,promise:Promise.resolve(i)}):this._loadingNodes.has(e)||this._loadingNodes.set(e,{abortController:t,promise:this._loadNode(e,t.signal)}),this._loadingNodes.get(e).promise}))).then((t=>{for(let i=0;i<e.load.length;i++)if(t[i]){const r=this._setupRendererData(e.load[i],t[i]);this._addToRenderer(r)}for(const i of e.remove)this._removeFromRenderer(i)})).catch((()=>{})).then((()=>{for(const t of e.load)this._loadingNodes.delete(t);this._updateLoading(),this._recalcWork&&!this._idleQueue.running&&0===this._indexQueue.length&&0===this._loadingNodes.size&&(this._recalcWork=!1,this._setUpdateViewNeeded())})),this._updateLoading();else for(const t of e.remove)this._removeFromRenderer(t)}async _populateClassCodeCodedDomain(e,i){const r=\"CLASS_CODE\",s=this.layer.fieldsIndex.get(r);if(!s||s.domain)return;if(-1===e.indexOf(s.name))return;const o=await t(this.layer.queryCachedStatistics(r,{signal:i}));if(!1===o.ok)return;const n=o.value,a=n&&n.labels&&n.labels.labels;a&&Array.isArray(a)&&(s.domain=new V({name:\"CLASS_CODE\",codedValues:a.map((e=>new k({code:e.value,name:e.label})))}))}async prepareFetchPopupFeatures(e){return this._codedDomainPopulationPromise||(this._codedDomainPopulationAbortController=new AbortController,this._codedDomainPopulationPromise=this._populateClassCodeCodedDomain(e,this._codedDomainPopulationAbortController.signal).then((()=>{this._codedDomainPopulationAbortController=null}))),this._codedDomainPopulationPromise}async whenGraphicAttributes(e,t){const r=this._splitGraphicsPerNode(e),s=this.layer.attributeStorageInfo,o=t.map((e=>T(s,e))),n=async(e,t)=>{const r=this._index.getNode(t);await i(o,(async t=>{const i=t.useElevation?await this._loadElevationAttributeFromGeometry(r.resourceId):await this._loadAndParseAttribute(r,t);if(i)for(const r of e)if(this._isValidPointGraphic(r)){const e=r.pointCloudMetadata.attributePointIndexInNode;this._encodeGraphicAttribute(t,i,e,r.attributes)}}))},a=[];return r.forEach(((e,t)=>{a.push(n(e,t))})),await l(a),e}_isValidPointGraphic(e){return e instanceof X&&e.pointCloudMetadata&&e.pointCloudMetadata.epoch===this._nodeLoadEpoch}_splitGraphicsPerNode(e){const t=new Map;for(const i of e){if(!this._isValidPointGraphic(i))continue;const e=i.pointCloudMetadata,r=t.get(e.nodeId);r?r.push(i):t.set(e.nodeId,[i])}return t}async _loadAndParseAttribute(e,t){const i=await this._loadAttribute(e.resourceId,t,null);return n(i)?$({attributeInfo:t,buffer:i},null,e.vertexCount):null}async _loadElevationAttributeFromGeometry(e){const t=this.layer.store.defaultGeometrySchema,i=J(t,await this._loadGeometry(e,null));return K(i,i.length/3)}highlight(e){if(!e)return{remove(){}};const t=r.isCollection(e)?e.toArray():Array.isArray(e)?e:[e];return this._renderer.highlight(t.map((e=>this._graphicToPointDefinition(e))))}_graphicToPointDefinition(e){if(!this._isValidPointGraphic(e))return null;const{nodeId:t,pointIndexInNode:i}=e.pointCloudMetadata;return null!=t&&null!=i?{nodeId:t,pointId:i}:null}_computeWork(){let e=0;for(const t of this._workQueue)e+=t.load.length+t.remove.length;return e+=this._loadingNodes.size,e+=(this._indexQueue.length+this._indexPagesLoading.size)*this._index.pageSize,e+=this._loadingInitNodePage?100:0,e+=this._updateViewNeeded?100:0,e}get updatingProgressValue(){if(this.suspended)return this._updateViewNeeded?0:1;const e=this._computeWork();return 1-Math.min(this._totalWork,e)/this._totalWork}_updateLoading(){this.notifyChange(\"updating\"),this.notifyChange(\"updatingProgressValue\")}canResume(){return super.canResume()&&this._layerIsVisible}isUpdating(){return this.suspended?this._updateViewNeeded:this._computeWork()>0}_initNodePages(){const e=this.layer.store.index,t=e.nodesPerPage||e.nodePerIndexBlock;return this._index=new O(this.layer.spatialReference,this.view.renderCoordsHelper.spatialReference,t),this._cancelIndexLoading(),this._traverseVisible=this._index.createVisibilityTraverse(),this._loadingInitNodePage=!0,this._layerIsVisible=!0,this.notifyChange(\"suspended\"),this._updateLoading(),this._pageMultiplier=null!=e.nodesPerPage?1:e.nodePerIndexBlock,this._loadNodePage(0).promise.then((e=>{this._index.addPage(0,e,this._elevationOffset),this._loadingInitNodePage=!1,this._setUpdateViewNeeded()}))}_loadNodePage(e){const t=new AbortController,i=`${this.baseUrl}/nodepages/${e*this._pageMultiplier}`;return{promise:this._requestNodePage(i,t.signal).then((t=>t.nodes.map(((t,i)=>({resourceId:null!=t.resourceId?t.resourceId:e*this._index.pageSize+i,obb:t.obb,firstChild:t.firstChild,childCount:t.childCount,vertexCount:null!=t.vertexCount?t.vertexCount:t.pointCount,lodThreshold:null!=t.lodThreshold?t.lodThreshold:t.effectiveArea}))))),abortController:t}}_updateWorkQueues(){if(!this._updateViewNeeded)return!1;let e=this.inverseDensity/this._lodFactor*this._getLodMemoryFactor();const t=this.maximumPointCount*this._lodFactor*this._getLodMemoryFactor();let i=this._computeNodesForMinimumDensity(e),r=this._computePointCount(i),s=Math.sqrt(r/(.75*t));for(;r>t;)e*=s,i=this._computeNodesForMinimumDensity(e),r=this._computePointCount(i),s=Math.sqrt(2);return this._displayNodes(i),this._updateViewNeeded=!1,this._updateLoading(),!0}_computePointCount(e){let t=0;for(let i=0;i<e.length;i++){const r=this._index.getNode(e[i]);r&&(t+=r.vertexCount)}return t}_getLodMemoryFactor(){return this.view.resourceController.memoryController.memoryFactor}_isRootNodeVisible(){let e=!1;return this._traverseVisible({frustum:this.view.state.contentCamera.frustum,clippingBox:this._clippingBox},{predicate:(t,i,r)=>(e=r,!1),pageMiss:()=>{}}),e}_computeNodesForMinimumDensity(e){const t=this.view.state.contentCamera,i=t.frustum,r=this._clippingBox,s=t.viewForward,o=w(s,t.eye),n=I(s,-o,ce),a=t.perScreenPixelRatio/2,d=e*e,l=this._nodeIdArray;l.length=0;const{minScale:h,maxScale:u}=de(this.layer),p=0===h&&0===u?e=>l.push(e):e=>{const t=this._getScale(e);le(t,h,u)&&l.push(e)};return this._traverseVisible({frustum:i,clippingBox:r},{predicate:(e,t,i)=>{if(!i)return!1;if(0===t.childCount)return p(e),!1;const r=this._index.getRenderObb(e);return!(this._computeAveragePixelArea(r,t.lodThreshold,t.vertexCount,n,a)<=d)||(p(e),!1)},pageMiss:(e,t)=>{p(e),this._indexQueue.indexOf(t)<0&&this._indexQueue.push(t)}}),l}_getScale(e){let t=this._nodeScales.get(e);if(null==t){const i=this._index.getNode(e).obb.center;this._tmpPoint.x=i[0],this._tmpPoint.y=i[1],this._tmpPoint.z=i[2],t=this.view.basemapTerrain.getScale(this._tmpPoint),this._nodeScales.set(e,t)}return t}_computeAveragePixelArea(e,t,i,r,s){const o=1e-7,n=Math.max(o,re(e,r));return t/(n*n)/(4*s*s)/i}_loadNode(e,t){try{return this._loadNodeAsync(e,t)}catch(i){throw h(i)||ue.error(i),i}}async _loadAdditionalUserAttributes(e,t,i){const r=this.layer.outFields;if(!r)return[];const s=R(this.layer.fieldsIndex,r),o=new Set(e.map((e=>n(e)?e.name:null))),a=this.layer.attributeStorageInfo,l=[];for(const n of s){if(o.has(n))continue;const e=T(a,n);e&&l.push(t(e))}const h=await u(l);return p(i),d(h,(e=>e))}async _loadNodeAsync(e,t){const i=this._index.getNode(e),r=B(this.layer),s=H(this.layer),o=i.resourceId,d=async e=>{if(a(e))return null;if(e.useElevation)return{attributeInfo:e,buffer:null};const i=await this._loadAttribute(o,e,t);return n(i)?{attributeInfo:e,buffer:i}:null};return this._idleQueue.push((async()=>{const i=this._loadGeometry(o,t),{primaryAttribute:n,modulationAttribute:a}=r,l=d(n),h=d(a),u=s.map((e=>e.attributeInfo)),c=u.map((e=>d(e))),_=this._loadAdditionalUserAttributes([n,a,...u],d,t),[m,g,f,y,b]=await Promise.all([i,l,h,Promise.all(c),_]);p(t);const w={geometryBuffer:m,primaryAttributeData:g,modulationAttributeData:f,filterAttributesData:y,userAttributesData:b,schema:this.layer.store.defaultGeometrySchema,rendererInfo:r,filterInfo:s,obb:this._index.getRenderObb(e),elevationOffset:this._elevationOffset,inSR:this.layer.spatialReference.toJSON(),outSR:this.view.renderCoordsHelper.spatialReference.toJSON()};return this._worker.invoke(w,t)}),t)}async _loadGeometry(e,t){return this._requestData(`${this.baseUrl}/nodes/${e}/geometries/0`,t)}async _loadAttribute(e,t,i){if(a(t)||!t.storageInfo)return null;const r=t.storageInfo.key;return this._requestData(`${this.baseUrl}/nodes/${e}/attributes/${r}`,i)}_requestNodePage(e,t){const i={f:\"json\",token:this.layer.apiKey};return this._indexRequester.request(e,\"json\",{query:i,signal:t})}_requestData(e,t){return this._dataRequester.request(e,\"binary\",{query:{token:this.layer.apiKey},signal:t})}_removeFromRenderer(e){if(this._renderedNodes.has(e)){const t=this._renderer.removeNode(e);this._renderedNodes.delete(e),this._nodeScales.delete(e),this._memCache.put(t.id.toString(),t,ge(t))}}_addToRenderer(e){this._renderedNodes.has(e.id)||(this._renderedNodes.add(e.id),this._renderer.addNode(e))}_setupRendererData(e,t){const i=this._index.getNode(e),r=Math.sqrt(i.lodThreshold/i.vertexCount),s=this._index.getRenderObb(e);if(Z(t))return t.splatSize=r,t.obb=s,t.origin=N(t.obb.center),t;const o=.01*Math.max(s.halfSize[0],s.halfSize[1],s.halfSize[2]);if(t.obb.halfSize[0]>s.halfSize[0]+o||t.obb.halfSize[1]>s.halfSize[1]+o||t.obb.halfSize[2]>s.halfSize[2]+o){if(this._maxLoggedBoxWarnings>0){const i=e=>`[${e.halfSize[0]}, ${e.halfSize[1]}, ${e.halfSize[2]}]`;ue.warn(`Node ${e} reported bounding box too small. got ${i(s)} but points cover ${i(t.obb)}`),0==--this._maxLoggedBoxWarnings&&ue.warn(\"  Too many bounding box errors, stopping reporting for this layer.\")}this._index.setRenderObb(e,t.obb)}return{id:e,coordinates:t.points,origin:N(s.center),rgb:t.rgb,attributes:t.attributes,pointIdFilterMap:t.pointIdFilterMap,highlights:null,splatSize:r,obb:s,isLeaf:0===i.childCount}}getUsedMemory(){let e=0;return this._renderer.forEachNode((t=>{e+=ye,e+=m(t.coordinates);for(const i of t.attributes){const t=i.values;g(t.buffer)&&(e+=m(t))}})),e}getUnloadedMemory(){const e=this._renderedNodes.size;if(e<4)return 0;const t=[...this._renderedNodes].reduce(((e,t)=>e+this._index.getNode(t).vertexCount));let i=this._loadingNodes.size;for(let r=0;r<this._workQueue.length;r++)i+=this._workQueue[r].load.length,i-=this._workQueue[r].remove.length;if(i<0)return 0;return i*t/e*((this.getUsedMemory()-e*ye)/t)+i*ye}ignoresMemoryFactor(){return!1}get performanceInfo(){return{nodes:this._renderedNodes.size,displayedNumberOfFeatures:[...this._renderedNodes].reduce(((e,t)=>e+this._index.getNode(t).vertexCount),0),maximumNumberOfFeatures:this.maximumPointCount,totalNumberOfFeatures:-1,core:null,\"Loading Nodes\":this._loadingNodes.size,\"Index Queue\":this._indexQueue.length,\"Work Queue\":this._workQueue.length,\"Idle Queue\":this._idleQueue.length}}get test(){return{index:this._index,visibleNodes:this._renderedNodes}}};e([y()],_e.prototype,\"layer\",void 0),e([y({readOnly:!0,aliasOf:\"layer.parsedUrl.path\"})],_e.prototype,\"baseUrl\",void 0),e([y({readOnly:!0})],_e.prototype,\"pointScale\",null),e([y({readOnly:!0})],_e.prototype,\"useRealWorldSymbolSizes\",null),e([y({readOnly:!0})],_e.prototype,\"pointSize\",null),e([y({readOnly:!0})],_e.prototype,\"inverseDensity\",null),e([y()],_e.prototype,\"maximumPointCount\",void 0),e([y({readOnly:!0})],_e.prototype,\"availableFields\",null),e([y({readOnly:!0})],_e.prototype,\"_clippingBox\",null),e([y({readOnly:!0})],_e.prototype,\"_elevationOffset\",null),e([y({type:Boolean})],_e.prototype,\"slicePlaneEnabled\",void 0),e([y()],_e.prototype,\"updating\",void 0),e([y(se)],_e.prototype,\"updatingProgress\",void 0),e([y({readOnly:!0})],_e.prototype,\"updatingProgressValue\",null),_e=e([b(\"esri.views.3d.layers.PointCloudLayerView3D\")],_e);const me=_e;function ge(e){return 5*e.coordinates.length+128}const fe=C(),ye=160;export{me as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Error.js\";import{isSome as s}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/set.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{unpackFieldNames as o,populateMissingFields as p}from\"../../../../layers/support/fieldUtils.js\";import{getFetchPopupTemplate as a,getRequiredFields as i}from\"../../../layers/support/popupUtils.js\";const c=c=>{let u=class extends c{_validateFetchPopupFeatures(e){const{layer:s}=this,{popupEnabled:t}=s;if(!t)return new r(\"scenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{layer:s});return a(s,e)?void 0:new r(\"scenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:s})}async prepareFetchPopupFeatures(e){}async fetchPopupFeatures(e,r){const t=this._validateFetchPopupFeatures(r);if(t)return Promise.reject(t);const c=s(r)?r.clientGraphics:null;if(!c||0===c.length)return Promise.resolve([]);const u=\"scene\"===this.layer.type&&s(this.layer.associatedLayer)?this.layer.associatedLayer:this.layer,n=o(this.layer.fieldsIndex,await i(u,a(this.layer,r)));await this.prepareFetchPopupFeatures(n);const l=new Set,h=[],y=[];for(const s of c)p(n,s,l)?y.push(s):h.push(s);return 0===y.length?Promise.resolve(h):this.whenGraphicAttributes(y,[...l]).catch((()=>y)).then((e=>h.concat(e)))}};return u=e([t(\"esri.views.3d.layers.support.PopupSceneLayerView\")],u),u};export{c as PopupSceneLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n"],"names":["s","c","a","d","output","e","l","p","extensions","add","include","i","attributes","n","vertex","uniforms","varyings","code","r","drawScreenSize","fragment","t","o","Object","freeze","__proto__","build","constructor","super","getTransferList","geometryBuffer","primaryAttributeData","buffer","push","modulationAttributeData","filterAttributesData","u","userAttributesData","h","indexOf","getParentId","remove","length","pop","load","g","this","_pages","pageSize","_nodeSR","_renderSR","addPage","obb","obbs","nodes","renderObbs","parents","Uint32Array","childCount","firstChild","hasPage","getNode","getRenderObb","getRenderCenter","center","setRenderObb","hasNodes","forEachNodeId","createVisibilityTraverse","index","queue","masks","tempAabb","f","clippingBox","frustum","predicate","pageMiss","renderer","type","toJSON","attributeStorageInfo","field","colorModulation","rendererJSON","isRGBRenderer","primaryAttribute","modulationAttribute","filters","map","filterJSON","attributeInfo","pointSizeAlgorithm","name","attributeValues","valueType","valuesPerElement","storageInfo","useElevation","encoding","toLowerCase","constructOnly","clonable","prototype","_context","_highlights","Set","hasHighlights","size","destroy","_enableSet","_removeSet","_disableSet","delete","enabled","forEachNode","_enableSetForNode","ids","get","id","forEach","addHighlight","_disableSetForNode","removeHighlight","nodeAdded","nodeRemoved","removeAll","Map","_add","nodeId","pointId","set","initializeProgram","shader","configuration","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","rctx","initializePipeline","depthTest","func","depthWrite","colorWrite","m","stencilWrite","sceneHasOcludees","stencilTest","b","arguments","count","K","positions","J","N","W","colors","Q","_params","V","isGround","_bindParameters","inverseViewport","highlightDepthTexture","M","_addHighlight","_removeHighlight","canRender","layerUid","_useFixedSizes","_scaleFactor","_minSizePx","_useRealWorldSymbolSizes","_size","_sizePx","_slicePlaneEnabled","_clipBox","x","S","_techniqueConfig","C","tempMatrix4","tempVec3","needsHighlight","initializeRenderContext","_techniqueRep","shaderTechniqueRepository","requestRender","uninitializeRenderContext","intersect","A","camera","perScreenPixelRatio","near","w","_getSizeParams","R","_","ne","I","T","Array","L","E","z","forAll","splatSize","j","H","ee","isLeaf","dist","$","q","y","v","F","origin","coordinates","P","point","ie","normal","node","options","store","U","graphicUid","createGraphic","O","oe","results","min","max","all","prepareTechnique","pass","vao","_initNode","drawScreenSpace","hasOccludees","releaseAndAcquire","D","_technique","render","useTechnique","setUniform3fv","setUniformMatrix4fv","projectionMatrix","setUniform2fv","nearFar","isHighlightPass","fullViewport","pixelRatio","drawFixedSize","setUniform2f","fixedSize","fullHeight","sliceHelper","plane","highlights","screenMinSize","Z","viewMatrix","bindVAO","_renderHighlightFragments","drawArrays","G","component","useFixedSizes","_requestRender","scaleFactor","minSizePx","useRealWorldSymbolSizes","sizePx","addNode","removeNode","filterInPlace","clear","highlight","te","se","filter","re","Y","B","k","rgb","Math","ue","ce","_e","maximumPointCount","_renderer","_rendererAdded","_renderedNodes","_nodeScales","_updateViewNeeded","_lodFactor","_maxLoggedBoxWarnings","_pageMultiplier","_nodeLoadEpoch","_indexQueue","_workQueue","_idleQueue","_indexPagesLoading","_loadingNodes","_recalcWork","_layerIsVisible","_codedDomainPopulationPromise","_codedDomainPopulationAbortController","_totalWork","_index","_loadingInitNodePage","_nodeIdArray","pointScale","layer","pointSize","inverseDensity","pointsPerInch","availableFields","outFields","fieldsIndex","from","_clippingBox","view","clippingArea","renderSpatialReference","_elevationOffset","elevationInfo","mode","spatialReference","unit","offset","initialize","resourceController","_worker","schedule","addResolvingPromise","promise","_tmpPoint","_indexRequester","createStreamDataRequester","_dataRequester","_initRenderer","_initNodePages","memoryController","_memCache","newCache","uid","updatingHandles","_setUpdateViewNeeded","_elevationOffsetChanged","_rendererChanged","_reload","effectiveScaleRange","state","contentCamera","handles","basemapTerrain","on","_scaleUpdateHandler","events","when","scheduler","registerTask","he","registerIdleStateCallbacks","_idleBegin","_idleEnd","suspended","_clearNodeState","_updateLoading","cancelLoading","_destroyRenderer","abort","_createGraphic","_setPointsVisible","sqrt","qualitySettings","sceneService","pointCloud","lodFactor","pointIdFilterMap","computeMapPointFromVec3d","_createGraphicAttributes","X","pointCloudMetadata","pointIndexInNode","attributePointIndexInNode","epoch","geometry","sourceLayer","_encodeGraphicAttribute","values","_stage","addRenderPlugin","removeRenderPlugin","ae","minScale","maxScale","extent","fe","has","scale","_displayNodes","sort","viewForward","_updateQueues","_computeWork","notifyChange","_cancelNodeLoading","_cancelIndexLoading","abortController","cancelAll","_removeFromRenderer","running","runTask","_isRootNodeVisible","run","_updateWorkQueues","_processIndexQueue","_processWorkQueue","shift","_loadNodePage","then","done","_scheduleWorkEntry","_processWorkEntry","madeProgress","find","Promise","AbortController","toString","resolve","_loadNode","signal","_setupRendererData","_addToRenderer","catch","domain","queryCachedStatistics","ok","value","labels","isArray","codedValues","label","_populateClassCodeCodedDomain","_splitGraphicsPerNode","async","_loadElevationAttributeFromGeometry","resourceId","_loadAndParseAttribute","_isValidPointGraphic","_loadAttribute","vertexCount","defaultGeometrySchema","_loadGeometry","toArray","_graphicToPointDefinition","updatingProgressValue","canResume","isUpdating","nodesPerPage","nodePerIndexBlock","renderCoordsHelper","_traverseVisible","baseUrl","_requestNodePage","pointCount","lodThreshold","effectiveArea","_getLodMemoryFactor","_computeNodesForMinimumDensity","_computePointCount","memoryFactor","eye","de","_getScale","le","_computeAveragePixelArea","getScale","_loadNodeAsync","error","_loadAdditionalUserAttributes","schema","rendererInfo","filterInfo","elevationOffset","inSR","outSR","invoke","_requestData","key","token","apiKey","request","query","put","ge","hasOwnProperty","halfSize","warn","points","getUsedMemory","ye","getUnloadedMemory","reduce","ignoresMemoryFactor","performanceInfo","displayedNumberOfFeatures","maximumNumberOfFeatures","totalNumberOfFeatures","core","test","visibleNodes","readOnly","aliasOf","Boolean","me","_validateFetchPopupFeatures","popupEnabled","reject","clientGraphics","associatedLayer","prepareFetchPopupFeatures","whenGraphicAttributes","concat","popupTemplate","getRequiredFields","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","includes","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate"],"sourceRoot":""}