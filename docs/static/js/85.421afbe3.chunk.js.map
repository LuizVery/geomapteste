{"version":3,"sources":["../node_modules/@arcgis/core/views/2d/layers/BitmapTileLayerView2D.js","../node_modules/@arcgis/core/views/layers/TileLayerView.js","../node_modules/@arcgis/core/views/2d/layers/TileLayerView2D.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/views/layers/RefreshableLayerView.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js"],"names":["r","s","this","view","timeline","record","layer","title","_bitmapView","t","_tileInfoView","container","addChild","removeChild","removeAllChildren","e","i","c","a","Promise","reject","type","get","allSublayers","toArray","filter","minScale","maxScale","popupTemplate","popupEnabled","visible","o","map","createQuery","event","p","renderer","geometry","createFetchPopupFeaturesQueryGeometry","getRequiredFields","outFields","queryFeatures","features","then","concat","value","Boolean","prototype","w","getLogger","d","_","arguments","_tileStrategy","_fetchQueue","tileInfo","spatialReference","equals","watch","doRefresh","addResolvingPromise","resampling","pause","state","update","resume","notifyChange","tileServers","n","fullExtent","u","tileInfoView","concurrency","length","process","fetchTile","m","cachePolicy","acquireTile","releaseTile","requestUpdate","requestRender","destroy","clear","y","updateRequested","suspended","reset","tiles","forEach","_enqueueTileFetch","createTile","bitmap","getTileCoords","key","x","resolution","getTileResolution","size","width","height","abort","id","once","tilemapCache","signal","_fetchImage","_createBlankImage","l","fetchAvailabilityUpsample","level","row","col","h","_resampleImage","has","push","source","error","getLODInfoAt","getXForColumn","getYForRow","f","g","Math","round","getContext","drawImage","document","createElement","I","left","right","top","bottom","_get","Number","String","json","write","readOnly","base","typeMap","extent","polygon","clone","types","read","path","ofType","rect","clips","moving","attached","lastUpdateId","fadeTransitionEnabled","opacity","handles","add","blendMode","effect","on","whenLayerView","destroyed","attach","when","detach","remove","isUpdating","isFulfilled","isResolved","_set","isVisibleAtScale","scale","set","catch","declaredClass","xoffset","max","abs","yoffset","stops","maxSize","minSize","floor","pointerType","visualVariables","symbol","uniqueValueInfos","classBreakInfos","overlayPixelSizeInMapUnits","basemapSpatialReference","xmin","min","ymin","xmax","ymax"],"mappings":"6NAI4XA,EAAE,SAAAA,GAAI,IAAIC,EAAC,4JAAiB,WAASC,KAAKC,KAAKC,SAASC,OAAnB,UAA6BH,KAAKI,MAAMC,MAAxC,8BAA0EL,KAAKM,YAAY,IAAIC,IAAEP,KAAKQ,eAAeR,KAAKS,UAAUC,SAASV,KAAKM,eAA5K,oBAAyL,WAASN,KAAKS,UAAUE,YAAYX,KAAKM,aAAaN,KAAKM,YAAYM,wBAAhQ,GAAed,GAAuQ,OAAOC,EAAEc,YAAE,CAACC,YAAE,+CAA+Cf,K,6MCAxMe,EAAE,SAAAA,GAAI,IAAIC,EAAC,+MAAiB,WAAyBF,EAAEd,GAA3B,IAAAiB,EAAA,oBAAAA,EAAA,yDAA0CA,EAAGhB,KAATI,MAAkBS,EAAtD,yCAA+DI,QAAQC,OAAO,IAAIpB,IAAE,mCAAmC,gCAAgC,CAACM,MAAMY,MAA9J,UAAsK,SAASA,EAAEG,KAAjL,yCAA6LF,QAAQC,OAAO,IAAIpB,IAAE,mCAAmC,8BAA8B,CAACqB,KAAKH,EAAEG,SAA3R,cAAySL,EAAEd,KAAKoB,IAAI,cAAcL,EAAEC,EAAEK,aAAaC,UAAUC,QAAQ,SAAAV,GAAI,IAAMf,EAAE,IAAIe,EAAEW,UAAUV,GAAGD,EAAEW,SAASjB,EAAE,IAAIM,EAAEY,UAAUX,GAAGD,EAAEY,SAAS,OAAOZ,EAAEa,eAAeb,EAAEc,cAAcd,EAAEe,SAAS9B,GAAGS,KAAre,kBAAifsB,YAAEd,EAAEe,IAAF,uCAAO,WAAMhC,GAAN,MAAAkB,EAAA,WAAAA,EAAA,6DAAgBa,EAAE/B,EAAEiC,cAAcf,EAAET,YAAER,GAAGA,EAAEiC,MAAM,KAAKlB,EAAEmB,YAAE,CAACC,SAASpC,EAAEoC,SAASF,MAAMhB,IAAIa,EAAEM,SAAS,EAAKC,sCAAsCvB,EAAEC,GAAjJ,SAAsKhB,EAAE4B,cAAcW,oBAAtL,cAAoJR,EAAES,UAAtJ,gBAAuNxC,EAAEyC,cAAcV,GAAvO,uCAA2OW,UAA3O,2CAAP,wDAA+PC,MAAM,SAAA5B,GAAC,aAAE,MAAG6B,OAAH,oBAAa7B,EAAEiB,KAAK,SAAAjB,GAAC,OAAEA,EAAE8B,SAAQpB,OAAOqB,eAAnyB,gDAAjB,8DAAe9B,GAAmzB,OAAOD,YAAE,CAACd,eAAKgB,EAAE8B,UAAU,aAAQ,GAAQ9B,EAAEF,YAAE,CAACG,YAAE,qCAAqCD,K,+TCA3c+B,EAAEhC,IAAEiC,UAAU,wCAAwCC,EAAE,CAAC,EAAE,GAAOC,EAAC,kDAA8B,aAAa,kCAAC,eAASC,YAAgBC,cAAc,KAAK,EAAKC,YAAY,KAAK,EAAKhD,MAAM,KAA9E,EAA3C,8CAA8H,WAAY,IAAyDN,EAAzD,OAAOe,EAAEb,KAAKI,MAAMiD,SAASvC,EAAED,GAAGA,EAAEyC,iBAAuBxC,IAAIhB,EAAE,IAAIS,IAAE,uCAAuC,+CAA+C,CAACH,MAAMJ,KAAKI,SAASU,EAAEyC,OAAOvD,KAAKC,KAAKqD,oBAAoBxD,EAAE,IAAIS,IAAE,2CAA2C,iFAAiF,CAACH,MAAMJ,KAAKI,SAASJ,KAAKwD,MAAM,cAAc,WAAK,EAAKC,eAAe3D,GAAGE,KAAK0D,oBAAoBzC,QAAQC,OAAOpB,MAAzlB,sBAA6lB,WAAiB,QAAQ,eAAeE,KAAKI,SAAQ,IAAKJ,KAAKI,MAAMuD,aAAlqB,qBAA6qB,WAAU,OAAO,OAA9rB,oBAAmsB,SAAO9C,GAAGb,KAAKoD,YAAYQ,QAAQ5D,KAAKoD,YAAYS,MAAMhD,EAAEgD,MAAM7D,KAAKmD,cAAcW,OAAOjD,GAAGb,KAAKoD,YAAYW,SAAS/D,KAAKgE,aAAa,cAA90B,oBAA01B,WAAQ,WAAOnD,EAAE,gBAAgBb,KAAKI,MAAMJ,KAAKI,MAAM6D,YAAY,KAAKjE,KAAKQ,cAAc,IAAI0D,IAAElE,KAAKI,MAAMiD,SAASrD,KAAKI,MAAM+D,YAAYnE,KAAKoD,YAAY,IAAIgB,IAAE,CAACC,aAAarE,KAAKQ,cAAc8D,YAAYzD,GAAG,GAAGA,EAAE0D,QAAQ,GAAGC,QAAQ,SAAC3D,EAAEN,GAAH,OAAO,EAAKkE,UAAU5D,EAAEN,MAAKP,KAAKmD,cAAc,IAAIuB,IAAE,CAACC,YAAY,OAAOhB,WAAW3D,KAAK2D,WAAWiB,YAAY,SAAA/D,GAAC,OAAE,EAAK+D,YAAY/D,IAAGgE,YAAY,SAAAhE,GAAC,OAAE,EAAKgE,YAAYhE,IAAGwD,aAAarE,KAAKQ,gBAAgBR,KAAK8E,gBAAgB9E,KAAKS,UAAUsE,gBAApZ,8CAAA/E,MAAA,KAAAA,QAAl6B,oBAAq1C,WAAS,+DAAeA,KAAKmD,cAAc6B,UAAUhF,KAAKoD,YAAY6B,QAAQjF,KAAKS,UAAUG,oBAAoBZ,KAAKoD,YAAYpD,KAAKmD,cAAcnD,KAAKQ,cAAc,OAA7/C,uBAAkgD,WAAYR,KAAK8E,kBAAnhD,wBAAmiD,WAAa9E,KAAK8E,kBAArjD,qBAAqkD,WAAU9E,KAAK8E,kBAAplD,mDAAomD,SAAsCjE,EAAEN,GAAG,OAAO2E,YAAErE,EAAEN,EAAEP,KAAKC,QAAjqD,8DAAuqD,iCAAAe,EAAA,sDAAkBhB,KAAKmF,iBAAiBnF,KAAKoF,YAAYpF,KAAKoD,YAAYiC,QAAQrF,KAAKmD,cAAcmC,MAAMC,SAAS,SAAA1E,GAAC,OAAE,EAAK2E,kBAAkB3E,MAAKb,KAAKgE,aAAa,aAArK,gDAAvqD,8EAAy1D,WAAa,IAAInD,EAAE,OAAO,OAAOA,EAAEb,KAAKoD,kBAAa,EAAOvC,EAAE0D,QAAQ,IAA/5D,yBAAi6D,SAAY1D,GAAE,YAAON,EAAEP,KAAKM,YAAYmF,WAAW5E,GAAGC,EAAEP,EAAEmF,OAAO,OAAM,EAAU1F,KAAKQ,cAAcmF,cAAc3C,EAAEzC,EAAEqF,KAA/C,mBAAC9E,EAAE+E,EAAH,KAAK/E,EAAEoE,EAAP,KAAoDpE,EAAEgF,WAAW9F,KAAKQ,cAAcuF,kBAAkBxF,EAAEqF,KAAxG,EAAgI5F,KAAKQ,cAAc6C,SAAS2C,KAA5J,mBAA8GlF,EAAEmF,MAAhH,KAAsHnF,EAAEoF,OAAxH,KAAiKlG,KAAKwF,kBAAkBjF,GAAGP,KAAKM,YAAYI,SAASH,GAAGP,KAAK8E,gBAAgBvE,IAArtE,yBAAutE,SAAYM,GAAGb,KAAKoD,YAAY+C,MAAMtF,EAAE+E,IAAIQ,IAAIpG,KAAKM,YAAYK,YAAYE,GAAGA,EAAEwF,KAAK,UAAU,kBAAIxF,EAAEmE,aAAYhF,KAAK8E,kBAA/0E,8DAA+1E,WAAgBjE,EAAEN,GAAlB,MAAAS,EAAA,mBAAAA,EAAA,yDAA2BF,EAAE,iBAAiBd,KAAKI,MAAMJ,KAAKI,MAAMkG,aAAa,KAAKtF,GAAGlB,YAAES,IAAIA,EAAEgG,OAAWzF,EAA5G,0CAA+Hd,KAAKwG,YAAY3F,EAAEG,GAAlJ,2EAAkKjB,YAAE,EAAD,KAAMC,KAAK2D,WAA9K,0CAAgM3D,KAAKyG,qBAArM,kCAAuOC,EAAE,IAAI3F,IAAE,EAAE,EAAE,EAAE,GAArP,oBAA2QD,EAAE6F,0BAA0B9F,EAAE+F,MAAM/F,EAAEgG,IAAIhG,EAAEiG,IAAIJ,EAAE,CAACH,OAAOvF,IAArU,WAAyU0F,EAAEE,QAAQ/F,EAAE+F,OAAQ5G,KAAK2D,WAAlW,0CAAoX3D,KAAKyG,qBAAzX,yBAAqZzG,KAAKwG,YAAYE,EAAE1F,GAAxa,QAA6Ya,EAA7Y,8DAAub9B,YAAE,EAAD,IAAxb,qDAA4cC,KAAKwG,YAAY3F,EAAEG,GAA/d,QAAoca,EAApc,sBAA8ekF,EAAeL,EAArBE,MAAY1C,EAASwC,EAAbG,IAAUzC,EAAGsC,EAAPI,IAAtf,kBAAsgB9G,KAAK2D,YAAYoD,IAAIlG,EAAE+F,MAAM5G,KAAKgH,eAAenF,EAAEkF,EAAE7C,EAAEE,EAAEvD,EAAE+F,MAAM/F,EAAEgG,IAAIhG,EAAEiG,KAAKjF,GAAplB,iEAA/1E,+HAAq7F,WAAwBhB,GAAxB,sBAAAG,EAAA,yDAA+BhB,KAAKoD,YAAY6D,IAAIpG,EAAE+E,IAAIQ,IAA1D,0CAAiFpG,KAAKoD,YAAY8D,KAAKrG,EAAE+E,KAAzG,OAAyErF,EAAzE,OAA8GM,EAAE6E,OAAOyB,OAAO5G,EAAEM,EAAE6E,OAAOO,MAAMjG,KAAKQ,cAAc6C,SAAS2C,KAAK,GAAGnF,EAAE6E,OAAOQ,OAAOlG,KAAKQ,cAAc6C,SAAS2C,KAAK,GAAGnF,EAAEwF,KAAK,UAAU,kBAAI,EAAKvB,mBAAjQ,gDAA4R/E,YAAE,EAAD,KAAK+C,EAAEsE,MAAF,MAAlS,QAA6SpH,KAAK8E,gBAAlT,yDAAr7F,uHAAwvG,WAAkBjE,EAAEN,GAApB,SAAAS,EAAA,+EAA8BhB,KAAKI,MAAMqE,UAAU5D,EAAE+F,MAAM/F,EAAEgG,IAAIhG,EAAEiG,IAAI,CAACP,OAAOhG,KAA/E,gDAAxvG,qFAA20G,SAAeM,EAAEN,EAAEO,EAAEhB,EAAEC,EAAEiB,EAAE0F,GAAG,IAAM7E,EAAE7B,KAAKQ,cAAc6C,SAAS2C,KAAKe,EAAE/G,KAAKQ,cAAcuF,kBAAkBxF,GAAG2D,EAAElE,KAAKQ,cAAcuF,kBAAkBhG,GAAOgB,EAAEf,KAAKQ,cAAc6G,aAAatH,GAASqE,EAAErD,EAAEuG,cAAcZ,GAAGhC,EAAE3D,EAAEwG,WAAWvG,GAA8CiB,GAA3ClB,EAAEf,KAAKQ,cAAc6G,aAAa9G,IAAa+G,cAAcxH,GAAG0H,EAAEzG,EAAEwG,WAAWzG,GAAG2G,EAAEC,KAAKC,OAAOvD,EAAEnC,GAAG8E,GAAG7B,EAAEwC,KAAKC,QAAQjD,EAAE8C,GAAGT,GAAGjE,EAAE4E,KAAKC,MAAM9F,EAAE,IAAIqC,EAAE6C,IAAI/D,EAAE0E,KAAKC,MAAM9F,EAAE,IAAIqC,EAAE6C,IAAI9D,EAAEjD,KAAKyG,oBAAoB,OAAOxD,EAAE2E,WAAW,MAAMC,UAAUhH,EAAE4G,EAAEvC,EAAEpC,EAAEE,EAAE,EAAE,EAAEnB,EAAE,GAAGA,EAAE,IAAIoB,IAAr0H,+BAAu0H,WAAmB,QAAOpC,EAAEb,KAAKQ,cAAc6C,SAAS2C,KAAKzF,EAAEuH,SAASC,cAAc,UAAU,OAAM,EAAmBlH,EAAnB,mBAACN,EAAE0F,MAAH,KAAS1F,EAAE2F,OAAX,KAAqB3F,MAAl8H,GAAekH,YAAED,YAAE3F,YAAEkF,YAAE9E,SAA+6HpB,YAAE,CAACG,eAAKiC,EAAEJ,UAAU,aAAa,MAAyD,IAAImF,EAAvD/E,EAAEpC,YAAE,CAAC6F,YAAE,yCAAyCzD,I,uECAxuJlD,E,uHCAWc,EAAC,4H,MAAed,GAAyDkC,EAArDpB,EAAEf,YAAE,CAAC+B,YAAE,uCAAuChB,GDAvEC,EAAEf,EAAC,kDAAiB,aAAa,kCAAC,eAASmD,YAAgB/B,KAAK,OAAO,EAAK8G,KAAK,KAAK,EAAKC,MAAM,KAAK,EAAKC,IAAI,KAAK,EAAKC,OAAO,KAA/F,EAA9B,yCAAkI,WAAQ,OAAO,IAAIrI,EAAE,CAACkI,KAAKjI,KAAKiI,KAAKC,MAAMlI,KAAKkI,MAAMC,IAAInI,KAAKmI,IAAIC,OAAOpI,KAAKoI,WAAjN,mBAA0N,WAAc,OAAOpI,KAAKqI,KAAK,YAAY,GAAG,MAAxQ,GAAexH,GAA6PN,YAAE,CAACT,YAAE,CAACqB,KAAK,CAACmH,OAAOC,QAAQC,KAAK,CAACC,OAAM,MAAO3H,EAAE+B,UAAU,YAAO,GAAQtC,YAAE,CAACT,YAAE,CAACqB,KAAK,CAACmH,OAAOC,QAAQC,KAAK,CAACC,OAAM,MAAO3H,EAAE+B,UAAU,aAAQ,GAAQtC,YAAE,CAACT,YAAE,CAACqB,KAAK,CAACmH,OAAOC,QAAQC,KAAK,CAACC,OAAM,MAAO3H,EAAE+B,UAAU,WAAM,GAAQtC,YAAE,CAACT,YAAE,CAACqB,KAAK,CAACmH,OAAOC,QAAQC,KAAK,CAACC,OAAM,MAAO3H,EAAE+B,UAAU,cAAS,GAAQtC,YAAE,CAACT,YAAE,CAAC4I,UAAS,KAAM5H,EAAE+B,UAAU,UAAU,MAAyD,IEA5bqC,EFAgcjD,EAAvDnB,EAAEf,EAAEQ,YAAE,CAACsB,YAAE,uCAAuCf,G,2CEAjboD,EAAE,CAACyE,KAAKpI,IAAEqF,IAAI,OAAOgD,QAAQ,CAACC,OAAOnE,IAAEoE,QAAQhI,MAAQC,EAAEmE,EAAC,kDAAiB,aAAa,kCAAC,eAAShC,YAAgB/B,KAAK,WAAW,EAAKgB,SAAS,KAAxD,EAA9B,yCAA2F,WAAc,OAAOnC,KAAKqI,KAAK,YAAY,GAAG,IAAzI,mBAA2I,WAAQ,OAAO,IAAInD,EAAE,CAAC/C,SAASnC,KAAKmC,SAAS4G,cAAxL,GAAe9G,GAAqLpB,YAAE,CAACf,YAAE,CAACkJ,MAAM9E,EAAEsE,KAAK,CAACS,KAAKlJ,IAAE0I,OAAM,MAAO1H,EAAE8B,UAAU,gBAAW,GAAQhC,YAAE,CAACf,YAAE,CAAC4I,UAAS,KAAM3H,EAAE8B,UAAU,UAAU,MAAyD,IAAI7B,EAAvDD,EAAEmE,EAAErE,YAAE,CAACgB,YAAE,uCAAuCd,GCAjpBR,EAAC,kDAAiB,aAAa,kCAAC,eAAS2C,YAAgB/B,KAAK,OAAO,EAAK+H,KAAK,GAAhD,EAA9B,yCAAiF,WAAc,OAAOlJ,KAAKqI,KAAK,YAAY,GAAG,MAA/H,GAAexH,GAAoHf,YAAE,CAAC+B,YAAE,CAACV,KAAK,CAAC,CAAC,CAACmH,UAAUE,KAAK,CAACC,OAAM,MAAOlI,EAAEsC,UAAU,YAAO,GAAQ/C,YAAE,CAAC+B,YAAE,CAAC6G,UAAS,KAAMnI,EAAEsC,UAAU,UAAU,MAAmD,IAAIZ,EAAjD1B,EAAET,YAAE,CAACC,YAAE,mCAAmCQ,GCAgFQ,EAAEF,IAAEsI,OAAO,CAACvD,IAAI,OAAO+C,KAAK1G,EAAE2G,QAAQ,CAACQ,KAAKrC,EAAEmC,KAAKlG,EAAEb,SAAS+B,KAAKwC,EAAE,SAAA7F,GAAI,IAAIoB,EAAC,kDAAiB,aAAa,kCAAC,eAASiB,YAAgBmG,MAAM,IAAItI,EAAE,EAAKuI,QAAO,EAAG,EAAKC,UAAS,EAAG,EAAKC,cAAc,EAAE,EAAKrE,iBAAgB,EAAhH,EAA9B,8CAAiJ,WAAY,IAAK5E,EAAL,OAAOP,KAAKS,YAAYT,KAAKS,UAAU,IAAIO,KAAGhB,KAAKS,UAAUgJ,uBAAsB,EAAGzJ,KAAKS,UAAUiJ,QAAQ,EAAE1J,KAAKS,UAAU4I,MAAMrJ,KAAKqJ,MAAMrJ,KAAK2J,QAAQC,IAAI,CAAC9I,YAAEd,KAAK,aAAa,SAAAO,GAAI,EAAKE,YAAY,EAAKA,UAAUmB,SAASrB,GAAG,EAAKN,OAAOM,GAAG,EAAK4E,iBAAiB,EAAKlF,KAAK6E,mBAAkB,GAAIhE,YAAEd,KAAK,CAAC,gBAAgB,cAAc,WAAK,IAAIO,EAAEM,EAAE,EAAKJ,YAAY,EAAKA,UAAUiJ,QAAQ,OAAOnJ,EAAE,OAAOM,EAAE,EAAKT,YAAO,EAAOS,EAAE6I,SAASnJ,EAAE,MAAK,GAAIO,YAAEd,KAAK,CAAC,oBAAoB,SAAAO,GAAI,EAAKE,YAAY,EAAKA,UAAUoJ,UAAUtJ,MAAK,GAAIO,YAAEd,KAAK,CAAC,iBAAiB,SAAAO,GAAI,EAAKE,YAAY,EAAKA,UAAUqJ,OAAOvJ,MAAK,GAAIP,KAAKqJ,MAAMU,GAAG,UAAU,WAAK,EAAKtJ,UAAU4I,MAAM,EAAKA,MAAM,EAAKrF,aAAa,cAAc,OAAOzD,EAAEP,KAAKC,OAAOM,EAAEyJ,cAAchK,KAAKC,KAAK+J,cAAchK,KAAKI,OAAOqC,MAAM,SAAAlC,GAAIA,IAAI,GAAM,EAAKgJ,UAAU,EAAKU,YAAY,EAAKC,SAAS,EAAKpF,gBAAgB,EAAKyE,UAAS,MAAO,eAASvJ,KAAKmK,OAAO1H,MAAM,WAAK,EAAK8G,UAAU,EAAKU,YAAY,EAAKC,SAAS,EAAKpF,gBAAgB,EAAKyE,UAAS,MAAO,iBAAvoC,qBAAgpC,WAAUvJ,KAAKuJ,WAAWvJ,KAAKoK,SAASpK,KAAKuJ,UAAS,GAAIvJ,KAAK2J,QAAQU,OAAO,cAAcrK,KAAKmF,iBAAgB,IAAjwC,oBAAowC,WAAe,OAAOnF,KAAKuJ,WAAWvJ,KAAKoF,YAAYpF,KAAKmF,iBAAiBnF,KAAKsK,gBAAt1C,8BAAo2C,SAAiB/J,GAAG,IAAIM,GAAE,EAASd,EAAEC,KAAKI,MAAMU,EAAEf,EAAEyB,SAAS1B,EAAEC,EAAE0B,SAAS,GAAG,MAAMX,GAAG,MAAMhB,EAAE,CAAC,IAAIC,GAAGe,EAAEe,GAAG/B,GAAGC,GAAGQ,GAAGO,IAAIf,GAAE,IAAK8B,GAAGtB,GAAGT,IAAI+B,GAAE,GAAIhB,EAAEd,GAAG8B,EAAE,OAAOhB,IAAjgD,2BAAmgD,WAAgBb,KAAKiK,WAAWjK,KAAKmF,kBAAkBnF,KAAKmF,iBAAgB,EAAGnF,KAAKoF,WAAWpF,KAAKC,KAAK6E,mBAA5mD,2BAA6nD,SAAcvE,IAAIP,KAAKuK,eAAevK,KAAKwK,cAAcxK,KAAKyK,KAAK,mBAAmBlK,GAAGP,KAAKmF,kBAAkBnF,KAAKoF,YAAYpF,KAAKmF,iBAAgB,EAAGnF,KAAK8D,OAAOvD,KAAKP,KAAKmF,iBAAgB,IAA5zD,wBAA+zD,WAAa,OAAM,IAAl1D,yBAAq1D,WAAc,OAAM,IAAz2D,uBAA42D,WAAY,QAAQ,mEAAmBnF,KAAK0K,iBAAiB1K,KAAKC,KAAK0K,WAAn7D,GAAe9J,GAA66D,OAAON,YAAE,CAACT,YAAE,CAACqB,KAAKJ,EAAE6J,IAAR,SAAYrK,GAAG,IAAMM,EAAEd,YAAEQ,EAAEP,KAAKqI,KAAK,SAAStH,GAAGf,KAAKyK,KAAK,QAAQ5J,OAAOoB,EAAEY,UAAU,aAAQ,GAAQtC,YAAE,CAACT,eAAKmC,EAAEY,UAAU,cAAS,GAAQtC,YAAE,CAACT,eAAKmC,EAAEY,UAAU,gBAAW,GAAQtC,YAAE,CAACT,eAAKmC,EAAEY,UAAU,iBAAY,GAAQtC,YAAE,CAACT,eAAKmC,EAAEY,UAAU,iBAAY,GAAQtC,YAAE,CAACT,YAAE,CAAC4I,UAAS,KAAMzG,EAAEY,UAAU,wBAAmB,GAAQtC,YAAE,CAACT,eAAKmC,EAAEY,UAAU,uBAAkB,GAAQtC,YAAE,CAACT,eAAKmC,EAAEY,UAAU,WAAW,MAAMtC,YAAE,CAACT,eAAKmC,EAAEY,UAAU,YAAO,GAAQZ,EAAE1B,YAAE,CAACsB,YAAE,qCAAqCI,K,8JCAzyFjB,EAAE,SAAAA,GAAI,IAAID,EAAC,gKAAiB,WAAY,WAACf,KAAK2J,QAAQC,IAAI/H,YAAE7B,KAAK,QAAQ,WAAW,WAAK,EAAKyD,YAAYoH,OAAO,SAAA/K,GAAIC,YAAED,IAAIe,IAAEkC,UAAU,EAAK+H,eAAe1D,MAAMtH,SAAS,4BAA/J,GAAekB,GAA0K,OAAOlB,YAAE,CAACS,eAAKQ,EAAE8B,UAAU,aAAQ,GAAQ9B,EAAEjB,YAAE,CAACgB,YAAE,4CAA4CC,K,iCCAvsB,SAASR,EAAEA,EAAEM,GAAG,OAAOA,EAAE,YAAYA,GAAGA,EAAEkK,QAAQrD,KAAKsD,IAAIzK,EAAEmH,KAAKuD,IAAIpK,EAAEkK,UAAU,YAAYlK,GAAGA,EAAEqK,QAAQxD,KAAKsD,IAAIzK,EAAEmH,KAAKuD,IAAIpK,EAAEqK,SAAS,IAAI3K,EAAEA,EAAoH,SAAS2D,EAAE3D,EAAE2D,GAAG,MAAM,iBAAiB3D,EAAEA,EAAEA,GAAGA,EAAE4K,OAAO5K,EAAE4K,MAAM5G,OAAjL,SAAWhE,GAAe,IAAZ,IAAIM,EAAE,EAAEqD,EAAE,EAAUpE,EAAE,EAAEA,EAAES,EAAEgE,OAAOzE,IAAI,CAAC,IAAMC,EAAEQ,EAAET,GAAGkG,KAAK,iBAAiBjG,IAAIc,GAAGd,EAAEmE,KAAK,OAAOrD,EAAEqD,EAAwErD,CAAEN,EAAE4K,OAAOjH,EAAE,SAASpE,EAAES,EAAEM,GAAG,IAAIA,EAAE,OAAON,EAAE,IAAMT,EAAEe,EAAEU,QAAQ,SAAAhB,GAAC,MAAE,SAASA,EAAEY,QAAOW,KAAK,SAAAjB,GAAI,IAAcf,EAAae,EAArBuK,QAAkBrL,EAAGc,EAAXwK,QAAa,OAAOnH,EAAEpE,EAAES,GAAG2D,EAAEnE,EAAEQ,IAAI,KAASR,EAAE,EAAQ8B,EAAE/B,EAAEyE,OAAO,GAAG,IAAI1C,EAAE,OAAOtB,EAAE,IAAI,IAAI2D,EAAE,EAAEA,EAAErC,EAAEqC,IAAInE,GAAGD,EAAEoE,GAAG,IAAMsD,EAAEE,KAAK4D,MAAMvL,EAAE8B,GAAG,OAAO6F,KAAKsD,IAAIxD,EAAEjH,GAAG,SAASR,EAAEc,GAAG,IAAMqD,EAAErD,GAAGA,EAAEqB,SAASnC,EAAE,WAAWc,GAAGA,EAAEmB,OAAOnB,EAAEmB,MAAMuJ,aAAa,EAAE,EAAE,IAAIrH,EAAE,OAAOnE,EAAE,IAAM8B,EAAE,oBAAoBqC,EAAEpE,EAAEC,EAAEmE,EAAEsH,iBAAiBzL,EAAE,GAAG,WAAWmE,EAAE/C,KAAK,OAAOZ,EAAEsB,EAAEqC,EAAEuH,QAAQ,GAAG,iBAAiBvH,EAAE/C,KAAK,CAAC,IAAIN,EAAEgB,EAAE,OAAOqC,EAAEwH,iBAAiBnG,SAAS,SAAArB,GAAIrD,EAAEN,EAAEM,EAAEqD,EAAEuH,WAAW5K,EAAE,GAAG,iBAAiBqD,EAAE/C,KAAK,CAAC,IAAIN,EAAEgB,EAAE,OAAOqC,EAAEyH,gBAAgBpG,SAAS,SAAArB,GAAIrD,EAAEN,EAAEM,EAAEqD,EAAEuH,WAAW5K,EAAE,OAAOqD,EAAE/C,KAAKU,EAJr+B,mC,iCCAA,6EAI+Q,SAASb,EAAET,EAAE2D,EAAElD,GAAU,IAAKjB,EAAb8B,EAAQ,uDAAN,IAAIf,IAAS,GAAG,OAAOE,EAAEG,KAAKpB,EAAEmE,EAAElD,EAAE8E,gBAAgB,GAAG,OAAO9E,EAAEG,KAAK,CAAC,IAAML,EAAEE,EAAE4K,2BAA2BrL,GAAGsB,EAAEb,EAAE6K,wBAAwB9L,EAAEc,YAAEgB,KAAKA,EAAE0B,OAAOvC,EAAEsC,kBAAkBxD,YAAE+B,GAAG/B,YAAEkB,EAAEsC,kBAAkBY,EAAEpD,EAAQ,IAAA4D,EAAEnE,EAAEsF,EAAE9F,EAAEkC,EAAE1B,EAAE2E,EAAEnF,EAAEgB,EAAER,EAAEsF,EAAE9F,EAAE2G,EAAEnG,EAAE2E,EAAEnF,EAAoByH,EAAGxG,EAApBsC,iBAAsB,OAAOzB,EAAEiK,KAAKpE,KAAKqE,IAAIrH,EAAE3D,GAAGc,EAAEmK,KAAKtE,KAAKqE,IAAI9J,EAAEyE,GAAG7E,EAAEoK,KAAKvE,KAAKsD,IAAItG,EAAE3D,GAAGc,EAAEqK,KAAKxE,KAAKsD,IAAI/I,EAAEyE,GAAG7E,EAAEyB,iBAAiBkE,EAAE3F,EAAkG,IAAIf","file":"static/js/85.421afbe3.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileContainer as t}from\"../engine/BitmapTileContainer.js\";const r=r=>{let s=class extends r{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new t(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView.removeAllChildren()}};return s=e([i(\"esri.views.2d.layers.BitmapTileLayerView2D\")],s),s};export{r as BitmapTileLayerView2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{calculateTolerance as p}from\"../../renderers/support/clickToleranceUtils.js\";const i=i=>{let c=class extends i{async fetchPopupFeatures(e,s){const{layer:a}=this;if(!e)return Promise.reject(new r(\"tilelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:a}));if(\"tile\"!==a.type)return Promise.reject(new r(\"tilelayerview:fetchPopupFeatures\",\"Layer type should be 'tile'\",{type:a.type}));const i=this.get(\"view.scale\"),c=a.allSublayers.toArray().filter((e=>{const r=0===e.minScale||i<=e.minScale,t=0===e.maxScale||i>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&r&&t}));return o(c.map((async r=>{const o=r.createQuery(),a=t(s)?s.event:null,i=p({renderer:r.renderer,event:a});o.geometry=this.createFetchPopupFeaturesQueryGeometry(e,i),o.outFields=await r.popupTemplate.getRequiredFields();return(await r.queryFeatures(o)).features}))).then((e=>[].concat(...e.map((e=>e.value)).filter(Boolean))))}};return e([s()],c.prototype,\"layer\",void 0),c=e([a(\"esri.layers.mixins.TileLayerView\")],c),c};export{i as TileLayerView,i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import i from\"../../../core/Logger.js\";import{isNone as r}from\"../../../core/maybe.js\";import{isAbortError as s}from\"../../../core/promiseUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileLayerView2D as o}from\"./BitmapTileLayerView2D.js\";import{LayerView2DMixin as h}from\"./LayerView2D.js\";import n from\"../tiling/TileInfoView.js\";import c from\"../tiling/TileKey.js\";import u from\"../tiling/TileQueue.js\";import m from\"../tiling/TileStrategy.js\";import p from\"../../layers/LayerView.js\";import{RefreshableLayerView as f}from\"../../layers/RefreshableLayerView.js\";import{TileLayerView as g}from\"../../layers/TileLayerView.js\";import{createQueryGeometry as y}from\"../../support/drapedUtils.js\";const w=i.getLogger(\"esri.views.2d.layers.TileLayerView2D\"),d=[0,0];let _=class extends(g(f(o(h(p))))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this.layer=null}initialize(){const e=this.layer.tileInfo,i=e&&e.spatialReference;let r;i||(r=new t(\"layerview:tiling-information-missing\",\"The layer doesn't provide tiling information\",{layer:this.layer})),i.equals(this.view.spatialReference)||(r=new t(\"layerview:spatial-reference-incompatible\",\"The spatial reference of this layer does not meet the requirements of the view\",{layer:this.layer})),this.watch(\"resampling\",(()=>{this.doRefresh()})),r&&this.addResolvingPromise(Promise.reject(r))}get resampling(){return!(\"resampling\"in this.layer)||!1!==this.layer.resampling}hitTest(){return null}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume(),this.notifyChange(\"updating\")}attach(){const e=\"tileServers\"in this.layer?this.layer.tileServers:null;this._tileInfoView=new n(this.layer.tileInfo,this.layer.fullExtent),this._fetchQueue=new u({tileInfoView:this._tileInfoView,concurrency:e&&10*e.length||10,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new m({cachePolicy:\"keep\",resampling:this.resampling,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.requestUpdate(),this.container.requestRender(),super.attach()}detach(){super.detach(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQueryGeometry(e,t){return y(e,t,this.view)}async doRefresh(){this.updateRequested||this.suspended||(this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>this._enqueueTileFetch(e))),this.notifyChange(\"updating\"))}isUpdating(){var e;return(null==(e=this._fetchQueue)?void 0:e.length)>0}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(d,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this._bitmapView.addChild(t),this.requestUpdate(),t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>e.destroy())),this.requestUpdate()}async fetchTile(e,t){const i=\"tilemapCache\"in this.layer?this.layer.tilemapCache:null,a=!r(t)&&t.signal;if(!i)try{return await this._fetchImage(e,a)}catch(m){if(!s(m)&&!this.resampling)return this._createBlankImage();throw m}const l=new c(0,0,0,0);let o;try{if(await i.fetchAvailabilityUpsample(e.level,e.row,e.col,l,{signal:a}),l.level!==e.level&&!this.resampling)return this._createBlankImage();o=await this._fetchImage(l,a)}catch(m){if(s(m))throw m;o=await this._fetchImage(e,a)}const{level:h,row:n,col:u}=l;return this.resampling&&h!==e.level?this._resampleImage(o,h,n,u,e.level,e.row,e.col):o}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once(\"attach\",(()=>this.requestUpdate()))}catch(t){s(t)||w.error(t)}this.requestUpdate()}}async _fetchImage(e,t){return this.layer.fetchTile(e.level,e.row,e.col,{signal:t})}_resampleImage(e,t,i,r,s,a,l){const o=this._tileInfoView.tileInfo.size,h=this._tileInfoView.getTileResolution(t),n=this._tileInfoView.getTileResolution(s);let c=this._tileInfoView.getLODInfoAt(s);const u=c.getXForColumn(l),m=c.getYForRow(a);c=this._tileInfoView.getLODInfoAt(t);const p=c.getXForColumn(r),f=c.getYForRow(i),g=Math.round((u-p)/h),y=Math.round(-(m-f)/h),w=Math.round(o[0]*(n/h)),d=Math.round(o[1]*(n/h)),_=this._createBlankImage();return _.getContext(\"2d\").drawImage(e,g,y,w,d,0,0,o[0],o[1]),_}_createBlankImage(){const e=this._tileInfoView.tileInfo.size,t=document.createElement(\"canvas\");return[t.width,t.height]=e,t}};e([a()],_.prototype,\"resampling\",null),_=e([l(\"esri.views.2d.layers.TileLayerView2D\")],_);var I=_;export{I as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";import\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../geometry/Geometry.js\";import{fromJSON as s}from\"../../../geometry/support/jsonUtils.js\";import p from\"./ClipArea.js\";import m from\"../../../geometry/Extent.js\";import i from\"../../../geometry/Polygon.js\";var y;const n={base:t,key:\"type\",typeMap:{extent:m,polygon:i}};let c=y=class extends p{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};e([r({types:n,json:{read:s,write:!0}})],c.prototype,\"geometry\",void 0),e([r({readOnly:!0})],c.prototype,\"version\",null),c=y=e([o(\"esri.views.layers.support.Geometry\")],c);var a=c;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";let t=class extends e{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],t.prototype,\"path\",void 0),r([o({readOnly:!0})],t.prototype,\"version\",null),t=r([s(\"esri.views.layers.support.Path\")],t);var p=t;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Collection.js\";import{referenceSetter as s}from\"../../../core/collectionUtils.js\";import{init as i}from\"../../../core/watchUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{Container as a}from\"../engine/Container.js\";import p from\"../../layers/support/ClipArea.js\";import h from\"../../layers/support/ClipRect.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=e.ofType({key:\"type\",base:p,typeMap:{rect:h,path:d,geometry:n}}),l=e=>{let p=class extends e{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new a),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([i(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),i(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),i(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),i(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([r({type:c,set(t){const e=s(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],p.prototype,\"clips\",void 0),t([r()],p.prototype,\"moving\",void 0),t([r()],p.prototype,\"attached\",void 0),t([r()],p.prototype,\"container\",void 0),t([r()],p.prototype,\"suspended\",void 0),t([r({readOnly:!0})],p.prototype,\"updateParameters\",void 0),t([r()],p.prototype,\"updateRequested\",void 0),t([r()],p.prototype,\"updating\",null),t([r()],p.prototype,\"view\",void 0),p=t([o(\"esri.views.2d.layers.LayerView2D\")],p),p};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/watchUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";const a=a=>{let c=class extends a{initialize(){this.handles.add(o(this,\"layer\",\"refresh\",(()=>{this.doRefresh().catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([i(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{a as RefreshableLayerView,a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n"],"sourceRoot":""}