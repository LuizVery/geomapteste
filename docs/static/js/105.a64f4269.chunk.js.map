{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/GroupLayerView.js","../node_modules/@arcgis/core/views/2d/engine/webgl/GroupContainer.js","../node_modules/@arcgis/core/views/2d/layers/GroupLayerView2D.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/Mesh2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/ClippingInfo.js","../node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js"],"names":["o","e","type","layerViews","i","this","handles","add","on","_layerViewsChangeHandler","_layerViewsAfterChangesHandler","layer","watch","_visibilityModeHandler","_visibleHandler","target","added","toArray","removed","moved","_set","r","_get","some","updating","length","reduce","updatingProgress","_isOverridden","find","layers","_findLayerViewForLayer","visible","_hasLayerViewVisibleOverrides","_firstVisibleOnLayerOrder","getItemAt","forEach","remove","map","_layerViewVisibleHandler","s","_enforceVisibility","_updateUpdating","visibilityMode","_enforceExclusiveVisibility","notifyChange","l","t","cast","prototype","readOnly","h","a","arguments","_lastWidth","_lastHeight","requiresDedicatedFBO","_renderTarget","dispose","createRenderParams","context","painter","profiler","_prevFBO","getBoundFramebufferObject","recordContainerStart","name","_getFbo","getRenderTarget","bindFramebuffer","setRenderTarget","setDepthWriteEnabled","setColorMask","setClearColor","setClearDepth","clear","gl","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","children","beforeRender","processRender","afterRender","beforeRenderLayer","_clippingInfos","computedOpacity","setStencilTestEnabled","setStencilWriteMask","blitTexture","colorTexture","compositeLayer","recordContainerEnd","blendMode","effects","computedEffects","globalOpacity","getViewport","width","height","resize","pixelFormat","dataType","samplingMode","wrapMode","colorTarget","depthStencilTarget","getSharedStencilBuffer","container","_updateStageChildren","removeAllChildren","addChildAt","p","left","right","top","bottom","Number","String","json","write","y","n","base","key","typeMap","extent","m","polygon","c","geometry","clone","types","read","path","ofType","rect","d","clips","moving","attached","lastUpdateId","updateRequested","fadeTransitionEnabled","opacity","view","requestUpdate","effect","whenLayerView","then","destroyed","attach","when","detach","suspended","isUpdating","minScale","maxScale","isFulfilled","isResolved","update","isVisibleAtScale","scale","set","getLogger","x","coords","lengths","push","f","slice","g","_cache","vertices","indices","primitiveType","isMapSpace","indexBuffer","vertexBuffers","BYTES_PER_ELEMENT","u","createIndex","Object","keys","createVertex","fromScreenExtent","xmin","ymin","xmax","ymax","Uint32Array","Math","floor","fromPolygon","fromMapExtent","error","fromRect","toScreen","parseFloat","_clip","stage","_handle","_invalidate","ready","mesh","destroy","vao","_destroyGL","size","_createMesh","getIndexBuffer","getVertexBuffers","dvs","requestRender","max","_createScreenRect","fromPath","fromGeometry","constructor","_clips","_updateClippingInfo","drawPhase","LABEL","updateTransforms","state","renderChildren","_renderPasses","prepareRenderPasses","render","requireFBO","registerRenderPass","brushes","clip","MAP","LABEL_ALPHA","DEBUG","HIGHLIGHT","setTransform","items","fromClipArea"],"mappings":"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","file":"static/js/105.a64f4269.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import i from\"../../core/Collection.js\";import{castForReferenceSetter as s,referenceSetter as r}from\"../../core/collectionUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import l from\"./LayerView.js\";let o=class extends l{constructor(e){super(e),this.type=\"group\",this.layerViews=new i}initialize(){this.handles.add([this.layerViews.on(\"change\",(e=>this._layerViewsChangeHandler(e))),this.layerViews.on(\"after-changes\",(()=>this._layerViewsAfterChangesHandler())),this.layer.watch(\"visibilityMode\",(()=>this._visibilityModeHandler()),!0),this.watch(\"visible\",(()=>this._visibleHandler()),!0)],\"grouplayerview\"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]}),this._layerViewsAfterChangesHandler()}set layerViews(e){this._set(\"layerViews\",r(e,this._get(\"layerViews\")))}isUpdating(){return this.layerViews.some((e=>e.updating))}get updatingProgress(){return 0===this.layerViews.length?1:this.layerViews.reduce(((e,i)=>e+i.updatingProgress),0)/this.layerViews.length}_hasLayerViewVisibleOverrides(){return this.layerViews.some((e=>e._isOverridden(\"visible\")))}_findLayerViewForLayer(e){return e&&this.layerViews.find((i=>i.layer===e))}_firstVisibleOnLayerOrder(){const e=this.layer.layers.find((e=>{const i=this._findLayerViewForLayer(e);return i&&i.visible}));return e&&this._findLayerViewForLayer(e)}_enforceExclusiveVisibility(e){this._hasLayerViewVisibleOverrides()&&(e||!(e=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.getItemAt(0))),this.layerViews.forEach((i=>{i.visible=i===e})))}_layerViewsChangeHandler(e){this.handles.remove(\"grouplayerview:visible\"),this.handles.add(this.layerViews.map((e=>e.watch(\"visible\",(i=>this._layerViewVisibleHandler(i,e)),!0))).toArray(),\"grouplayerview:visible\");const i=e.added[e.added.length-1];let s=null;i&&i.visible&&(s=i),this._enforceVisibility(s)}_layerViewsAfterChangesHandler(){this.handles.remove(\"grouplayerview:updating\"),this.handles.add(this.layerViews.map((e=>e.watch(\"updating\",(()=>this._updateUpdating()),!0))).toArray(),\"grouplayerview:updating\"),this._updateUpdating()}_enforceVisibility(e){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case\"inherited\":{const e=this.visible;this.layerViews.forEach((i=>{i.visible=e}));break}case\"exclusive\":this._enforceExclusiveVisibility(e)}}_visibilityModeHandler(){this._enforceVisibility()}_layerViewVisibleHandler(e,i){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case\"inherited\":e!==this.visible&&(i.visible=this.visible);break;case\"exclusive\":this._enforceExclusiveVisibility(e&&i)}}_visibleHandler(){var e;this._hasLayerViewVisibleOverrides()&&\"inherited\"===(null==(e=this.layer)?void 0:e.visibilityMode)&&this._enforceVisibility()}_updateUpdating(){this.notifyChange(\"updating\")}};e([t({cast:s})],o.prototype,\"layerViews\",null),e([t()],o.prototype,\"view\",void 0),e([t({readOnly:!0})],o.prototype,\"updatingProgress\",null),o=e([a(\"esri.views.layers.GroupLayerView\")],o);var h=o;export{h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../../webgl/BufferObject.js\";import e from\"../../../webgl/FramebufferObject.js\";import\"../../../../core/has.js\";import\"../../../webgl/checkWebGLError.js\";import\"../../../webgl/enums.js\";import\"../../../../chunks/builtins.js\";import\"../../../webgl/renderState.js\";import\"../../../webgl/Texture.js\";import\"../../../webgl/VertexArrayObject.js\";import t from\"./WGLContainer.js\";class r extends t{constructor(){super(...arguments),this._lastWidth=0,this._lastHeight=0,this.requiresDedicatedFBO=!1}dispose(){this._renderTarget&&(this._renderTarget.dispose(),this._renderTarget=null)}doRender(e){const t=this.createRenderParams(e),{context:r,painter:s,profiler:i}=t;this._prevFBO=r.getBoundFramebufferObject(),i.recordContainerStart(this.name);const o=this._getFbo(t),a=s.getRenderTarget();r.bindFramebuffer(o),s.setRenderTarget(o),r.setDepthWriteEnabled(!0),r.setColorMask(!0,!0,!0,!0),r.setClearColor(0,0,0,0),r.setClearDepth(1),r.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.setDepthWriteEnabled(!1);for(const n of this.children)n.beforeRender(e);for(const n of this.children)n.processRender(t);for(const n of this.children)n.afterRender(e);s.setRenderTarget(a),r.bindFramebuffer(this._prevFBO),s.beforeRenderLayer(t,this._clippingInfos?255:0,this.computedOpacity),r.setStencilTestEnabled(!1),r.setStencilWriteMask(0),s.blitTexture(r,o.colorTexture,9728),s.compositeLayer(t,this.computedOpacity),i.recordContainerEnd()}createRenderParams(e){return{...super.createRenderParams(e),blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1}}_getFbo(t){const{context:r,painter:s}=t,{width:i,height:o}=r.getViewport();if(i!==this._lastWidth||o!==this._lastHeight)if(this._lastWidth=i,this._lastHeight=o,this._renderTarget)this._renderTarget.resize(i,o);else{const t={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:i,height:o},a={colorTarget:0,depthStencilTarget:3};this._renderTarget=new e(r,a,t,s.getSharedStencilBuffer())}return this._renderTarget}}export{r as GroupContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import{GroupContainer as t}from\"../engine/webgl/GroupContainer.js\";import{LayerView2DMixin as o}from\"./LayerView2D.js\";import s from\"../../layers/GroupLayerView.js\";let a=class extends(o(s)){constructor(){super(...arguments),this.container=new t}attach(){this._updateStageChildren(),this.handles.add(this.layerViews.on(\"after-changes\",(()=>this._updateStageChildren())),\"grouplayerview2d\")}detach(){this.handles.remove(\"grouplayerview2d\"),this.container.removeAllChildren()}hitTest(e,r){return null}update(e){}moveStart(){}viewChange(){}moveEnd(){}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach(((e,r)=>this.container.addChildAt(e.container,r)))}};a=e([r(\"esri.views.2d.layers.GroupLayerView2D\")],a);var i=a;export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";import\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../geometry/Geometry.js\";import{fromJSON as s}from\"../../../geometry/support/jsonUtils.js\";import p from\"./ClipArea.js\";import m from\"../../../geometry/Extent.js\";import i from\"../../../geometry/Polygon.js\";var y;const n={base:t,key:\"type\",typeMap:{extent:m,polygon:i}};let c=y=class extends p{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};e([r({types:n,json:{read:s,write:!0}})],c.prototype,\"geometry\",void 0),e([r({readOnly:!0})],c.prototype,\"version\",null),c=y=e([o(\"esri.views.layers.support.Geometry\")],c);var a=c;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";let t=class extends e{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],t.prototype,\"path\",void 0),r([o({readOnly:!0})],t.prototype,\"version\",null),t=r([s(\"esri.views.layers.support.Path\")],t);var p=t;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Collection.js\";import{referenceSetter as s}from\"../../../core/collectionUtils.js\";import{init as i}from\"../../../core/watchUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{Container as a}from\"../engine/Container.js\";import p from\"../../layers/support/ClipArea.js\";import h from\"../../layers/support/ClipRect.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=e.ofType({key:\"type\",base:p,typeMap:{rect:h,path:d,geometry:n}}),l=e=>{let p=class extends e{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new a),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([i(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),i(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),i(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),i(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([r({type:c,set(t){const e=s(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],p.prototype,\"clips\",void 0),t([r()],p.prototype,\"moving\",void 0),t([r()],p.prototype,\"attached\",void 0),t([r()],p.prototype,\"container\",void 0),t([r()],p.prototype,\"suspended\",void 0),t([r({readOnly:!0})],p.prototype,\"updateParameters\",void 0),t([r()],p.prototype,\"updateRequested\",void 0),t([r()],p.prototype,\"updating\",null),t([r()],p.prototype,\"view\",void 0),p=t([o(\"esri.views.2d.layers.LayerView2D\")],p),p};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import t from\"../../../../core/Logger.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{e as s}from\"../../../../chunks/earcut.js\";import{s as n}from\"../../../../chunks/vec2.js\";import{a as o}from\"../../../../chunks/vec2f64.js\";import{convertFromNestedArray as c,convertFromPolygon as i}from\"../../../../layers/graphics/featureConversionUtils.js\";import a from\"../../../../layers/graphics/OptimizedGeometry.js\";import{i1616to32 as f}from\"./number.js\";import h from\"../../../webgl/BufferObject.js\";const m=t.getLogger(\"esri.views.2d.engine.webgl.Mesh2D\"),u=t=>{switch(t.BYTES_PER_ELEMENT){case 1:return 5121;case 2:return 5123;case 4:return 5125;default:throw new e(\"Cannot get DataType of array\")}},y=(e,t,r,s)=>{let n=0;for(let o=1;o<r;o++){const r=e[2*(t+o-1)],s=e[2*(t+o-1)+1];n+=(e[2*(t+o)]-r)*(e[2*(t+o)+1]+s)}return s?n>0:n<0},x=({coords:e,lengths:t},r)=>{const n=[];for(let o=0,c=0;o<t.length;c+=t[o],o+=1){const i=c,a=[];for(;o<t.length-1&&y(e,c+t[o],t[o+1],r);o+=1,c+=t[o])a.push(c+t[o]-i);const f=e.slice(2*i,2*(c+t[o])),h=s(f,a,2);for(const e of h)n.push(e+i)}return n};class g{constructor(e,t,r,s=!1){this._cache={},this.vertices=e,this.indices=t,this.primitiveType=r,this.isMapSpace=s}static fromRect({x:e,y:t,width:r,height:s}){const n=e,o=t,c=n+r,i=o+s;return g.fromScreenExtent({xmin:n,ymin:o,xmax:c,ymax:i})}static fromPath(e){const t=c(new a,e.path,!1,!1),r=t.coords,s=new Uint32Array(x(t,!0)),n=new Uint32Array(r.length/2);for(let o=0;o<n.length;o++)n[o]=f(Math.floor(r[2*o]),Math.floor(r[2*o+1]));return new g({geometry:n},s,4)}static fromGeometry(t,r){const s=r.geometry.type;switch(s){case\"polygon\":return g.fromPolygon(t,r.geometry);case\"extent\":return g.fromMapExtent(t,r.geometry);default:return m.error(new e(\"mapview-bad-type\",`Unable to create a mesh from type ${s}`,r)),g.fromRect({x:0,y:0,width:1,height:1})}}static fromPolygon(e,t){const r=i(new a,t,!1,!1),s=r.coords,c=new Uint32Array(x(r,!1)),h=new Uint32Array(s.length/2),m=o(),u=o();for(let o=0;o<h.length;o++)n(m,s[2*o],s[2*o+1]),e.toScreen(u,m),h[o]=f(Math.floor(u[0]),Math.floor(u[1]));return new g({geometry:h},c,4,!0)}static fromScreenExtent({xmin:e,xmax:t,ymin:r,ymax:s}){const n={geometry:new Uint32Array([f(e,r),f(t,r),f(e,s),f(e,s),f(t,r),f(t,s)])},o=new Uint32Array([0,1,2,3,4,5]);return new g(n,o,4)}static fromMapExtent(e,t){const[r,s]=e.toScreen([0,0],[t.xmin,t.ymin]),[n,o]=e.toScreen([0,0],[t.xmax,t.ymax]),c={geometry:new Uint32Array([f(r,s),f(n,s),f(r,o),f(r,o),f(n,s),f(n,o)])},i=new Uint32Array([0,1,2,3,4,5]);return new g(c,i,4)}destroy(){r(this._cache.indexBuffer)&&this._cache.indexBuffer.dispose();for(const e in this._cache.vertexBuffers)r(this._cache.vertexBuffers[e])&&this._cache.vertexBuffers[e].dispose()}get elementType(){return u(this.indices)}getIndexBuffer(e,t=35044){return this._cache.indexBuffer||(this._cache.indexBuffer=h.createIndex(e,t,this.indices)),this._cache.indexBuffer}getVertexBuffers(e,t=35044){return this._cache.vertexBuffers||(this._cache.vertexBuffers=Object.keys(this.vertices).reduce(((r,s)=>({...r,[s]:h.createVertex(e,t,this.vertices[s])})),{})),this._cache.vertexBuffers}}export{g as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/Error.js\";import e from\"../../../../core/Logger.js\";import{isSome as r,isNone as s}from\"../../../../core/maybe.js\";import{c as i}from\"../../../../chunks/mat3f32.js\";import{DisplayObject as o}from\"../DisplayObject.js\";import h from\"./Mesh2D.js\";import a from\"../../../webgl/VertexArrayObject.js\";const c=e.getLogger(\"esri.views.2d.engine.webgl.ClippingInfo\"),n=t=>parseFloat(t)/100;class m extends o{constructor(t,e){super(),this._clip=e,this._cache={},this.stage=t,this._handle=e.watch(\"version\",(()=>this._invalidate())),this.ready()}static fromClipArea(t,e){return new m(t,e)}_destroyGL(){r(this._cache.mesh)&&(this._cache.mesh.destroy(),this._cache.mesh=null),r(this._cache.vao)&&(this._cache.vao.dispose(),this._cache.vao=null)}destroy(){this._destroyGL(),this._handle.remove()}getVAO(t,e,r,i){const[o,h]=e.size;if(\"geometry\"!==this._clip.type&&this._lastWidth===o&&this._lastHeight===h||(this._lastWidth=o,this._lastHeight=h,this._destroyGL()),s(this._cache.vao)){const s=this._createMesh(e,this._clip),o=s.getIndexBuffer(t),h=s.getVertexBuffers(t);this._cache.mesh=s,this._cache.vao=new a(t,r,i,h,o)}return this._cache.vao}_createTransforms(){return{dvs:i()}}_invalidate(){this._destroyGL(),this.requestRender()}_createScreenRect(t,e){const[r,s]=t.size,i=\"string\"==typeof e.left?n(e.left)*r:e.left,o=\"string\"==typeof e.right?n(e.right)*r:e.right,h=\"string\"==typeof e.top?n(e.top)*s:e.top,a=\"string\"==typeof e.bottom?n(e.bottom)*s:e.bottom,c=i,m=h;return{x:c,y:m,width:Math.max(r-o-c,0),height:Math.max(s-a-m,0)}}_createMesh(e,r){switch(r.type){case\"rect\":return h.fromRect(this._createScreenRect(e,r));case\"path\":return h.fromPath(r);case\"geometry\":return h.fromGeometry(e,r);default:return c.error(new t(\"mapview-bad-type\",\"Unable to create ClippingInfo mesh from clip of type: ${clip.type}\")),h.fromRect({x:0,y:0,width:1,height:1})}}}export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{isNone as e,isSome as r}from\"../../../../core/maybe.js\";import{c as s}from\"../../../../chunks/mat3f32.js\";import{brushes as t}from\"../brushes.js\";import{Container as i}from\"../Container.js\";import n from\"./ClippingInfo.js\";import{WGLDrawPhase as o}from\"./enums.js\";class a extends i{constructor(){super(...arguments),this.name=this.constructor.name}set clips(e){this._clips=e,this.children.forEach((r=>r.clips=e)),this._updateClippingInfo()}_createTransforms(){return{dvs:s()}}doRender(e){const r=this.createRenderParams(e),{painter:s,globalOpacity:t,profiler:i,drawPhase:n}=r,a=n===o.LABEL?1:t*this.computedOpacity;i.recordContainerStart(this.name),s.beforeRenderLayer(r,this._clippingInfos?255:0,a),this.updateTransforms(e.state),this.renderChildren(r),s.compositeLayer(r,a),i.recordContainerEnd()}renderChildren(r){e(this._renderPasses)&&(this._renderPasses=this.prepareRenderPasses(r.painter));for(const e of this.children)e.beforeRender(r);for(const e of this._renderPasses)try{e.render(r)}catch(s){}for(const e of this.children)e.afterRender(r)}createRenderParams(e){return e.requireFBO=this.requiresDedicatedFBO,e}prepareRenderPasses(e){return[e.registerRenderPass({name:\"clip\",brushes:[t.clip],target:()=>this._clippingInfos,drawPhase:o.MAP|o.LABEL|o.LABEL_ALPHA|o.DEBUG|o.HIGHLIGHT})]}updateTransforms(e){for(const r of this.children)r.setTransform(e)}onAttach(){super.onAttach(),this._updateClippingInfo()}onDetach(){super.onDetach(),this._updateClippingInfo()}_updateClippingInfo(){if(r(this._clippingInfos)&&(this._clippingInfos.forEach((e=>e.destroy())),this._clippingInfos=null),!this.stage)return;const e=this._clips;r(e)&&e.length&&(this._clippingInfos=e.items.map((e=>n.fromClipArea(this.stage,e)))),this.requestRender()}}export{a as default};\n"],"sourceRoot":""}