{"version":3,"file":"static/js/4147.6ab8a61c.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/i3s/I3SMeshViewFilter.js","../node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryEngine.js","../node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryFeatureAdapter.js","../node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryFeatureStore.js","../node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import t from\"../../../../core/Accessor.js\";import{PositionHint as r,indexOf as s}from\"../../../../core/arrayUtils.js\";import i from\"../../../../core/Logger.js\";import{clamp as o}from\"../../../../core/mathUtils.js\";import{isNone as n,isSome as a}from\"../../../../core/maybe.js\";import{getUnitString as c}from\"../../../../core/unitUtils.js\";import{whenOnce as l}from\"../../../../core/watchUtils.js\";import{property as p}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as u}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{t as f,b as d,s as g}from\"../../../../chunks/vec3.js\";import{WhereClause as h}from\"../../../../core/sql/WhereClause.js\";import{projectBoundingSphere as m,load as y,project as S,projectVectorToVector as j}from\"../../../../geometry/projection.js\";import{create as b}from\"../../../../geometry/support/aaBoundingBox.js\";import{fromValues as R,expandWithNestedArray as E,expand as w}from\"../../../../geometry/support/aaBoundingRect.js\";import{earth as I}from\"../../../../geometry/support/Ellipsoid.js\";import{project as T}from\"../../../../geometry/support/webMercatorUtils.js\";import D from\"../../../../layers/support/FeatureFilter.js\";import{objectIdFilter as C,filterInPlace as A}from\"./I3SUtil.js\";import F from\"../../../../geometry/SpatialReference.js\";const v=i.getLogger(\"esri.views.3d.layers.i3s.I3SMeshViewFilter\");let x,M=class extends t{constructor(e){super(e),this._projectionEngineLoaded=!1}initialize(){l(this,\"filter.geometry\").then((()=>this.loadAsyncModule(O().then((e=>{this.destroyed||(this._geometryEngine=e,this.applyFilters())})))))}get sortedObjectIds(){if(n(this.filter.objectIds))return null;const e=new Float64Array(this.filter.objectIds);return e.sort(),e}get parsedWhereClause(){const e=a(this.filter)?this.filter.where:null;if(n(e)||!e)return null;try{return h.create(e,this.layerFieldsIndex)}catch(t){v.error(`Failed to parse filter where clause: ${t}`)}return null}addFilters(e,t,r,s){const i=this.sortedObjectIds;a(i)&&e.push((e=>C(i,!0,e))),this.addSqlFilter(e,this.parsedWhereClause);const o=this.parsedGeometry;if(a(o)){const i=this.spatialRelationship;e.push(((e,n)=>P(e,n,s,t,r,o,i)))}}isMBSGeoemtryVisible(e,t,r){const s=this.parsedGeometry;if(a(s)){const i=this.spatialRelationship,o=s[0].spatialReference||t;if(!m(e,r,K,o))return v.warnOnce(\"SceneLayerView.filter.geometry is using unsupported SpatialReference, skipping geometry filter for MBS\"),!0;return L(K,s,o,i)}return!0}get parsedGeometry(){if(n(this.filter))return null;if(!this._geometryEngine)return null;const{geometry:e}=this.filter;if(n(e))return null;const{distance:t,units:r}=this.filter,s=this.spatialRelationship,i=\"mesh\"===e.type?e.extent:e;if(n(t)||0===t)return B(i,s);const o=r||c(i.spatialReference);if(i.spatialReference.isWGS84){return B(this._geometryEngine.geodesicBuffer(i,t,o),s)}const l=T(i,F.WGS84);if(a(l)){return B(T(this._geometryEngine.geodesicBuffer(l,t,o),i.spatialReference),s)}if(!this._projectionEngineLoaded&&(this.loadAsyncModule(y().then((()=>this._projectionEngineLoaded=!0))),!this._projectionEngineLoaded))return null;let p=null;try{p=S(i,F.WGS84)}catch(u){}if(p)try{p=S(this._geometryEngine.geodesicBuffer(p,t,o),i.spatialReference)}catch(u){p=null}return p||v.error(`Filter by geodesic buffer (distance) unsupported, failed to project input geometry (${i.spatialReference.wkid}) to WGS84.`),B(p,s)}get spatialRelationship(){return a(this.filter)?this.filter.spatialRelationship:\"intersects\"}static checkSupport(e){return e.timeExtent?(v.warn(\"Filters with a timeExtent are not supported for mesh scene layers\"),!1):!!G(e.spatialRelationship)||(v.warn(`Filters with spatialRelationship other than ${k.join(\", \")} are not supported for mesh scene layers`),!1)}};function _(){return!!x}async function O(){return _()||(x=await import(\"../../../../geometry/geometryEngine.js\")),x}e([p({type:D})],M.prototype,\"filter\",void 0),e([p()],M.prototype,\"layerFieldsIndex\",void 0),e([p()],M.prototype,\"loadAsyncModule\",void 0),e([p()],M.prototype,\"applyFilters\",void 0),e([p()],M.prototype,\"addSqlFilter\",void 0),e([p({readOnly:!0})],M.prototype,\"sortedObjectIds\",null),e([p({readOnly:!0})],M.prototype,\"parsedWhereClause\",null),e([p({readOnly:!0})],M.prototype,\"parsedGeometry\",null),e([p({readOnly:!0})],M.prototype,\"spatialRelationship\",null),e([p()],M.prototype,\"_projectionEngineLoaded\",void 0),e([p()],M.prototype,\"_geometryEngine\",void 0),M=e([u(\"esri.views.3d.layers.i3s.I3SMeshViewFilter\")],M);const k=(e=>e)([\"contains\",\"intersects\",\"disjoint\"]);function G(e){return null!=e&&k.indexOf(e)>=0}var W;function B(e,t){if(n(e))return null;if(\"disjoint\"===t&&\"polygon\"===e.type){const t=new Array(e.rings.length);for(let r=0;r<e.rings.length;++r){const s=R(1/0,1/0,-1/0,-1/0);E(s,e.rings[r]),t[r]={type:\"polygon\",rings:[e.rings[r]],spatialReference:e.spatialReference,aabr:s}}t.sort(((e,t)=>e.aabr[0]-t.aabr[0]));const i=new Set,o=new r;for(let e=0;e<t.length;++e){const r=t[e];for(let s=e+1;s<t.length;++s){const e=t[s];if(e.aabr[0]>=r.aabr[2])break;i.add(e)}i.forEach((e=>{if(r!==e)if(e.aabr[2]<=r.aabr[0])i.delete(e);else if(x.intersects(r,e)){r.rings=r.rings.concat(e.rings),w(r.aabr,e.aabr,r.aabr),delete r._geVersion,i.delete(e);const n=s(t,e,t.length,o);t.splice(n,1)}})),i.add(r)}for(const e of t)delete e.aabr;return t}return[e]}function L(e,t,r,s){const i=U(e,r);return t.every((e=>q(e,i,s)!==W.DISCARD))}function P(e,t,r,s,i,o,n){const a=o[0].spatialReference||s.spatialReference;if(!m(t.node.mbs,i,K,a))return void v.warnOnce(\"SceneLayerView.filter.geometry is using unsupported SpatialReference, skipping geometry filter\");const c=U(K,a),l=V(n,s,a,r,t.objectHandle);for(const p of o){if(0===e.length)return;switch(q(p,c,n)){case W.DISCARD:return void(e.length=0);case W.KEEP:continue}A(e,t.featureIds,(e=>z(p,e,l)))}}!function(e){e[e.KEEP=0]=\"KEEP\",e[e.DISCARD=1]=\"DISCARD\",e[e.TEST=2]=\"TEST\"}(W||(W={}));const K=[0,0,0,0];function V(e,t,r,s,i){const o=t.renderSpatialReference,n=new Map,a={rings:[[[0,0,0],[0,0,0],[0,0,0],[0,0,0]]],hasZ:!1,hasM:!1,type:\"polygon\",spatialReference:r};a.rings[0][3]=a.rings[0][0];const c={indices:null,data:null,stride:0,startIndex:0,endIndex:0};let l,p;switch(e){case\"intersects\":l=(e,t)=>x.intersects(e,t)?W.KEEP:W.TEST,p=N;break;case\"contains\":l=(e,t)=>x.contains(e,t)?W.TEST:W.DISCARD,p=N;break;default:l=(e,t)=>x.disjoint(e,t)?W.TEST:W.DISCARD,p=Z}return{collection:s,object:i,type:e,maskSR:r,renderSR:o,aabbCache:n,triangle:a,positions:c,triangleTest:l,geometryTest:p}}function U(e,t){const r={x:e[0],y:e[1],hasZ:!1,hasM:!1,type:\"point\",spatialReference:t},s=!t.isWGS84&&!t.isWebMercator,i=Number.isNaN(e[3])?0:o(e[3],0,2*I.radius),n=s?x.buffer(r,i,1):x.geodesicBuffer(r,i,1);return n.type=\"polygon\",n}function q(e,t,r){switch(r){case\"intersects\":case\"contains\":return N(e,t);case\"disjoint\":return Z(e,t)}}function N(e,t){return x.intersects(e,t)?x.contains(e,t)?W.KEEP:W.TEST:W.DISCARD}function Z(e,t){return x.intersects(e,t)?x.contains(e,t)?W.DISCARD:W.TEST:W.KEEP}const $=2**-32;function z(e,t,r){const{collection:s,object:i,renderSR:o,maskSR:n,geometryTest:a,aabbCache:c}=r;let l=c.get(t);if(!l){const e=s.getObjectTransform(i);s.getComponentAabb(i,t,H);const r=[[H[0],H[1],0],[H[0],H[4],0],[H[3],H[4],0],[H[3],H[1],0]];for(let t=0;t<4;++t)f(r[t],r[t],e.rotationScale),d(r[t],r[t],e.position),j(r[t],o,r[t],n);l={rings:[r],hasZ:!1,hasM:!1,type:\"polygon\",spatialReference:n},l.rings[0][4]=l.rings[0][0],c.set(t,l)}switch(a(e,l)){case W.DISCARD:return!1;case W.KEEP:return!0}const{triangle:p,triangleTest:u,positions:h}=r,m=p.rings[0][0],y=p.rings[0][1],S=p.rings[0][2],b=s.getObjectTransform(i);s.getComponentPositions(i,t,h);const{indices:R,data:E,stride:w,startIndex:I,endIndex:T}=h;for(let D=I;D<T;D+=3){const t=w*R[D+0],r=w*R[D+1],s=w*R[D+2];g(m,E[t+0],E[t+1],E[t+2]),g(y,E[r+0],E[r+1],E[r+2]),g(S,E[s+0],E[s+1],E[s+2]),f(m,m,b.rotationScale),f(y,y,b.rotationScale),f(S,S,b.rotationScale),d(m,m,b.position),d(y,y,b.position),d(S,S,b.position),j(m,o,m,n),j(y,o,y,n),j(S,o,S,n);const i=y[0]-m[0],a=y[1]-m[1],c=S[0]-m[0],l=S[1]-m[1];if(!(Math.abs(i*l-a*c)<$))switch(delete p._geVersion,u(e,p)){case W.DISCARD:return!1;case W.KEEP:return!0}}return\"intersects\"!==r.type}const H=b();export{M as I3SMeshViewFilter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import t from\"../../../../core/Error.js\";import s from\"../../../../core/Handles.js\";import{isNone as n}from\"../../../../core/maybe.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import i from\"../../../../geometry/Extent.js\";import u from\"../../../../layers/graphics/data/QueryEngine.js\";import y from\"../../../../rest/support/FeatureSet.js\";import c from\"../../../../rest/support/Query.js\";const l=u;let p=class extends r{constructor(e){super(e),this._dataQueryEngineInstance=null,this._handles=new s}get defaultQueryJSON(){return new c({outSpatialReference:this.spatialReference}).toJSON()}get dataQueryEngine(){return this._ensureDataQueryEngine()}initialize(){this._handles.add(this.layerView.on(\"visible-geometry-changed\",(()=>this.spatialIndex.events.emit(\"changed\"))))}destroy(){this._dataQueryEngineInstance&&(this._dataQueryEngineInstance.destroy(),this._dataQueryEngineInstance=null),this._handles&&(this._handles.destroy(),this._handles=null),this._set(\"layerView\",null)}async executeQueryForCount(e,r){return this.dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(e),r)}async executeQueryForExtent(e,r){const{count:t,extent:s}=await this.dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(e),r);return{count:t,extent:i.fromJSON(s)}}async executeQueryForIds(e,r){return this.dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(e),r)}async executeQuery(e,r){const s=this._ensureQueryJSON(e);if(s.returnGeometry)throw new t(\"feature-store:unsupported-query\",\"returnGeometry is not yet supported for mesh scene layer queries\");if(s.returnCentroid)throw new t(\"feature-store:unsupported-query\",\"returnCentroid is not yet supported for mesh scene layer queries\");const n=await this.dataQueryEngine.executeQuery(s,r),o=y.fromJSON(n);return o.features.forEach((e=>{e.geometry=null})),o}_ensureQueryJSON(e){if(n(e))return this.defaultQueryJSON;const r=e.toJSON();return r.outSpatialReference||(e.outSpatialReference=this.spatialReference),r}_ensureDataQueryEngine(){if(this._dataQueryEngineInstance)return this._dataQueryEngineInstance;const e=this.layer.objectIdField||\"OBJECTID\",r=\"esriGeometryPolygon\",t=this.layer.fields.map((e=>e.toJSON())),s=this.layerView.view.resourceController.scheduler,n=this.spatialReference.toJSON(),o=this.priority,a=this.spatialIndex;return this._dataQueryEngineInstance=new l({hasZ:!0,hasM:!1,geometryType:r,fields:t,timeInfo:null,spatialReference:n,objectIdField:e,featureStore:a,scheduler:s,priority:o}),this._dataQueryEngineInstance}};e([o({constructOnly:!0})],p.prototype,\"layerView\",void 0),e([o({constructOnly:!0})],p.prototype,\"priority\",void 0),e([o({constructOnly:!0})],p.prototype,\"spatialIndex\",void 0),e([o({readOnly:!0,aliasOf:\"layerView.view.spatialReference\"})],p.prototype,\"spatialReference\",void 0),e([o({readOnly:!0,aliasOf:\"layerView.i3slayer\"})],p.prototype,\"layer\",void 0),e([o({readOnly:!0})],p.prototype,\"defaultQueryJSON\",null),p=e([a(\"esri.views.3d.layers.i3s.I3SQueryEngine\")],p);const d=p;export{p as I3SQueryEngine,d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import{create as e}from\"../../../../geometry/support/aaBoundingBox.js\";import{getCentroidOptimizedGeometry as r}from\"../../../../layers/graphics/centroid.js\";import o from\"../../../../layers/graphics/OptimizedGeometry.js\";import{getCachedAttributeValue as i}from\"./I3SUtil.js\";class n{constructor(t){this.objectIdField=t.objectIdField,this.getFeatureExtent=t.getFeatureExtent}getObjectId(t){return t.id}getAttributes(e){const{meta:r,index:o}=e,n={};this.objectIdField&&(n[this.objectIdField]=e.id);const s=t(r.attributeInfo)&&r.attributeInfo.attributeData;if(t(s))for(const t of Object.keys(s))n[t]=i(s[t],o);return n}getAttribute(e,r){if(r===this.objectIdField)return e.id;const{meta:o,index:n}=e,s=t(o.attributeInfo)&&o.attributeInfo.attributeData;return t(s)?i(s[r],n):null}getGeometry(t){if(t.geometry)return t.geometry;const[e,r,i,n,a]=this.getFeatureExtent(t,s);return new o([5],[e,r,i,n,r,i,n,a,i,e,a,i,e,r,i])}getCentroid(t,e){if(t.geometry)return r(new o,t.geometry,e.hasZ,e.hasM);const[i,n,a,m,u,d]=this.getFeatureExtent(t,s);return new o([0],[(i+m)/2,(n+u)/2,(a+d)/2])}cloneWithGeometry(t,e){const{id:r,index:o,meta:i}=t;return{id:r,index:o,meta:i,geometry:e}}}const s=e();export{n as I3SQueryFeatureAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import t from\"../../../../core/Evented.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c}from\"../../../../chunks/vec4f64.js\";import{projectBoundingSphere as a}from\"../../../../geometry/projection.js\";import{create as n,toRect as p}from\"../../../../geometry/support/aaBoundingBox.js\";import{create as i,intersects as u}from\"../../../../geometry/support/aaBoundingRect.js\";import{ForAllFeaturesReturnType as m}from\"../II3SMeshView3D.js\";let f=class extends r{constructor(e){super(e),this.events=new t}forEach(e){this.forAllFeatures((r=>(e(r),m.CONTINUE)))}forEachBounds(e,r,t){const o=this.getFeatureExtent;for(const s of e)r(o(s,t))}forEachInBounds(e,r){this.forAllFeatures((t=>{const o=this.getFeatureExtent(t,h);return u(e,p(o,y))&&r(t),m.CONTINUE}),(r=>{if(a(r.node.mbs,this.sourceSpatialReference,l,this.viewSpatialReference),l[0]>=e[0]&&l[2]<=e[2]&&l[1]>=e[1]&&l[3]<=e[3])return m.CONTINUE;const t=Math.max(e[0],Math.min(l[0],e[2])),o=Math.max(e[1],Math.min(l[1],e[3])),s=l[0]-t,c=l[1]-o;return s*s+c*c<=l[3]*l[3]?m.CONTINUE:m.SKIP}))}};e([o({constructOnly:!0})],f.prototype,\"featureAdapter\",void 0),e([o({constructOnly:!0})],f.prototype,\"forAllFeatures\",void 0),e([o({constructOnly:!0})],f.prototype,\"getFeatureExtent\",void 0),e([o({constructOnly:!0})],f.prototype,\"sourceSpatialReference\",void 0),e([o({constructOnly:!0})],f.prototype,\"viewSpatialReference\",void 0),f=e([s(\"esri.views.3d.layers.i3s.I3SQueryFeatureStore\")],f);const l=c(),h=n(),y=i(),d=f;export{f as I3SQueryFeatureStore,d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Logger.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WhereClause as o}from\"../../../../core/sql/WhereClause.js\";import{findFieldsCaseInsensitive as n}from\"../i3s/I3SUtil.js\";const t=e.getLogger(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\"),p=e=>{let p=class extends e{constructor(){super(...arguments),this._definitionExpressionErrors=0,this._maxDefinitionExpressionErrors=20,this.logError=r=>{this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&t.error(\"Error while evaluating definitionExpression: \"+r),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&t.error(\"Further errors are ignored\")}}get parsedDefinitionExpression(){if(!this.i3slayer||!this.i3slayer.definitionExpression)return null;try{const r=o.create(this.i3slayer.definitionExpression,this.i3slayer.fieldsIndex);if(!r.isStandardized)return t.error(\"definitionExpression is using non standard function\"),null;const e=[],i=r.fieldNames;return n(i,this.i3slayer.fields,{missingFields:e}),e.length>0?(t.error(`definitionExpression references unknown fields: ${e.join(\", \")}`),null):(this._definitionExpressionErrors=0,r)}catch(r){return t.error(\"Failed to parse definitionExpression: \"+r),null}}get definitionExpressionFields(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:null}_evaluateClause(r,e){try{return r.testFeature(e)}catch(i){return this.logError(i),!1}}_addDefinitionExpressionToQuery(r){if(!this.parsedDefinitionExpression)return r;const e=this.i3slayer.definitionExpression,i=r.clone();return i.where?i.where=`(${e}) AND (${i.where})`:i.where=e,i}};return r([i()],p.prototype,\"i3slayer\",void 0),r([i({readOnly:!0})],p.prototype,\"parsedDefinitionExpression\",null),r([i({readOnly:!0})],p.prototype,\"definitionExpressionFields\",null),p=r([s(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\")],p),p};export{p as DefinitionExpressionSceneLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n"],"names":["v","i","x","M","t","constructor","e","super","this","_projectionEngineLoaded","initialize","l","then","loadAsyncModule","async","O","destroyed","_geometryEngine","applyFilters","sortedObjectIds","n","filter","objectIds","Float64Array","sort","parsedWhereClause","a","where","h","layerFieldsIndex","error","addFilters","r","s","push","C","addSqlFilter","o","parsedGeometry","spatialRelationship","spatialReference","m","node","mbs","K","warnOnce","c","U","renderSpatialReference","Map","rings","hasZ","hasM","type","indices","data","stride","startIndex","endIndex","p","intersects","W","KEEP","TEST","N","contains","DISCARD","disjoint","Z","collection","object","maskSR","renderSR","aabbCache","triangle","positions","triangleTest","geometryTest","V","objectHandle","length","q","A","featureIds","z","P","isMBSGeoemtryVisible","every","L","geometry","distance","units","extent","B","isWGS84","geodesicBuffer","T","F","y","S","u","wkid","timeExtent","warn","k","indexOf","G","join","D","prototype","readOnly","Array","R","E","aabr","Set","add","forEach","delete","concat","w","_geVersion","splice","isWebMercator","Number","isNaN","I","buffer","get","getObjectTransform","getComponentAabb","H","f","rotationScale","d","position","j","set","b","getComponentPositions","g","Math","abs","_dataQueryEngineInstance","_handles","defaultQueryJSON","outSpatialReference","toJSON","dataQueryEngine","_ensureDataQueryEngine","layerView","on","spatialIndex","events","emit","destroy","_set","executeQueryForCount","_ensureQueryJSON","count","executeQueryForExtent","executeQueryForIds","returnGeometry","returnCentroid","executeQuery","features","layer","objectIdField","fields","map","view","resourceController","scheduler","priority","geometryType","timeInfo","featureStore","constructOnly","aliasOf","getFeatureExtent","getObjectId","id","getAttributes","meta","index","attributeInfo","attributeData","Object","keys","getAttribute","getGeometry","getCentroid","cloneWithGeometry","forAllFeatures","forEachBounds","forEachInBounds","sourceSpatialReference","viewSpatialReference","max","min","arguments","_definitionExpressionErrors","_maxDefinitionExpressionErrors","logError","parsedDefinitionExpression","i3slayer","definitionExpression","fieldsIndex","isStandardized","fieldNames","missingFields","definitionExpressionFields","_evaluateClause","testFeature","_addDefinitionExpressionToQuery","clone","popupTemplate","getRequiredFields","lastEditInfoEnabled","typeIdField","globalIdField","relationships","includes","has","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate"],"sourceRoot":""}