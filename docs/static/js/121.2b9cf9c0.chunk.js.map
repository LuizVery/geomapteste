{"version":3,"sources":["../node_modules/@arcgis/core/chunks/MeasurementArrow.glsl.js","../node_modules/@arcgis/core/views/3d/layers/analysis/DirectLineMeasurement/DirectLineMeasurementController.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/MeasurementArrowTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/MeasurementArrowMaterial.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/MeasurementArrowVisualElement.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/RightAngleQuadVisualElement.js","../node_modules/@arcgis/core/views/3d/layers/analysis/DirectLineMeasurement/DirectLineMeasurementView.js","../node_modules/@arcgis/core/views/3d/layers/DirectLineMeasurementLayerView3D.js"],"names":["o","t","vertex","uniforms","add","attributes","varyings","code","e","fragment","r","Math","sqrt","float","Object","freeze","__proto__","build","R","_unitNormalizer","M","_handles","i","_tempStartPosition","v","_tempEndPosition","_tempCornerPosition","this","p","view","_initialize","a","spatialReference","D","j","z","_sphericalPCPF","s","_","h","viewData","startPoint","layer","elevationAlignedStartPoint","_applyElevationAlignment","endPoint","elevationAlignedEndPoint","result","_computedResult","n","hasZ","clone","c","k","elevationProvider","_euclideanDistances","_exactGeodesicDistanceAndAngle","horizontal","value","directDistance","direct","horizontalDistance","verticalDistance","vertical","geodesicDistance","distance","geodesicAngle","angle","w","u","m","d","abs","normalizeDistance","g","f","l","addPath","isGeographic","A","b","isWebMercator","_fallbackGeodesicAngle","_fallbackGeodesicDistance","P","metersPerDegree","y","G","S","sin","cos","E","prototype","shader","get","rctx","program","camera","projectionMatrix","setUniform1f","width","outlineSize","setUniform4fv","outlineColor","stripeLength","stripeEvenColor","stripeOddColor","rebindTextures","configuration","blending","transparent","polygonOffset","polygonOffsetEnabled","factor","units","depthTest","func","depthWrite","colorWrite","setPipelineState","transparencyPassType","arguments","count","techniqueConfig","params","x","output","updateParameters","_technique","_techniqueRep","releaseAndAcquire","_material","getTechniqueConfig","bindPass","getPassParameters","vec3f","vec2f","f32","C","q","vertexBufferLayout","createBuffer","indices","length","vertexAttributes","data","console","warn","transformation","T","invTranspTransformation","position","normal","L","uv0","setVec","set","auxpos1","_parameters","_origin","_originTransform","_arrowCenter","_renderOccluded","_geometry","_stripeLength","_stripesEnabled","_opacity","applyProps","_arrowMaterial","setParameterValues","renderOccluded","geometryChanged","attached","opacity","arrowStripeEvenColor","arrowStripeOddColor","_updateArrowOpacity","arrowOutlineColor","state","watch","viewChanged","destroy","startRenderSpace","endRenderSpace","_createArrowGeometry","addGeometry","renderCoordsHelper","push","type","eval","worldUpAtPosition","arrowSubdivisions","createPolylineGeometry","recreateGeometry","ready","computeScreenPixelSizeAt","arrowWidth","arrowOutlineWidth","arrowStripeLength","_quadMaterial","_outlineMaterial","_maxSize","_position","_up","_right","_color","_outlineColor","_outlineSize","_size","_outlineRenderOccluded","_updateQuadMaterial","_updateOutlineMaterial","_updateTransform","previous","center","next","min","quadMaterialParameters","O","outlineMaterialParameters","removeAll","_createQuadGeometry","_createOutlineGeometry","_quadGeometryData","object","size","exclusive","Uint16Array","color","writeDepth","Q","_params","I","_segmentVisualElement","_triangleVisualElement","_rightAngleQuad","_projectedGeodesicLine","_geodesicStartHint","_geodesicEndHint","_segmentLabel","_verticalLabel","_horizontalLabel","_startPosition","_endPosition","_cornerPosition","_startPositionAtSeaLevel","_endPositionAtSeaLevel","_state","_segmentLabelDisplayedMeasurement","_triangleOrientationOverride","messages","loadingMessages","viewMode","visualizedMeasurement","actualVisualizedMeasurement","visualElementOrientation","triangleCollapseRatioThreshold","layerView","geodesicDistanceThreshold","visible","suspended","_getActualVisualElementsOrientation","labels","Error","geometry","triangleLineWidth","triangleColor","H","B","stippleIntegerRepeats","geodesicProjectionLineWidth","geodesicProjectionLineColor","stipplePattern","U","guideStippleLengthPixels","guideLineWidth","fontSize","direcLabelFontSize","verticalLabelFontSize","horizontalLabelFontSize","V","_updateGeometryAndViewMode","_updateVisualElementVisibility","fullOpacity","_updateVisualElementsOpacity","_updateLabelText","_updateLabelVisibility","_updateSegmentStripeLength","F","_updateMessageBundle","equals","toRenderCoords","_updateActualVisualizedMeasurement","_computeViewMode","getAltitude","_updateSegment","_updateSegmentAndTriangle","_updateSegmentAndProjection","anchor","segment","sampleLocation","N","X","projectToRenderScreen","Y","Z","J","$","setAltitude","setGeometryFromSegment","text","_getLabelsText","euclideanDistance","notifyChange","unit","_measurementArrowStripeLength","stripesEnabled","_geodesicDistanceExceeded","_requiresGeodesicGuideAt","aboveGround","toUnit","W","then","finally","K","readOnly","laserLineGlowColor","laserLineGlowWidth","laserLineGlowFalloff","laserLineInnerColor","laserLineInnerWidth","laserLineGlobalAlpha","laserLineEnabled","handleColor","handleOpacity","handleRadius","triangleCornerSize","triangleSubdivisions","guideLineColor","labelDistance","_userUnit","_defaultUnit","_analysisView","allowVisualElementsOrientationChange","destroyed","controller","testData","_analysisController","whenReady"],"mappings":"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","file":"static/js/121.2b9cf9c0.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as t}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function o(){const o=new t;o.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"width\",\"float\"),o.attributes.add(\"position\",\"vec3\"),o.attributes.add(\"normal\",\"vec3\"),o.attributes.add(\"uv0\",\"vec2\"),o.attributes.add(\"auxpos1\",\"float\"),o.varyings.add(\"vtc\",\"vec2\"),o.varyings.add(\"vlength\",\"float\"),o.varyings.add(\"vradius\",\"float\"),o.vertex.code.add(e`void main(void) {\nvec3 bitangent = normal;\nvtc = uv0;\nvlength = auxpos1;\nvradius = 0.5 * width;\nvec4 pos = view * vec4(position + vradius * bitangent * uv0.y, 1.0);\ngl_Position = proj * pos;\n}`),o.fragment.uniforms.add(\"outlineSize\",\"float\").add(\"outlineColor\",\"vec4\").add(\"stripeLength\",\"float\").add(\"stripeEvenColor\",\"vec4\").add(\"stripeOddColor\",\"vec4\");const r=1/Math.sqrt(2);return o.fragment.code.add(e`\n    const float INV_SQRT2 = ${e.float(r)};\n\n    vec4 arrowColor(vec2 tc, float len) {\n      float d = INV_SQRT2 * (tc.x - abs(tc.y));\n      d = min(d, INV_SQRT2 * (len - tc.x - abs(tc.y)));\n      d = min(d, 1.0 - abs(tc.y));\n\n      if (d < 0.0) {\n        return vec4(0.0);\n      } else if (d < outlineSize) {\n        return outlineColor;\n      } else {\n        return fract(0.5 / stripeLength * tc.x * vradius) >= 0.5 ? stripeOddColor : stripeEvenColor;\n      }\n    }\n\n    void main(void) {\n      vec2 ntc = vec2(vtc.x / vradius, vtc.y);\n      vec4 color = arrowColor(ntc, vlength / vradius);\n      if (color.a == 0.0) {\n        discard;\n      }\n      gl_FragColor = color;\n    }\n  `),o}var r=Object.freeze({__proto__:null,build:o});export{r as M,o as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Accessor.js\";import i from\"../../../../../core/Handles.js\";import{deg2rad as s,rad2deg as o,acosClamped as r}from\"../../../../../core/mathUtils.js\";import{destroyMaybe as a,isNone as n,unwrapOr as c}from\"../../../../../core/maybe.js\";import l from\"../../../../../core/Quantity.js\";import{whenOnce as p}from\"../../../../../core/watchUtils.js\";import{property as m}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as d}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{reactionInit as h}from\"../../../../../core/accessorSupport/trackingUtils.js\";import{i as u}from\"../../../../../chunks/vec3.js\";import{c as v}from\"../../../../../chunks/vec3f64.js\";import{geodesicLength as g}from\"../../../../../geometry/geometryEngine.js\";import f from\"../../../../../geometry/Polyline.js\";import{canProjectWithoutEngine as _,projectPointToVector as w,projectPointToWGS84ComparableLonLat as y}from\"../../../../../geometry/projection.js\";import{getSphericalPCPF as D,getReferenceEllipsoid as P,SphericalECEFSpatialReference as j,WGS84ECEFSpatialReference as z}from\"../../../../../geometry/projectionEllipsoid.js\";import{isSupported as A,geodesicLengths as b,inverseGeodeticSolver as E}from\"../../../../../geometry/support/geodesicUtils.js\";import{UnitNormalizer as M}from\"../support/UnitNormalizer.js\";import{getElevationAtPoint as k}from\"../../../support/ElevationProvider.js\";let R=class extends t{constructor(e){super(e),this._unitNormalizer=new M,this._handles=new i,this._tempStartPosition=v(),this._tempEndPosition=v(),this._tempCornerPosition=v()}initialize(){this._handles.add(p(this.view,\"ready\",(()=>this._initialize()),!0))}destroy(){this._handles=a(this._handles)}_initialize(){const e=this.view.spatialReference,t=D(e),i=t===j?z:t;this._sphericalPCPF=i;const s=_(e,i);this._unitNormalizer.spatialReference=s?i:e,this._handles.add([h((()=>({viewData:this.viewData,startPoint:this.layer.startPoint})),(({viewData:e,startPoint:t})=>{e.elevationAlignedStartPoint=this._applyElevationAlignment(t)})),h((()=>({viewData:this.viewData,endPoint:this.layer.endPoint})),(({viewData:e,endPoint:t})=>{e.elevationAlignedEndPoint=this._applyElevationAlignment(t)})),h((()=>({result:this._computedResult,viewData:this.viewData})),(({result:e,viewData:t})=>{t.result=e}))])}_applyElevationAlignment(e){if(n(e)||e.hasZ)return e;const t=e.clone();return t.z=c(k(this.view.elevationProvider,t),0),t}get _computedResult(){const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t}=this.viewData;if(n(e)||n(t))return null;const i=this._euclideanDistances(e,t),s=this._exactGeodesicDistanceAndAngle(e,t,i.horizontal.value);return{directDistance:i.direct,horizontalDistance:i.horizontal,verticalDistance:i.vertical,geodesicDistance:s.distance,geodesicAngle:s.angle}}_euclideanDistances(e,t){const i=e.clone();i.z=t.z;const s=this._tempStartPosition,o=this._tempEndPosition,r=this._tempCornerPosition,a=this.view.spatialReference,n=this._sphericalPCPF,c=_(a,n)?n:a;w(e,s,c),w(t,o,c),w(i,r,c);const p=u(s,o),m=u(r,o),d=Math.abs(t.z-e.z),h=e=>this._unitNormalizer.normalizeDistance(e),v=h(p),g=h(m),f=h(d);return{direct:new l(v,\"meters\"),horizontal:new l(g,\"meters\"),vertical:new l(f,\"meters\")}}_exactGeodesicDistanceAndAngle(e,t,i){const s=e.spatialReference,o=new f({spatialReference:s});o.addPath([e,t]);const r=s.isGeographic&&A(s)?b([o],\"meters\")[0]:s.isWebMercator?g(o,\"meters\"):void 0,{distance:a,angle:n}=r?{distance:r,angle:this._fallbackGeodesicAngle(r,s)}:this._fallbackGeodesicDistance(e,t,i);return{distance:new l(a,\"meters\"),angle:new l(n,\"degrees\")}}_fallbackGeodesicAngle(e,t){return e/P(t).metersPerDegree}_fallbackGeodesicDistance(e,t,i){if(y(e,G)){y(t,S);const e=s(G[0]),i=s(G[1]),a=s(S[0]),n=s(S[1]),c=Math.abs(a-e),l=r(Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos(c)),p=o(l),m={distance:0};return E(m,[G[0],G[1]],[S[0],S[1]]),{distance:m.distance,angle:p}}const a=e.spatialReference,n=i;return{distance:n,angle:this._fallbackGeodesicAngle(n,a)}}};e([m()],R.prototype,\"view\",void 0),e([m()],R.prototype,\"layer\",void 0),e([m()],R.prototype,\"viewData\",void 0),e([m()],R.prototype,\"_computedResult\",null),R=e([d(\"esri.views.3d.layers.analysis.DirectLineMeasurement/DirectLineMeasurementController\")],R);const G=v(),S=v();export{R as DirectLineMeasurementController};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import{bindProjectionMatrix as e,bindView as t}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as o}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as i}from\"../core/shaderTechnique/ShaderTechnique.js\";import{parameter as s,ShaderTechniqueConfiguration as n}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as a}from\"../lib/DefaultVertexAttributeLocations.js\";import{blendingDefault as p,OITBlending as l}from\"../lib/OrderIndependentTransparency.js\";import{Program as m}from\"../lib/Program.js\";import{M as h}from\"../../../../chunks/MeasurementArrow.glsl.js\";import{makePipelineState as f,defaultDepthWriteParams as d,defaultColorWriteParams as u}from\"../../../webgl/renderState.js\";class c extends i{constructor(r,e,t){super(r,e,t)}initializeProgram(r){const e=c.shader.get().build();return new m(r.rctx,e,a)}bindPass(r,t){e(this.program,t.camera.projectionMatrix),this.program.setUniform1f(\"width\",r.width),this.program.setUniform1f(\"outlineSize\",r.outlineSize),this.program.setUniform4fv(\"outlineColor\",r.outlineColor),this.program.setUniform1f(\"stripeLength\",r.stripeLength),this.program.setUniform4fv(\"stripeEvenColor\",r.stripeEvenColor),this.program.setUniform4fv(\"stripeOddColor\",r.stripeOddColor)}bindDraw(r){t(this.program,r),this.program.rebindTextures()}setPipelineState(r){const e=3===r,t=this.configuration;return f({blending:t.transparent?e?p:l(r):null,polygonOffset:this.configuration.polygonOffsetEnabled&&{factor:0,units:-4},depthTest:{func:513},depthWrite:d,colorWrite:u})}initializePipeline(){return this.setPipelineState(this.configuration.transparencyPassType)}get primitiveType(){return 5}}c.shader=new o(h,(()=>import(\"./MeasurementArrow.glsl.js\")));class g extends n{constructor(){super(...arguments),this.polygonOffsetEnabled=!1,this.transparent=!1,this.transparencyPassType=3}}r([s()],g.prototype,\"polygonOffsetEnabled\",void 0),r([s()],g.prototype,\"transparent\",void 0),r([s({count:4})],g.prototype,\"transparencyPassType\",void 0);export{c as MeasurementArrowTechnique,g as MeasurementArrowTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{s as e,n as t,f as s,c as r,i,m as n}from\"../../../../chunks/vec3.js\";import{c as o}from\"../../../../chunks/vec3f64.js\";import{newLayout as a}from\"../../support/buffer/InterleavedLayout.js\";import c from\"../lib/GLMaterial.js\";import{Material as u,materialParametersDefaults as p}from\"../lib/Material.js\";import{MeasurementArrowTechniqueConfiguration as f,MeasurementArrowTechnique as l}from\"../shaders/MeasurementArrowTechnique.js\";class h extends u{constructor(e){super(e,d),this.techniqueConfig=new f}getTechniqueConfig(e){return this.techniqueConfig.polygonOffsetEnabled=this.params.polygonOffset,this.techniqueConfig.transparent=this.params.stripeEvenColor[3]<1||this.params.stripeOddColor[3]<1||this.params.outlineColor[3]<1,this.techniqueConfig.transparencyPassType=e?e.transparencyPassType:3,this.techniqueConfig}dispose(){}getPassParameters(){return this.params}intersect(){}createBufferWriter(){return new x}getGLMaterial(e){return 0===e.output?new m(e):void 0}}class m extends c{constructor(e){super(e),this.updateParameters()}updateParameters(e){this._technique=this._techniqueRep.releaseAndAcquire(l,this._material.getTechniqueConfig(e),this._technique)}beginSlot(e){return 3===e}bind(e){this._technique.bindPass(this._material.getPassParameters(),e)}}const d={width:32,outlineSize:.2,outlineColor:[1,.5,0,1],stripeLength:1,stripeEvenColor:[1,1,1,1],stripeOddColor:[1,.5,0,1],polygonOffset:!1,...p},g=a().vec3f(\"position\").vec3f(\"normal\").vec2f(\"uv0\").f32(\"auxpos1\"),v=o(),C=o(),q=o(),y=o(),b=o();class x{constructor(){this.vertexBufferLayout=g}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return 2*(e.indices.get(\"position\").length/2+1)}write(o,a,c,u){const p=a.vertexAttributes.get(\"position\").data,f=a.vertexAttributes.get(\"normal\").data,l=p.length/3,h=a&&a.indices&&a.indices.get(\"position\");h&&h.length!==2*(l-1)&&console.warn(\"MeasurementArrowMaterial does not support indices\");const m=v,d=C,g=q,x=y,P=b,w=o.transformation,T=o.invTranspTransformation,j=c.position,A=c.normal,L=c.uv0;let M=0;for(let v=0;v<l;++v){const o=3*v;if(e(m,p[o],p[o+1],p[o+2]),v<l-1){const i=3*(v+1);e(d,p[i],p[i+1],p[i+2]),e(P,f[i],f[i+1],f[i+2]),t(P,P),s(g,d,m),t(g,g),r(x,P,g),t(x,x)}const a=i(m,d);w&&T&&(n(m,m,w),n(d,d,w),n(x,x,T));const c=u+2*v,h=c+1;j.setVec(c,m),j.setVec(h,m),A.setVec(c,x),A.setVec(h,x),L.set(c,0,M),L.set(c,1,-1),L.set(h,0,M),L.set(h,1,1),v<l-1&&(M+=a)}const _=c.auxpos1;for(let e=0;e<2*l;++e)_.set(u+e,M)}}export{h as MeasurementArrowMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Handles.js\";import{applyOpacity as r}from\"../../../../core/mathUtils.js\";import{isNone as t,isSome as s}from\"../../../../core/maybe.js\";import{c as i}from\"../../../../chunks/mat4f64.js\";import{f as o}from\"../../../../chunks/vec3.js\";import{c as a}from\"../../../../chunks/vec3f64.js\";import{c as n}from\"../../../../chunks/vec4f64.js\";import{sv3d as h}from\"../../../../geometry/support/vectorStacks.js\";import{Object3DVisualElement as l}from\"./Object3DVisualElement.js\";import d from\"../../webgl-engine/lib/GeometryUtil.js\";import{MeasurementArrowMaterial as c}from\"../../webgl-engine/materials/MeasurementArrowMaterial.js\";class p extends l{constructor(e){super(e),this._parameters=m,this._handles=null,this._origin=a(),this._originTransform=i(),this._arrowCenter=a(),this._renderOccluded=4,this._geometry=null,this._stripeLength=1,this._stripesEnabled=!0,this._opacity=1,this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._arrowMaterial&&this._arrowMaterial.setParameterValues({renderOccluded:e}))}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.geometryChanged()}get stripeLength(){return this._stripeLength}set stripeLength(e){this._stripeLength=e,this.attached&&this._arrowMaterial.setParameterValues({stripeLength:this._stripeLength})}get stripesEnabled(){return this._stripesEnabled}set stripesEnabled(e){if(this._stripesEnabled=e,this.attached){const e=this.opacity,{arrowStripeEvenColor:t,arrowStripeOddColor:s}=this._parameters,i=r(_,this._stripesEnabled?t:s,e);this._arrowMaterial.setParameterValues({stripeEvenColor:i})}}get opacity(){return this._opacity}set opacity(e){e!==this._opacity&&(this._opacity=e,this._updateArrowOpacity())}createExternalResources(){const{arrowStripeEvenColor:r,arrowStripeOddColor:t,arrowOutlineColor:s}=this._parameters,i=this._stripesEnabled?r:t;this._arrowMaterial=new c({outlineColor:s,stripeEvenColor:i,stripeOddColor:t,renderOccluded:this.renderOccluded,polygonOffset:!0}),this._handles=new e,this._handles.add(this.view.state.watch(\"camera\",(()=>{this.viewChanged()})))}destroyExternalResources(){this._arrowMaterial=null,this._handles.destroy(),this._handles=null}forEachExternalMaterial(e){e(this._arrowMaterial)}createGeometries(e){if(t(this._geometry)||t(this._geometry.startRenderSpace)||t(this._geometry.endRenderSpace))return;const r=this._createArrowGeometry(this._geometry.startRenderSpace,this._geometry.endRenderSpace,this._origin,this._geometry);e.addGeometry(r,this._arrowMaterial,this._originTransform),this.viewChanged()}_createArrowGeometry(e,r,t,s){const i=this.view.renderCoordsHelper,a=[],n=[],l=(e,r)=>{const s=h.get();o(s,e,t),a.push(s),n.push(r)};if(\"euclidean\"===s.type){s.eval(.5,this._arrowCenter);const t=h.get();i.worldUpAtPosition(this._arrowCenter,t),l(e,t),l(r,t)}else{s.eval(.5,this._arrowCenter);const e=this._parameters.arrowSubdivisions+1&-2;for(let r=0;r<e;++r){const t=r/(e-1),o=h.get(),a=h.get();s.eval(t,o),i.worldUpAtPosition(o,a),l(o,a)}}return d.createPolylineGeometry(a,n)}geometryChanged(){this.recreateGeometry()}viewChanged(){if(this.view.ready&&this.attached&&s(this._geometry)){const e=this.view.state.camera.computeScreenPixelSizeAt(this._arrowCenter);this._arrowMaterial.setParameterValues({width:this._parameters.arrowWidth*e})}}_updateArrowOpacity(){const e=this.opacity,{arrowStripeEvenColor:t,arrowStripeOddColor:s,arrowOutlineColor:i}=this._parameters,o=r(_,this._stripesEnabled?t:s,e),a=r(w,i,e),n=r(u,s,e);this._arrowMaterial.setParameterValues({stripeEvenColor:o,outlineColor:a,stripeOddColor:n})}}const m={arrowWidth:16,arrowOutlineColor:[1,.5,0,1],arrowOutlineWidth:.2,arrowStripeEvenColor:[1,1,1,1],arrowStripeOddColor:[1,.5,0,1],arrowStripeLength:16,arrowSubdivisions:128},_=n(),w=n(),u=n();export{p as MeasurementArrowVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Handles.js\";import{isSome as t}from\"../../../../core/maybe.js\";import{i,t as r,f as s}from\"../../../../chunks/mat4.js\";import{c as a}from\"../../../../chunks/mat4f64.js\";import{i as o,n as l,f as n,g as u,b as h}from\"../../../../chunks/vec3.js\";import{c as d}from\"../../../../chunks/vec3f64.js\";import{c}from\"../../../../chunks/vec4.js\";import{f as _}from\"../../../../chunks/vec4f32.js\";import{sv3d as m}from\"../../../../geometry/support/vectorStacks.js\";import{Object3DVisualElement as p}from\"./Object3DVisualElement.js\";import{Geometry as M}from\"../../webgl-engine/lib/Geometry.js\";import f from\"../../webgl-engine/lib/GeometryUtil.js\";import{ColorMaterial as g}from\"../../webgl-engine/materials/ColorMaterial.js\";import{RibbonLineMaterial as O}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";class y extends p{constructor(t){super(t),this._handles=new e,this._quadMaterial=null,this._outlineMaterial=null,this._maxSize=0,this._position=d(),this._up=d(),this._right=d(),this._renderOccluded=4,this._color=_(1,0,0,1),this._outlineColor=_(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=16,this.applyProps(t)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateQuadMaterial())}get color(){return this._color}set color(e){c(this._color,e),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(e){c(this._outlineColor,e),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(e){const t=0===this._outlineSize!=(0===e);this._outlineSize=e,t?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(e){this._outlineRenderOccluded=e,this._updateOutlineMaterial()}set geometry({previous:e,center:t,next:i}){this._maxSize=Math.min(o(t,e),o(t,i))/3,l(this._up,n(this._up,e,t)),l(this._right,n(this._right,i,t)),u(this._position,t),this.recreateGeometry()}createExternalResources(){this._quadMaterial=new g(this.quadMaterialParameters),this._outlineMaterial=new O(this.outlineMaterialParameters),this._handles.add(this.view.state.watch(\"camera\",(()=>this._updateTransform())))}destroyExternalResources(){this._quadMaterial=null,this._outlineMaterial=null,this._handles.removeAll()}forEachExternalMaterial(e){e(this._quadMaterial),e(this._outlineMaterial)}createGeometries(e){this._createQuadGeometry(e),this._createOutlineGeometry(e),this._updateTransform(e)}_createQuadGeometry(e){const t=this._quadGeometryData(this._up,this._right);e.addGeometry(t,this._quadMaterial)}_createOutlineGeometry(e){if(0===this._outlineSize)return;const t=h(m.get(),this._up,this._right),i=f.createPolylineGeometry([this._up,t,this._right]);e.addGeometry(i,this._outlineMaterial)}_updateTransform(e=this.object){const a=this.view.state.camera,o=this._size*a.computeScreenPixelSizeAt(this._position),l=Math.min(this._maxSize,o);i(z),r(z,z,this._position),s(z,z,[l,l,l]),t(e)&&(e.transformation=z)}_quadGeometryData(e,t){const i=h(m.get(),e,t);return new M([[\"position\",{size:3,data:[0,0,0,...t,...e,...i],exclusive:!0}]],[[\"position\",new Uint16Array([0,1,2,1,2,3])]])}get quadMaterialParameters(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}_updateQuadMaterial(){this._quadMaterial&&this._quadMaterial.setParameterValues(this.quadMaterialParameters)}get outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}_updateOutlineMaterial(){this._outlineMaterial&&this._outlineMaterial.setParameterValues(this.outlineMaterialParameters)}}const z=a();export{y as RightAngleQuadVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../intl.js\";import t from\"../../../../../core/Accessor.js\";import i from\"../../../../../core/Handles.js\";import{nextHighestPowerOfTen as s,applyOpacity as n,sign as a,deg2rad as r}from\"../../../../../core/mathUtils.js\";import{isSome as o,isNone as l,destroyMaybe as c}from\"../../../../../core/maybe.js\";import{formatDecimal as h,formatDMS as d,formatImperialLength as u,formatImperialVerticalLength as m,formatMetricLength as g,formatMetricVerticalLength as p}from\"../../../../../core/quantityFormatUtils.js\";import{createRenderScreenPointArray3 as _,createRenderScreenPointArray as v}from\"../../../../../core/screenUtils.js\";import{preferredImperialLengthUnit as b,convertUnit as L}from\"../../../../../core/unitUtils.js\";import{whenOnce as w}from\"../../../../../core/watchUtils.js\";import{property as y}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as f}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{autorun as V,reactionInit as S}from\"../../../../../core/accessorSupport/trackingUtils.js\";import{h as E}from\"../../../../../chunks/vec2.js\";import{a as z,b as j}from\"../../../../../chunks/vec3.js\";import{c as P}from\"../../../../../chunks/vec3f64.js\";import{f as A}from\"../../../../../chunks/vec4f32.js\";import{c as D}from\"../../../../../chunks/vec4f64.js\";import{getReferenceEllipsoid as M}from\"../../../../../geometry/projectionEllipsoid.js\";import{LabelVisualElement as O,mirrorPosition as C}from\"../../../interactive/visualElements/LabelVisualElement.js\";import{LineVisualElement as G}from\"../../../interactive/visualElements/LineVisualElement.js\";import{MeasurementArrowVisualElement as x}from\"../../../interactive/visualElements/MeasurementArrowVisualElement.js\";import{RightAngleQuadVisualElement as H}from\"../../../interactive/visualElements/RightAngleQuadVisualElement.js\";import{GeodesicSegment as k,EuclideanSegment as R}from\"../../../interactive/visualElements/support/Segment.js\";import{screenSpaceTangent as T}from\"../support/viewUtils.js\";import{createStipplePatternSimple as U}from\"../../../webgl-engine/materials/lineStippleUtils.js\";import{onLocaleChange as F}from\"../../../../../intl/locale.js\";import{fetchMessageBundle as W}from\"../../../../../intl/messages.js\";let Q=class extends t{constructor(e){super(e),this._params={...I},this._handles=new i,this._segmentVisualElement=null,this._triangleVisualElement=null,this._rightAngleQuad=null,this._projectedGeodesicLine=null,this._geodesicStartHint=null,this._geodesicEndHint=null,this._segmentLabel=null,this._verticalLabel=null,this._horizontalLabel=null,this._startPosition=P(),this._endPosition=P(),this._cornerPosition=P(),this._startPositionAtSeaLevel=P(),this._endPositionAtSeaLevel=P(),this._state=0,this._segmentLabelDisplayedMeasurement=1,this._triangleOrientationOverride=null,this.messages=null,this.loadingMessages=!0,this.viewMode=0,this.visualizedMeasurement=0,this.actualVisualizedMeasurement=1,this.visualElementOrientation=0,this.triangleCollapseRatioThreshold=.03}get _geodesicDistanceExceeded(){var e;const t=this.layerView.result;return o(t)&&(null==(e=t.horizontalDistance)?void 0:e.value)>this.layer.geodesicDistanceThreshold}get ready(){return 1===this._state}get visible(){return this.layerView.visible&&!this.layerView.suspended}get allowVisualElementsOrientationChange(){return l(this._triangleOrientationOverride)}set allowVisualElementsOrientationChange(e){l(this._triangleOrientationOverride)!==e&&(l(this._triangleOrientationOverride)?this._triangleOrientationOverride=this._getActualVisualElementsOrientation():this._triangleOrientationOverride=null)}get labels(){const e=2===this.actualVisualizedMeasurement;return{direct:this._segmentLabel,horizontal:e?this._segmentLabel:this._horizontalLabel,vertical:this._verticalLabel}}get testData(){var e;return{labels:this.labels,stripeLength:null==(e=this._segmentVisualElement)?void 0:e.stripeLength}}initialize(){this._handles.add(w(this.view,\"ready\",(()=>this._initialize()),!0))}_initialize(){switch(this._state){case 1:throw new Error(\"invalid state\");case 2:return}const e=this._params,t={attached:!0,view:this.view};this._segmentVisualElement=new x({...t,geometry:null,renderOccluded:4}),this._triangleVisualElement=new G({...t,width:e.triangleLineWidth,color:e.triangleColor,renderOccluded:4}),this._rightAngleQuad=new H({...t,color:B,renderOccluded:4});const i={...t,polygonOffset:!0,stippleIntegerRepeats:!1,renderOccluded:4};this._projectedGeodesicLine=new G({...i,width:e.geodesicProjectionLineWidth,color:e.geodesicProjectionLineColor,stipplePattern:U(e.guideStippleLengthPixels)}),this._geodesicStartHint=new G({...i,width:e.guideLineWidth,color:e.geodesicProjectionLineColor,stipplePattern:U(e.guideStippleLengthPixels)}),this._geodesicEndHint=new G({...i,width:e.guideLineWidth,color:e.geodesicProjectionLineColor,stipplePattern:U(e.guideStippleLengthPixels)}),this._segmentLabel=new O({...t,fontSize:e.direcLabelFontSize}),this._verticalLabel=new O({...t,fontSize:e.verticalLabelFontSize}),this._horizontalLabel=new O({...t,fontSize:e.horizontalLabelFontSize}),this._handles.add([V((()=>this._updateGeometryAndViewMode())),V((()=>this._updateVisualElementVisibility())),S((()=>this.layerView.fullOpacity),(()=>this._updateVisualElementsOpacity())),V((()=>this._updateLabelText())),V((()=>this._updateLabelVisibility())),V((()=>this._updateSegmentStripeLength())),F((async()=>this._updateMessageBundle()))]),this._state=1,this._updateMessageBundle()}destroy(){2!==this._state&&(this._handles=c(this._handles),this._segmentVisualElement=c(this._segmentVisualElement),this._triangleVisualElement=c(this._triangleVisualElement),this._rightAngleQuad=c(this._rightAngleQuad),this._projectedGeodesicLine=c(this._projectedGeodesicLine),this._geodesicStartHint=c(this._geodesicStartHint),this._geodesicEndHint=c(this._geodesicEndHint),this._segmentLabel=c(this._segmentLabel),this._verticalLabel=c(this._verticalLabel),this._horizontalLabel=c(this._horizontalLabel),this.set(\"view\",null),this._state=2)}async whenReady(){await w(this,\"ready\")}_updateVisualElementVisibility(){if(this._segmentVisualElement.visible=!1,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1,this.visible)switch(this.viewMode){case 0:break;case 1:this._segmentVisualElement.visible=!0;break;case 2:this._segmentVisualElement.visible=!0,this._triangleVisualElement.visible=!0,this._rightAngleQuad.visible=!0;break;case 3:this._segmentVisualElement.visible=!0,this._projectedGeodesicLine.visible=!0,this._geodesicStartHint.visible=!0,this._geodesicEndHint.visible=!0}}_updateGeometryAndViewMode(){const e=this.view.renderCoordsHelper,{elevationAlignedStartPoint:t,elevationAlignedEndPoint:i}=this.layerView;if(l(t)||l(i)||t.equals(i)){this.viewMode=0;const e=this.visualizedMeasurement,t=0===e;return void(this.actualVisualizedMeasurement=t?1:e)}e.toRenderCoords(t,this._startPosition),e.toRenderCoords(i,this._endPosition);const s=this._getActualVisualElementsOrientation(),n=this._updateActualVisualizedMeasurement();this.viewMode=this._computeViewMode(n);let a=this._startPosition,r=this._endPosition;const o=1===s?1:-1,c=o*(e.getAltitude(r)-e.getAltitude(a));c<0&&(a=this._endPosition,r=this._startPosition);const h=2===n?new k(this._startPosition,this._endPosition,e.spatialReference):new R(this._startPosition,this._endPosition);switch(this._segmentVisualElement.geometry=h,this._updateSegmentStripeLength(),this._segmentLabelDisplayedMeasurement=n,this.viewMode){case 1:this._updateSegment(h,s);break;case 2:this._updateSegmentAndTriangle(h,s,a,r,o,c);break;case 3:this._updateSegmentAndProjection(s)}}_updateSegment(e,t){this._segmentLabel.anchor=1===t?\"top\":\"bottom\",this._segmentLabel.geometry={type:\"segment\",segment:e,sampleLocation:\"center\"}}_updateSegmentAndTriangle(e,t,i,s,n,a){const r=this.view,o=r.renderCoordsHelper,l=r.state.camera,c=this._cornerPosition;o.worldUpAtPosition(i,c),z(c,c,n*Math.abs(a)),j(c,c,i),this._triangleVisualElement.geometry=[[[i[0],i[1],i[2]],[c[0],c[1],c[2]],[s[0],s[1],s[2]]]],this._rightAngleQuad.geometry={previous:i,center:c,next:s};const h=new R(i,c),d=new R(c,s),u=q(i,s,c,t,l);this._segmentLabel.anchor=u.segment,this._segmentLabel.geometry={type:\"segment\",segment:e,sampleLocation:\"center\"},this._verticalLabel.geometry={type:\"segment\",segment:h,sampleLocation:\"center\"},this._verticalLabel.anchor=u.vertical,this._horizontalLabel.geometry={type:\"segment\",segment:d,sampleLocation:\"center\"},this._horizontalLabel.anchor=u.horizontal}_updateSegmentAndProjection(e){const t=this.view.renderCoordsHelper;t.setAltitude(this._startPositionAtSeaLevel,0,this._startPosition),t.setAltitude(this._endPositionAtSeaLevel,0,this._endPosition);const i=new k(this._startPositionAtSeaLevel,this._endPositionAtSeaLevel,t.spatialReference);this._projectedGeodesicLine.setGeometryFromSegment(i),this._geodesicStartHint.setGeometryFromSegment(new R(this._startPositionAtSeaLevel,this._startPosition)),this._geodesicEndHint.setGeometryFromSegment(new R(this._endPositionAtSeaLevel,this._endPosition)),this._segmentLabel.geometry={type:\"segment\",segment:i,sampleLocation:\"center\"},this._segmentLabel.anchor=1===e?\"top\":\"bottom\"}_updateLabelText(){if(1!==this._state)return;const e=this._segmentLabel,t=this._horizontalLabel,i=this._verticalLabel,s=this.messages,n=this.layerView.result;if(l(n)||l(s))return e.text=null,t.text=null,void(i.text=null);const a=this._getLabelsText(s,n),r=1===this._segmentLabelDisplayedMeasurement;e.text=r?a.euclideanDistance:a.geodesicDistance,t.text=a.horizontalDistance,i.text=a.verticalDistance,this.notifyChange(\"labels\")}_updateLabelVisibility(){if(1!==this._state)return;const e=this._segmentLabel,t=this._horizontalLabel,i=this._verticalLabel;if(e.visible=!1,t.visible=!1,i.visible=!1,this.visible)switch(this.viewMode){case 1:e.visible=!0;break;case 2:e.visible=!0,t.visible=!0,i.visible=!0;break;case 3:e.visible=!0}}_getLabelsText(e,{directDistance:t,horizontalDistance:i,verticalDistance:s,geodesicDistance:n,geodesicAngle:a}){const r=this.layerView.unit,o=e=>({euclideanDistance:\"\",geodesicDistance:\"\",horizontalDistance:\"\",verticalDistance:\"\",...e});switch(r){case\"metric\":return o({euclideanDistance:t&&g(e,t),geodesicDistance:n&&g(e,n),horizontalDistance:i&&g(e,i),verticalDistance:s&&p(e,s)});case\"imperial\":return o({euclideanDistance:t&&u(e,t),geodesicDistance:n&&u(e,n),horizontalDistance:i&&u(e,i),verticalDistance:s&&m(e,s)});case\"degrees\":{const t=a&&h(e,a,\"degrees\");return o({euclideanDistance:t,geodesicDistance:t,horizontalDistance:t})}case\"degrees-minutes-seconds\":return o({horizontalDistance:a&&d(a)});default:return o({euclideanDistance:t&&h(e,t,r),geodesicDistance:n&&h(e,n,r),horizontalDistance:i&&h(e,i,r),verticalDistance:s&&h(e,s,r)})}}_updateSegmentStripeLength(){const e=this._measurementArrowStripeLength,t=this._segmentVisualElement;o(e)?(t.stripeLength=e,t.stripesEnabled=!0):t.stripesEnabled=!1}_computeViewMode(e){if(2===e){if(!this._geodesicDistanceExceeded)return 1;if(this._requiresGeodesicGuideAt(this._startPosition)||this._requiresGeodesicGuideAt(this._endPosition))return 3}const t=this.layerView.result;if(l(t))return 1;const{verticalDistance:i,horizontalDistance:s}=t,n=i.value,a=s.value;return Math.min(n/a,a/n)<this.triangleCollapseRatioThreshold?1:2}_getActualVisualElementsOrientation(){if(o(this._triangleOrientationOverride))return this._triangleOrientationOverride;const e=this.visualElementOrientation;return 0===e?this.view.state.camera.aboveGround?1:2:e}_updateActualVisualizedMeasurement(){if(0===this.visualizedMeasurement){this.actualVisualizedMeasurement=1;const e=this.layerView.unit;\"degrees\"!==e&&\"degrees-minutes-seconds\"!==e||(this.actualVisualizedMeasurement=2),this._geodesicDistanceExceeded&&(this.actualVisualizedMeasurement=2)}else this.actualVisualizedMeasurement=this.visualizedMeasurement;return this.actualVisualizedMeasurement}_requiresGeodesicGuideAt(e){const t=this.view;if(!t.state)return!1;const i=t.state.camera,s=t.renderCoordsHelper,n=i.computeScreenPixelSizeAt(e);return s.getAltitude(e)/n>=10}get _measurementArrowStripeLength(){const e=this.view,{result:t,unit:i}=this.layerView;let n=null;if(o(t)){const e=t.directDistance;switch(i){case\"metric\":n=e&&e.toUnit(\"meters\");break;case\"imperial\":n=e&&e.toUnit(b(e.value,e.unit));break;case\"degrees\":case\"degrees-minutes-seconds\":{const e=t.geodesicAngle;n=e&&e.toUnit(\"degrees\");break}default:n=e&&e.toUnit(i)}}if(n){let t=1;return t=s(n.value/30),t*=\"degrees\"===n.unit?M(e.spatialReference).metersPerDegree:L(1,n.unit,\"meters\"),t}return null}_updateMessageBundle(){this.loadingMessages=!0,W(\"esri/core/t9n/Units\").then((e=>{this.messages=e,this.view&&this._updateLabelText()})).finally((()=>{this.loadingMessages=!1}))}_updateVisualElementsOpacity(){const e=this.layerView.fullOpacity,t=this._params,{triangleColor:i,geodesicProjectionLineColor:s}=t;this._triangleVisualElement.color=n(K,i,e),this._rightAngleQuad.color=n(K,B,e),n(K,s,e),this._projectedGeodesicLine.color=K,this._geodesicStartHint.color=K,this._geodesicEndHint.color=K,this._segmentVisualElement.opacity=e}};function q(e,t,i,s,n){const r=N,o=X;n.projectToRenderScreen(i,r),n.projectToRenderScreen(t,o);const l={segment:\"bottom\",horizontal:\"top\",vertical:r[0]<o[0]?\"left\":\"right\"};{const s=Y,r=Z;if(T(e,i,s,n),T(e,t,r,n),E(s,r)>=J){const e=a(s[1])===a(r[1]);l.segment=e?C(l.vertical):l.vertical}else{const e=$;T(i,t,e,n),E(e,r)>=J&&(l.segment=a(e[0])===a(r[0])?C(l.horizontal):l.horizontal)}}if(2===s){const e=e=>\"top\"===e?\"bottom\":\"top\";l.segment=e(l.segment),l.horizontal=e(l.horizontal),l.vertical=e(l.vertical)}return l}e([y()],Q.prototype,\"_state\",void 0),e([y()],Q.prototype,\"_segmentLabelDisplayedMeasurement\",void 0),e([y()],Q.prototype,\"_triangleOrientationOverride\",void 0),e([y()],Q.prototype,\"_geodesicDistanceExceeded\",null),e([y()],Q.prototype,\"messages\",void 0),e([y()],Q.prototype,\"view\",void 0),e([y()],Q.prototype,\"layer\",void 0),e([y()],Q.prototype,\"layerView\",void 0),e([y({readOnly:!0})],Q.prototype,\"ready\",null),e([y()],Q.prototype,\"loadingMessages\",void 0),e([y({readOnly:!0})],Q.prototype,\"visible\",null),e([y()],Q.prototype,\"viewMode\",void 0),e([y()],Q.prototype,\"visualizedMeasurement\",void 0),e([y()],Q.prototype,\"actualVisualizedMeasurement\",void 0),e([y()],Q.prototype,\"visualElementOrientation\",void 0),e([y()],Q.prototype,\"triangleCollapseRatioThreshold\",void 0),e([y()],Q.prototype,\"allowVisualElementsOrientationChange\",null),e([y()],Q.prototype,\"labels\",null),e([y()],Q.prototype,\"testData\",null),e([y()],Q.prototype,\"_measurementArrowStripeLength\",null),Q=e([f(\"esri.views.3d.layers.DirectLineMeasurement.DirectLineMeasurementView\")],Q);const B=A(1,.5,0,.75),I={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:.75,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,triangleColor:B,triangleLineWidth:3,triangleCornerSize:32,triangleSubdivisions:128,arrowWidth:16,arrowOutlineColor:[1,.5,0,1],arrowOutlineWidth:.2,arrowStripeEvenColor:[1,1,1,1],arrowStripeOddColor:[1,.5,0,1],arrowStripeLength:16,arrowSubdivisions:128,geodesicProjectionLineWidth:2,geodesicProjectionLineColor:B,guideLineWidth:2,guideLineColor:B,guideStippleLengthPixels:6,labelDistance:25,direcLabelFontSize:16,horizontalLabelFontSize:12,verticalLabelFontSize:12},J=Math.cos(r(12)),K=D(),N=_(),X=_(),Y=v(),Z=v(),$=v();export{Q as DirectLineMeasurementView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{unwrapOr as t,destroyMaybe as i}from\"../../../core/maybe.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{defaultUnitPropertyMetadata as a}from\"../../../properties/defaultUnit.js\";import{LayerView3D as r}from\"./LayerView3D.js\";import{DirectLineMeasurementController as n}from\"./analysis/DirectLineMeasurement/DirectLineMeasurementController.js\";import{DirectLineMeasurementView as o}from\"./analysis/DirectLineMeasurement/DirectLineMeasurementView.js\";import u from\"../../layers/LayerView.js\";let p=class extends(r(u)){constructor(e){super(e),this._userUnit=null,this.type=\"direct-line-measurement-3d\",this.result=null,this.elevationAlignedStartPoint=null,this.elevationAlignedEndPoint=null}set unit(e){this._userUnit=e}get unit(){return t(this._userUnit,this._defaultUnit)}get viewMode(){return this._analysisView.viewMode}get visualizedMeasurement(){return this._analysisView.visualizedMeasurement}set visualizedMeasurement(e){this._analysisView.visualizedMeasurement=e}get actualVisualizedMeasurement(){return this._analysisView.actualVisualizedMeasurement}get visualElementOrientation(){return this._analysisView.visualElementOrientation}set visualElementOrientation(e){this._analysisView.visualElementOrientation=e}get allowVisualElementsOrientationChange(){return this._analysisView.allowVisualElementsOrientationChange}set allowVisualElementsOrientationChange(e){this._analysisView.allowVisualElementsOrientationChange=e}get triangleCollapseRatioThreshold(){return this._analysisView.triangleCollapseRatioThreshold}set triangleCollapseRatioThreshold(e){this._analysisView.triangleCollapseRatioThreshold=e}get directLabelText(){return this._analysisView.labels.direct.text}get horizontalLabelText(){return this._analysisView.labels.horizontal.text}get verticalLabelText(){return this._analysisView.labels.vertical.text}get testData(){var e;return this.destroyed?{labels:null,stripeLength:null,view:null,controller:null}:{...null==(e=this._analysisView)?void 0:e.testData,view:this._analysisView,controller:this._analysisController}}initialize(){const e=this.view,t=this.layer;this._analysisView=new o({view:e,layer:t,layerView:this}),this._analysisController=new n({view:e,layer:t,viewData:this})}destroy(){i(this._analysisController),i(this._analysisView)}whenReady(){return this._analysisView.whenReady()}isUpdating(){var e;return!(null==(e=this._analysisView)||!e.loadingMessages)}};e([s(a)],p.prototype,\"_defaultUnit\",void 0),e([s()],p.prototype,\"_userUnit\",void 0),e([s()],p.prototype,\"_analysisView\",void 0),e([s()],p.prototype,\"_analysisController\",void 0),e([s()],p.prototype,\"type\",void 0),e([s()],p.prototype,\"unit\",null),e([s()],p.prototype,\"layer\",void 0),e([s()],p.prototype,\"result\",void 0),e([s()],p.prototype,\"elevationAlignedStartPoint\",void 0),e([s()],p.prototype,\"elevationAlignedEndPoint\",void 0),e([s({readOnly:!0})],p.prototype,\"viewMode\",null),e([s()],p.prototype,\"visualizedMeasurement\",null),e([s({readOnly:!0})],p.prototype,\"actualVisualizedMeasurement\",null),e([s()],p.prototype,\"visualElementOrientation\",null),e([s()],p.prototype,\"allowVisualElementsOrientationChange\",null),e([s()],p.prototype,\"triangleCollapseRatioThreshold\",null),e([s({readOnly:!0})],p.prototype,\"directLabelText\",null),e([s({readOnly:!0})],p.prototype,\"horizontalLabelText\",null),e([s({readOnly:!0})],p.prototype,\"verticalLabelText\",null),e([s()],p.prototype,\"testData\",null),p=e([l(\"esri.views.3d.layers.DirectLineMeasurementLayerView3D\")],p);var y=p;export{y as default};\n"],"sourceRoot":""}