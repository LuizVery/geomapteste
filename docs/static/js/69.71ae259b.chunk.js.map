{"version":3,"sources":["../node_modules/@arcgis/core/layers/support/I3SLayerDefinitions.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/Object3DVisualElement.js","../node_modules/@arcgis/core/layers/buildingSublayers/BuildingComponentSublayer.js","../node_modules/@arcgis/core/layers/buildingSublayers/BuildingSublayer.js","../node_modules/@arcgis/core/layers/support/capabilities.js","../node_modules/@arcgis/core/layers/support/I3SIndexInfo.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/VisualElement.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/LineVisualElement.js","../node_modules/@arcgis/core/chunks/ImageMaterial.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js","../node_modules/@arcgis/core/chunks/ShadedColorMaterial.glsl.js","../node_modules/@arcgis/core/chunks/SlicePlaneMaterial.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js","../node_modules/@arcgis/core/views/3d/interactive/Manipulator3D.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ShadedColorMaterialTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ShadedColorMaterial.js","../node_modules/@arcgis/core/views/3d/interactive/manipulatorUtils.js","../node_modules/@arcgis/core/views/3d/interactive/analysisTools/slice/sliceToolConfig.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/SlicePlaneMaterialTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/SlicePlaneMaterial.js","../node_modules/@arcgis/core/widgets/Slice/SlicePlane.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/SlicePlaneVisualElement.js","../node_modules/@arcgis/core/views/3d/interactive/analysisTools/slice/sliceToolUtils.js","../node_modules/@arcgis/core/views/3d/interactive/graphics/Slice/SliceController.js","../node_modules/@arcgis/core/views/3d/interactive/graphics/Slice/SliceView.js","../node_modules/@arcgis/core/views/3d/layers/analysis/Slice/SliceLayerViewData.js","../node_modules/@arcgis/core/views/3d/layers/SliceLayerView3D.js","../node_modules/@arcgis/core/portal/support/resourceExtension.js","../node_modules/@arcgis/core/core/accessorSupport/decorators/persistable.js"],"names":["s","arguments","nodesPerPage","rootIndex","lodSelectionMetricType","t","e","o","type","Number","prototype","String","p","i","factor","json","read","source","a","baseColorFactor","baseColorTexture","metallicRoughnessTexture","metallicFactor","roughnessFactor","l","alphaMode","alphaCutoff","doubleSided","cullFace","normalTexture","occlusionTexture","emissiveTexture","emissiveFactor","pbrMetallicRoughness","r","opaque","mask","blend","Boolean","none","back","front","n","reader","index","jpg","png","dds","ktx2","basis","u","atlas","y","Float32","UInt64","UInt32","UInt16","UInt8","d","draco","c","offset","m","triangle","view","_resources","_transform","this","object","transformation","attached","createResources","_stage","removeMany","geometries","removeAllGeometries","createGeometries","visible","setVisible","addMany","destroyResources","isPickable","updatePolicy","add","castShadow","createExternalResources","forEachExternalMaterial","layer","remove","dispose","destroyExternalResources","D","getLogger","Q","L","R","nodePages","materialDefinitions","textureSetDefinitions","geometryDefinitions","serviceUpdateTimeStamp","fields","associatedLayer","outFields","listMode","renderer","definitionExpression","popupEnabled","popupTemplate","layerType","path","parsedUrl","id","query","F","associatedFeatureServiceItem","associatedLayerID","g","portalItem","layerId","name","displayField","createPopupTemplate","signal","_fetchService","then","indexInfo","S","rootNode","apiKey","addResolvingPromise","Promise","resolve","q","f","token","responseType","data","origin","url","fieldsIndex","get","getFeatureType","feature","domains","getField","domain","types","typeIdField","capabilities","v","supportsZ","supportsM","isVersioned","T","geometryType","returnGeometry","returnZ","where","sqlFormat","_getAssociatedLayerForQuery","queryExtent","createQuery","queryFeatureCount","queryFeatures","features","sourceLayer","queryObjectIds","has","supportsLabelingInfo","supportsRenderer","supportsPopupTemplate","supportsLayerQuery","loaded","_loadAssociatedLayerForQuery","load","error","LoadableMixin","j","readOnly","I","O","w","x","aliasOf","h","P","write","origins","service","value","enabled","allowNull","b","target","Point","E","title","modelName","isEmpty","opacity","alias","ignoreOrigin","attachment","supportsContentType","supportsExifInfo","supportsKeywords","supportsName","supportsSize","supportsAttachment","editing","supportsDeleteByAnonymous","supportsDeleteByOthers","supportsGeometryUpdate","supportsGlobalId","supportsReturnServiceEditsInSourceSpatialReference","supportsRollbackOnFailure","supportsUpdateByAnonymous","supportsUpdateByOthers","supportsUpdateWithoutM","supportsUploadWithItemId","metadata","supportsAdvancedFieldProperties","operations","supportsCalculate","supportsTruncate","supportsValidateSql","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsQueryAttachments","supportsResizeAttachments","supportsSync","supportsUpdate","supportsExceedsLimitStatistics","queryRelated","supportsCount","supportsOrderBy","supportsPagination","maxRecordCount","maxRecordCountFactor","standardMaxRecordCount","supportsCacheHint","supportsCentroid","supportsDisjointSpatialRelationship","supportsDistance","supportsDistinct","supportsExtent","supportsFormatPBF","supportsGeometryProperties","supportsHavingClause","supportsHistoricMoment","supportsMaxRecordCountFactor","supportsPercentileStatistics","supportsQuantization","supportsQuantizationEditMode","supportsQueryByOthers","supportsQueryGeometry","supportsResultType","supportsSqlExpression","supportsStandardizedQueriesOnly","supportsTopFeaturesQuery","supportsStatistics","tileMaxRecordCount","Math","floor","rootPage","pageSize","lodMetric","urlPrefix","warn","split","pop","pageError","nodeError","_attached","_resourcesCreated","_visible","watch","_createResources","_destroyResources","console","updateVisibility","_renderOccluded","_width","_color","_innerWidth","_innerColor","_stipplePattern","_stippleOffColor","_stippleIntegerRepeats","_writeDepthEnabled","_falloff","_polygonOffset","applyProps","push","geometry","spatialReference","renderCoordsHelper","toRenderCoords","lines","forEach","endpoint","basis1","basis2","endRenderSpace","transform","createRenderGeometry","points","map","_updateMaterial","_geometry","recreateGeometry","recreate","_material","materialParameters","_createLineGeometries","length","addGeometry","width","color","stippleOffColor","stipplePattern","isClosed","falloff","innerColor","innerWidth","stippleIntegerRepeats","polygonOffset","renderOccluded","writeDepth","setParameterValues","Float64Array","attributeData","position","removeDuplicateStartEnd","_","include","linearDepth","vertex","uniforms","attributes","varyings","multipassTerrainEnabled","code","fragment","output","float","OITEnabled","Object","freeze","__proto__","build","setUniform1f","camera","perScreenPixelRatio","screenSize","screenSizeEnabled","shadingEnabled","extensions","shader","configuration","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","transparencyPassType","cullAboveGround","rctx","program","projectionMatrix","setUniform2fv","nearFar","inverseViewport","rebindTextures","blending","transparent","culling","depthTest","func","depthWrite","colorWrite","stencilWrite","sceneHasOcludees","stencilTest","enableOffset","_occludeePipelineState","setPipelineState","pipeline","count","supportsEdges","techniqueConfig","params","relativeElevation","material","updateParameters","updateTexture","textureId","_technique","_techniqueRep","releaseAndAcquire","getTechniqueConfig","_output","hasOccludees","_updateOccludeeState","bindTextures","bindTextureScale","bindPass","getPipelineState","initTextureTransparent","M","U","W","X","z","shadingTint","shadingDirection","setUniform4fv","blendColor","setUniform3fv","setUniformMatrix4fv","viewInverseTransposeMatrix","Map","getPassParameters","C","vec3f","vertexBufferLayout","createBuffer","indices","invTranspTransformation","vertexAttributes","Error","size","cos","backgroundColor","gridColor","gridWidth","constructionContext","_gridWidth","_gridColor","_backgroundColor","createSquareGeometry","heading","tilt","height","equals","nonNullable","range","min","max","normalize","xe","De","worldUpAtPosition","B","mt","round","yt","st","Pe","ne","writeDepthEnabled","dt","gt","worldBasisAtPosition","plane","G","wkid","PI","V","_handles","_internalChange","_currentSlicePlane","state","layerView","layerViewData","excludedLayers","on","item","preventDefault","includes","_initialize","set","all","activeController","_updateSlicePlaneFromBoundedPlane","_updateLayerViews","_updateActiveController","_updateViewSlicePlane","allLayerViews","analysis","_updateBoundedPlaneFromSlicePlane","_set","active","lastIndexOf","splice","delete","destroy","slicePlane","hasZ","clone","Te","elevationProvider","tiltEnabled","Fe","Ge","fromRenderCoords","layers","indexOf","sublayerViews","sublayer","basemapTerrain","excludeGroundSurface","_gridVisualElement","_outlineVisualElement","_updateMaterials","Oe","ce","le","fullOpacity","_updatePlane","N","k","editable","showGrid","_get","cast","analysisView","analysisController","_initialized","destroyed","promise","whenReady","controller","Blob","jpeg","bmp","gif","txt","xml","svg","zip","pbf","gz","writer","resources","verifyItemRelativeUrls","writtenUrls","rootPath","originIdOf","resourceFromPath","toUpdate","toKeep","resource","pendingOperations","itemRelativeUrl","catch","toAdd","content","finish","JSON","stringify","toJSON","default"],"mappings":"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","file":"static/js/69.71ae259b.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{enumeration as r}from\"../../core/accessorSupport/decorators/enumeration.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";let s=class extends t{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};e([o({type:Number})],s.prototype,\"nodesPerPage\",void 0),e([o({type:Number})],s.prototype,\"rootIndex\",void 0),e([o({type:String})],s.prototype,\"lodSelectionMetricType\",void 0),s=e([p(\"esri.layer.support.I3SNodePageDefinition\")],s);let i=class extends t{constructor(){super(...arguments),this.factor=1}};e([o({type:Number,json:{read:{source:\"textureSetDefinitionId\"}}})],i.prototype,\"id\",void 0),e([o({type:Number})],i.prototype,\"factor\",void 0),i=e([p(\"esri.layer.support.I3SMaterialTexture\")],i);let a=class extends t{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};e([o({type:[Number]})],a.prototype,\"baseColorFactor\",void 0),e([o({type:i})],a.prototype,\"baseColorTexture\",void 0),e([o({type:i})],a.prototype,\"metallicRoughnessTexture\",void 0),e([o({type:Number})],a.prototype,\"metallicFactor\",void 0),e([o({type:Number})],a.prototype,\"roughnessFactor\",void 0),a=e([p(\"esri.layer.support.I3SMaterialPBRMetallicRoughness\")],a);let l=class extends t{constructor(){super(...arguments),this.alphaMode=\"opaque\",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace=\"none\",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};e([r({opaque:\"opaque\",mask:\"mask\",blend:\"blend\"})],l.prototype,\"alphaMode\",void 0),e([o({type:Number})],l.prototype,\"alphaCutoff\",void 0),e([o({type:Boolean})],l.prototype,\"doubleSided\",void 0),e([r({none:\"none\",back:\"back\",front:\"front\"})],l.prototype,\"cullFace\",void 0),e([o({type:i})],l.prototype,\"normalTexture\",void 0),e([o({type:i})],l.prototype,\"occlusionTexture\",void 0),e([o({type:i})],l.prototype,\"emissiveTexture\",void 0),e([o({type:[Number]})],l.prototype,\"emissiveFactor\",void 0),e([o({type:a})],l.prototype,\"pbrMetallicRoughness\",void 0),l=e([p(\"esri.layer.support.I3SMaterialDefinition\")],l);let n=class extends t{};e([o({type:String,json:{read:{source:[\"name\",\"index\"],reader:(e,t)=>null!=e?e:`${t.index}`}}})],n.prototype,\"name\",void 0),e([r({jpg:\"jpg\",png:\"png\",dds:\"dds\",\"ktx-etc2\":\"ktx-etc2\",ktx2:\"ktx2\",basis:\"basis\"})],n.prototype,\"format\",void 0),n=e([p(\"esri.layer.support.I3STextureFormat\")],n);let u=class extends t{constructor(){super(...arguments),this.atlas=!1}};e([o({type:[n]})],u.prototype,\"formats\",void 0),e([o({type:Boolean})],u.prototype,\"atlas\",void 0),u=e([p(\"esri.layer.support.I3STextureSetDefinition\")],u);let y=class extends t{};e([r({Float32:\"Float32\",UInt64:\"UInt64\",UInt32:\"UInt32\",UInt16:\"UInt16\",UInt8:\"UInt8\"})],y.prototype,\"type\",void 0),e([o({type:Number})],y.prototype,\"component\",void 0),y=e([p(\"esri.layer.support.I3SGeometryAttribute\")],y);let d=class extends t{};e([r({draco:\"draco\"})],d.prototype,\"encoding\",void 0),e([o({type:[String]})],d.prototype,\"attributes\",void 0),d=e([p(\"esri.layer.support.I3SGeometryCompressedAttributes\")],d);let c=class extends t{constructor(){super(...arguments),this.offset=0}};e([o({type:Number})],c.prototype,\"offset\",void 0),e([o({type:y})],c.prototype,\"position\",void 0),e([o({type:y})],c.prototype,\"normal\",void 0),e([o({type:y})],c.prototype,\"uv0\",void 0),e([o({type:y})],c.prototype,\"color\",void 0),e([o({type:y})],c.prototype,\"uvRegion\",void 0),e([o({type:y})],c.prototype,\"featureId\",void 0),e([o({type:y})],c.prototype,\"faceRange\",void 0),e([o({type:d})],c.prototype,\"compressedAttributes\",void 0),c=e([p(\"esri.layer.support.I3SGeometryBuffer\")],c);let m=class extends t{};e([r({triangle:\"triangle\"})],m.prototype,\"topology\",void 0),e([o()],m.prototype,\"geometryBuffers\",void 0),m=e([p(\"esri.layer.support.I3SGeometryDefinition\")],m);export{y as I3SGeometryAttribute,c as I3SGeometryBuffer,d as I3SGeometryCompressedAttributes,m as I3SGeometryDefinition,l as I3SMaterialDefinition,a as I3SMaterialPBRMetallicRoughness,i as I3SMaterialTexture,s as I3SNodePageDefinition,n as I3STextureFormat,u as I3STextureSetDefinition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as s}from\"../../../../core/maybe.js\";import{e as r}from\"../../../../chunks/mat4.js\";import{c as t}from\"../../../../chunks/mat4f64.js\";import{VisualElement as o}from\"./VisualElement.js\";import{Object3D as i}from\"../../webgl-engine/lib/Object3D.js\";import{WebGLLayer as a}from\"../../webgl-engine/lib/WebGLLayer.js\";class c extends o{constructor(e){super(e.view),this._resources=null,this._transform=t()}get object(){return e(this._resources)?this._resources.object:null}get transform(){return this._transform}set transform(s){r(this._transform,s),e(this._resources)&&(this._resources.object.transformation=this._transform)}recreate(){this.attached&&this.createResources()}recreateGeometry(){if(s(this._resources))return;const e=this._resources.object,r=this.view._stage;r.removeMany(e.geometries),e.removeAllGeometries(),this.createGeometries(e),this.visible||e.setVisible(this.visible),r.addMany(e.geometries)}createResources(){this.destroyResources();const e=this.view._stage;if(!e)return;const s=new a({isPickable:!1,updatePolicy:1});e.add(s);const r=new i({castShadow:!1});r.transformation=this._transform,this.createExternalResources(),this.createGeometries(r),e.addMany(r.geometries),this.forEachExternalMaterial((s=>e.add(s))),e.add(r),s.add(r),this.visible||r.setVisible(!1),this._resources={layer:s,object:r}}destroyResources(){const e=this.view._stage;!s(this._resources)&&e&&(e.remove(this._resources.object),e.remove(this._resources.layer),this.forEachExternalMaterial((s=>{e.remove(s),s.dispose()})),e.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}updateVisibility(e){s(this._resources)||this._resources.object.setVisible(e)}}export{c as Object3DVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../PopupTemplate.js\";import\"../../renderers/ClassBreaksRenderer.js\";import\"../../renderers/DictionaryRenderer.js\";import\"../../renderers/DotDensityRenderer.js\";import\"../../renderers/HeatmapRenderer.js\";import\"../../renderers/Renderer.js\";import\"../../renderers/SimpleRenderer.js\";import\"../../renderers/UniqueValueRenderer.js\";import\"../../renderers/support/jsonUtils.js\";import{webSceneRendererTypes as t}from\"../../renderers/support/types.js\";import o from\"../../request.js\";import s from\"../../core/Error.js\";import{JSONMap as i}from\"../../core/jsonMap.js\";import a from\"../../core/Loadable.js\";import p from\"../../core/Logger.js\";import{isSome as n,isNone as l}from\"../../core/maybe.js\";import{EsriPromiseMixin as d}from\"../../core/Promise.js\";import{property as y}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{enumeration as u}from\"../../core/accessorSupport/decorators/enumeration.js\";import{reader as c}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as m}from\"../../core/accessorSupport/decorators/subclass.js\";import h from\"../../geometry/Extent.js\";import f from\"../../geometry/SpatialReference.js\";import g from\"../FeatureLayer.js\";import j from\"./BuildingSublayer.js\";import{zeroCapabilities as v}from\"../support/capabilities.js\";import{popupEnabled as b}from\"../support/commonProperties.js\";import{defineFieldProperties as L}from\"../support/fieldProperties.js\";import F from\"../support/FieldsIndex.js\";import{fetchIndexInfo as S}from\"../support/I3SIndexInfo.js\";import{I3SNodePageDefinition as I,I3SMaterialDefinition as O,I3STextureSetDefinition as w,I3SGeometryDefinition as x}from\"../support/I3SLayerDefinitions.js\";import T from\"../../rest/support/Query.js\";import{createPopupTemplate as q}from\"../../support/popupUtils.js\";import P from\"../../symbols/support/ElevationInfo.js\";const D=p.getLogger(\"esri.layers.buildingSublayers.BuildingComponentSublayer\"),Q=L();let R=class extends(a.LoadableMixin(d(j))){constructor(e){super(e),this.type=\"building-component\",this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.fields=null,this.associatedLayer=null,this.outFields=null,this.listMode=\"show\",this.renderer=null,this.definitionExpression=null,this.popupEnabled=!0,this.popupTemplate=null,this.layerType=\"3d-object\"}get parsedUrl(){return this.layer?{path:`${this.layer.parsedUrl.path}/sublayers/${this.id}`,query:this.layer.parsedUrl.query}:null}get fieldsIndex(){return new F(this.fields)}readAssociatedLayer(e,r){const t=this.layer.associatedFeatureServiceItem,o=r.associatedLayerID;return n(t)&&\"number\"==typeof o?new g({portalItem:t,layerId:o}):null}get objectIdField(){if(null!=this.fields)for(const e of this.fields)if(\"oid\"===e.type)return e.name;return null}get displayField(){return n(this.associatedLayer)?this.associatedLayer.displayField:null}get defaultPopupTemplate(){return this.createPopupTemplate()}load(e){const r=n(e)?e.signal:null,t=this._fetchService(r).then((()=>{this.indexInfo=S(this.parsedUrl.path,this.rootNode,this.nodePages,this.apiKey,D,r)}));return this.addResolvingPromise(t),Promise.resolve(this)}createPopupTemplate(e){return q(this,e)}async _fetchService(e){const r=(await o(this.parsedUrl.path,{query:{f:\"json\",token:this.apiKey},responseType:\"json\",signal:e})).data;this.read(r,{origin:\"service\",url:this.parsedUrl})}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,r){var t,o,s,i;const a=null==(t=this.getFeatureType(null==r?void 0:r.feature))||null==(o=t.domains)?void 0:o[e];return a&&\"inherited\"!==a.type?a:null!=(s=null==(i=this.getField(e))?void 0:i.domain)?s:null}getFeatureType(e){return e&&n(this.associatedLayer)?this.associatedLayer.getFeatureType(e):null}get types(){return n(this.associatedLayer)?this.associatedLayer.types:[]}get typeIdField(){return n(this.associatedLayer)?this.associatedLayer.typeIdField:null}get geometryType(){return\"3d-object\"===this.layerType?\"mesh\":\"point\"}get profile(){return\"3d-object\"===this.layerType?\"mesh-pyramids\":\"points\"}get capabilities(){const e=n(this.associatedLayer)&&this.associatedLayer.capabilities?this.associatedLayer.capabilities:v,{query:r,data:{supportsZ:t,supportsM:o,isVersioned:s}}=e;return{query:r,data:{supportsZ:t,supportsM:o,isVersioned:s}}}createQuery(){const e=new T;return\"mesh\"!==this.geometryType&&(e.returnGeometry=!0,e.returnZ=!0),e.where=this.definitionExpression||\"1=1\",e.sqlFormat=\"standard\",e}queryExtent(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryExtent(e||this.createQuery(),r)))}queryFeatureCount(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryFeatureCount(e||this.createQuery(),r)))}queryFeatures(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryFeatures(e||this.createQuery(),r))).then((e=>{if(null!=e&&e.features)for(const r of e.features)r.layer=this.layer,r.sourceLayer=this;return e}))}queryObjectIds(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryObjectIds(e||this.createQuery(),r)))}getFieldUsageInfo(e){return this.fieldsIndex.has(e)?{supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1}:{supportsLabelingInfo:!1,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:n(this.associatedLayer)}}_getAssociatedLayerForQuery(){const e=this.associatedLayer;return n(e)&&e.loaded?Promise.resolve(e):this._loadAssociatedLayerForQuery()}async _loadAssociatedLayerForQuery(){if(await this.load(),l(this.associatedLayer))throw new s(\"buildingscenelayer:query-not-available\",\"BuildingSceneLayer component layer queries are not available without an associated feature layer\",{layer:this});try{await this.associatedLayer.load()}catch(e){throw new s(\"buildingscenelayer:query-not-available\",\"BuildingSceneLayer associated feature layer could not be loaded\",{layer:this,error:e})}return this.associatedLayer}};e([y({readOnly:!0})],R.prototype,\"parsedUrl\",null),e([y({type:I,readOnly:!0})],R.prototype,\"nodePages\",void 0),e([y({type:[O],readOnly:!0})],R.prototype,\"materialDefinitions\",void 0),e([y({type:[w],readOnly:!0})],R.prototype,\"textureSetDefinitions\",void 0),e([y({type:[x],readOnly:!0})],R.prototype,\"geometryDefinitions\",void 0),e([y({readOnly:!0})],R.prototype,\"serviceUpdateTimeStamp\",void 0),e([y({readOnly:!0})],R.prototype,\"store\",void 0),e([y({type:String,readOnly:!0,json:{read:{source:\"store.rootNode\"}}})],R.prototype,\"rootNode\",void 0),e([y({readOnly:!0})],R.prototype,\"attributeStorageInfo\",void 0),e([y(Q.fields)],R.prototype,\"fields\",void 0),e([y({readOnly:!0})],R.prototype,\"fieldsIndex\",null),e([y({readOnly:!0,type:g})],R.prototype,\"associatedLayer\",void 0),e([c(\"service\",\"associatedLayer\",[\"associatedLayerID\"])],R.prototype,\"readAssociatedLayer\",null),e([y(Q.outFields)],R.prototype,\"outFields\",void 0),e([y({type:String,readOnly:!0})],R.prototype,\"objectIdField\",null),e([y({readOnly:!0,type:String,json:{read:!1}})],R.prototype,\"displayField\",null),e([y({readOnly:!0,type:String,aliasOf:\"layer.apiKey\"})],R.prototype,\"apiKey\",void 0),e([y({readOnly:!0,type:h,aliasOf:\"layer.fullExtent\"})],R.prototype,\"fullExtent\",void 0),e([y({readOnly:!0,type:f,aliasOf:\"layer.spatialReference\"})],R.prototype,\"spatialReference\",void 0),e([y({readOnly:!0,aliasOf:\"layer.version\"})],R.prototype,\"version\",void 0),e([y({readOnly:!0,type:P,aliasOf:\"layer.elevationInfo\"})],R.prototype,\"elevationInfo\",void 0),e([y({readOnly:!0,type:Number,aliasOf:\"layer.minScale\"})],R.prototype,\"minScale\",void 0),e([y({readOnly:!0,type:Number,aliasOf:\"layer.maxScale\"})],R.prototype,\"maxScale\",void 0),e([y({type:[\"hide\",\"show\"],json:{write:!0}})],R.prototype,\"listMode\",void 0),e([y({types:t,json:{origins:{service:{read:{source:\"drawingInfo.renderer\"}}},name:\"layerDefinition.drawingInfo.renderer\",write:!0},value:null})],R.prototype,\"renderer\",void 0),e([y({type:String,json:{origins:{service:{read:!1,write:!1}},name:\"layerDefinition.definitionExpression\",write:{enabled:!0,allowNull:!0}}})],R.prototype,\"definitionExpression\",void 0),e([y(b)],R.prototype,\"popupEnabled\",void 0),e([y({type:r,json:{read:{source:\"popupInfo\"},write:{target:\"popupInfo\"}}})],R.prototype,\"popupTemplate\",void 0),e([y({readOnly:!0,type:String,json:{origins:{service:{read:{source:\"store.normalReferenceFrame\"}}},read:!1}})],R.prototype,\"normalReferenceFrame\",void 0),e([y({readOnly:!0,json:{read:!1}})],R.prototype,\"defaultPopupTemplate\",null),e([y()],R.prototype,\"types\",null),e([y()],R.prototype,\"typeIdField\",null),e([y({json:{write:!1}}),u(new i({\"3DObject\":\"3d-object\",Point:\"point\"}))],R.prototype,\"layerType\",void 0),e([y()],R.prototype,\"geometryType\",null),e([y()],R.prototype,\"profile\",null),e([y({readOnly:!0,json:{read:!1}})],R.prototype,\"capabilities\",null),R=e([m(\"esri.layers.buildingSublayers.BuildingComponentSublayer\")],R);var E=R;export{E as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{IdentifiableMixin as r}from\"../../core/Identifiable.js\";import{MultiOriginJSONSupport as o}from\"../../core/MultiOriginJSONSupport.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import{Integer as i}from\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{reader as s}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{readOnlyService as a}from\"../support/commonProperties.js\";let l=class extends(r(o)){constructor(e){super(e),this.title=\"\",this.id=-1,this.modelName=null,this.isEmpty=null,this.visible=!0,this.opacity=1}readTitle(e,r){return\"string\"==typeof r.alias?r.alias:\"string\"==typeof r.name?r.name:\"\"}readIdOnlyOnce(e){return-1!==this.id?this.id:\"number\"==typeof e?e:void 0}};e([t({type:String,json:{origins:{\"web-scene\":{write:!0},\"portal-item\":{write:!0}}}})],l.prototype,\"title\",void 0),e([s(\"service\",\"title\",[\"alias\",\"name\"])],l.prototype,\"readTitle\",null),e([t()],l.prototype,\"layer\",void 0),e([t({type:i,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],l.prototype,\"id\",void 0),e([s(\"service\",\"id\")],l.prototype,\"readIdOnlyOnce\",null),e([t(a(String))],l.prototype,\"modelName\",void 0),e([t(a(Boolean))],l.prototype,\"isEmpty\",void 0),e([t({type:Boolean,json:{name:\"visibility\",write:!0}})],l.prototype,\"visible\",void 0),e([t({type:Number,json:{write:!0}})],l.prototype,\"opacity\",void 0),l=e([p(\"esri.layers.buildingSublayers.BuildingSublayer\")],l);var n=l;export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nconst s={attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,tileMaxRecordCount:0}};export{s as zeroCapabilities};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import o from\"../../core/Error.js\";import{isSome as r}from\"../../core/maybe.js\";async function n(n,t,s,a,i,d){let l=null;if(r(s)){const o=`${n}/nodepages/`,t=o+Math.floor(s.rootIndex/s.nodesPerPage);try{return{type:\"page\",rootPage:(await e(t,{query:{f:\"json\",token:a},responseType:\"json\",signal:d})).data,rootIndex:s.rootIndex,pageSize:s.nodesPerPage,lodMetric:s.lodSelectionMetricType,urlPrefix:o}}catch(f){r(i)&&i.warn(\"#fetchIndexInfo()\",\"Failed to load root node page. Falling back to node documents.\",t,f),l=f}}if(!t)return null;const p=`${n}/nodes/`,c=p+(t&&t.split(\"/\").pop());try{return{type:\"node\",rootNode:(await e(c,{query:{f:\"json\",token:a},responseType:\"json\",signal:d})).data,urlPrefix:p}}catch(f){throw new o(\"sceneservice:root-node-missing\",\"Root node missing.\",{pageError:l,nodeError:f,url:c})}}export{n as fetchIndexInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nclass t{constructor(t){this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=t,this.view.watch(\"ready\",(t=>{this._resourcesCreated&&(t?this._createResources():this._destroyResources())}))}applyProps(t){let e=!1;for(const s in t)s in this?\"attached\"===s?e=t[s]:this[s]=t[s]:console.error(\"Cannot set unknown property\",s);this.attached=e}destroy(){this.attached=!1}get attached(){return this._attached}set attached(t){t!==this._attached&&this.view._stage&&(this._attached=t,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources())}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this.attached&&this.updateVisibility(t))}_createResources(){this.createResources(),this._resourcesCreated=!0,this.visible||this.updateVisibility(!1)}_destroyResources(){this.destroyResources(),this._resourcesCreated=!1}}export{t as VisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../core/maybe.js\";import{i as r,t as s}from\"../../../../chunks/mat4.js\";import{c as i}from\"../../../../chunks/mat4f64.js\";import{s as o}from\"../../../../chunks/vec3.js\";import{Z as n,c as h}from\"../../../../chunks/vec3f64.js\";import{g as l,c as a}from\"../../../../chunks/vec4.js\";import{f as p,c as d,a as f}from\"../../../../chunks/vec4f32.js\";import{Object3DVisualElement as _}from\"./Object3DVisualElement.js\";import{createGeometry as c}from\"../../layers/graphics/lineUtils.js\";import{RibbonLineMaterial as u}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";class m extends _{constructor(e){super(e),this._renderOccluded=4,this._width=1,this._color=p(1,0,1,1),this._innerWidth=1,this._innerColor=null,this._stipplePattern=null,this._stippleOffColor=null,this._stippleIntegerRepeats=!1,this._writeDepthEnabled=!0,this._falloff=0,this._polygonOffset=!1,this.applyProps(e)}setGeometryFromRenderSpacePoint(e){const t=1e3,r=[];r.push([[e[0]-t,e[1]+0,e[2]+0],[e[0]+t,e[1]+0,e[2]+0]]),r.push([[e[0]-0,e[1]-t,e[2]+0],[e[0]+0,e[1]+t,e[2]+0]]),r.push([[e[0]-0,e[1]+0,e[2]-t],[e[0]+0,e[1]+0,e[2]+t]]),this.geometry=r}setGeometryFromExtent(e){const t=this.view.spatialReference,r=h(),s=h(),i=100,n=[];o(r,e[0],e[1],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[2],e[1],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[2],e[3],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[0],e[3],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[0],e[1],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[0],e[1],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),this.geometry=[n]}setGeometryFromFrustum(e){const t=[];e.lines.forEach((e=>{t.push([e.origin[0],e.origin[1],e.origin[2]]),t.push([e.endpoint[0],e.endpoint[1],e.endpoint[2]])})),this.geometry=[t]}setGeometryFromBoundedPlane(e){const t=[],r=e.origin,s=e.basis1,i=e.basis2,o=.5,n=h(),l=h(),a=h(),p=h();n[0]=r[0]-s[0]*o-i[0]*o,n[1]=r[1]-s[1]*o-i[1]*o,n[2]=r[2]-s[2]*o-i[2]*o,l[0]=r[0]-s[0]*o+i[0]*o,l[1]=r[1]-s[1]*o+i[1]*o,l[2]=r[2]-s[2]*o+i[2]*o,a[0]=r[0]+s[0]*o+i[0]*o,a[1]=r[1]+s[1]*o+i[1]*o,a[2]=r[2]+s[2]*o+i[2]*o,p[0]=r[0]+s[0]*o-i[0]*o,p[1]=r[1]+s[1]*o-i[1]*o,p[2]=r[2]+s[2]*o-i[2]*o,t.push([n[0],n[1],n[2]]),t.push([l[0],l[1],l[2]]),t.push([a[0],a[1],a[2]]),t.push([p[0],p[1],p[2]]),t.push([n[0],n[1],n[2]]),this.geometry=[t]}setGeometryFromSegment(e){const t=e.endRenderSpace;r(g),s(g,g,t),this.transform=g;const{points:i}=e.createRenderGeometry(t,this.view.renderCoordsHelper);this.geometry=[i]}setGeometryFromSegments(e,t=n){r(g),s(g,g,t),this.transform=g,this.geometry=e.map((e=>e.createRenderGeometry(t,this.view.renderCoordsHelper).points))}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){l(e,this._color)||(a(this._color,e),this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(r){e(r)?!t(this._innerColor)&&l(r,this._innerColor)||(this._innerColor=a(d(),r),this._updateMaterial()):e(this._innerColor)&&(this._innerColor=null,this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(t){const r=e(t)!==e(this._stipplePattern);this._stipplePattern=t,r?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(r){(t(r)||t(this._stippleOffColor)||!l(r,this._stippleOffColor))&&(this._stippleOffColor=e(r)?f(r):null,this._updateMaterial())}get stippleIntegerRepeats(){return this._stippleIntegerRepeats}set stippleIntegerRepeats(e){this._stippleIntegerRepeats!==e&&(this._stippleIntegerRepeats=e,this._updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){e!==this._polygonOffset&&(this._polygonOffset=e,this._updateMaterial())}createExternalResources(){this._material=new u(this.materialParameters)}destroyExternalResources(){this._material=null}createGeometries(e){const t=this._createLineGeometries();if(0!==t.length)for(let r=0;r<t.length;++r){const s=c(t[r]);e.addGeometry(s,this._material)}}forEachExternalMaterial(e){e(this._material)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,isClosed:!1,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,stippleIntegerRepeats:this._stippleIntegerRepeats,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}_updateMaterial(){this.attached&&this._material.setParameterValues(this.materialParameters)}_createLineGeometries(){const e=this.geometry;if(t(e)||0===e.length)return[];const r=[];return e.forEach((e=>{const t=e.length,s=new Float64Array(3*t);e.forEach(((e,t)=>{s[3*t+0]=e[0],s[3*t+1]=e[1],s[3*t+2]=e[2]}));const i={attributeData:{position:s},removeDuplicateStartEnd:0};r.push(i)})),r}}const g=i();export{m as LineVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{Slice as e}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ReadLinearDepth as a}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{multipassTerrainTest as o}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{defaultMaskAlphaCutoff as i}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{ColorConversion as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{glsl as t}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as l}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function s(s){const n=new l;return n.include(r,{linearDepth:!1}),n.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),n.attributes.add(\"position\",\"vec3\"),n.attributes.add(\"uv0\",\"vec2\"),n.varyings.add(\"vpos\",\"vec3\"),s.multipassTerrainEnabled&&n.varyings.add(\"depth\",\"float\"),n.vertex.uniforms.add(\"textureCoordinateScaleFactor\",\"vec2\"),n.vertex.code.add(t`\n    void main(void) {\n      vpos = position;\n      ${s.multipassTerrainEnabled?\"depth = (view * vec4(vpos, 1.0)).z;\":\"\"}\n      vTexCoord = uv0 * textureCoordinateScaleFactor;\n      gl_Position = transformPosition(proj, view, vpos);\n    }\n  `),n.include(e,s),s.multipassTerrainEnabled&&(n.fragment.include(a),n.include(o,s)),n.fragment.uniforms.add(\"tex\",\"sampler2D\"),n.fragment.uniforms.add(\"opacity\",\"float\"),n.varyings.add(\"vTexCoord\",\"vec2\"),7===s.output?n.fragment.code.add(t`\n    void main() {\n      discardBySlice(vpos);\n      ${s.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n\n      float alpha = texture2D(tex, vTexCoord).a * opacity;\n      if (alpha  < ${t.float(i)}) {\n        discard;\n      }\n\n      gl_FragColor = vec4(alpha);\n    }\n    `):(n.fragment.include(d),n.fragment.code.add(t`\n    void main() {\n      discardBySlice(vpos);\n      ${s.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n      gl_FragColor = texture2D(tex, vTexCoord) * opacity;\n\n      if (gl_FragColor.a < ${t.float(i)}) {\n        discard;\n      }\n\n      gl_FragColor = highlightSlice(gl_FragColor, vpos);\n      ${s.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n    }\n    `)),n}var n=Object.freeze({__proto__:null,build:s});export{n as I,s as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../shaderModules/interfaces.js\";function i(i){i.vertex.uniforms.add(\"camPos\",\"vec3\").add(\"perScreenPixelRatio\",\"float\").add(\"screenSize\",\"float\"),i.vertex.code.add(e`float computeRenderPixelSizeAt( vec3 pWorld ){\nvec3 viewForward = - vec3(view[0][2], view[1][2], view[2][2]);\nfloat viewDirectionDistance = abs(dot(viewForward, pWorld - camPos));\nreturn viewDirectionDistance*perScreenPixelRatio;\n}\nvec3 screenSizeScaling(vec3 position, vec3 anchor){\nreturn position * screenSize * computeRenderPixelSizeAt(anchor) + anchor;\n}`)}function r(e,i,r){e.setUniform1f(\"perScreenPixelRatio\",r.camera.perScreenPixelRatio),e.setUniform1f(\"screenSize\",i.screenSize)}export{i as ScreenSizeScaling,r as bindScreenSizeScalingUniforms};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{ScreenSizeScaling as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js\";import{Slice as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ReadLinearDepth as i}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{multipassTerrainTest as a}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{symbolAlphaCutoff as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{ColorConversion as l}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{glsl as n}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as s}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function t(t){const c=new s;return c.include(o,{linearDepth:!1}),c.include(e,{}),c.include(r,t),c.fragment.include(l),c.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),c.fragment.uniforms.add(\"color\",\"vec4\"),c.attributes.add(\"position\",\"vec3\"),c.varyings.add(\"vWorldPosition\",\"vec3\"),t.multipassTerrainEnabled&&c.varyings.add(\"depth\",\"float\"),t.screenSizeEnabled&&c.attributes.add(\"offset\",\"vec3\"),t.shadingEnabled&&(c.vertex.uniforms.add(\"viewNormal\",\"mat4\"),c.fragment.uniforms.add(\"shadedColor\",\"vec4\").add(\"shadingDirection\",\"vec3\"),c.attributes.add(\"normal\",\"vec3\"),c.varyings.add(\"vViewNormal\",\"vec3\")),c.vertex.code.add(n`\n    void main(void) {\n      vWorldPosition = ${t.screenSizeEnabled?\"screenSizeScaling(offset, position)\":\"position\"};\n  `),t.shadingEnabled&&c.vertex.code.add(n`vec3 worldNormal = normal;\nvViewNormal = (viewNormal * vec4(worldNormal, 1)).xyz;`),c.vertex.code.add(n`\n    ${t.multipassTerrainEnabled?\"depth = (view * vec4(vWorldPosition, 1.0)).z;\":\"\"}\n    gl_Position = transformPosition(proj, view, vWorldPosition);\n  }\n  `),t.multipassTerrainEnabled&&(c.fragment.include(i),c.include(a,t)),c.fragment.code.add(n`\n    void main() {\n      discardBySlice(vWorldPosition);\n      ${t.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n    `),t.shadingEnabled?c.fragment.code.add(n`vec3 viewNormalNorm = normalize(vViewNormal);\nfloat shadingFactor = 1.0 - clamp(-dot(viewNormalNorm, shadingDirection), 0.0, 1.0);\nvec4 finalColor = mix(color, shadedColor, shadingFactor);`):c.fragment.code.add(n`vec4 finalColor = color;`),c.fragment.code.add(n`\n      if (finalColor.a < ${n.float(d)}) {\n        discard;\n      }\n      ${7===t.output?n`gl_FragColor = vec4(finalColor.a);`:\"\"}\n\n      ${0===t.output?n`gl_FragColor = highlightSlice(finalColor, vWorldPosition); ${t.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}`:\"\"}\n    }\n    `),c}var c=Object.freeze({__proto__:null,build:t});export{c as S,t as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as d}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as e}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function r(){const r=new e;return r.extensions.add(\"GL_OES_standard_derivatives\"),r.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),r.attributes.add(\"position\",\"vec3\"),r.attributes.add(\"uv0\",\"vec2\"),r.varyings.add(\"vUV\",\"vec2\"),r.vertex.code.add(d`void main(void) {\nvUV = uv0;\ngl_Position = proj * view * vec4(position, 1.0);\n}`),r.fragment.uniforms.add(\"backgroundColor\",\"vec4\").add(\"gridColor\",\"vec4\").add(\"ratio\",\"float\").add(\"gridWidth\",\"float\"),r.fragment.code.add(d`void main() {\nconst float LINE_WIDTH = 1.0;\nvec2 uvScaled = vUV * gridWidth;\nvec2 gridUV = (fract(uvScaled + 0.5) - 0.5) / (LINE_WIDTH * fwidth(uvScaled));\nvec2 grid = (1.0 - step(0.5, gridUV)) * step(-0.5, gridUV);\ngrid.x *= step(0.5, uvScaled.x) * step(uvScaled.x, gridWidth - 0.5);\ngrid.y *= step(0.5, uvScaled.y) * step(uvScaled.y, gridWidth - 0.5);\nfloat gridFade = max(grid.x, grid.y);\nfloat gridAlpha = gridColor.a * gridFade;\ngl_FragColor =\nvec4(backgroundColor.rgb * backgroundColor.a, backgroundColor.a) * (1.0 - gridAlpha) +\nvec4(gridColor.rgb, 1.0) * gridAlpha;\n}`),r}var a=Object.freeze({__proto__:null,build:r});export{a as S,r as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{bindSliceUniformsWithOrigin as t}from\"../core/shaderLibrary/Slice.glsl.js\";import{bindMultipassTerrainTexture as r}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindProjectionMatrix as i,bindView as s}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as a}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as o}from\"../core/shaderTechnique/ShaderTechnique.js\";import{parameter as n,ShaderTechniqueConfiguration as l}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as p}from\"../lib/DefaultVertexAttributeLocations.js\";import{OITBlending as c,OITDepthTest as u,OITDepthWrite as d,getOITPolygonOffset as h}from\"../lib/OrderIndependentTransparency.js\";import{Program as m}from\"../lib/Program.js\";import{stencilWriteMaskOn as b,stencilToolMaskBaseParams as f,stencilBaseAllZerosParams as g}from\"../lib/StencilUtils.js\";import{I as y}from\"../../../../chunks/ImageMaterial.glsl.js\";import{simpleBlendingParams as T,makePipelineState as P,cullingParams as v,defaultDepthWriteParams as j,defaultColorWriteParams as S}from\"../../../webgl/renderState.js\";class E extends o{initializeProgram(e){const t=E.shader.get(),r=this.configuration,i=t.build({output:r.output,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,OITEnabled:0===r.transparencyPassType,multipassTerrainEnabled:r.multipassTerrainEnabled,cullAboveGround:r.cullAboveGround});return new m(e.rctx,i,p)}bindPass(e,t){i(this.program,t.camera.projectionMatrix),this.program.setUniform1f(\"opacity\",e.opacity),t.multipassTerrainEnabled&&(this.program.setUniform2fv(\"cameraNearFar\",t.camera.nearFar),this.program.setUniform2fv(\"inverseViewport\",t.inverseViewport),r(this.program,t))}bindDraw(e){s(this.program,e),t(this.program,this.configuration,e),this.program.rebindTextures()}setPipelineState(e,t){const r=this.configuration,i=3===e,s=2===e;return P({blending:0!==r.output&&7!==r.output||!r.transparent?null:i?w:c(e),culling:v(r.cullFace),depthTest:{func:u(e)},depthWrite:i?r.writeDepth&&j:d(e),colorWrite:S,stencilWrite:r.sceneHasOcludees?b:null,stencilTest:r.sceneHasOcludees?t?f:g:null,polygonOffset:i||s?null:h(r.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0),this.setPipelineState(this.configuration.transparencyPassType,!1)}getPipelineState(e){return e?this._occludeePipelineState:this.pipeline}}E.shader=new a(y,(()=>import(\"./ImageMaterial.glsl.js\")));const w=T(1,771);class O extends l{constructor(){super(...arguments),this.output=0,this.cullFace=0,this.slicePlaneEnabled=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!0,this.sceneHasOcludees=!1,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}e([n({count:8})],O.prototype,\"output\",void 0),e([n({count:3})],O.prototype,\"cullFace\",void 0),e([n()],O.prototype,\"slicePlaneEnabled\",void 0),e([n()],O.prototype,\"transparent\",void 0),e([n()],O.prototype,\"enableOffset\",void 0),e([n()],O.prototype,\"writeDepth\",void 0),e([n()],O.prototype,\"sceneHasOcludees\",void 0),e([n({count:4})],O.prototype,\"transparencyPassType\",void 0),e([n()],O.prototype,\"multipassTerrainEnabled\",void 0),e([n()],O.prototype,\"cullAboveGround\",void 0);export{E as ImageMaterialTechnique,O as ImageMaterialTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../lib/GLMaterialTexture.js\";import{Material as t,materialParametersDefaults as i}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as s}from\"../lib/OrderIndependentTransparency.js\";import{DefaultBufferWriter as a,PositionUVLayout as r}from\"./internal/DefaultBufferWriter.js\";import{intersectTriangleGeometry as n}from\"./internal/MaterialUtil.js\";import{ImageMaterialTechniqueConfiguration as u,ImageMaterialTechnique as h}from\"../shaders/ImageMaterialTechnique.js\";class c extends t{constructor(e){super(e,p),this.supportsEdges=!0,this.techniqueConfig=new u}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.params.cullFace,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.enableOffset=!t||t.camera.relativeElevation<s,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!!t&&t.cullAboveGround,this.techniqueConfig}intersect(e,t,i,s,a,r,u){n(e,t,s,a,r,void 0,u)}getGLMaterial(e){return 0===e.output||7===e.output||4===e.output?new l(e):void 0}createBufferWriter(){return new a(r)}}class l extends e{constructor(e){super({...e,...e.material.params}),this.updateParameters()}updateParameters(e){const t=this._material.params;this.updateTexture(t.textureId),this._technique=this._techniqueRep.releaseAndAcquire(h,this._material.getTechniqueConfig(this._output,e),this._technique)}beginSlot(e){if(23===e)return!0;if(4===this._output)return 3===e;return e===(this._technique.configuration.transparent?this._technique.configuration.writeDepth?5:8:3)}_updateOccludeeState(e){e.hasOccludees!==this._material.params.sceneHasOcludees&&(this._material.setParameterValues({sceneHasOcludees:e.hasOccludees}),this.updateParameters(e))}ensureParameters(e){0!==this._output&&7!==this._output||this._updateOccludeeState(e),this.updateParameters(e)}bind(e){this.bindTextures(this._technique.program),this.bindTextureScale(this._technique.program),this._technique.bindPass(this._material.params,e)}getPipelineState(e,t){return this._technique.getPipelineState(t)}}const p={transparent:!1,writeDepth:!0,slicePlaneEnabled:!1,cullFace:0,sceneHasOcludees:!1,opacity:1,textureId:null,initTextureTransparent:!0,...i};export{c as ImageMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../../geometry.js\";import{neverReached as e}from\"../../../core/compilerUtils.js\";import t from\"../../../core/Evented.js\";import{deg2rad as i}from\"../../../core/mathUtils.js\";import{isSome as s,isNone as o,unwrapOr as r,unwrap as n}from\"../../../core/maybe.js\";import{createScreenPointArray as a,createRenderScreenPointArray3 as c,screenPointObjectToArray as l,castRenderScreenPointArray as h}from\"../../../core/screenUtils.js\";import{once as d}from\"../../../core/accessorSupport/utils.js\";import{f as u}from\"../../../chunks/mat3.js\";import{c as _}from\"../../../chunks/mat3f64.js\";import{e as g,s as m,m as f,i as p}from\"../../../chunks/mat4.js\";import{c as v}from\"../../../chunks/mat4f64.js\";import{j as b}from\"../../../chunks/vec2.js\";import{b as y,t as j,m as L,a as S,g as R,h as w,s as O,f as T}from\"../../../chunks/vec3.js\";import{c as E,Z as A}from\"../../../chunks/vec3f64.js\";import{canProjectWithoutEngine as D,projectPoint as F,sphericalPCPFtoLonLatElevation as z,computeENUToSphericalPCPFLocalRotation as k}from\"../../../geometry/projection.js\";import{getReferenceEllipsoid as P}from\"../../../geometry/projectionEllipsoid.js\";import{containsPointObject as I}from\"../../../geometry/support/aaBoundingRect.js\";import{create as M,distance2 as C,fromPoints as x,closestRayDistance2 as B}from\"../../../geometry/support/lineSegment.js\";import{create as W,fromPositionAndNormal as V,intersectRay as H}from\"../../../geometry/support/plane.js\";import{create as U}from\"../../../geometry/support/ray.js\";import{sv3d as G}from\"../../../geometry/support/vectorStacks.js\";import{clonePoint as Z}from\"../../../layers/graphics/hydratedFeatures.js\";import{getElevationAtPoint as q}from\"../support/ElevationProvider.js\";import{fromScreen as J}from\"../support/geometryUtils/ray.js\";import K from\"../webgl-engine/lib/Camera.js\";import{Object3D as N}from\"../webgl-engine/lib/Object3D.js\";import{WebGLLayer as Q}from\"../webgl-engine/lib/WebGLLayer.js\";import X from\"../../../geometry/Point.js\";class Y{constructor(e){this.idHint=0,this.camera=new K,this._elevation={offset:0,override:null},this.collisionType={type:\"point\"},this.collisionPriority=0,this._renderObjects=[],this.autoScaleRenderObjects=!0,this._available=!0,this._noDisplayCount=0,this._radius=10,this._worldSized=!1,this.focusMultiplier=2,this.touchMultiplier=2.5,this.worldOriented=!1,this._modelTransform=v(),this._worldFrame=null,this._renderLocation=E(),this._renderLocationDirty=!0,this._location=new X({x:0,y:0,z:0}),this._elevationAlignedLocation=new X,this._elevationAlignedLocationDirty=!0,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.cursor=null,this._grabbing=!1,this.dragging=!1,this._hovering=!1,this._selected=!1,this._state=0,this._focused=!1,this.events=new t.EventEmitter,this._screenLocation={screenPointArray:a(),renderScreenPointArray:c(),pixelSize:0},this._screenLocationDirty=!0,this._applyObjectTransform=null,this._engineResourcesAddedToStage=!1,this._engineResources=null,this._attached=!1,this._engineLayer=null,this._materialIdReferences=null,this._location.spatialReference=e.view.spatialReference;for(const t in e)this[t]=e[t];this.view.state&&this.view.state.camera&&this.camera.copyFrom(this.view.state.camera)}destroy(){this._removeResourcesFromStage(),this._engineResources=null,this.view=null,this.camera=null}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this._elevationAlignedLocationDirty=!0,this._renderLocationDirty=!0,this._updateEngineObject()}get renderObjects(){return this._renderObjects}set renderObjects(e){this._removeResourcesFromStage(),this._engineResources=null,this._renderObjects=e.slice(),this._updateEngineObject()}set available(e){e!==this._available&&(this._available=e,this._updateEngineObject())}get available(){return this._available}disableDisplay(){return this._noDisplayCount++,1===this._noDisplayCount&&this._updateEngineObject(),{remove:d((()=>{this._noDisplayCount--,0===this._noDisplayCount&&this._updateEngineObject()}))}}set radius(e){e!==this._radius&&(this._radius=e,this._updateEngineObject())}get radius(){return this._radius}set worldSized(e){e!==this._worldSized&&(this._worldSized=e,this._updateEngineObject())}get worldSized(){return this._worldSized}get modelTransform(){return this._modelTransform}set modelTransform(e){$(e)&&(this._screenLocationDirty=!0),g(this._modelTransform,e),this._updateEngineObject()}get renderLocation(){return this._renderLocationDirty&&(this._renderLocationDirty=!1,this.view.renderCoordsHelper.toRenderCoords(this.elevationAlignedLocation,this._renderLocation),this.worldOriented?(this._worldFrame||(this._worldFrame=v()),ee(this.view,this._renderLocation,this._worldFrame)):this._worldFrame&&(this._worldFrame=null)),this._renderLocation}set renderLocation(e){this.view.renderCoordsHelper.fromRenderCoords(e,this._location),this.elevationAlignedLocation=this._location}get location(){return this._location}set location(e){Z(e,this._location),this._renderLocationDirty=!0,this._screenLocationDirty=!0,this._elevationAlignedLocationDirty=!0,this._updateEngineObject(),this.events.emit(\"location-update\",{location:this._location})}get elevationAlignedLocation(){return this._elevationAlignedLocationDirty?(this._evaluateElevationAlignment(),this._updateElevationAlignedLocation(),this._elevationAlignedLocation):this._elevationAlignedLocation}set elevationAlignedLocation(e){Z(e,this._location),this._evaluateElevationAlignment(),this._location.z-=this._elevation.offset,this._updateElevationAlignedLocation(),this._updateEngineObject(),this.events.emit(\"location-update\",{location:this._location})}_updateElevationAlignedLocation(){this._elevationAlignedLocation.x=this.location.x,this._elevationAlignedLocation.y=this.location.y;const e=s(this._elevation.override)?this._elevation.override:this.location.z||0;this._elevationAlignedLocation.z=e+this._elevation.offset,this._elevationAlignedLocation.spatialReference=this.location.spatialReference,this._renderLocationDirty=!0,this._screenLocationDirty=!0,this._elevationAlignedLocationDirty=!1}grabbableForEvent(){return!0}get grabbing(){return this._grabbing}set grabbing(e){e!==this._grabbing&&(this._grabbing=e,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}get hovering(){return this._hovering}set hovering(e){e!==this._hovering&&(this._hovering=e,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}get selected(){return this._selected}set selected(e){e!==this._selected&&(this._selected=e,this._updateEngineObject(),this.events.emit(\"select-changed\",{action:e?\"select\":\"deselect\"}))}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,this._updateEngineObject())}updateStateEnabled(e,t){t?this.state|=e:this.state&=~e}_setFocused(e){e!==this._focused&&(this._focused=e,this.events.emit(\"focus-changed\",{action:!0===e?\"focus\":\"unfocus\"}))}get focused(){return this._focused}get screenLocation(){return this.ensureScreenLocation(),this._screenLocation}ensureScreenLocation(){if(!this._screenLocationDirty)return;this._screenLocation.pixelSize=this.camera.computeScreenPixelSizeAt(this.renderLocation),this._screenLocationDirty=!1;let e;if($(this._modelTransform)){const t=this._calculateModelTransformOffset(_e);e=y(t,t,this.renderLocation)}else e=this.renderLocation;this.camera.projectToRenderScreen(e,this._screenLocation.renderScreenPointArray),this.camera.renderToScreen(this._screenLocation.renderScreenPointArray,this._screenLocation.screenPointArray)}get applyObjectTransform(){return this._applyObjectTransform}set applyObjectTransform(e){this._applyObjectTransform=e,this._screenLocationDirty=!0,this._updateEngineObject()}intersectionDistance(t,i){if(!this.available)return null;const s=l(t,te),r=this._getCollisionRadius(i),n=-1*this.collisionPriority;switch(this.collisionType.type){case\"point\":if(b(this.screenLocation.screenPointArray,s)<r*r)return this.screenLocation.renderScreenPointArray[2]+n;break;case\"line\":{const e=this.collisionType.paths,t=this._getWorldToScreenObjectScale(),i=this._calculateObjectTransform(t,ne),a=r*this.screenLocation.pixelSize,c=J(this.camera,s,se);if(o(c))return null;for(const s of e){if(0===s.length)continue;const e=L(ce,s[0],i);for(let t=1;t<s.length;t++){const o=L(le,s[t],i),r=B(x(e,o,ie),c);if(null!=r&&r<a*a){const t=y(G.get(),e,o);S(t,t,.5);const i=h(G.get());return this.camera.projectToRenderScreen(t,i),i[2]+n}R(e,o)}}break}case\"disc\":{var a;const e=this.collisionType.direction,t=null!=(a=this.collisionType.offset)?a:A,i=this._getWorldToScreenObjectScale(),c=this._calculateObjectTransform(i,ne),l=r*this.screenLocation.pixelSize,h=J(this.camera,s,se);if(o(h))return null;const d=u(oe,c),_=j(de,e,d),g=L(ue,t,c);V(g,_,ae);const m=he;if(H(ae,h,m)&&w(m,g)<l*l)return this.screenLocation.renderScreenPointArray[2]+n;break}case\"ribbon\":{const{paths:e,direction:t}=this.collisionType,i=this._getWorldToScreenObjectScale(),a=this._calculateObjectTransform(i,ne),c=r*this.camera.computeScreenPixelSizeAt(this.renderLocation),l=J(this.camera,s,se);if(o(l))return null;const d=u(oe,a),_=j(de,t,d),g=this._calculateModelTransformPosition(ue);V(g,_,ae);const m=he;if(!H(ae,l,m))break;for(const s of e){if(0===s.length)continue;const e=L(ce,s[0],a);for(let t=1;t<s.length;t++){const i=L(le,s[t],a),o=C(x(e,i,ie),m);if(null!=o&&o<c*c){const t=y(G.get(),e,i);S(t,t,.5);const s=h(G.get());return this.camera.projectToRenderScreen(t,s),s[2]+n}R(e,i)}}break}default:e(this.collisionType)}return null}attach(e={manipulator3D:{}}){var t;if(!this.view._stage)return;const i=e.manipulator3D;if(o(i.engineLayerId)){const e=new Q({isPickable:!1,updatePolicy:1});this.view._stage.add(e),i.engineLayerId=e.id,this._engineLayer=e}else null!=(t=this.view._stage)&&t.getObject&&(this._engineLayer=this.view._stage.getObject(i.engineLayerId));i.engineLayerReferences=(i.engineLayerReferences||0)+1,this._materialIdReferences=i.materialIdReferences,o(this._materialIdReferences)&&(this._materialIdReferences=new Map,i.materialIdReferences=this._materialIdReferences),this.camera.copyFrom(this.view.state.camera),this._attached=!0,this._updateEngineObject(),D(this._location.spatialReference,this.view.spatialReference)||(this.location=new X({x:0,y:0,z:0,spatialReference:this.view.spatialReference}))}detach(e={manipulator3D:{}}){const t=e.manipulator3D;t.engineLayerReferences--;const i=0===t.engineLayerReferences;i&&(t.engineLayerId=null),this._removeResourcesFromStage(i),this._engineResources=null,this._engineLayer=null,this._materialIdReferences=null,this._attached=!1}onViewChange(){this.camera.copyFrom(this.view.state.camera),this._screenLocationDirty=!0,this._updateEngineObject()}onElevationChange(e){F(this.location,ge,e.spatialReference),I(e.extent,ge)&&(this.location=this._location)}_evaluateElevationAlignment(e=this.location){if(o(this.elevationInfo))return!1;let t=null,i=0;const s=r(this.elevationInfo.offset,0);switch(this.elevationInfo.mode){case\"on-the-ground\":t=r(q(this.view.elevationProvider,e,\"ground\"),0);break;case\"relative-to-ground\":i=r(q(this.view.elevationProvider,e,\"ground\"),0)+s;break;case\"relative-to-scene\":i=r(q(this.view.elevationProvider,e,\"scene\"),0)+s;break;case\"absolute-height\":i=s}return(i!==this._elevation.offset||t!==this._elevation.override)&&(this._elevation.offset=i,this._elevation.override=t,!0)}_updateEngineObject(){if(!this._attached)return;if(!this.available)return void this._removeResourcesFromStage();const e=this._getWorldToScreenObjectScale(),t=ne;if(!0===this.autoScaleRenderObjects){const i=this._getFocusedSize(this._radius,this.focused)*e;this._calculateObjectTransform(i,t)}else this._calculateObjectTransform(e,t);const{objectsByState:i}=this._ensureEngineResources(),s=(this.focused?2:1)|(this.selected?8:4),o=this._noDisplayCount>0;for(const{stateMask:r,objects:n}of i){if(o){for(const e of n)e.setVisible(!1);continue}const e=!(0!=(15&r))||(s&r)==(15&r),i=!(0!=(65520&r))||(this.state&r)==(65520&r);if(e&&i)for(const s of n)s.setVisible(!0),s.transformation=t;else for(const t of n)t.setVisible(!1)}}_ensureEngineResources(){if(o(this._engineResources)){const e=n(this._engineLayer),t=[],i=new Set;this.renderObjects.forEach((({material:e})=>{i.has(e)||(t.push(e),i.add(e))}));const s=(e,t)=>{const{geometry:i,material:s,transform:o}=t;Array.isArray(i)?i.forEach((t=>e.addGeometry(t,s,o))):e.addGeometry(i,s,o)},o=new Map;this._renderObjects.forEach((e=>{const t=new N({castShadow:!1});s(t,e);const i=e.stateMask||0,r=o.get(i)||[];r.push(t),o.set(i,r)}));const r=[];o.forEach(((e,t)=>r.push({stateMask:t,objects:e}))),this._engineResources={objectsByState:r,layer:e,materials:t}}return this._addResourcesToStage(),this._engineResources}_addResourcesToStage(){if(this._engineResourcesAddedToStage||o(this._engineResources))return;const{objectsByState:e,layer:t,materials:i}=this._engineResources;i.forEach((e=>{const t=n(this._materialIdReferences),i=t.get(e.id)||0;0===i&&this.view._stage.add(e),t.set(e.id,i+1)})),e.forEach((({objects:e})=>{t.addMany(e),this.view._stage.addMany(e)})),this._engineResourcesAddedToStage=!0}_removeResourcesFromStage(e=!1){if(!this._engineResourcesAddedToStage||o(this._engineResources))return;const{objectsByState:t,layer:i,materials:s}=this._engineResources;t.forEach((({objects:e})=>{i.removeMany(e),this.view._stage.removeMany(e)})),s.forEach((e=>{const t=n(this._materialIdReferences),i=t.get(e.id);1===i?(this.view._stage.remove(e),t.delete(e.id)):t.set(e.id,i-1)})),e&&this.view._stage.remove(i),this._engineResourcesAddedToStage=!1}_getCollisionRadius(e){return this._getFocusedSize(this.radius,!0)*(\"touch\"===e?this.touchMultiplier:1)}_getFocusedSize(e,t){return e*(t?this.focusMultiplier:1)}_getWorldToScreenObjectScale(){return this._worldSized?1:this.screenLocation.pixelSize}_calculateModelTransformPosition(e){const t=this._getWorldToScreenObjectScale(),i=this._calculateObjectTransform(t,re);return O(e,i[12],i[13],i[14])}_calculateModelTransformOffset(e){const t=this._calculateModelTransformPosition(e);return T(e,t,this.renderLocation)}_calculateObjectTransform(e,t){return m(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1),this._worldFrame&&f(t,t,this._worldFrame),f(t,t,this._modelTransform),t[12]+=this.renderLocation[0],t[13]+=this.renderLocation[1],t[14]+=this.renderLocation[2],t[15]=1,s(this._applyObjectTransform)&&this._applyObjectTransform(t),t}get test(){let e=!1;if(s(this._engineResources))for(const t in this._engineResources.objectsByState){const i=this._engineResources.objectsByState[t];for(const t of i.objects)if(t.isVisible){e=!0;break}if(e)break}return{areAnyResourcesVisible:e}}}function $(e){return 0!==e[12]||0!==e[13]||0!==e[14]}function ee(e,t,s){switch(e.viewingMode){case\"local\":return p(s),!0;case\"global\":{const o=P(e.renderCoordsHelper.spatialReference);return z(t,0,ce,0,o.radius),k(i(ce[0]),i(ce[1]),s),!0}}}const te=a(),ie=M(),se=U(),oe=_(),re=v(),ne=v(),ae=W(),ce=E(),le=E(),he=E(),de=E(),ue=E(),_e=E(),ge=new X({x:0,y:0,z:0,spatialReference:null});export{Y as Manipulator3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{c as r}from\"../../../../chunks/vec4f64.js\";import{bindScreenSizeScalingUniforms as i}from\"../core/shaderLibrary/ScreenSizeScaling.glsl.js\";import{bindSliceUniformsWithOrigin as t}from\"../core/shaderLibrary/Slice.glsl.js\";import{bindMultipassTerrainTexture as o}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindProjectionMatrix as s,bindView as a,bindCameraPosition as n}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as l}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as p}from\"../core/shaderTechnique/ShaderTechnique.js\";import{parameter as d,ShaderTechniqueConfiguration as c}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{blendingDefault as h,OITBlending as m,OITDepthWrite as u,OITPolygonOffset as g}from\"../lib/OrderIndependentTransparency.js\";import{Program as b}from\"../lib/Program.js\";import{S as f}from\"../../../../chunks/ShadedColorMaterial.glsl.js\";import{makePipelineState as v,cullingParams as y,defaultDepthWriteParams as T,defaultColorWriteParams as E}from\"../../../webgl/renderState.js\";class S extends p{initializeProgram(e){const r=S.shader.get(),i=this.configuration,t=r.build({output:i.output,slicePlaneEnabled:i.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,screenSizeEnabled:i.screenSizeEnabled,shadingEnabled:i.shadingEnabled,OITEnabled:0===i.transparencyPassType,multipassTerrainEnabled:i.multipassTerrainEnabled,cullAboveGround:i.cullAboveGround});return new b(e.rctx,t,P)}bindPass(e,r){const{screenSizeEnabled:t,shadingEnabled:a}=this.configuration,{color:n,shadingTint:l,shadingDirection:p}=e;s(this.program,r.camera.projectionMatrix),this.program.setUniform4fv(\"color\",n),r.multipassTerrainEnabled&&(this.program.setUniform2fv(\"cameraNearFar\",r.camera.nearFar),this.program.setUniform2fv(\"inverseViewport\",r.inverseViewport),o(this.program,r)),a&&(this.program.setUniform4fv(\"shadedColor\",this.blendColor(w,l,n)),this.program.setUniform3fv(\"shadingDirection\",p),this.program.setUniformMatrix4fv(\"viewNormal\",r.camera.viewInverseTransposeMatrix)),t&&i(this.program,e,r)}bindDraw(e){a(this.program,e),n(this.program,e.origin,e.camera.viewInverseTransposeMatrix),t(this.program,this.configuration,e),this.program.rebindTextures()}blendColor(e,r,i){const t=1-r[3],o=r[3]+i[3]*t;return 0===o?(e[3]=o,e):(e[0]=(r[0]*r[3]+i[0]*i[3]*t)/o,e[1]=(r[1]*r[3]+i[1]*i[3]*t)/o,e[2]=(r[2]*r[3]+i[2]*i[3]*t)/o,e[3]=i[3],e)}setPipelineState(e){const r=this.configuration,i=3===e,t=2===e;return v({blending:0!==r.output&&7!==r.output||!r.transparent?null:i?h:m(e),culling:y(r.cullFace),depthTest:{func:t?513:r.shadingEnabled?515:513},depthWrite:i?r.writeDepth&&T:u(e),colorWrite:E,polygonOffset:i||t?null:g})}initializePipeline(){return this.setPipelineState(this.configuration.transparencyPassType)}}S.shader=new l(f,(()=>import(\"./ShadedColorMaterial.glsl.js\")));class j extends c{constructor(){super(...arguments),this.output=0,this.cullFace=0,this.slicePlaneEnabled=!1,this.transparent=!1,this.writeDepth=!0,this.screenSizeEnabled=!0,this.shadingEnabled=!0,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}e([d({count:8})],j.prototype,\"output\",void 0),e([d({count:3})],j.prototype,\"cullFace\",void 0),e([d()],j.prototype,\"slicePlaneEnabled\",void 0),e([d()],j.prototype,\"transparent\",void 0),e([d()],j.prototype,\"writeDepth\",void 0),e([d()],j.prototype,\"screenSizeEnabled\",void 0),e([d()],j.prototype,\"shadingEnabled\",void 0),e([d({count:4})],j.prototype,\"transparencyPassType\",void 0),e([d()],j.prototype,\"multipassTerrainEnabled\",void 0),e([d()],j.prototype,\"cullAboveGround\",void 0);const P=new Map([[\"position\",0],[\"normal\",1],[\"offset\",2]]),w=r();export{S as ShadedColorMaterialTechnique,j as ShadedColorMaterialTechniqueConfiguration,P as ShadedColorMaterialVertexAttrLocations};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{n as e,s as t,a as r,b as i}from\"../../../../chunks/vec3.js\";import{c as s}from\"../../../../chunks/vec3f64.js\";import{center as a,scale as n}from\"../../../../geometry/support/aaBoundingBox.js\";import{BufferViewVec3f as o}from\"../../../../geometry/support/buffer/BufferView.js\";import{newLayout as u}from\"../../support/buffer/InterleavedLayout.js\";import c from\"../lib/GLMaterial.js\";import{materialParametersDefaults as h,Material as f}from\"../lib/Material.js\";import{assert as l}from\"../lib/Util.js\";import{writeDefaultAttributes as p,writePosition as m}from\"./internal/bufferWriterUtils.js\";import{intersectTriangleGeometry as d}from\"./internal/MaterialUtil.js\";import{ShadedColorMaterialTechniqueConfiguration as b,ShadedColorMaterialVertexAttrLocations as g,ShadedColorMaterialTechnique as q}from\"../shaders/ShadedColorMaterialTechnique.js\";class v extends f{constructor(e){super(e,C),this.supportsEdges=!0,this.techniqueConfig=new b,this._vertexAttributeLocations=g}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.params.cullFace,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.screenSizeEnabled=this.params.screenSizeEnabled,this.techniqueConfig.shadingEnabled=this.params.shadingEnabled,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!!t&&t.cullAboveGround,this.techniqueConfig}getPassParameters(){return this.params}intersect(e,s,o,u,c,h,f){if(this.params.screenSizeEnabled){const o=e.vertexAttributes.get(\"offset\"),l={applyToVertex:(e,s,a,n)=>{const c=t(P,o.data[3*n+0],o.data[3*n+1],o.data[3*n+2]),h=t(x,e,s,a);return r(c,c,this.params.screenSize*u.camera.computeRenderPixelSizeAt(c)),i(h,h,c),[h[0],h[1],h[2]]},applyToAabb:e=>{const t=a(e,P);return n(e,this.params.screenSize*u.camera.computeRenderPixelSizeAt(t))}};d(e,s,u,c,h,l,f)}else d(e,s,u,c,h,void 0,f)}getGLMaterial(e){return 0===e.output||7===e.output||4===e.output?new E(e):void 0}createBufferWriter(){return new S(this.params.screenSizeEnabled)}}class E extends c{constructor(e){super(e),this.updateParameters()}updateParameters(e){this._technique=this._techniqueRep.releaseAndAcquire(q,this._material.getTechniqueConfig(this._output,e),this._technique)}beginSlot(e){if(4===this._output)return 3===e;let t=3;return this._technique.configuration.transparent&&(t=this._technique.configuration.writeDepth?5:8),e===t||23===e}ensureParameters(e){this.updateParameters(e)}bind(e){this._technique.bindPass(this._material.getPassParameters(),e)}}const C={color:[1,1,1,1],shadingTint:[0,0,0,.25],shadingDirection:e(s(),[.5,-.5,-.5]),transparent:!1,writeDepth:!0,slicePlaneEnabled:!1,cullFace:0,screenSizeEnabled:!1,screenSize:14,shadingEnabled:!0,...h};class S{constructor(e){this.screenSizeEnabled=e;const t=u().vec3f(\"position\").vec3f(\"normal\");this.screenSizeEnabled&&t.vec3f(\"offset\"),this.vertexBufferLayout=t}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return e.indices.get(\"position\").length}write(e,t,r,i){if(p(t,this.vertexBufferLayout,e.transformation,e.invTranspTransformation,r,i),this.screenSizeEnabled){if(!t.vertexAttributes.has(\"offset\"))throw new Error(\"offset vertex attribute required for screenSizeEnabled ShadedColorMaterial\");{const s=t.vertexAttributes.get(\"offset\"),a=t.indices.get(\"offset\");l(3===s.size);const n=r.getField(\"offset\",o);if(!n)throw new Error(\"unable to acquire view for offset\");m(a,s.data,e.invTranspTransformation,n,i)}}}}const P=s(),x=s();export{v as ShadedColorMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../core/maybe.js\";import{b as r}from\"../../../chunks/mat4.js\";import{f as n,c as o,m as c,n as a}from\"../../../chunks/vec3.js\";import{f as i}from\"../../../chunks/vec4f64.js\";import{sv3d as s,sm4d as l}from\"../../../geometry/support/vectorStacks.js\";import{hydrateGeometry as m}from\"../../../layers/graphics/hydratedFeatures.js\";import{Manipulator3D as u}from\"./Manipulator3D.js\";import{computeCentroid as p}from\"../layers/graphics/graphicUtils.js\";import g from\"../webgl-engine/lib/GeometryUtil.js\";import{ColorMaterial as f}from\"../webgl-engine/materials/ColorMaterial.js\";import{ShadedColorMaterial as h}from\"../webgl-engine/materials/ShadedColorMaterial.js\";function d(e,t=4,r=!0){const n=i(e[0],e[1],e[2],e.length>3?e[3]:1),o=e[3]<1;return r?new h({color:n,transparent:o,writeDepth:!0,cullFace:2,renderOccluded:t}):new f({color:n,transparent:o,writeDepth:!0,cullFace:2,renderOccluded:t})}function j(e,t=4){const r=i(e[0],e[1],e[2],4===e.length?e[3]:1);return new f({color:r,transparent:!0,writeDepth:!0,cullFace:1,renderOccluded:t})}function w(e,t,r){return new u({view:e,renderObjects:[{geometry:g.createSphereGeometry(1,32,32),material:d(i(t[0],t[1],t[2],null!=r?r:1))}]})}function y(e,t,a,i){const m=n(s.get(),e,a),u=b(m,o(s.get(),i,m),a,l.get());r(u,u);const p=c(s.get(),t,u);return Math.atan2(p[1],p[0])}function b(e,t,r,n){const c=a(s.get(),e),i=a(s.get(),t),l=o(s.get(),c,i);return n[0]=c[0],n[1]=c[1],n[2]=c[2],n[3]=0,n[4]=i[0],n[5]=i[1],n[6]=i[2],n[7]=0,n[8]=l[0],n[9]=l[1],n[10]=l[2],n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function O(t,r){const n=t.getViewForGraphic(r);return e(n)&&\"computeAttachmentOrigin\"in n?n.computeAttachmentOrigin(r,t.spatialReference):null}function v(t,r,n){const o=O(t,n);e(o)?r.elevationAlignedLocation=o:F(r,n.geometry)}function F(e,r){if(t(r))return;const n=\"mesh\"===r.type?r.anchor:p(r);t(n)||(e.location=m(n))}export{y as calculateInputRotationTransform,b as calculateTranslateRotateFromBases,d as createManipulatorMaterial,j as createManipulatorOutlineMaterial,w as createSphereManipulator,O as getGraphicAttachmentOrigin,v as placeAtGraphic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport o from\"../../../../../core/has.js\";import{deg2rad as t}from\"../../../../../core/mathUtils.js\";const r=o(\"mac\")?\"Meta\":\"Control\",s=\"Shift\",a=2,c=1.15,m=1.15,h=1.1,e=2500,i=.02,f=Math.cos(t(45)),p=Math.cos(t(5)),M=.95,j=.3,l=.7,n=[1,.5,0],x=2,C=1,S=[...n,l],U=[0,0,0,.04],b=[...n,.5],d=[...n,1],g=[1,1,1,1],k=[1,.8,.6,1],q=[1,.93,.86,1],u=[...n,1],v=[...n,1],w=3,y=11,z=22.5,A=40,B=48,D=2.25,E=4,F=1,G=.3,H=6,I=4,J=12,K=40,L=27,N=1600,O=.4;export{a as DISPLAY_FOCUS_MULTIPLIER,b as GRID_COLOR,n as HANDLE_COLOR,l as HANDLE_OPACITY,i as INITIAL_DEPTH_OFFSET_FRAC,O as INITIAL_PLANE_HALF_SIZE_VIEW_PROPORTION,U as PLANE_BACKGROUND_COLOR,N as PLANE_MIN_BASIS_SCREEN_LEN2,S as PLANE_OUTLINE_COLOR,C as PLANE_OUTLINE_WIDTH,x as PLANE_PREVIEW_OUTLINE_WIDTH,e as POINTER_MOVE_TIMER_MS,M as PREVIEW_FADE_DOT_THRESHOLD,j as PREVIEW_FADE_DURATION_SECONDS,H as RESIZE_HANDLE_CORNER_INPUT_RADIUS,E as RESIZE_HANDLE_CORNER_WIDTH,I as RESIZE_HANDLE_EDGE_INPUT_RADIUS,G as RESIZE_HANDLE_EDGE_PADDING_FRAC,F as RESIZE_HANDLE_EDGE_WIDTH,d as ROTATE_HEADING_CALLOUT_COLOR,L as ROTATE_HEADING_DISC_RADIUS,h as ROTATE_HEADING_DISC_RADIUS_FOCUS_MULTIPLIER,K as ROTATE_HEADING_OFFSET_DISTANCE,J as ROTATE_HEADING_TIP_LENGTH,k as SHIFT_RESTART_ARROW_CAP_COLOR,B as SHIFT_RESTART_ARROW_LENGTH,D as SHIFT_RESTART_ARROW_OUTLINE_WIDTH,g as SHIFT_RESTART_ARROW_TIP_COLOR,u as SHIFT_RESTART_CALLOUT_COLOR,A as SHIFT_RESTART_OFFSET_DISTANCE,v as SHIFT_RESTART_OUTLINE_COLOR,m as SHIFT_RESTART_TIP_FOCUS_MULTIPLIER,z as SHIFT_RESTART_TIP_LENGTH,y as SHIFT_RESTART_TIP_RADIUS,q as SHIFT_RESTART_TUBE_COLOR,c as SHIFT_RESTART_TUBE_FOCUS_MULTIPLIER,w as SHIFT_RESTART_TUBE_RADIUS,p as SMALL_ANGLE_DOT_THRESHOLD,f as VERTICAL_DOT_THRESHOLD,r as forceHorizontalModifier,s as forceVerticalModifier};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{bindProjectionMatrix as r,bindView as e}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as i}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as o}from\"../core/shaderTechnique/ShaderTechnique.js\";import{Default3D as t}from\"../lib/DefaultVertexAttributeLocations.js\";import{Program as a}from\"../lib/Program.js\";import{S as s}from\"../../../../chunks/SlicePlaneMaterial.glsl.js\";import{makePipelineState as l,separateBlendingParams as n,defaultColorWriteParams as m}from\"../../../webgl/renderState.js\";class d extends o{initializeProgram(r){const e=d.shader.get().build();return new a(r.rctx,e,t)}bindPass(e,i){r(this.program,i.camera.projectionMatrix),this.program.setUniform4fv(\"backgroundColor\",e.backgroundColor),this.program.setUniform4fv(\"gridColor\",e.gridColor),this.program.setUniform1f(\"gridWidth\",e.gridWidth)}bindDraw(r){e(this.program,r),this.program.rebindTextures()}initializePipeline(){return l({blending:n(1,1,771,771),depthTest:{func:513},colorWrite:m})}}d.shader=new i(s,(()=>import(\"./SlicePlaneMaterial.glsl.js\")));export{d as SlicePlaneMaterialTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{autoDispose as r}from\"../lib/AutoDisposable.js\";import e from\"../lib/GLMaterial.js\";import{Material as i,materialParametersDefaults as s}from\"../lib/Material.js\";import{DefaultBufferWriter as o,PositionUVLayout as a}from\"./internal/DefaultBufferWriter.js\";import{intersectTriangleGeometry as n}from\"./internal/MaterialUtil.js\";import{SlicePlaneMaterialTechnique as u}from\"../shaders/SlicePlaneMaterialTechnique.js\";class l extends i{constructor(t){super(t,m)}intersect(t,r,e,i,s,o,a){return n(t,r,i,s,o,void 0,a)}createBufferWriter(){return new o(a)}getGLMaterial(t){return 0===t.output?new c(t):void 0}}class c extends e{constructor(t){super(t),this._technique=new u(this._techniqueRep.constructionContext,null),this.updateParameters()}updateParameters(){}beginSlot(t){return 8===t}bind(t){this._technique.bindPass(this._material.params,t)}}t([r()],c.prototype,\"_technique\",void 0);const m={backgroundColor:[1,0,0,.5],gridColor:[0,1,0,.5],gridWidth:4,...s};export{l as SlicePlaneMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{clone as e}from\"../../core/lang.js\";import{isSome as i}from\"../../core/maybe.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{cast as s}from\"../../core/accessorSupport/decorators/cast.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{ensureNumber as a}from\"../../core/accessorSupport/ensureType.js\";import{persistable as h}from\"../../core/accessorSupport/decorators/persistable.js\";import{cyclicalDeg as n}from\"../../views/3d/support/mathUtils.js\";import m from\"../../geometry/Point.js\";var l;let c=l=class extends o{constructor(t){super(t),this.type=\"plane\",this.position=null,this.heading=0,this.tilt=0,this.width=10,this.height=10}clone(){return new l({position:e(this.position),heading:this.heading,tilt:this.tilt,width:this.width,height:this.height})}equals(t){return this.heading===t.heading&&this.tilt===t.tilt&&i(this.position)&&i(t.position)&&this.position.equals(t.position)&&this.width===t.width&&this.height===t.height}};t([r({readOnly:!0,json:{read:!1,write:!0}})],c.prototype,\"type\",void 0),t([r({type:m}),h()],c.prototype,\"position\",void 0),t([r({type:Number,nonNullable:!0,range:{min:0,max:360}}),h(),s((t=>n.normalize(a(t),0,!0)))],c.prototype,\"heading\",void 0),t([r({type:Number,nonNullable:!0,range:{min:0,max:360}}),h(),s((t=>n.normalize(a(t),0,!0)))],c.prototype,\"tilt\",void 0),t([r({type:Number,nonNullable:!0}),h()],c.prototype,\"width\",void 0),t([r({type:Number,nonNullable:!0}),h()],c.prototype,\"height\",void 0),c=l=t([p(\"esri.widgets.Slice.SlicePlane\")],c);var d=c;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as r}from\"../../../../core/maybe.js\";import{c as e}from\"../../../../chunks/vec4.js\";import{f as t}from\"../../../../chunks/vec4f32.js\";import{Object3DVisualElement as i}from\"./Object3DVisualElement.js\";import a from\"../../webgl-engine/lib/GeometryUtil.js\";import{SlicePlaneMaterial as s}from\"../../webgl-engine/materials/SlicePlaneMaterial.js\";class d extends i{constructor(r){super(r),this._material=null,this._renderOccluded=4,this._gridWidth=1,this._gridColor=t(1,0,0,1),this._backgroundColor=t(1,0,0,1),this.applyProps(r)}get renderOccluded(){return this._renderOccluded}set renderOccluded(r){r!==this._renderOccluded&&(this._renderOccluded=r,this._updateMaterial())}get gridWidth(){return this._gridWidth}set gridWidth(r){this._gridWidth!==r&&(this._gridWidth=r,this._updateMaterial())}get gridColor(){return this._gridColor}set gridColor(r){e(this._gridColor,r),this._updateMaterial()}get backgroundColor(){return this._backgroundColor}set backgroundColor(r){e(this._backgroundColor,r),this._updateMaterial()}createExternalResources(){this._material=new s(this.materialParameters)}destroyExternalResources(){this._material=null}forEachExternalMaterial(e){r(this._material)&&e(this._material)}createGeometries(e){if(r(this._material)){const r=a.createSquareGeometry();e.addGeometry(r,this._material)}}get materialParameters(){return{backgroundColor:this._backgroundColor,gridWidth:this._gridWidth,gridColor:this._gridColor,renderOccluded:this._renderOccluded}}_updateMaterial(){r(this._material)&&this._material.setParameterValues(this.materialParameters)}}export{d as SlicePlaneVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../../../../geometry.js\";import{neverReached as e}from\"../../../../../core/compilerUtils.js\";import t from\"../../../../../core/Logger.js\";import{rad2deg as i,deg2rad as s}from\"../../../../../core/mathUtils.js\";import{isNone as r,isSome as o,unwrapOr as n}from\"../../../../../core/maybe.js\";import{castRenderScreenPointArray3 as a}from\"../../../../../core/screenUtils.js\";import{r as c,i as l,f as m,m as d,c as g,t as u,x as p}from\"../../../../../chunks/mat4.js\";import{c as f}from\"../../../../../chunks/mat4f64.js\";import{r as b}from\"../../../../../chunks/quat.js\";import{a as h,g as w,d as y,c as j,n as M,b as k,l as v,f as P,p as O,s as T}from\"../../../../../chunks/vec3.js\";import{a as U,c as R,f as S}from\"../../../../../chunks/vec3f64.js\";import{r as L,f as A,i as E,a as C,n as F,u as G}from\"../../../../../chunks/boundedPlane.js\";import{fromPositionAndNormal as x,fromVectorsAndPoint as I}from\"../../../../../geometry/support/plane.js\";import{create as z}from\"../../../../../geometry/support/ray.js\";import{angleAroundAxis as D}from\"../../../../../geometry/support/vector.js\";import{sv3d as B,sm4d as H,sq4d as V}from\"../../../../../geometry/support/vectorStacks.js\";import{Manipulator3D as q}from\"../../Manipulator3D.js\";import{calculateTranslateRotateFromBases as N}from\"../../manipulatorUtils.js\";import{SHIFT_RESTART_TIP_RADIUS as W,RESIZE_HANDLE_EDGE_PADDING_FRAC as Z,SMALL_ANGLE_DOT_THRESHOLD as $,PLANE_MIN_BASIS_SCREEN_LEN2 as J,INITIAL_PLANE_HALF_SIZE_VIEW_PROPORTION as K,SHIFT_RESTART_OFFSET_DISTANCE as Q,SHIFT_RESTART_ARROW_OUTLINE_WIDTH as X,SHIFT_RESTART_ARROW_TIP_COLOR as Y,SHIFT_RESTART_ARROW_CAP_COLOR as _,SHIFT_RESTART_TUBE_COLOR as ee,SHIFT_RESTART_OUTLINE_COLOR as te,SHIFT_RESTART_CALLOUT_COLOR as ie,ROTATE_HEADING_OFFSET_DISTANCE as se,ROTATE_HEADING_DISC_RADIUS as re,ROTATE_HEADING_CALLOUT_COLOR as oe,PLANE_OUTLINE_COLOR as ne,PLANE_OUTLINE_WIDTH as ae,PLANE_BACKGROUND_COLOR as ce,GRID_COLOR as le,HANDLE_COLOR as me,RESIZE_HANDLE_CORNER_INPUT_RADIUS as de,RESIZE_HANDLE_EDGE_INPUT_RADIUS as ge,ROTATE_HEADING_TIP_LENGTH as ue,VERTICAL_DOT_THRESHOLD as pe,ROTATE_HEADING_DISC_RADIUS_FOCUS_MULTIPLIER as fe,DISPLAY_FOCUS_MULTIPLIER as be,RESIZE_HANDLE_EDGE_WIDTH as he,SHIFT_RESTART_ARROW_LENGTH as we,SHIFT_RESTART_TUBE_RADIUS as ye,SHIFT_RESTART_TIP_LENGTH as je,SHIFT_RESTART_TUBE_FOCUS_MULTIPLIER as Me,SHIFT_RESTART_TIP_FOCUS_MULTIPLIER as ke,RESIZE_HANDLE_CORNER_WIDTH as ve}from\"./sliceToolConfig.js\";import{LineVisualElement as Pe}from\"../../visualElements/LineVisualElement.js\";import{SlicePlaneVisualElement as Oe}from\"../../visualElements/SlicePlaneVisualElement.js\";import{getElevationAtPoint as Te}from\"../../../support/ElevationProvider.js\";import{fromRender as Ue}from\"../../../support/geometryUtils/ray.js\";import{Geometry as Re}from\"../../../webgl-engine/lib/Geometry.js\";import Se from\"../../../webgl-engine/lib/GeometryUtil.js\";import{ColorMaterial as Le}from\"../../../webgl-engine/materials/ColorMaterial.js\";import{ImageMaterial as Ae}from\"../../../webgl-engine/materials/ImageMaterial.js\";import{NativeLineMaterial as Ee}from\"../../../webgl-engine/materials/NativeLineMaterial.js\";import{RibbonLineMaterial as Ce}from\"../../../webgl-engine/materials/RibbonLineMaterial.js\";import Fe from\"../../../../../widgets/Slice/SlicePlane.js\";import Ge from\"../../../../../geometry/Point.js\";const xe=t.getLogger(\"esri.views.3d.interactive.analysisTools.slice.sliceToolUtils\");function Ie(e,t,i,s,r,o,n,a){return ze(t,n.worldUpAtPosition(e,B.get()),r,o,a.basis1,a.basis2),h(a.basis1,a.basis1,i),h(a.basis2,a.basis2,s),w(a.origin,e),I(a.basis2,a.basis1,a.origin,a.plane),a}function ze(e,t,i,s,r,o){const n=y(e,t),a=B.get(),c=B.get();switch(0===s?Math.abs(n)>pe?1:2:s){case 2:{const s=Math.abs(n)<=$?e:i.viewUp;j(a,s,t),w(c,t);break}case 1:j(a,i.viewUp,t),j(c,t,a);break;case 3:{const s=Math.abs(n)<=$?t:i.viewUp;j(a,s,e),j(c,e,a);break}}const l=j(B.get(),a,c);y(l,i.viewForward)>0&&h(c,c,-1),M(r,a),M(o,c)}function De(e,t,i){const s=t.worldUpAtPosition(e.origin,B.get()),r=e.basis1,o=mt(e,s),n=Math.round(o/yt)*yt;return L(e,n-o,r,i)}function Be(e,t,i,s,r,o){const n=w(B.get(),r.origin);k(n,n,h(B.get(),r.basis1,e.direction[0]<0?1:-1)),k(n,n,h(B.get(),r.basis2,e.direction[1]<0?1:-1));const a=v(r.basis1),c=v(r.basis2),l=P(B.get(),i,n),m=P(B.get(),t,n);let d=0,g=0;if(et(e)){const t=_e(r),i=_e(o);d=a-.5*e.direction[0]*y(r.basis1,m)/a,g=c-.5*e.direction[1]*y(r.basis2,m)/c;const s=i/t;d*=s,g*=s}const u=d+.5*e.direction[0]*y(r.basis1,l)/a,p=g+.5*e.direction[1]*y(r.basis2,l)/c,f=h(B.get(),r.basis1,u/a),b=h(B.get(),r.basis2,p/c);(u<=0||Xe(o.origin,f,s)<=J)&&w(f,o.basis1),(p<=0||Xe(o.origin,b,s)<=J)&&w(b,o.basis2);const j=w(B.get(),n);return k(j,j,h(B.get(),f,e.direction[0]<0?-1:1)),k(j,j,h(B.get(),b,e.direction[1]<0?-1:1)),A(j,f,b,o)}function He(e,t){return K*Math.min(t.width,t.height)*t.computeRenderPixelSizeAt(e)}function Ve(e,t,i,s){const r=j(B.get(),t,i);return j(r,r,t),x(e,r,s)}function qe(e,t){return N(e.basis1,e.basis2,e.origin,t)}function Ne(e,t,i,s){const r=t.worldUpAtPosition(e.origin,B.get()),o=B.get();switch(i){case 1:w(o,r);break;case 2:w(o,e.basis1)}return x(e.origin,o,s)}function We(e,t,i,s){const r=Qe(i,2),o=H.get();c(o,t,r.edge*Math.PI/2);const n=M(B.get(),r.basis);let l=h(B.get(),n,r.direction*s.computeScreenPixelSizeAt(r.position)*Q);k(l,l,r.position);const m=s.projectToRenderScreen(l,a(B.get())),d=Ze(s,m);Ue(s,m,wt),M(wt.direction,wt.direction);const g=B.get();!d&&E(i,wt,g)&&(l=g),o[12]=0,o[13]=0,o[14]=0,e.modelTransform=o,e.renderLocation=U(l),d?e.state|=ht:e.state&=~ht}function Ze(e,t){const[i,s,r,o]=e.viewport,n=Math.min(r,o)/16;let a=!0;return t[0]<i+n?(t[0]=i+n,a=!1):t[0]>i+r-n&&(t[0]=i+r-n,a=!1),t[1]<s+n?(t[1]=s+n,a=!1):t[1]>s+o-n&&(t[1]=s+o-n,a=!1),a}function $e(e,t,i,s){const r=v(s.basis1),o=v(s.basis2),n=Ye(s),a=_e(s),g=T(B.get(),0,0,0);k(g,h(B.get(),s.basis1,t.direction[0]),h(B.get(),s.basis2,t.direction[1])),k(g,s.origin,g);let u=0,p=1;if(et(t))1===t.direction[0]&&-1===t.direction[1]?u=yt:1===t.direction[0]&&1===t.direction[1]?u=Math.PI:-1===t.direction[0]&&1===t.direction[1]&&(u=3*Math.PI/2),p=a;else{const e=0!==t.direction[0]?1:2;u=1===e?yt:0,p=(1===e?o:r)-n}const f=l(H.get());c(f,f,u),m(f,f,T(B.get(),p,p,p)),d(f,i,f),f[12]=0,f[13]=0,f[14]=0,e.modelTransform=f,e.renderLocation=g}function Je(e,t,i,s){const r=s.worldUpAtPosition(i.origin,B.get()),o=Qe(i,0),n=l(H.get());c(n,n,o.edge*Math.PI/2),g(n,n,-mt(i,r)),d(n,t,n),n[12]=0,n[13]=0,n[14]=0,e.modelTransform=n,e.renderLocation=o.position}function Ke(e,t,i){const s=Qe(i,1),r=l(H.get());c(r,r,s.edge*Math.PI/2),g(r,r,yt),d(r,t,r),r[12]=0,r[13]=0,r[14]=0,e.modelTransform=r,e.renderLocation=s.position}function Qe(e,t){switch(t){case 0:return{basis:e.basis1,direction:1,position:k(B.get(),e.origin,e.basis1),edge:t};case 1:return{basis:e.basis2,direction:1,position:k(B.get(),e.origin,e.basis2),edge:t};case 2:return{basis:e.basis1,direction:-1,position:P(B.get(),e.origin,e.basis1),edge:t};case 3:return{basis:e.basis2,direction:-1,position:P(B.get(),e.origin,e.basis2),edge:t}}}function Xe(e,t,i){const s=i.projectToRenderScreen(k(B.get(),e,t),a(B.get())),r=i.projectToRenderScreen(P(B.get(),e,t),a(B.get()));return O(P(s,s,r))}function Ye(e){const t=v(e.basis1),i=v(e.basis2);return Z*Math.min(t,i)}function _e(e){return Ye(e)}function et(e){return 0!==e.direction[0]&&0!==e.direction[1]}function tt(e,t=1){const i=0===t?Q:0,s=[S(i,0,-we/2),S(i,0,we/2)],r=ct(s,!0),o=(e,t)=>nt(s,s,{tubeRadius:ye,tipRadius:W,tipLength:je,tubeFocusMultiplier:Me,tipFocusMultiplier:ke,padding:e,bothEnds:!0,flat:null,focusTipLength:!0,addCap:t}),n=o(0,!1),a=o(X,!0),c=new Le({color:Y,cullFace:2,renderOccluded:16}),l=new Le({color:_,cullFace:2,renderOccluded:16}),m=new Le({color:ee,cullFace:2,renderOccluded:16}),d=new Le({color:te,transparent:!0,writeDepth:!1,cullFace:1,renderOccluded:2}),g=Se.createPolylineGeometry([[i,0,0],[i-Q,0,0]]),u=Se.createPolylineGeometry([[i,0,0],[i-Q,0,0]]),p=new Ee({color:ie,renderOccluded:4});return new q({view:e,renderObjects:[...n.normal.map((({part:e,geometry:t,transform:i})=>({geometry:t,material:\"tip\"===e?c:\"cap\"===e?l:m,transform:i,stateMask:1|bt}))),...a.normal.map((({geometry:e,transform:t})=>({geometry:e,material:d,transform:t,stateMask:1|bt}))),{geometry:g,material:p,stateMask:1|bt|ht},...n.focused.map((({part:e,geometry:t,transform:i})=>({geometry:t,material:\"tip\"===e?c:\"cap\"===e?l:m,transform:i,stateMask:2|bt}))),...a.focused.map((({geometry:e,transform:t})=>({geometry:e,material:d,transform:t,stateMask:2|bt}))),{geometry:u,material:p,stateMask:2|bt|ht}],autoScaleRenderObjects:!1,collisionType:{type:\"line\",paths:[r]},collisionPriority:1,radius:W,state:bt})}function it(e,t){const i=new Ae({transparent:!0,writeDepth:!1,textureId:t.id,renderOccluded:16}),s=se,r=re,o=r*fe,n=e=>{const t=new Uint32Array([0,1,2,2,3,0]);return new Re([[\"position\",{size:3,data:[s-e,-e,0,s+e,-e,0,s+e,e,0,s-e,e,0],exclusive:!0}],[\"uv0\",{size:2,data:[0,0,1,0,1,1,0,1]}]],[[\"position\",t],[\"uv0\",t]])},a=Se.createPolylineGeometry([[0,0,0],[s-r,0,0]]),c=Se.createPolylineGeometry([[0,0,0],[s-o,0,0]]),l=new Ee({color:oe,renderOccluded:4}),m=[{geometry:n(r),material:i,stateMask:1|bt},{geometry:a,material:l,stateMask:1|bt},{geometry:n(o),material:i,stateMask:2|bt},{geometry:c,material:l,stateMask:2|bt}];return new q({view:e,renderObjects:m,autoScaleRenderObjects:!1,collisionType:{type:\"disc\",direction:[0,0,1],offset:[s,0,0]},collisionPriority:1,radius:r/2,state:bt})}function st(e){return new Pe({view:e,attached:!0,color:ne,width:ae,writeDepthEnabled:!1,renderOccluded:4,geometry:[[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0],[-1,-1,0]]]})}function rt(e){return new Oe({view:e,attached:!0,backgroundColor:[...ce],gridColor:le,gridWidth:4,renderOccluded:4})}function ot(e,t){const i=et(t),s=i?[S(1,0,0),S(0,0,0),S(0,1,0)]:[S(1,0,0),S(-1,0,0)],r=Se.createPolylineGeometry(s),o=[...me,1],n=e=>new Ce({color:o,width:e,renderOccluded:4}),a=()=>new Ee({color:o,renderOccluded:4}),c=i?ve:he,l=c*be,m=he,d=e=>e>1?n(e):a(),g=[{geometry:r,material:d(c),stateMask:1|jt},{geometry:r,material:d(l),stateMask:2|jt},{geometry:r,material:d(m),stateMask:Mt}],u=new q({view:e,renderObjects:g,collisionType:{type:\"line\",paths:[s]},autoScaleRenderObjects:!1,worldSized:!0,radius:i?de:ge,idHint:i?1:2});return u.state=jt,u}function nt(e,t,i){const s=s=>{const r=(s?t:e).slice(0),n=P(B.get(),r[0],r[1]);M(n,n);const a=P(B.get(),r[r.length-1],r[r.length-2]);if(M(a,a),i.padding>0){const e=h(R(),a,-i.padding);if(r[r.length-1]=k(e,e,r[r.length-1]),i.bothEnds){const e=h(R(),n,-i.padding);r[0]=k(e,e,r[0])}}const c=s?i.tipFocusMultiplier:1,g=i.tipLength*(i.focusTipLength?c:1),w=i.tipRadius*c,y=l(H.get());if(i.padding>0){const e=g/4,t=T(B.get(),0,e,0),s=1+i.padding/e;u(y,y,t),m(y,y,T(B.get(),s,s,s)),u(y,y,h(t,t,-1/s))}const j=l(f()),v=S(0,1,0),O=p(f(),b(V.get(),v,a));O[12]=r[r.length-1][0],O[13]=r[r.length-1][1],O[14]=r[r.length-1][2],d(O,O,y);const U=[{part:\"tube\",geometry:at(i.tubeRadius*(s?i.tubeFocusMultiplier:1)+i.padding,i.flat,r),transform:j}];let L,A;if(o(i.flat)?L=Se.createExtrudedTriangle(g,w,w,i.flat.thickness):(L=Se.createConeGeometry(g,w,24,!1,!1,!0),A=Se.createConeGeometry(g,w,24,!1,!0,!1)),U.push({part:\"tip\",geometry:L,transform:O}),A&&U.push({part:\"cap\",geometry:A,transform:O}),i.bothEnds){const e=p(f(),b(V.get(),v,n));e[12]=r[0][0],e[13]=r[0][1],e[14]=r[0][2],d(e,e,y),U.push({part:\"tip\",geometry:L,transform:e}),A&&U.push({part:\"cap\",geometry:A,transform:e})}return U};return{normal:s(!1),focused:s(!0)}}function at(e,t,i){const s=[];if(o(t))s.push([e,t.thickness/2],[-e,t.thickness/2],[-e,-t.thickness/2],[e,-t.thickness/2]);else{const t=12;for(let i=0;i<t;i++){const r=i/t*2*Math.PI;s.push([Math.cos(r)*e,Math.sin(r)*e])}}return Se.createPathExtrusionGeometry(s,i,[],[],!1)}function ct(e,t){const i=P(R(),e[e.length-1],e[e.length-2]);if(M(i,i),h(i,i,ue),k(i,i,e[e.length-1]),t){const t=P(R(),e[0],e[1]);return M(t,t),h(t,t,ue),k(t,t,e[0]),[t,...e,i]}return[...e,i]}function lt(e,t,s,n=new Fe){if(r(e))return null;const a=o(n.position)?n.position:new Ge;t.fromRenderCoords(e.origin,a,s),n.position=a;const c=t.worldUpAtPosition(e.origin,B.get()),l=t.worldBasisAtPosition(e.origin,1,B.get());return n.width=2*v(e.basis1),n.height=2*v(e.basis2),n.tilt=i(mt(e,c)),n.heading=i(dt(e,c,l)),n}function mt(e,t){return D(t,e.basis2,e.basis1)+yt}function dt(e,t,i){return D(e.basis1,i,t)-yt}function gt(e,t,i,r,o,n,a=C()){return n.toRenderCoords(e,a.origin)?(n.worldBasisAtPosition(a.origin,0,a.basis1),n.worldBasisAtPosition(a.origin,1,a.basis2),I(a.basis2,a.basis1,a.origin,a.plane),L(a,-s(t),F(a),a),L(a,s(i),a.basis1,a),h(a.basis1,a.basis1,r/2),h(a.basis2,a.basis2,o/2),G(a),a):(xe.error(`Failed to project slice plane position, projection from ${e.spatialReference.wkid} is not supported`),null)}function ut(e,t,i=C()){return r(e)||r(e.position)?null:gt(e.position,e.heading,e.tilt,e.width,e.height,t,i)}function pt(e,t,i=C()){if(r(e)||r(e.position))return null;let s=e.position;return e.position.hasZ||(s=e.position.clone(),s.z=n(Te(t.elevationProvider,e.position),0)),gt(s,e.heading,e.tilt,e.width,e.height,t.renderCoordsHelper,i)}function ft(t){switch(t.type){case\"building-scene\":case\"csv\":case\"direct-line-measurement\":case\"area-measurement\":case\"feature\":case\"geo-rss\":case\"geojson\":case\"graphics\":case\"group\":case\"integrated-mesh\":case\"kml\":case\"line-of-sight\":case\"map-notes\":case\"ogc-feature\":case\"point-cloud\":case\"route\":case\"slice\":case\"scene\":case\"stream\":case\"voxel\":case\"subtype-group\":case\"unknown\":case\"unsupported\":case\"wfs\":case null:return!1;case\"base-dynamic\":case\"base-elevation\":case\"base-tile\":case\"bing-maps\":case\"elevation\":case\"imagery\":case\"imagery-tile\":case\"map-image\":case\"open-street-map\":case\"tile\":case\"vector-tile\":case\"wcs\":case\"web-tile\":case\"wms\":case\"wmts\":return!0;default:return e(t.type),!1}}const bt=16,ht=32,wt=z(),yt=Math.PI/2,jt=16,Mt=32;export{bt as DidPointerMoveRecentlyFlag,ht as IsShiftEdgeOnScreenFlag,ct as addArrowTips,qe as calculateBoundedPlaneTranslateRotate,_e as calculateDiagonalResizeHandleScale,He as calculatePlaneHalfSize,Ye as calculateResizeHandlePadding,Xe as calculateScreenSpaceBasisLength2,nt as createArrowGeometry,rt as createGridVisualElement,st as createOutlineVisualElement,Ie as createPlane,ot as createResizeManipulator,it as createRotateManipulator,Ne as createRotatePlane,tt as createShiftManipulator,Ve as createShiftPlane,De as forceHorizontalOrVertical,ft as isAlwaysDrapedLayer,et as isDiagonalResizeHandle,ze as normalToBases,lt as planeToShape,jt as resizeNormal,Mt as resizeOutlineOnly,Be as resizePlane,pt as shapeToElevationAlignedPlane,ut as shapeToPlane,$e as updateResizeHandle,Je as updateRotateHeadingHandle,Ke as updateRotateTiltHandle,We as updateShiftRestartHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import i from\"../../../../../core/Accessor.js\";import t from\"../../../../../core/Handles.js\";import a from\"../../../../../core/Logger.js\";import{isNone as r,isSome as l}from\"../../../../../core/maybe.js\";import{whenOnce as s}from\"../../../../../core/watchUtils.js\";import{property as n}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{a as c}from\"../../../../../chunks/boundedPlane.js\";import h from\"../../../../../layers/Layer.js\";import d from\"../../../../../layers/buildingSublayers/BuildingComponentSublayer.js\";import{isAlwaysDrapedLayer as y,shapeToElevationAlignedPlane as u,forceHorizontalOrVertical as p,planeToShape as w}from\"../../analysisTools/slice/sliceToolUtils.js\";import v from\"../../../../../widgets/Slice/SlicePlane.js\";const V=a.getLogger(\"esri.views.3d.interactive.graphics.Slice.SliceController\");let f=class extends i{constructor(e){super(e),this._handles=new t,this._internalChange=!1,this._currentSlicePlane=null,this.state=\"pending\"}get ready(){return\"ready\"===this.state}initialize(){this._handles.add(this.layerView.layerViewData.excludedLayers.on(\"before-add\",(e=>{const i=e.item;null!=i&&(i instanceof h||i instanceof d)?i instanceof h&&y(i)?(V.error(\"excludedLayers\",`Layer '${i.title}, id:${i.id}' of type '${i.type}' can not be individually excluded from slicing. Use 'excludeGroundSurface' instead.`),e.preventDefault()):this.layerView.layerViewData.excludedLayers.includes(i)&&e.preventDefault():(V.error(\"excludedLayers\",\"Invalid layer type, layer must derive from Layer or BuildingComponentSublayer\"),e.preventDefault())}))),this._handles.add(s(this.view,\"ready\",(()=>this._initialize()),!0))}_initialize(){switch(this.state){case\"pending\":break;case\"destroyed\":return;case\"ready\":throw new Error(\"state error\")}C(this.view,this),this._handles.add([this.layerView.layerViewData.watch(\"plane\",(()=>{this._internalChange||this._updateSlicePlaneFromBoundedPlane(),this._updateLayerViews()}),!0),this.layerView.layerViewData.watch(\"excludeGroundSurface\",(()=>this._updateLayerViews()),!0),this.layerView.layerViewData.excludedLayers.on(\"change\",(()=>this._updateLayerViews())),this.layerView.watch([\"active\",\"visible\"],(()=>{this._updateActiveController(),this._updateViewSlicePlane()}),!0),this.view.allLayerViews.on(\"change\",(()=>this._updateLayerViews()))]),this._handles.add([this.analysis.watch(\"plane\",(()=>{this._internalChange||(this._updateBoundedPlaneFromSlicePlane(),this._updateViewSlicePlane())}),!0)],\"analysis\"),this._set(\"state\",\"ready\"),this._updateActiveController(),this._updateBoundedPlaneFromSlicePlane(),this._updateViewSlicePlane()}destroy(){switch(this.state){case\"destroyed\":case\"pending\":return}this.layerView.active=!1,P(this.view,this),this._handles.destroy(),this.view.slicePlane=null,this.set(\"view\",null),this._set(\"state\",\"destroyed\")}async whenReady(){return await s(this,\"ready\"),this}_updateBoundedPlaneFromSlicePlane(){const e=this.analysis.plane,i=this._currentSlicePlane;if(r(i)&&r(e)||l(i)&&l(e)&&e.equals(i))return;let t=null,a=null;l(e)&&(t=u(e,this.view,c()),l(t)?a={heading:e.heading,tilt:e.tilt,position:e.position,width:e.width,height:e.height}:console.warn(\"Failed slice plane conversion.\")),this._currentSlicePlane=a,l(t)&&!this.analysis.tiltEnabled&&p(t,this.view.renderCoordsHelper,t),this._internalChange=!0,this.layerView.layerViewData.plane=t,this._internalChange=!1}_updateSlicePlaneFromBoundedPlane(){const e=this.layerView.layerViewData.plane,i=w(e,this.view.renderCoordsHelper,this.view.spatialReference,new v);let t=null;l(i)&&(t={heading:i.heading,tilt:i.tilt,position:i.position,width:i.width,height:i.height}),this._currentSlicePlane=t,l(e)&&(this.analysis.tiltEnabled||p(e,this.view.renderCoordsHelper,e)),this._internalChange=!0,this.analysis.plane=i,this._internalChange=!1,this._updateViewSlicePlane()}_updateActiveController(){if(_)return;const e=S(this.view);if(this.layerView.active)l(e.activeController)&&e.activeController!==this?(_=!0,e.activeController.layerView.active=!1,_=!1):l(e.activeController)&&e.activeController,this._updateLayerViews(),e.activeController=this;else{if(l(e.activeController)&&e.activeController!==this)return;l(e.activeController)&&e.activeController===this&&(e.activeController=null,this._updateLayerViews())}}_updateViewSlicePlane(){\"ready\"===this.state&&g(this.view)}_updateLayerViews(){const e=l(this.layerView.layerViewData.plane)&&this.layerView.visible&&this.layerView.active,i=[],t=e=>{\"layers\"in e?e.layers.forEach(t):i.push(e)};this.layerView.layerViewData.excludedLayers.forEach(t),this.view.allLayerViews.forEach((t=>{\"slicePlaneEnabled\"in t&&(t.slicePlaneEnabled=e&&i.indexOf(t.layer)<0),\"sublayerViews\"in t&&t.sublayerViews.forEach((t=>{t.slicePlaneEnabled=e&&i.indexOf(t.sublayer)<0}))})),null!=this.view.basemapTerrain&&(this.view.basemapTerrain.slicePlaneEnabled=e&&!this.layerView.layerViewData.excludeGroundSurface)}};e([n({readOnly:!0})],f.prototype,\"state\",void 0),e([n()],f.prototype,\"view\",void 0),e([n()],f.prototype,\"analysis\",void 0),e([n()],f.prototype,\"layerView\",void 0),e([n()],f.prototype,\"ready\",null),f=e([o(\"esri.views.3d.interactive.graphics.Slice.SliceController\")],f);const m=new Map;let _=!1;function g(e){const i=S(e).activeController;l(i)&&l(i.layerView.layerViewData.plane)&&i.layerView.visible?e.slicePlane=i.layerView.layerViewData.plane:e.slicePlane=null}function C(e,i){m.has(e)||m.set(e,{all:[],activeController:null}),m.get(e).all.push(i)}function S(e){return m.get(e)}function P(e,i){if(!m.has(e))throw new Error(\"view expected in global slice register\");const t=m.get(e),a=t.all.lastIndexOf(i);if(-1===a)throw new Error(\"controller expected in global slice register\");t.all.splice(a,1),0===t.all.length&&m.delete(e)}export{f as SliceController};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Accessor.js\";import i from\"../../../../../core/Handles.js\";import{applyOpacity as s}from\"../../../../../core/mathUtils.js\";import{isNone as a,destroyMaybe as r,isSome as l}from\"../../../../../core/maybe.js\";import{whenOnce as o}from\"../../../../../core/watchUtils.js\";import{property as n}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as h}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{reactionInit as c}from\"../../../../../core/accessorSupport/trackingUtils.js\";import{w as p,m as d}from\"../../../../../chunks/mat4.js\";import{s as u,l as m}from\"../../../../../chunks/vec3.js\";import{c as y}from\"../../../../../chunks/vec4f64.js\";import{sm4d as w,sv3d as _}from\"../../../../../geometry/support/vectorStacks.js\";import{PLANE_OUTLINE_WIDTH as V,PLANE_OUTLINE_COLOR as g,PLANE_PREVIEW_OUTLINE_WIDTH as f,PLANE_BACKGROUND_COLOR as v,GRID_COLOR as j}from\"../../analysisTools/slice/sliceToolConfig.js\";import{createGridVisualElement as E,createOutlineVisualElement as b,calculateBoundedPlaneTranslateRotate as k}from\"../../analysisTools/slice/sliceToolUtils.js\";import{createStipplePatternSimple as S}from\"../../../webgl-engine/materials/lineStippleUtils.js\";let M=class extends t{constructor(e){super(e),this._handles=new i,this._gridVisualElement=null,this._outlineVisualElement=null,this.state=\"pending\"}get ready(){return\"ready\"===this.state}set showGrid(e){this._set(\"showGrid\",e),this._updateMaterials()}set editable(e){this._set(\"editable\",e),this._updateMaterials()}initialize(){this._initialize()}async _initialize(){switch(this.state){case\"pending\":break;case\"destroyed\":return;case\"ready\":throw new Error(\"state error\")}if(await o(this.view,\"ready\",!0),a(this.layerView.layerViewData))throw new Error(\"expected internal object to be valid\");this._gridVisualElement=E(this.view),this._outlineVisualElement=b(this.view),this._handles.add(c((()=>this.layerView.fullOpacity),(()=>this._updateMaterials())),\"layer\"),this._handles.add([this.layerView.watch(\"visible\",(()=>this._updateMaterials()),!0),this.layerView.layerViewData.watch(\"plane\",(()=>this._updatePlane()),!0),this.layerView.watch(\"active\",(()=>this._updateMaterials()),!0)],\"internal\"),this._updatePlane(),this._set(\"state\",\"ready\")}destroy(){switch(this.state){case\"destroyed\":case\"pending\":return}this._handles.destroy(),this._gridVisualElement=r(this._gridVisualElement),this._outlineVisualElement=r(this._outlineVisualElement),this.set(\"view\",null),this._set(\"state\",\"destroyed\")}async whenReady(){return await o(this,\"ready\"),this}_update(){switch(this.state){case\"pending\":case\"destroyed\":return}}_updatePlane(){const e=this.layerView.layerViewData.plane,t=l(e)?k(e,w.get()):null;if(this._outlineVisualElement.width=V,l(e)){const i=u(_.get(),m(e.basis1),m(e.basis2),1),s=p(w.get(),i),a=d(s,t,s);this._outlineVisualElement.transform=a,this._gridVisualElement.transform=a}this._updateMaterials()}_updateMaterials(){const e=this.layerView.layerViewData.plane&&this.layerView.visible,t=this.layerView.active,i=this.layerView.fullOpacity,a=s(D,g,i);this._outlineVisualElement.color=a,this._outlineVisualElement.width=this.editable?V:f,this._outlineVisualElement.stipplePattern=t?null:S(5);const r=s(D,v,i),o=!!l(this.layerView.layerViewData)&&this.showGrid?j:[0,0,0,0];this._gridVisualElement.backgroundColor=r,this._gridVisualElement.gridColor=o,this._gridVisualElement.visible=e,this._outlineVisualElement.visible=e}};e([n({readOnly:!0})],M.prototype,\"state\",void 0),e([n()],M.prototype,\"view\",void 0),e([n()],M.prototype,\"layer\",void 0),e([n()],M.prototype,\"layerView\",void 0),e([n()],M.prototype,\"ready\",null),e([n({value:!1})],M.prototype,\"showGrid\",null),e([n({value:!0})],M.prototype,\"editable\",null),M=e([h(\"esri.views.3d.interactive.graphics.Slice.SliceView\")],M);const D=y();export{M as SliceView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import r from\"../../../../../core/Accessor.js\";import o from\"../../../../../core/Collection.js\";import{castForReferenceSetter as s,referenceSetter as t}from\"../../../../../core/collectionUtils.js\";import{property as c}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as p}from\"../../../../../core/accessorSupport/decorators/subclass.js\";let i=class extends r{constructor(){super(...arguments),this.plane=null,this.excludeGroundSurface=!1}get excludedLayers(){return this._get(\"excludedLayers\")||new o}set excludedLayers(e){this._set(\"excludedLayers\",t(e,this._get(\"excludedLayers\")))}};e([c()],i.prototype,\"plane\",void 0),e([c()],i.prototype,\"excludeGroundSurface\",void 0),e([c({cast:s})],i.prototype,\"excludedLayers\",null),i=e([p(\"esri.views.3d.interactive.graphics.Slice.SliceInternal\")],i);export{i as SliceLayerViewData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import{createDeferred as e}from\"../../../core/promiseUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";import{SliceController as r}from\"../interactive/graphics/Slice/SliceController.js\";import{SliceView as a}from\"../interactive/graphics/Slice/SliceView.js\";import{LayerView3D as o}from\"./LayerView3D.js\";import{SliceLayerViewData as l}from\"./analysis/Slice/SliceLayerViewData.js\";import n from\"../../layers/LayerView.js\";let y=class extends(o(n)){constructor(){super(...arguments),this.type=\"slice-3d\",this.analysisView=null,this.analysisController=null,this._initialized=e(),this.layerViewData=new l,this.active=!0,this.showGrid=!1,this.editable=!1}initialize(){this.analysisView=new a({view:this.view,layer:this.layer,layerView:this}),this.analysisController=new r({view:this.view,analysis:this.layer,layerView:this}),this._initialized.resolve()}destroy(){this.analysisView.destroy(),this.analysisView=null,this.analysisController.destroy(),this.analysisController=null}async when(){return this.destroyed?null:(await this._initialized.promise,this.destroyed?null:(await this.analysisView.whenReady(),this.destroyed?null:(await this.analysisController.whenReady(),this)))}get testData(){return{view:this.analysisView,controller:this.analysisController}}};i([s()],y.prototype,\"type\",void 0),i([s()],y.prototype,\"layerViewData\",void 0),i([s()],y.prototype,\"layer\",void 0),i([s()],y.prototype,\"active\",void 0),i([s({aliasOf:\"analysisView.showGrid\"})],y.prototype,\"showGrid\",void 0),i([s({aliasOf:\"analysisView.editable\"})],y.prototype,\"editable\",void 0),y=i([t(\"esri.views.3d.layers.SliceLayerView3D\")],y);var p=y;export{y as SliceLayerView3D,p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{getPathExtension as i}from\"../../core/urlUtils.js\";function p(i){return o[n(i)]||e}function n(i){return i instanceof Blob?i.type:t(i.url)}function t(p){const n=i(p);return g[n]||a}const o={},a=\"text/plain\",e=o[a],g={png:\"image/png\",jpeg:\"image/jpeg\",jpg:\"image/jpg\",bmp:\"image/bmp\",gif:\"image/gif\",json:\"application/json\",txt:\"text/plain\",xml:\"application/xml\",svg:\"image/svg+xml\",zip:\"application/zip\",pbf:\"application/vnd.mapbox-vector-tile\",gz:\"application/gzip\"};for(const l in g)o[g[l]]=l;export{p as getResourceContentExtension};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as t,isNone as r,get as e}from\"../../maybe.js\";import{isMultiOriginJSONMixin as o}from\"../../multiOriginJSONSupportUtils.js\";import{isAbsolute as i,isBlobProtocol as n,join as s,getPathExtension as u}from\"../../urlUtils.js\";import{generateUUID as p}from\"../../uuid.js\";import{getOwnPropertyMetadata as a}from\"../metadata.js\";import{nameToId as c}from\"../PropertyOrigin.js\";import{propertyJSONMeta as l}from\"./property.js\";import{getResourceContentExtension as f}from\"../../../portal/support/resourceExtension.js\";import{r as m,t as y,i as h,p as d}from\"../../../chunks/persistableUrlUtils.js\";function g(r){const e=t(r)&&r.origins?r.origins:[void 0];return(t,o)=>{const i=w(r,t,o);for(const r of e){const e=l(t,r,o);for(const t in i)e[t]=i[t]}}}function w(r,e,o){if(t(r)&&\"resource\"===r.type)return v(r,e,o);switch(t(r)&&r.type?r.type:\"other\"){case\"other\":return{read:!0,write:!0};case\"url\":{const{read:t,write:r}=d;return{read:t,write:r}}}}function v(e,s,u){const p=a(s,u);return{type:String,read:(t,r,e)=>{const o=m(t,r,e);return p.type===String?o:\"function\"==typeof p.type?new p.type({url:o}):void 0},write:{writer(s,a,l,f){if(!f||!f.resources)return\"string\"==typeof s?void(a[l]=y(s,f)):void(a[l]=s.write({},f));const m=P(s),d=m?y(m,{...f,verifyItemRelativeUrls:f&&f.verifyItemRelativeUrls?{writtenUrls:f.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null},1):null,g=p.type!==String&&(!o(this)||f&&f.origin&&this.originIdOf(u)>c(f.origin));f&&f.portalItem&&t(d)&&!i(d)?g?j(this,u,s,d,a,l,f,e):I(d,a,l,f):f&&f.portalItem&&(r(d)||t(h(d))||n(d)||g)?U(this,u,s,d,a,l,f,e):a[l]=d}}}}function U(t,r,o,i,u,a,c,l){const m=p(),y=S(o,i,c),h=s(e(l,\"prefix\"),m),d=`${h}.${f(y)}`,g=c.portalItem.resourceFromPath(d);n(i)&&c.resources.pendingOperations.push(b(i).then((t=>{g.path=`${h}.${f(t)}`,u[a]=g.itemRelativeUrl})).catch((()=>{}))),O(t,r,g,y,c.resources.toAdd),u[a]=g.itemRelativeUrl}function j(t,r,e,o,i,n,s,p){const a=s.portalItem.resourceFromPath(o),c=S(e,o,s);f(c)===u(a.path)?(O(t,r,a,c,s.resources.toUpdate),i[n]=o):U(t,r,e,o,i,n,s,p)}function I(t,r,e,o){o.resources.toKeep.push({resource:o.portalItem.resourceFromPath(t)}),r[e]=t}function O(t,r,e,o,i){i.push({resource:e,content:o,finish:e=>{R(t,r,e)}})}function S(t,r,e){return\"string\"==typeof t?{url:r}:new Blob([JSON.stringify(t.toJSON(e))],{type:\"application/json\"})}async function b(t){const r=(await import(\"../../../request.js\")).default,{data:e}=await r(t,{responseType:\"blob\"});return e}function P(t){return r(t)?null:\"string\"==typeof t?t:t.url}function R(t,r,e){\"string\"==typeof t[r]?t[r]=e.url:t[r].url=e.url}export{g as persistable};\n"],"sourceRoot":""}