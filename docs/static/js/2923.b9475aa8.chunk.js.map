{"version":3,"file":"static/js/2923.b9475aa8.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/RouteLayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/support/projectExtentUtils.js","../node_modules/@arcgis/core/views/3d/support/EventedSet.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../Graphic.js\";import t from\"../../../core/Collection.js\";import s from\"../../../core/CollectionFlattener.js\";import{destroyMaybe as i,isSome as o}from\"../../../core/maybe.js\";import{when as n}from\"../../../core/reactiveUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{DrapeSourceType as p}from\"./interfaces.js\";import{LayerView3D as u}from\"./LayerView3D.js\";import{GraphicsProcessor as c}from\"./graphics/GraphicsProcessor.js\";import{toViewIfLocal as d}from\"./support/projectExtentUtils.js\";import{EventedSet as h}from\"../support/EventedSet.js\";import{UpdatePolicy as m}from\"../webgl-engine/lib/basicInterfaces.js\";import y from\"../../layers/LayerView.js\";let g=class extends(u(y)){constructor(){super(...arguments),this.type=\"route-3d\",this.loadedGraphics=new h,this._byObjectID=new Map,this.slicePlaneEnabled=!1,this.drapeSourceType=p.Features,this.fullExtentInLocalViewSpatialReference=null}initialize(){this._set(\"processor\",new c({owner:this,scaleVisibilityEnabled:!0,frustumVisibilityEnabled:!0})),this.addResolvingPromise(this.processor.setup()),this.updatingHandles.addOnCollectionChange((()=>this._routeItems),(e=>this._routeItemsChanged(e))),this.addResolvingPromise(d(this).then((e=>this.fullExtentInLocalViewSpatialReference=e))),this.handles.add(n((()=>{var e,r;return null==(e=this.view)||null==(r=e.basemapTerrain)?void 0:r.ready}),(()=>()=>this.notifyChange(\"updating\")),{once:!0}))}destroy(){this.handles.removeAll(),this.updatingHandles.removeAll(),this._set(\"processor\",i(this.processor))}get _routeItems(){return new s({getCollections:()=>[this.layer.pointBarriers,this.layer.polygonBarriers,this.layer.polylineBarriers,this.layer.stops,this.layer.directionLines,this.layer.directionPoints,o(this.layer.routeInfo)?new t([this.layer.routeInfo]):null]})}_routeItemsChanged(e){e.removed.length&&this.loadedGraphics.removeMany(e.removed.map((e=>{const r=this._byObjectID.get(e);return this._byObjectID.delete(e),r}))),this.loadedGraphics.addMany(e.added.map((e=>{const t=r.fromJSON(e.toPortalJSON());return this._byObjectID.set(e,t),t})))}get legendEnabled(){var e;return this.canResume()&&!(null!=(e=this.processor)&&e.frustumVisibilitySuspended)}getSuspendInfo(){var e,r,t,s;const i=super.getSuspendInfo();return i.outsideScaleRange=null!=(e=null==(r=this.processor)?void 0:r.scaleVisibilitySuspended)&&e,i.outsideOfView=null!=(t=null==(s=this.processor)?void 0:s.frustumVisibilitySuspended)&&t,i}async fetchPopupFeatures(e,r){return o(r)?r.clientGraphics:null}getGraphicFromGraphicUid(e){return this.processor.getGraphicFromGraphicUid(e)}whenGraphicBounds(e,r){return this.processor.whenGraphicBounds(e,r)}computeAttachmentOrigin(e,r){var t;return null==(t=this.processor)?void 0:t.computeAttachmentOrigin(e,r)}getSymbolLayerSize(e,r){return this.processor.getSymbolLayerSize(e,r)}async queryGraphics(){return new t(this.loadedGraphics.toArray())}maskOccludee(e){return this.processor.maskOccludee(e)}highlight(e){return this.processor.highlight(e)}get updatePolicy(){var e;return(null==(e=this.processor)?void 0:e.graphicsCore.effectiveUpdatePolicy)||m.SYNC}canResume(){var e;return super.canResume()&&!(null!=(e=this.processor)&&e.scaleVisibilitySuspended)}isUpdating(){var e,r,t;return!(!(null!=(e=this.processor)&&e.updating||null==(r=this.view)||null==(t=r.basemapTerrain))&&t.ready)}get performanceInfo(){var e,r,t;return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:null!=(e=null==(r=this.processor)?void 0:r.elevationAlignment.updating)&&e,visibilityFrustum:!(null!=(t=this.processor)&&t.frustumVisibilitySuspended)}}};e([a()],g.prototype,\"_routeItems\",null),e([a()],g.prototype,\"loadedGraphics\",void 0),e([a({readOnly:!0})],g.prototype,\"legendEnabled\",null),e([a()],g.prototype,\"layer\",void 0),e([a({readOnly:!0})],g.prototype,\"processor\",void 0),e([a({type:Boolean})],g.prototype,\"slicePlaneEnabled\",void 0),g=e([l(\"esri.views.3d.layers.RouteLayerView3D\")],g);const f=g;export{f as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as r}from\"../../../../core/maybe.js\";import{project as o}from\"../../../../geometry/support/webMercatorUtils.js\";import{projectGeometry as t}from\"../../../../portal/support/geometryServiceUtils.js\";function l(l){const s=l.view.spatialReference,i=l.layer.fullExtent,n=e(i)&&i.spatialReference;if(r(i)||!n)return Promise.resolve(null);if(n.equals(s))return Promise.resolve(i.clone());const a=o(i,s);return e(a)?Promise.resolve(a):l.view.state.isLocal?t(i,s,l.layer.portalItem).then((e=>!l.destroyed&&e?e:void 0)).catch((()=>null)):Promise.resolve(null)}export{l as toViewIfLocal};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Evented.js\";import{ObservableChangesType as t}from\"../../../core/ObservableChangesType.js\";import{someSet as s}from\"../../../core/SetUtils.js\";class r extends e{constructor(){super(...arguments),this._set=new Set}clear(){if(this._set.size>0){const e=this.toArray();this._set.clear(),this.emit(\"after-changes\",{type:t.REMOVE}),this.emit(\"change\",{added:[],removed:e})}}get length(){return this._set.size}addMany(e){if(0!==e.length){for(const t of e)this._set.add(t);this.emit(\"after-changes\",{type:t.ADD}),this.emit(\"change\",{added:e,removed:[]})}}remove(e){this._set.delete(e)&&(this.emit(\"after-changes\",{type:t.REMOVE}),this.emit(\"change\",{added:[],removed:[e]}))}removeMany(e){const s=[];for(const t of e)this._set.delete(t)&&s.push(t);s.length>0&&(this.emit(\"after-changes\",{type:t.REMOVE}),this.emit(\"change\",{added:[],removed:s}))}toArray(){return[...this._set]}find(e){let t;return s(this._set,(s=>!!e(s)&&(t=s,!0))),t}forEach(e){this._set.forEach((t=>e(t)))}}export{r as EventedSet};\n"],"names":["g","u","y","constructor","super","arguments","this","type","loadedGraphics","h","_byObjectID","Map","slicePlaneEnabled","drapeSourceType","p","fullExtentInLocalViewSpatialReference","initialize","_set","c","owner","scaleVisibilityEnabled","frustumVisibilityEnabled","addResolvingPromise","processor","setup","updatingHandles","addOnCollectionChange","_routeItems","e","_routeItemsChanged","d","then","handles","add","n","r","view","basemapTerrain","ready","notifyChange","once","destroy","removeAll","i","s","getCollections","layer","pointBarriers","polygonBarriers","polylineBarriers","stops","directionLines","directionPoints","o","routeInfo","t","removed","length","removeMany","map","get","delete","addMany","added","toPortalJSON","set","legendEnabled","canResume","frustumVisibilitySuspended","getSuspendInfo","outsideScaleRange","scaleVisibilitySuspended","outsideOfView","clientGraphics","getGraphicFromGraphicUid","whenGraphicBounds","computeAttachmentOrigin","getSymbolLayerSize","toArray","maskOccludee","highlight","updatePolicy","graphicsCore","effectiveUpdatePolicy","m","isUpdating","updating","performanceInfo","displayedNumberOfFeatures","maximumNumberOfFeatures","totalNumberOfFeatures","nodes","core","elevationUpdating","elevationAlignment","visibilityFrustum","a","prototype","readOnly","Boolean","l","f","spatialReference","fullExtent","Promise","resolve","equals","clone","state","isLocal","portalItem","destroyed","catch","Set","clear","size","emit","remove","push","find","forEach"],"sourceRoot":""}