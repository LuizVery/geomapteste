{"version":3,"file":"static/js/1283.2424cc92.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/ImageryLayerView3D.js","../node_modules/@arcgis/core/views/layers/ImageryLayerView.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{isNone as t}from\"../../../core/maybe.js\";import{debounce as a}from\"../../../core/promiseUtils.js\";import{whenOnce as i}from\"../../../core/watchUtils.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"./DynamicLayerView3D.js\";import{ImageryLayerView as o}from\"../../layers/ImageryLayerView.js\";let n=class extends(o(s)){constructor(){super(...arguments),this.type=\"imagery-3d\",this.redrawDebounced=a((async e=>{this.redraw(((e,t)=>this._redrawImage(e,t)),e)}),2e3)}initialize(){this.handles.add([i(this.view.basemapTerrain,\"ready\",(()=>this._initializeMaximumDataResolution())),this.layer.on(\"redraw\",(()=>this.updatingHandles.addPromise(this.redrawDebounced())))]),this.updatingHandles.add((()=>{var e,t;return null==(e=this.layer)||null==(t=e.exportImageServiceParameters)?void 0:t.version}),(()=>{this.updatingHandles.addPromise(this.refreshDebounced())})),this.updatingHandles.add((()=>this.timeExtent),(()=>this.updatingHandles.addPromise(this.refreshDebounced())))}_initializeMaximumDataResolution(){const e=this.view.basemapTerrain.spatialReference,t=this.layer.fullExtent;!t||e.equals(t.spatialReference),this.maximumDataResolution={x:this.layer.pixelSizeX,y:this.layer.pixelSizeY}}getFetchOptions(){return{timeExtent:this.timeExtent}}async processResult(e,t,a){t.imageElement?e.image=t.imageElement:(e.image=document.createElement(\"canvas\"),e.pixelData=t.pixelData,await this._redrawImage(e,a))}async _redrawImage(e,a){if(!(e.image instanceof HTMLCanvasElement)||t(e.pixelData))return Promise.reject();const i=e.image,r=i.getContext(\"2d\"),s=await this.layer.applyRenderer(e.pixelData,{signal:a}),o=this.layer.applyFilter(s).pixelBlock;if(t(o))return Promise.reject();i.width=o.width,i.height=o.height;const n=r.createImageData(o.width,o.height);n.data.set(o.getAsRGBA()),r.putImageData(n,0,0)}};n=e([r(\"esri.views.3d.layers.ImageryLayerView3D\")],n);const m=n;export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import p from\"../../geometry/Point.js\";import{combinedViewLayerTimeExtentProperty as i}from\"../../layers/support/commonProperties.js\";import a from\"../../rest/support/Query.js\";import{getFetchPopupTemplate as n}from\"./support/popupUtils.js\";const u=u=>{let m=class extends u{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(e,o){const{layer:s}=this;if(!e)throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:s});const{popupEnabled:i}=s,u=n(s,o);if(!i||!t(u))throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:i,popupTemplate:u});const m=await u.getRequiredFields(),c=new a;c.timeExtent=this.timeExtent,c.geometry=e,c.outFields=m,c.outSpatialReference=e.spatialReference;const l=this.view.resolution,y=\"2d\"===this.view.type?new p(l,l,this.view.spatialReference):new p(.5*l,.5*l,this.view.spatialReference),{returnTopmostRaster:h,showNoDataRecords:w}=u.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},d={returnDomainValues:!0,returnTopmostRaster:h,pixelSize:y,showNoDataRecords:w,signal:t(o)?o.signal:null};return s.queryVisibleRasters(c,d).then((e=>e))}canResume(){var e;return!!super.canResume()&&(null==(e=this.timeExtent)||!e.isEmpty)}};return e([o()],m.prototype,\"layer\",void 0),e([o()],m.prototype,\"suspended\",void 0),e([o(i)],m.prototype,\"timeExtent\",void 0),e([o()],m.prototype,\"view\",void 0),m=e([s(\"esri.views.layers.ImageryLayerView\")],m),m};export{u as ImageryLayerView,u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n"],"names":["n","o","s","constructor","super","arguments","this","type","redrawDebounced","a","async","redraw","e","t","_redrawImage","initialize","handles","add","i","view","basemapTerrain","_initializeMaximumDataResolution","layer","on","updatingHandles","addPromise","exportImageServiceParameters","version","refreshDebounced","timeExtent","spatialReference","fullExtent","equals","maximumDataResolution","x","pixelSizeX","y","pixelSizeY","getFetchOptions","imageElement","image","document","createElement","pixelData","HTMLCanvasElement","Promise","reject","r","getContext","applyRenderer","signal","applyFilter","pixelBlock","width","height","createImageData","data","set","getAsRGBA","putImageData","m","u","popupEnabled","popupTemplate","getRequiredFields","c","geometry","outFields","outSpatialReference","l","resolution","p","returnTopmostRaster","h","showNoDataRecords","w","layerOptions","d","returnDomainValues","pixelSize","queryVisibleRasters","then","canResume","isEmpty","prototype","fieldsIndex","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","includes","f","push","has","indexOf","forEach","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate"],"sourceRoot":""}