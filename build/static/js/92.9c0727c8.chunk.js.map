{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js","../node_modules/@arcgis/core/core/AsyncSequence.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/PendingFeatureTile.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiledFetcher.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileCache.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceSnappingSourceWorker.js","../node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js","../node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","../node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js"],"names":["m","e","this","geometryInfo","_boundsStore","h","_featuresById","Map","_markedIds","Set","events","t","featureAdapter","u","geometryType","hasM","hasZ","size","numFeatures","a","d","forEach","r","get","objectId","Math","min","max","s","geometry","coords","length","featureCount","vertexCount","_add","_emitChanged","clear","_remove","invalidateIndex","i","has","forEachInBounds","emit","add","displayId","delete","onFeatureAdd","o","set","n","getLogger","error","feature","onFeatureRemove","arguments","updating","pending","push","promise","callback","process","then","catch","shift","prototype","data","resolution","state","type","alive","gotoFetchCount","task","resume","gotoFetchFeatures","goToDone","stateToString","previous","features","fetchCount","gotoFetchedCount","ok","value","fetchFeatures","gotoFetchedFeatures","finish","abort","extent","S","O","tilesOfInterest","availability","pendingTiles","pendingEdits","pendingEditsAbortController","store","featureStore","_get","filterProperties","JSON","stringify","_set","filter","customParameters","tileInfo","tileSize","updatingHandles","initializeFetchExtent","refresh","id","deletePendingTile","destroy","addedFeatures","updatedFeatures","deletedFeatures","reset","map","globalId","lookupObjectIdByGlobalId","addPromise","processEdits","queryFeaturesById","signal","processPendingTiles","capabilities","query","supportsExtent","c","F","url","P","where","outSpatialReference","spatialReference","cacheHint","supportsCacheHint","configuration","f","fromJSON","warn","handles","numberOfFeatures","Array","from","values","debugInfo","storedTiles","markTilesNotAlive","createPendingTiles","deletePendingTiles","collectMissingTilesInfo","setAvailability","coveredArea","fullArea","missingTiles","createPendingTile","verifyTileComplexity","prepend","finishPendingTile","ensureFetchAllCounts","getFeatureCount","verifyVertexComplexity","verifyFeatureDensity","minimumVerticesPerFeature","j","w","E","updateAvailability","I","createCountQuery","timeout","x","createFeaturesQuery","setPagingParameters","queryFeatures","exceededTransferLimit","l","num","concat","gdbVersion","timeExtent","globalIdField","objectIdField","Error","attributes","objectIds","supportsFormatPBF","queryFeaturesPBF","queryFeaturesJSON","sourceSpatialReference","T","b","g","v","createBaseQuery","outFields","returnGeometry","supportsResultType","resultType","returnZ","returnM","y","supportsPagination","supportsMaxRecordCountFactor","tileMaxRecordCount","maxRecordCount","MAX_MAX_RECORD_COUNT_FACTOR","C","start","maxRecordCountFactor","ceil","constructOnly","readOnly","p","_store","_byteSize","byteSize","used","Symbol","iterator","maximumByteSize","tileBounds","tiles","refCounts","tileFeatureCounts","tmpBoundingRect","referenceFeature","addTileStorage","reduce","lengths","addMany","applyByteSizeLimit","removeTileStorage","processEditsDelete","processEditsRefetch","unreferenceFeature","removeManyById","createTileTree","simplify","collectMissingTiles","count","level","row","col","updateTileInfo","tilesAreRelated","populateChildren","floor","isLeaf","children","remove","mergeChildren","purge","forEachLeaf","collectMissingTilesRecurse","info","hasChildren","addMissing","featureReferences","keys","isInitializing","whenSetup","pendingApplyEdits","featureFetcher","queryEngine","serviceInfo","timeInfo","fields","watch","notifyUpdating","resolve","configure","updateFeatureFetcherConfiguration","result","executeQueryForSnapping","point","distance","types","applyEdits","edits","EventedAccessor","compareMinX","compareMinY","toBBox","_maxEntries","_minEntries","_initFormat","M","prune","X","Y","B","_all","leaf","pop","insert","_build","slice","height","_splitRoot","_insert","indexHint","splice","_condense","pushArray","log","sqrt","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","_allDistMargin","sort","Function","join","minX","minY","maxX","maxY","deallocator","getObjectId","getAttributes","getAttribute","cloneWithGeometry","getGeometry","getCentroid","centroid","_indexInvalid","_boundsToLoad","_boundsById","_idByBounds","_index","_loadIndex","load","search"],"mappings":"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","file":"static/js/92.9c0727c8.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Evented.js\";import r from\"../../../core/Logger.js\";import{isSome as s,isNone as o}from\"../../../core/maybe.js\";import{fromRect as i}from\"../../../geometry/support/aaBoundingBox.js\";import{create as a,NEGATIVE_INFINITY as d}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as n}from\"../featureConversionUtils.js\";import{BoundsStore as h}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as u}from\"./optimizedFeatureQueryEngineAdapter.js\";class m{constructor(e){this.geometryInfo=e,this._boundsStore=new h,this._featuresById=new Map,this._markedIds=new Set,this.events=new t,this.featureAdapter=u}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=a(d);return this._featuresById.forEach((t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{s(t.geometry)&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(i(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(t){if(!t)return;const i=t.objectId;if(null==i)return void r.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new e(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:t}));const d=this._featuresById.get(i);let h;if(this._markedIds.add(i),d?(t.displayId=d.displayId,h=this._boundsStore.get(i),this._boundsStore.delete(i)):s(this.onFeatureAdd)&&this.onFeatureAdd(t),o(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,t);h=n(s(h)?h:a(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),s(h)&&this._boundsStore.set(i,h),this._featuresById.set(i,t)}_remove(e){return s(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import t from\"./Accessor.js\";import{property as e}from\"./accessorSupport/decorators/property.js\";import{subclass as i}from\"./accessorSupport/decorators/subclass.js\";let r=class extends t{constructor(){super(...arguments),this.updating=!1,this.pending=[]}push(s,t){this.pending.push({promise:s,callback:t}),1===this.pending.length&&this.process()}process(){if(!this.pending.length)return void(this.updating=!1);this.updating=!0;const s=this.pending[0];s.promise.then((t=>s.callback(t))).catch((()=>{})).then((()=>{this.pending.shift(),this.process()}))}};s([e()],r.prototype,\"updating\",void 0),r=s([i(\"esri.core.AsyncSequence\")],r);export{r as AsyncSequence};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{resultOrAbort as t}from\"../../../../../core/asyncUtils.js\";import{isNone as e}from\"../../../../../core/maybe.js\";import{createTask as s}from\"../../../../../core/promiseUtils.js\";import{create as a,fromExtent as r,intersects as o}from\"../../../../../geometry/support/aaBoundingRect.js\";class u{constructor(t,e){this.data=t,this.resolution=e,this.state={type:0},this.alive=!0}process(t){switch(this.state.type){case 0:return this.state=this.gotoFetchCount(this.state,t),this.state.task.promise.then(t.resume,t.resume);case 1:break;case 2:return this.state=this.gotoFetchFeatures(this.state,t),this.state.task.promise.then(t.resume,t.resume);case 3:break;case 4:this.state=this.goToDone(this.state,t)}return null}get debugInfo(){return{data:this.data,featureCount:this.featureCount,state:this.stateToString}}get featureCount(){switch(this.state.type){case 0:case 1:return 0;case 2:return this.state.featureCount;case 3:return this.state.previous.featureCount;case 4:return this.state.features.length;case 5:return this.state.previous.features.length}}get stateToString(){switch(this.state.type){case 0:return\"created\";case 1:return\"fetch-count\";case 2:return\"fetched-count\";case 3:return\"fetch-features\";case 4:return\"fetched-features\";case 5:return\"done\"}}gotoFetchCount(e,a){return{type:1,previous:e,task:s((async e=>{const s=await t(a.fetchCount(this,e));1===this.state.type&&(this.state=this.gotoFetchedCount(this.state,s.ok?s.value:1/0))}))}}gotoFetchedCount(t,e){return{type:2,featureCount:e,previous:t}}gotoFetchFeatures(e,a){return{type:3,previous:e,task:s((async s=>{const r=await t(a.fetchFeatures(this,e.featureCount,s));3===this.state.type&&(this.state=this.gotoFetchedFeatures(this.state,r.ok?r.value:[]))}))}}gotoFetchedFeatures(t,e){return{type:4,previous:t,features:e}}goToDone(t,e){return e.finish(this,t.features),{type:5,previous:t}}reset(){const t=this.state;switch(this.state={type:0},t.type){case 0:case 2:case 4:case 5:break;case 1:case 3:t.task.abort()}}intersects(t){return!(!e(t)&&this.data.extent)||(r(t,i),o(this.data.extent,i))}}const i=a();export{u as PendingFeatureTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{equals as t}from\"../../../../../core/arrayUtils.js\";import{AsyncSequence as i}from\"../../../../../core/AsyncSequence.js\";import{HandleOwner as s}from\"../../../../../core/HandleOwner.js\";import{makeHandle as r}from\"../../../../../core/handleUtils.js\";import o from\"../../../../../core/Logger.js\";import{isSome as n,isNone as a,unwrap as l}from\"../../../../../core/maybe.js\";import{createAbortController as u,createTask as c,throwIfAbortError as d}from\"../../../../../core/promiseUtils.js\";import{property as h}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import f from\"../../../../../geometry/Extent.js\";import{toExtent as y}from\"../../../../../geometry/support/aaBoundingRect.js\";import{unquantizeOptimizedFeatureSet as g,convertFromFeatureSet as m}from\"../../../../../layers/graphics/featureConversionUtils.js\";import{OptimizedFeatureSetParserContext as b}from\"../../../../../rest/query/operations/pbfOptimizedFeatureSet.js\";import{executeQueryForExtent as F,executeQueryPBF as T,executeQuery as v}from\"../../../../../rest/query/operations/query.js\";import P from\"../../../../../rest/support/Query.js\";import{PendingFeatureTile as I}from\"./PendingFeatureTile.js\";const S=o.getLogger(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher\");let O=class extends s{constructor(e){super(e),this.tilesOfInterest=[],this.availability=0,this.pendingTiles=new Map,this.pendingEdits=new i,this.pendingEditsAbortController=u()}get minimumVerticesPerFeature(){var e;switch(null==(e=this.store)?void 0:e.featureStore.geometryType){case\"esriGeometryPoint\":case\"esriGeometryMultipoint\":return 1;case\"esriGeometryPolygon\":return 4;case\"esriGeometryPolyline\":return 2}}set filter(e){const t=this._get(\"filter\"),i=this.filterProperties(e);JSON.stringify(t)!==JSON.stringify(i)&&this._set(\"filter\",i)}set customParameters(e){const t=this._get(\"customParameters\");JSON.stringify(t)!==JSON.stringify(e)&&this._set(\"customParameters\",e)}get configuration(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}set tileInfo(e){const t=this._get(\"tileInfo\");t!==e&&(n(e)&&n(t)&&JSON.stringify(e)===JSON.stringify(t)||(this._set(\"tileInfo\",e),this.store.tileInfo=e))}set tileSize(e){this._get(\"tileSize\")!==e&&this._set(\"tileSize\",e)}get updating(){return this.updatingHandles.updating||this.pendingEdits.updating}initialize(){this.initializeFetchExtent(),this.updatingHandles.add(this,\"configuration\",(()=>this.refresh())),this.updatingHandles.add(this,\"tilesOfInterest\",((e,i)=>{t(e,i,(({id:e},{id:t})=>e===t))||this.process()}),1)}destroy(){this.pendingTiles.forEach((e=>this.deletePendingTile(e))),this.pendingTiles.clear(),this.store.destroy(),this.tilesOfInterest.length=0,this.pendingEditsAbortController.abort(),this.pendingEditsAbortController=null}refresh(){this.store.refresh(),this.pendingTiles.forEach((e=>this.deletePendingTile(e))),this.process()}applyEdits(e){this.pendingEdits.push(e,(async e=>{if(0===e.addedFeatures.length&&0===e.updatedFeatures.length&&0===e.deletedFeatures.length)return;for(const[,i]of this.pendingTiles)i.reset();const t={...e,deletedFeatures:e.deletedFeatures.map((({objectId:e,globalId:t})=>e&&-1!==e?e:this.lookupObjectIdByGlobalId(t)))};await this.updatingHandles.addPromise(this.store.processEdits(t,((e,t)=>this.queryFeaturesById(e,t)),this.pendingEditsAbortController.signal)),this.processPendingTiles()}))}initializeFetchExtent(){if(!this.capabilities.query.supportsExtent)return;const e=c((async e=>{try{var t;const i=await F(this.url,new P({where:\"1=1\",outSpatialReference:this.spatialReference,cacheHint:!!this.capabilities.query.supportsCacheHint||void 0}),{query:this.configuration.customParameters,signal:e});this.store.extent=f.fromJSON(null==(t=i.data)?void 0:t.extent)}catch(i){d(i),S.warn(\"Failed to fetch data extent\",i)}}));this.updatingHandles.addPromise(e.promise.then((()=>this.process()))),this.handles.add(r((()=>e.abort())))}get debugInfo(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this.pendingTiles.values()).map((e=>e.debugInfo)),storedTiles:this.store.debugInfo}}process(){this.markTilesNotAlive(),this.createPendingTiles(),this.deletePendingTiles(),this.processPendingTiles()}markTilesNotAlive(){for(const[,e]of this.pendingTiles)e.alive=!1}createPendingTiles(){const e=this.collectMissingTilesInfo();if(this.setAvailability(a(e)?1:e.coveredArea/e.fullArea),!a(e))for(const{data:t,resolution:i}of e.missingTiles){const e=this.pendingTiles.get(t.id);e?(e.resolution=i,e.alive=!0):this.createPendingTile(t,i)}}collectMissingTilesInfo(){let e=null;for(let t=this.tilesOfInterest.length-1;t>=0;t--){const i=this.tilesOfInterest[t],s=this.store.process(i,((e,t)=>this.verifyTileComplexity(e,t)));a(e)?e=s:e.prepend(s)}return e}deletePendingTiles(){for(const[,e]of this.pendingTiles)e.alive||this.deletePendingTile(e)}processPendingTiles(){const e={fetchCount:(e,t)=>this.fetchCount(e,t),fetchFeatures:(e,t,i)=>this.fetchFeatures(e,t,i),finish:(e,t)=>this.finishPendingTile(e,t),resume:()=>this.processPendingTiles()};if(this.ensureFetchAllCounts(e))for(const[,t]of this.pendingTiles)this.verifyTileComplexity(this.store.getFeatureCount(t.data),t.resolution)&&this.updatingHandles.addPromise(t.process(e))}verifyTileComplexity(e,t){return this.verifyVertexComplexity(e)&&this.verifyFeatureDensity(e,t)}verifyVertexComplexity(e){return e*this.minimumVerticesPerFeature<j}verifyFeatureDensity(e,t){if(a(this.tileInfo))return!1;const i=this.tileSize*t;return e*(w/(i*i))<E}ensureFetchAllCounts(e){let t=!0;for(const[,i]of this.pendingTiles)i.state.type<2&&this.updatingHandles.addPromise(i.process(e)),i.state.type<=1&&(t=!1);return t}finishPendingTile(e,t){this.store.add(e.data,t),this.deletePendingTile(e),this.updateAvailability()}updateAvailability(){const e=this.collectMissingTilesInfo();this.setAvailability(a(e)?1:e.coveredArea/e.fullArea)}setAvailability(e){this._set(\"availability\",e)}createPendingTile(e,t){const i=new I(e,t);return this.pendingTiles.set(e.id,i),i}deletePendingTile(e){e.reset(),this.pendingTiles.delete(e.data.id)}async fetchCount(e,t){return this.store.fetchCount(e.data,this.url,this.createCountQuery(e),{query:this.customParameters,timeout:x,signal:t})}async fetchFeatures(e,t,i){let s,r=0,o=0,n=t;for(;;){const a=this.createFeaturesQuery(e),u=this.setPagingParameters(a,r,n),{features:c,exceededTransferLimit:d}=await this.queryFeatures(a,i);if(u&&(r+=l(a.num)),o+=c.length,s=s?s.concat(c):c,n=t-o,!u||!d||n<=0)return s}}filterProperties(e){return a(e)?{where:\"1=1\",gdbVersion:void 0,timeExtent:void 0}:{where:e.where||\"1=1\",timeExtent:e.timeExtent,gdbVersion:e.gdbVersion}}lookupObjectIdByGlobalId(e){const t=this.globalIdField,i=this.objectIdField;if(a(t))throw new Error(\"Expected globalIdField to be defined\");let s=null;if(this.store.featureStore.forEach((r=>{var o;e===r.attributes[t]&&(s=null!=(o=r.objectId)?o:r.attributes[i])})),a(s))throw new Error(`Expected to find a feature with globalId ${e}`);return s}queryFeaturesById(e,t){const i=this.createFeaturesQuery(null);return i.objectIds=e,this.queryFeatures(i,t)}queryFeatures(e,t){return this.capabilities.query.supportsFormatPBF?this.queryFeaturesPBF(e,t):this.queryFeaturesJSON(e,t)}async queryFeaturesPBF(e,t){const{sourceSpatialReference:i}=this,{data:s}=await T(this.url,e,new b({sourceSpatialReference:i}),{query:this.configuration.customParameters,timeout:x,signal:t});return g(s)}async queryFeaturesJSON(e,t){const{sourceSpatialReference:i}=this,{data:s}=await v(this.url,e,i,{query:this.configuration.customParameters,timeout:x,signal:t});return m(s,this.objectIdField)}createCountQuery(e){const t=this.createBaseQuery(e);return this.capabilities.query.supportsCacheHint&&(t.cacheHint=!0),t}createFeaturesQuery(e){const t=this.createBaseQuery(e);return t.outFields=this.globalIdField?[this.globalIdField,this.objectIdField]:[this.objectIdField],t.returnGeometry=!0,n(e)&&(this.capabilities.query.supportsResultType?t.resultType=\"tile\":this.capabilities.query.supportsCacheHint&&(t.cacheHint=!0)),t}createBaseQuery(e){const t=new P({returnZ:!1,returnM:!1,geometry:n(this.tileInfo)&&n(e)?y(e.data.extent,this.tileInfo.spatialReference):void 0}),i=this.configuration.filter;return n(i)&&(t.where=i.where,t.gdbVersion=i.gdbVersion,t.timeExtent=i.timeExtent),t.outSpatialReference=this.spatialReference,t}setPagingParameters(e,t,i){if(!this.capabilities.query.supportsPagination)return!1;const{supportsMaxRecordCountFactor:s,supportsCacheHint:r,tileMaxRecordCount:o,maxRecordCount:n,supportsResultType:a}=this.capabilities.query,l=s?P.MAX_MAX_RECORD_COUNT_FACTOR:1,u=l*((a||r)&&o?o:n||C);return e.start=t,s?(e.maxRecordCountFactor=Math.min(l,Math.ceil(i/u)),e.num=Math.min(i,e.maxRecordCountFactor*u)):e.num=Math.min(i,u),!0}};e([h({constructOnly:!0})],O.prototype,\"url\",void 0),e([h({constructOnly:!0})],O.prototype,\"objectIdField\",void 0),e([h({constructOnly:!0})],O.prototype,\"globalIdField\",void 0),e([h({constructOnly:!0})],O.prototype,\"capabilities\",void 0),e([h({constructOnly:!0})],O.prototype,\"sourceSpatialReference\",void 0),e([h({constructOnly:!0})],O.prototype,\"spatialReference\",void 0),e([h({constructOnly:!0})],O.prototype,\"store\",void 0),e([h({readOnly:!0})],O.prototype,\"minimumVerticesPerFeature\",null),e([h()],O.prototype,\"filter\",null),e([h()],O.prototype,\"customParameters\",null),e([h({readOnly:!0})],O.prototype,\"configuration\",null),e([h()],O.prototype,\"tileInfo\",null),e([h()],O.prototype,\"tileSize\",null),e([h()],O.prototype,\"tilesOfInterest\",void 0),e([h({readOnly:!0})],O.prototype,\"updating\",null),e([h({readOnly:!0})],O.prototype,\"availability\",void 0),O=e([p(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher\")],O);const C=2e3,x=6e5,j=1e6,w=25,E=1;export{O as FeatureServiceTiledFetcher};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nclass t{constructor(){this._store=new Map,this._byteSize=0}set(t,e){this.delete(t),this._store.set(t,e),this._byteSize+=e.byteSize}delete(t){const e=this._store.get(t);return!!this._store.delete(t)&&(this._byteSize-=e.byteSize,!0)}get(t){return this.used(t),this._store.get(t)}has(t){return this.used(t),this._store.has(t)}clear(){this._store.clear()}applyByteSizeLimit(t,e){for(const[s,r]of this._store){if(this._byteSize<=t)break;this.delete(s),e(r)}}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}used(t){const e=this._store.get(t);e&&(this._store.delete(t),this._store.set(t,e))}}export{t as FeatureServiceTileCache};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Accessor.js\";import{estimateAttributesObjectSize as s,estimateFixedArraySize as i}from\"../../../../../core/byteSizeEstimations.js\";import{isNone as r,isSome as o}from\"../../../../../core/maybe.js\";import{property as n}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as l}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{create as c,intersects as a,fromExtent as h,area as u}from\"../../../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as d}from\"../../../../../layers/graphics/featureConversionUtils.js\";import{BoundsStore as f}from\"../../../../../layers/graphics/data/BoundsStore.js\";import{executeQueryForCount as p}from\"../../../../../rest/query/operations/query.js\";import{FeatureServiceTileCache as m}from\"./FeatureServiceTileCache.js\";let g=class extends t{constructor(e){super(e),this.tileInfo=null,this.extent=null,this.maximumByteSize=10485760,this.tileBounds=new f,this.tiles=new m,this.refCounts=new Map,this.tileFeatureCounts=new Map,this.tmpBoundingRect=c()}add(e,t){const s=[];for(const i of t)0===this.referenceFeature(i.objectId)&&s.push(i);this.addTileStorage(e,new Set(t.map((({objectId:e})=>e))),v(t)),this.featureStore.addMany(s),this.tiles.applyByteSizeLimit(this.maximumByteSize,(e=>this.removeTileStorage(e)))}destroy(){this.clear(),this.tileFeatureCounts.clear()}clear(){this.featureStore.clear(),this.tileBounds.clear(),this.tiles.clear(),this.refCounts.clear()}refresh(){this.clear(),this.tileFeatureCounts.clear()}processEdits(e,t,s){return this.processEditsDelete(e.deletedFeatures.concat(e.updatedFeatures)),this.processEditsRefetch(e.addedFeatures.concat(e.updatedFeatures),t,s)}addTileStorage(e,t,s){this.tiles.set(e.id,new S(e,t,s)),this.tileBounds.set(e.id,e.extent),this.tileFeatureCounts.set(e.id,t.size)}remove({id:e}){const t=this.tiles.get(e);t&&this.removeTileStorage(t)}removeTileStorage(e){const t=[];for(const i of e.objectIds)1===this.unreferenceFeature(i)&&t.push(i);this.featureStore.removeManyById(t);const s=e.data.id;this.tiles.delete(s),this.tileBounds.delete(s)}processEditsDelete(e){this.featureStore.removeManyById(e);for(const[,t]of this.tiles){for(const s of e)t.objectIds.delete(s);this.tileFeatureCounts.set(t.data.id,t.objectIds.size)}for(const t of e)this.refCounts.delete(t)}async processEditsRefetch(e,t,s){const i=(await t(e,s)).features,{hasZ:o,hasM:n}=this.featureStore;for(const l of i){const e=d(this.tmpBoundingRect,l.geometry,o,n);r(e)||this.tileBounds.forEachInBounds(e,(e=>{const t=this.tiles.get(e);this.featureStore.add(l),t.objectIds.has(l.objectId)||(t.objectIds.add(l.objectId),this.referenceFeature(l.objectId),this.tileFeatureCounts.set(t.data.id,t.objectIds.size))}))}}process(e,t=(()=>!0)){if(r(this.tileInfo)||!e.extent||o(this.extent)&&!a(h(this.extent,this.tmpBoundingRect),e.extent))return new j(e);if(this.tiles.has(e.id))return new j(e);const s=this.createTileTree(e,this.tileInfo);return this.simplify(s,t,null,0,1),this.collectMissingTiles(e,s,this.tileInfo)}get debugInfo(){return Array.from(this.tiles.values()).map((({data:e})=>({data:e,featureCount:this.tileFeatureCounts.get(e.id)||0})))}getFeatureCount(e){const t=this.tileFeatureCounts.get(e.id);return null!=t?t:0}async fetchCount(e,t,s,i){const r=this.tileFeatureCounts.get(e.id);if(null!=r)return r;const o=await p(t,s,i);return this.tileFeatureCounts.set(e.id,o.data.count),o.data.count}createTileTree(e,t){const s=new I(e.level,e.row,e.col);return t.updateTileInfo(s,1),this.tileBounds.forEachInBounds(e.extent,(i=>{const r=this.tiles.get(i).data;this.tilesAreRelated(e,r)&&this.populateChildren(s,r,t,this.tileFeatureCounts.get(r.id)||0)})),s}tilesAreRelated(e,t){if(!e||!t)return!1;if(e.level===t.level)return e.row===t.row&&e.col===t.col;const s=e.level<t.level,i=s?e:t,r=s?t:e,o=1<<r.level-i.level;return Math.floor(r.row/o)===i.row&&Math.floor(r.col/o)===i.col}populateChildren(e,t,s,i){const r=t.level-e.level-1;if(r<0)return void(e.isLeaf=!0);const n=t.row>>r,l=t.col>>r,c=e.row<<1,a=l-(e.col<<1)+(n-c<<1),h=e.children[a];if(o(h))this.populateChildren(h,t,s,i);else{const r=new I(e.level+1,n,l);s.updateTileInfo(r,1),e.children[a]=r,this.populateChildren(r,t,s,i)}}simplify(e,t,s,i,r){const n=r*r;if(e.isLeaf)return t(this.getFeatureCount(e),r)?0:(this.remove(e),o(s)&&(s.children[i]=null),n);const l=r/2,c=l*l;let a=0;for(let h=0;h<e.children.length;h++){const s=e.children[h];a+=o(s)?this.simplify(s,t,e,h,l):c}return 0===a?this.mergeChildren(e):1-a/n<F&&(this.purge(e),o(s)&&(s.children[i]=null),a=n),a}mergeChildren(e){const t=new Set;let s=0;this.forEachLeaf(e,(e=>{const i=this.tiles.get(e.id);if(i){s+=i.byteSize;for(const e of i.objectIds)t.has(e)||(t.add(e),this.referenceFeature(e));this.remove(e)}})),this.addTileStorage(e,t,s),e.isLeaf=!0,e.children[0]=e.children[1]=e.children[2]=e.children[3]=null,this.tileFeatureCounts.set(e.id,t.size)}forEachLeaf(e,t){for(const s of e.children)r(s)||(s.isLeaf?t(s):this.forEachLeaf(s,t))}purge(e){if(!r(e))if(e.isLeaf)this.remove(e);else for(let t=0;t<e.children.length;t++){const s=e.children[t];this.purge(s),e.children[t]=null}}collectMissingTiles(e,t,s){const i=new w(s,e,this.extent);return this.collectMissingTilesRecurse(t,i,1),i.info}collectMissingTilesRecurse(e,t,s){if(e.isLeaf)return;if(!e.hasChildren)return void t.addMissing(e.level,e.row,e.col,s);const i=s/2;for(let o=0;o<e.children.length;o++){const s=e.children[o];r(s)?t.addMissing(e.level+1,(e.row<<1)+((2&o)>>1),(e.col<<1)+(1&o),i):this.collectMissingTilesRecurse(s,t,i)}}referenceFeature(e){const t=(this.refCounts.get(e)||0)+1;return this.refCounts.set(e,t),1===t?0:2}unreferenceFeature(e){const t=(this.refCounts.get(e)||0)-1;return 0===t?(this.refCounts.delete(e),1):(t>0&&this.refCounts.set(e,t),2)}get test(){return{tiles:Array.from(this.tiles.values()).map((e=>`${e.data.id}:[${Array.from(e.objectIds)}]`)),featureReferences:Array.from(this.refCounts.keys()).map((e=>`${e}:${this.refCounts.get(e)}`))}}};function v(e){return e.reduce(((e,t)=>e+y(t)),0)}function y(e){return 32+C(e.geometry)+s(e.attributes)}function C(e){if(r(e))return 0;const t=i(e.lengths,4);return 32+i(e.coords,8)+t}e([n({constructOnly:!0})],g.prototype,\"featureStore\",void 0),e([n()],g.prototype,\"tileInfo\",void 0),e([n()],g.prototype,\"extent\",void 0),e([n()],g.prototype,\"maximumByteSize\",void 0),g=e([l(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore\")],g);class S{constructor(e,t,s){this.data=e,this.objectIds=t,this.byteSize=s}}class I{constructor(e,t,s){this.level=e,this.row=t,this.col=s,this.isLeaf=!1,this.extent=null,this.children=[null,null,null,null]}get hasChildren(){return!this.isLeaf&&(o(this.children[0])||o(this.children[1])||o(this.children[2])||o(this.children[3]))}}class j{constructor(e,t=[]){this.missingTiles=t,this.fullArea=0,this.coveredArea=0,this.fullArea=u(e.extent),this.coveredArea=this.fullArea}prepend(e){this.missingTiles=e.missingTiles.concat(this.missingTiles),this.coveredArea+=e.coveredArea,this.fullArea+=e.fullArea}}class w{constructor(e,t,s){this.tileInfo=e,this.extent=null,this.info=new j(t),o(s)&&(this.extent=h(s))}addMissing(e,t,s,i){const r={id:null,level:e,row:t,col:s};this.tileInfo.updateTileInfo(r,1),!o(r.extent)||o(this.extent)&&!a(this.extent,r.extent)||(this.info.missingTiles.push({data:r,resolution:i}),this.info.coveredArea-=u(r.extent))}}const F=.18751;export{g as FeatureServiceTileStore,j as ProcessResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Evented.js\";import i from\"../../../../../core/Handles.js\";import{isSome as r}from\"../../../../../core/maybe.js\";import{createDeferred as s,throwIfAborted as a,whenOrAbort as n}from\"../../../../../core/promiseUtils.js\";import{whenNotOnce as o}from\"../../../../../core/watchUtils.js\";import{property as p}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as u}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import l from\"../../../../../geometry/SpatialReference.js\";import c from\"../../../../../layers/graphics/data/FeatureStore.js\";import d from\"../../../../../layers/graphics/data/QueryEngine.js\";import h from\"../../../../../layers/support/TileInfo.js\";import f from\"../../../../../layers/support/TimeInfo.js\";import m from\"../../../../../rest/support/Query.js\";import{FeatureServiceTiledFetcher as g}from\"./FeatureServiceTiledFetcher.js\";import{FeatureServiceTileStore as y}from\"./FeatureServiceTileStore.js\";import{WatchUpdatingTracking as S}from\"../../../../support/WatchUpdatingTracking.js\";let w=class extends t.EventedAccessor{constructor(){super(...arguments),this.isInitializing=!0,this.whenSetup=s(),this.handles=new i,this.updatingHandles=new S,this.pendingApplyEdits=new Map}get updating(){return this.featureFetcher.updating||this.isInitializing||this.updatingHandles.updating}destroy(){this.featureFetcher.destroy(),this.queryEngine.destroy(),this.featureStore.clear(),this.handles.destroy()}async setup(e){const{geometryType:t,objectIdField:i,timeInfo:r,fields:s}=e.serviceInfo;return this.featureStore=new c({...e.serviceInfo,hasZ:!1,hasM:!1}),this.queryEngine=new d({spatialReference:e.spatialReference,featureStore:this.featureStore,geometryType:t,fields:s,hasZ:!1,hasM:!1,objectIdField:i,timeInfo:r?f.fromJSON(r):null}),this.featureFetcher=new g({store:new y({featureStore:this.featureStore}),url:e.serviceInfo.url,objectIdField:e.serviceInfo.objectIdField,globalIdField:e.serviceInfo.globalIdField,capabilities:e.serviceInfo.capabilities,spatialReference:l.fromJSON(e.spatialReference),sourceSpatialReference:l.fromJSON(e.serviceInfo.spatialReference)}),this.handles.add([this.featureFetcher.watch(\"availability\",(e=>this.emit(\"notify-availability\",{availability:e})),!0),this.watch(\"updating\",(()=>this.notifyUpdating()))]),this.whenSetup.resolve(),this.isInitializing=!1,this.configure(e.configuration)}async configure(e){return await this.updatingHandles.addPromise(this.whenSetup.promise),this.updateFeatureFetcherConfiguration(e),{result:{}}}async fetchCandidates(e,t){await this.whenSetup.promise,a(t);return{result:await this.queryEngine.executeQueryForSnapping({point:e.point,distance:e.distance,types:e.types,query:r(e.filter)?e.filter:{where:\"1=1\"}},r(t)?t.signal:null)}}async updateTiles(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),a(t),this.featureFetcher.tileSize=e.tileSize,this.featureFetcher.tilesOfInterest=e.tiles,this.featureFetcher.tileInfo=r(e.tileInfo)?h.fromJSON(e.tileInfo):null,{result:{}}}async refresh(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),a(t),this.featureFetcher.refresh(),{result:{}}}async whenNotUpdating(e,t){return await this.updatingHandles.addPromise(this.whenSetup.promise),a(t),await n(o(this,\"updating\"),t),{result:{}}}async getDebugInfo(e,t){return a(t),{result:this.featureFetcher.debugInfo}}async beginApplyEdits(e,t){this.updatingHandles.addPromise(this.whenSetup.promise),a(t);const i=s();return this.pendingApplyEdits.set(e.id,i),this.featureFetcher.applyEdits(i.promise),this.updatingHandles.addPromise(i.promise),{result:{}}}async endApplyEdits(e,t){const i=this.pendingApplyEdits.get(e.id);return i&&i.resolve(e.edits),a(t),{result:{}}}updateFeatureFetcherConfiguration(e){this.featureFetcher.filter=r(e.filter)?m.fromJSON(e.filter):null,this.featureFetcher.customParameters=e.customParameters}notifyUpdating(){this.emit(\"notify-updating\",{updating:this.updating})}};function F(){return new w}e([p({readOnly:!0})],w.prototype,\"updating\",null),e([p()],w.prototype,\"isInitializing\",void 0),w=e([u(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker\")],w);export{w as FeatureServiceSnappingSourceWorker,F as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{indexOf as t,PositionHint as i}from\"../../arrayUtils.js\";import{assumeNonNull as n}from\"../../maybe.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this.toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),M.prune(),X.prune(),Y.prune(),B.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this.toBBox;if(p(t,n))for(M.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):x(t,a)?this._all(h,i):M.push(h))}n=M.pop()}}collides(t){let i=this.data;const n=this.toBBox;if(!p(t,i))return!1;for(M.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||x(t,h))return!0;M.push(s)}}i=M.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(i){if(!i)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this.toBBox(i);for(Y.clear(),B.clear();s||Y.length>0;){var l;if(!s)s=n(Y.pop()),h=Y.data[Y.length-1],a=null!=(l=B.pop())?l:0,r=!0;if(s.leaf&&(e=t(s.children,i,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),Y.push(s),this._condense(Y),this;r||s.leaf||!x(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(Y.push(s),B.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(X.clear();n;){var e;if(!0===n.leaf)for(const t of n.children)i(t);else X.pushArray(n.children);n=null!=(e=X.pop())?e:null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this.toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));g(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);g(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this.toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this.toBBox,s=n?t:e(t);Y.clear();const h=this._chooseSubtree(s,this.data,i,Y);for(h.children.push(t),o(h,s);i>=0&&Y.data[i].children.length>this._maxEntries;)this._split(Y,i),i--;this._adjustParentBBoxes(s,Y,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this.toBBox),a(o,this.toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this.toBBox),o=r(t,a,n,this.toBBox),l=f(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this.toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=u(h)+u(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=u(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=u(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice(t(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this.toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this.toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function f(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function x(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function g(t,i,e,h,a){const r=[i,e];for(;r.length;){const i=n(r.pop()),e=n(r.pop());if(i-e<=h)continue;const o=e+Math.ceil((i-e)/h/2)*h;s(t,o,e,i,a),r.push(e,o,o,i)}}const M=new e,X=new e,Y=new e,B=new e({deallocator:void 0});class _{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends _{constructor(){super(...arguments),this.height=1,this.indexHint=new i}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export{_ as BBox,h as PooledRBush,h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{getCentroidOptimizedGeometry as t}from\"../centroid.js\";import e from\"../OptimizedFeature.js\";import r from\"../OptimizedGeometry.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,r)=>new e(r,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(e,o)=>(e.centroid||(e.centroid=t(new r,e.geometry,o.hasZ,o.hasM)),e.centroid)};export{o as default,o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport i from\"../../../core/has.js\";import{PooledRBush as s}from\"../../../core/libs/rbush/PooledRBush.js\";const d=5e4,n={minX:0,minY:0,maxX:0,maxY:0};function t(i,s,d){n.minX=s[0],n.minY=s[1],n.maxX=s[2],n.maxY=s[3],i.search(n,d)}class e{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s(9,i(\"csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),t(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>d&&this._loadIndex()))}}export{e as BoundsStore};\n"],"sourceRoot":""}