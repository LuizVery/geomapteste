{"version":3,"sources":["../node_modules/@arcgis/core/views/3d/support/GraphicsMap.js","../node_modules/@arcgis/core/views/3d/layers/i3s/I3SFrameTask.js","../node_modules/@arcgis/core/views/3d/layers/i3s/I3SNode.js","../node_modules/@arcgis/core/views/3d/layers/i3s/I3SIndex.js","../node_modules/@arcgis/core/views/3d/layers/i3s/I3SLodHandling.js","../node_modules/@arcgis/core/views/3d/layers/i3s/I3SNodeLoader.js","../node_modules/@arcgis/core/views/3d/layers/i3s/I3SStreamDataController.js","../node_modules/@arcgis/core/views/3d/layers/i3s/I3SViewportQueries.js","../node_modules/@arcgis/core/layers/graphics/controllers/I3SOnDemandController.js","../node_modules/@arcgis/core/layers/support/featureQueryAll.js","../node_modules/@arcgis/core/views/3d/layers/i3s/I3SAttributeOverrides.js","../node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js","../node_modules/@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js","../node_modules/@arcgis/core/views/3d/layers/i3s/attributeEditing.js","../node_modules/@arcgis/core/views/3d/layers/support/fieldProperties.js","../node_modules/@arcgis/core/views/layers/SceneLayerView.js","../node_modules/@arcgis/core/core/AsyncUpdate.js","../node_modules/@arcgis/core/views/3d/layers/support/SceneLayerViewRequiredFields.js","../node_modules/@arcgis/core/views/3d/layers/I3SPointsWorkerHandle.js","../node_modules/@arcgis/core/views/3d/layers/SceneLayerGraphicsView3D.js","../node_modules/@arcgis/core/views/layers/support/FeatureFilter.js","../node_modules/@arcgis/core/views/3d/layers/support/attributeUtils.js","../node_modules/@arcgis/core/views/3d/layers/graphics/QueryEngine.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFrustumVisibility.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateSet.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStateSet.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStates.js","../node_modules/@arcgis/core/views/3d/layers/graphics/ExtentSet.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DElevationAlignment.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFilterVisibility.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFeatureLikeLayerView.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/material/RenderTexture.js","../node_modules/@arcgis/core/views/3d/layers/i3s/I3SMaterialUtil.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/EllipsoidMode.js"],"names":["s","arguments","_map","Map","this","size","e","toArray","clear","emit","added","removed","get","length","t","Set","r","o","objectId","n","add","refCount","set","filter","has","delete","push","values","forEach","referenceCount","callbacks","runIndex","handle","registerTask","I3S_CONTROLLER","remove","needsUpdate","sort","numIndexLoading","numNodesLoading","done","priority","update","unshift","destroy","i","id","mbs","renderMbs","imModificationImpact","h","c","a","index","childCount","level","resources","version","lodMetric","maxError","numFeatures","failed","hasModifications","cacheState","vertexCount","memory","nodeHasLOD","isChosen","lodLevel","childOffset","visibilityCache","ref","node","useAsHole","filterImpact","g","d","l","u","m","streamDataController","viewportQueries","logger","holeFilling","_isLoaded","_isReloading","_isSelected","_enable","_needsUpdate","_canRequest","_computeVisibilityObb","_computeNodeFiltering","_dirty","_nodePages","nodeCount","nodesPerPage","rootIndex","lodConversion","urlPrefix","_loading","_failedNodes","_failedPages","_indexMissing","_maxUnloadedPrio","Number","NEGATIVE_INFINITY","_maxProcessingPrio","POSITIVE_INFINITY","_nodeTraversalState","_version","b","_visibilityCacheVersion","_maxLevel","_featureEstimate","estimate","leavesReached","_unloadedMemoryEstimate","_missing","deallocator","_prefetch","_updates","f","_imModificationUncategorized","ignoreServiceObb","progressiveLoadPenalty","layerHasModifications","_layerHasFilter","logLayer","serviceUpdateTimeStamp","lastUpdate","_maxLodLevel","maxLodLevel","init","type","pageSize","M","addPage","N","rootPage","nodes","children","parents","makeRefNode","rootNode","_validateNode","addNode","request","then","catch","error","map","obb","center","halfSize","mesh","attribute","_","geometry","material","p","hasSharedResource","hasFeatureData","attributes","resource","texture","geometryDefinition","definition","materialDefinition","y","lodThreshold","featureCount","serviceObb","visibilityObb","v","updateParentsAndLevel","Array","getPage","x","pop","getNode","getChildIndex","Math","max","populateChildren","getParent","I","metricType","w","lodSelection","getNodeInternal","serviceObbInRenderSR","forAllNodes","getIndexById","getParentIndex","invalidateNodeVisibilityCacheInternal","geometryObb","traverse","isNodeVisible","P","isGeometryVisible","delta","coverage","_traverseCoverage","prune","invalidateGeometryVisibility","invalidateVisibilityCache","invalidateNodeVisibilityCache","reset","C","traverseVisible","entryPriority","_updateNodeFeatureEstimate","known","knownNodes","unremoved","missing","missingNodes","indexOf","cancel","madeProgress","filterInPlace","_computeFeatureEstimate","data","back","updateScreenSpaceErrorBias","_updateFeatureEstimate","min","_load","_loadNode","loadPage","getLodLevel","hasLOD","requestUpdate","nodeTraversalState","isArray","sharedResource","href","warn","geometryData","attributeData","some","featureData","hasOwnProperty","featureRange","textureData","distToPOI","_traverseVisible","traverseChildren","_traverseChildren","prio","features","updateElevationInfo","sqrt","PI","layerView","_lodGlobalDirty","_index","_isNodeInScaleBounds","_removeNodes","isChosenMaxLOD","_childrenRequireLoading","requiresLODGlobalHandling","view","resourceController","memoryController","usedMemory","floor","_lodGlobalHandling","isNodeLoaded","nodeCrossfadingEnabled","hasNoVisibleChildren","fadeNode","isNodeFullyFadedIn","updateNodeState","_removeChildrenRecursive","L","isNodeReloading","defaultGeometrySchema","requiredAttributes","options","layerUrl","parsedUrl","path","geometryDefinitions","materialDefinitions","textureSetDefinitions","materialAndTextures","key","load","loadAttribute","attributeStorageInfo","value","name","loadAttributes","bufferDefinition","bufferIndex","loadGeometry","loadShared","A","textures","$","loadFeatureData","T","j","featureIds","geometries","params","featureDataPosition","U","loadTextures","S","q","D","k","loadedAttributes","attributeDataInfo","geometryBuffer","geometryDescriptor","requiredTextures","pointData","Promise","reject","fixTextureEncodings","addAbsoluteHrefTexture","usage","encoding","downsampled","width","height","ceil","document","createElement","getContext","drawImage","uncompressedTextureDownsamplingEnabled","textureUsageMask","all","encodings","textureEncodings","loadTexture","textureDefinitions","Object","keys","images","hrefConcat","substring","position","vertexRegions","vertexAttributes","region","geometryBuffers","compressedAttributes","requester","apiKey","activeRequests","busy","abort","signal","query","token","response","abortController","abortHandle","E","indexSR","_renderCoordsHelper","extent","elevationProvider","_frustum","_useFrustumCulling","_poi","minDistance","maxDistance","_tmp1","_tmp2","_tmp3","_tmp0","screenspaceErrorBias","progressiveLoadFactor","updateCamera","engineSR","spatialReference","tmpPoint","_elevationContext","fromElevationInfo","updateFeatureExpressionInfoContext","viewMatrix","projectionMatrix","_screenSizeFactor","perScreenPixelRatio","_camPos","eye","z","_computeRenderObb","R","getRenderMbs","isMBSinExtent","getVisibilityObb","_updateMinMaxDistance","MAX_VALUE","calcCameraDistanceToCenter","abs","getDistanceGlobeMode","getDistancePlanarMode","evaluateLODmetric","getDistance","screenSpaceDiameterMbs","angleDependentLoD","calcAngleDependentLoD","calcCameraDistance","O","getLogger","Q","screenSizeFactor","featureTarget","fixedFeatureTarget","updating","updatingProgress","scaleVisibilityEnabled","_featureLOD","_stableFeatureLOD","_isIdle","_cameraDirty","_invisibleDirty","_newLoadingNodes","_loadedNodeScales","_modificationsNodeFilteringArray","_downloadingCount","_loadingNodes","_updatingNodes","_progressMaxNumNodes","_requiredAttributes","_requiredAttributesDirty","_updatesDisabled","disableIDBCache","_disableMemCache","_restartNodeLoading","_fields","_attributeStorageInfo","_handles","_idleQueue","_elevationUpdateNodes","_errorCount","layer","profile","store","lodType","createStreamDataRequester","_updateViewData","loadCachedGPUData","addCachedGPUData","_lodHandling","i3slayer","_defaultGeometrySchema","fields","addResolvingPromise","indexInfo","when","destroyed","_setClippingArea","clippingArea","_pointOfInterestChanged","events","on","_setCameraDirty","_updateIdleState","_idleStateCallbacks","cancelNodeLoading","restartNodeLoading","idleBegin","idleEnd","scheduler","registerIdleStateCallbacks","_frame","watch","state","_elevationInfoChanged","_scaleBoundsChanged","_requiredFieldsChange","_updateScaleHandles","_viewportQueries","V","crsIndex","renderCoordsHelper","contentCamera","fixedContentCamera","isGraphics3D","_clippingArea","elevationInfo","_getProgressiveLoadFactor","lod","indexStreamController","_shouldLoadNode","_enableFromGPUCache","computeVisibilityObb","computeNodeFiltering","modifications","imModificationsChanged","_startNodeLoading","_tmpPoint","updateNodeModificationStatus","forAll","_nodeLoader","H","hide","availableFields","objectIdField","field","_getRequiredAttributes","renderSpatialReference","setPointOfInterest","K","distancePenalty","distCameraToPOI","updateExtent","notifyChange","setLodGlobalDirty","_evaluateUpdating","invalidateBoundingVolumeCache","areScaleBoundsActive","basemapTerrain","_scaleUpdateHandler","_updateScaleInBoundingRect","scale","F","minScale","maxScale","suspended","getUnloadedMemoryEstimate","lodDropFactor","maxLevel","visible","_processLogError","getPriority","_process","_removeInvisibleNodes","isIntegratedMesh","enabled","run","_processIndex","_updateFeatureLOD","_processCache","_processNodes","process","_prefetchIndex","getIndexLoading","lodGlobalHandling","dirty","pushArray","updates","featureEstimate","isLoading","_get","_set","prefetch","baseLOD","getIndexMissing","checkFeatureTarget","hasProgressed","_cancelNode","removeNode","_updateLoadedNode","_hasNodeLoadToken","dataStreamController","pointsOfInterest","focus","renderLocation","memoryFactor","lodFactor","minQuality","invalidateVisibilityObbs","shouldLoadNode","_shouldDropNode","supportedTextureEncodings","rendererTextureUsage","isMeshPyramid","startNodeLoading","isNodeLoading","cancelAll","_cancelAllNodes","getLoadedNodeIndices","nodeFadeoutEnabled","getLoadedAttributes","resolve","getAttributeData","schedule","updateAttributes","_loadAndAddNode","_loadUncached","_loadCached","useNodeAsHole","_loadCachedGPUData","_nodeAdded","attributeInfo","deleteCachedGPUData","loadCachedNodeData","addCachedNodeData","reschedule","loadNodeData","resetFailedNodes","getScale","_getScale","detail","target","updateStats","disableUpdates","layerFilterChanged","readOnly","prototype","constructOnly","dependsOn","every","toLowerCase","factorIM","factor3dObject","J","clone","capabilities","supportsMaxRecordCountFactor","maxRecordCountFactor","supportsPagination","start","num","source","queryFeaturesJSON","concat","exceededTransferLimit","maxRecordCount","MAX_MAX_RECORD_COUNT_FACTOR","warnMaximumChangedObjectsExceeded","changedObjectIds","pendingFetchAbortController","interactiveEditingSessions","_maximumNumberOfEditOVerrides","memCache","getMemCache","uid","pendingFetchChangedObjectIds","fetchChangedObjectIds","rollback","commit","updateValue","getOverridesFromCache","objectIds","fieldNames","queryOverridesFromAssociatedLayer","processOverridesFromAssociatedLayer","cacheValue","put","getCacheKey","memCacheValueSize","fromCache","from","fromInteractiveEditingSession","logMaximumObjectsExceededWarning","associatedLayer","createQuery","where","returnGeometry","outFields","cacheHint","reduce","ok","portalItem","loaded","portal","url","title","operations","supportsChangeTracking","getFetchChangedObjectIdsServerGen","layerId","method","returnIdsOnly","layers","returnUpdates","returnDeletes","returnInserts","layerServerGens","JSON","stringify","serverGen","timeout","edits","serverGens","minServerGen","maximumNumberOfEditOVerrides","isActive","_definitionExpressionErrors","_maxDefinitionExpressionErrors","logError","definitionExpression","create","fieldsIndex","isStandardized","missingFields","join","parsedDefinitionExpression","testFeature","popupEnabled","_validateFetchPopupFeatures","clientGraphics","prepareFetchPopupFeatures","whenGraphicAttributes","setAttribute","sessions","attributeOverrides","createInteractiveEditSession","findIndex","forEachNode","setAttributeData","clearMemCache","updateFeatures","updatedFeatures","normalizeFieldName","featureIndex","featureId","requiredFields","String","Error","asyncUpdateState","updateAsync","startAsyncUpdate","declaredClass","endAsyncUpdate","definitionExpressionFields","rendererFields","labelingFields","viewFilterFields","handles","autoUpdateAsync","renderer","collectRequiredFields","labelsVisible","hasInitialize","Z","_nodesAddedToStage","drapeSourceType","_queryEngine","_memCache","_interactiveEditingSessions","loadedGraphics","supportsHeightUnitConversion","_coordinatesOutsideExtentErrors","_maxCoordinatesOutsideExtentErrors","_attributeOverrides","viewingMode","fieldsHelper","updatingHandles","_rangeInfosChanged","_rendererChange","_filterChange","graphics3d","filterVisibility","filterChanged","_treeDebugger","_controller","I3STreeDebugger","I3S_TREE_SHOW_TILES","lv","nodeSR","owner","preferredUpdatePolicy","filterVisibilityEnabled","timeExtentVisibilityEnabled","frustumVisibilityEnabled","elevationAlignmentEnabled","elevationFeatureExpressionEnabled","suspendResumeExtentMode","dataExtent","fullExtent","updateClippingExtent","_updateClippingExtent","elevationAlignment","_invalidateElevation","_verticalScale","setup","G","_worker","addPromise","result","_handleEdits","W","FEATURE_QUERY_ENGINE","_removeAllNodeData","graphicsCore","displayFeatureLimit","maximumNumberOfFeatures","_override","_clearOverride","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","_getObjectIdField","find","sourceLayer","whenGraphicBounds","computeAttachmentOrigin","rootNodeVisible","arcade","color","symbolUpdateType","highlight","effectiveUpdatePolicy","attributeEditingContext","invoke","positionData","positions","X","te","crsVertex","graphics","_addNodeBinaryPointData","_addNodeLegacyPointData","apply","_updateNodeMemory","ee","computeObb","updateVisibility","_cacheNodeData","addMany","_filterNode","isGeographic","extractBinaryPointData","checkExtent","generateUID","ie","se","property","graphic","oldValue","newValue","graphicUpdateHandler","re","usedMemoryPerGraphic","_getMemCacheKey","_removeNodeStageData","removeMany","_attributeValuesChanged","labelsEnabled","updateLabelingInfo","updateClippingArea","_reloadAllNodes","_evaluateClause","oe","updateElevationChanged","outSpatialReference","executeQuery","_ensureQuery","executeQueryForIds","executeQueryForCount","executeQueryForExtent","_addDefinitionExpressionToQuery","unloadedMemoryEstimate","unprocessedMemoryEstimate","recreateGraphics","displayedNumberOfFeatures","totalNumberOfFeatures","core","performanceInfo","controller","numNodes","B","aliasOf","Y","xmin","ymin","xmax","ymax","hasZ","zmin","zmax","hasM","mmin","mmax","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","spatialRelationship","hiddenIds","distance","units","timeExtent","types","json","read","write","reader","writer","overridePolicy","_dataQueryEngineInstance","geometryType","toJSON","ensureDataQueryEngine","dataQueryEngine","executeQueryForIdSet","_ensureQueryJSON","count","fromJSON","executeQueryForLatestObservations","defaultQueryJSON","timeInfo","queryGeometryType","featureStore","popupTemplate","getRequiredFields","lastEditInfoEnabled","typeIdField","globalIdField","relationships","includes","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","extentIntersectionDirty","_isVisibleBelowSurface","extentIntersection","viewChange","FRUSTUM_VISIBILITY","elevationBoundsChange","isVisibleBelowSurface","updateIsVisibleBelowSurface","_setDirty","ground","navigationConstraint","opaque","radius","elevationBounds","updateExtentIntersection","frustum","isVisibleInFrustum","items","objectStateId","object","renderGeometry","_removeObjectStateItem","splice","channel","removeHighlight","removeOcclude","removeRenderGeometryObjectState","stateType","objectStateSet","ids","paused","_graphicsCore","_stateSets","removeAll","releaseSet","addObjectStateSet","removeObjectState","graphics3DGraphics","_addObjectStateSet","setUid","initializeSet","hasGraphic","_removeObjectStateSet","states","_extents","allocator","_tmpExtent","contains","removeContained","pushNew","mergeTight","getItemAt","containsPoint","dirtyExtents","globalDirty","averageExtentUpdateSize","dirtyGraphicsSet","updateElevation","queryGraphicUIDsInExtent","_elevationChanged","suspendedChange","ELEVATION_ALIGNMENT","running","empty","markAllGraphicsElevationDirty","merge","_updateDirtyGraphics","_updateDirtyExtents","deconflictor","setDirty","getGraphics3DGraphicById","alignWithElevation","needsElevationUpdates","context","mode","computedExtent","_querying","_queryResult","_layerView","_core","_objectIdField","FILTER_VISIBILITY","_graphicsChanged","modifyGraphics3DGraphicVisibilities","clearVisibilityFlag","active","hasVisibilityFlag","setVisibilityFlag","recomputeFilter","intersection","_getFeatureId","watchUpdatingTracking","suspendResumeExtent","scaleVisibility","outsideScaleRange","frustumVisibility","outsideOfView","graphicSymbolSupported","layerMinMaxScaleChangeHandler","elevationInfoChange","updateVisibilityInfo","spatialIndex","labeler","addGraphicsOwner","deconfliction","labeling","objectStates","rendererChange","opacityChange","setupSuspendResumeExtent","startCreateGraphics","acquireSet","queryObjectIds","setObjectIds","setUids","setClippingExtent","recreateAllGraphics","updateSuspendResumeExtent","suspendResumeExtentChanged","extentToSuspendResumeRect","equals","extentPadding","setExtent","pause","resume","_textureRep","_textureId","_textureRef","acquire","release","glTexture","bindTexture","setUniform2f","descriptor","pbrMetallicRoughness","baseColorFactor","emissiveFactor","normalTexture","emissiveTexture","occlusionTexture","metallicRoughnessTexture","roughnessFactor","metallicFactor","alphaMode","baseColorTextureId","baseColorTexture","metallicRoughnessTextureId","alphaCutoff","doubleSided","cullFace","normalTextureId","emissiveTextureId","occlusionTextureId","metallicRoughness","wrapTextures","hasParametersFromSource","formats","format","ktx2","basis","dds","png","jpg","KTX2_ENCODING","BASIS_ENCODING","DDS_ENCODING","diffuse","transparency","useVertexColorAlpha","wrap","channels","split","HTMLImageElement","renderingContext","parameters","maxMaxAnisotropy","shaderTextureLOD","mipmap","maxAnisotropy","components","noUnpackFlip","baseColor","usePBR","mrrFactors","alphaDiscardMode","emissionTexture","commonMaterialParameters","slicePlaneEnabled","ellipsoidMode","viewSpatialReference","compressedTextureS3TC","compressedTextureETC"],"mappings":"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","file":"static/js/65.60d22b00.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Evented.js\";import{someMap as t}from\"../../../core/MapUtils.js\";class s extends e{constructor(){super(...arguments),this._map=new Map}clear(){if(this._map.size>0){const e=this.toArray();this._map.clear(),this.emit(\"change\",{added:[],removed:e})}}get length(){return this._map.size}get(e){return this._map.get(e)}addMany(e){if(0===e.length)return;const t=new Set;for(let r=0;r<e.length;r++){const s=e[r],o=s.objectId,n=this._map.get(o);n?(t.add(o),s!==n&&(e[r]=n),++n.refCount):(s.refCount=1,this._map.set(o,s))}const s=t.size>0?e.filter((e=>!t.has(e.objectId))):e;s.length>0&&this.emit(\"change\",{added:s,removed:[]})}removeMany(e){const t=[];for(const s of e){const e=s.objectId,r=this._map.get(e);null!=r&&--r.refCount<=0&&(this._map.delete(e),t.push(s))}t.length>0&&this.emit(\"change\",{added:[],removed:t})}removeManyByObjectId(e){const t=[];for(const s of e){const e=this._map.get(s);null!=e&&--e.refCount<=0&&(this._map.delete(s),t.push(e))}t.length>0&&this.emit(\"change\",{added:[],removed:t})}toArray(){return[...this._map.values()]}find(e){let s;return t(this._map,(t=>!!e(t)&&(s=t,!0))),s}forEach(e){this._map.forEach((t=>e(t)))}}export{s as GraphicsMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{removeUnordered as t}from\"../../../../core/arrayUtils.js\";import{TaskPriority as e}from\"../../../support/Scheduler.js\";class r{constructor(t){this.referenceCount=0,this.callbacks=[],this.runIndex=0,this.handle=t.registerTask(e.I3S_CONTROLLER,this)}destroy(){this.handle&&(this.handle.remove(),this.handle=null)}get running(){for(const t of this.callbacks)if(t.needsUpdate())return!0;return!1}runTask(t){this.sort();const e=this.callbacks,r={numIndexLoading:0,numNodesLoading:0};for(let s=0;s<e.length&&!t.done;++s)e[s].priority=e[s].update(t,r),this.runIndex=s}sort(){const t=this.callbacks;let e=t.length;for(let r=this.runIndex;r>0;r--){const s=t[r-1];let n=r;for(;n<t.length&&s.priority<=t[n].priority&&(n!==e||s.priority<t[n].priority);)t[n-1]=t[n],n++;t[n-1]=s,e=n-1}this.runIndex=0}add(t){this.sort(),t.priority=1/0,this.callbacks.unshift(t)}remove(e){t(this.callbacks,e),this.runIndex=this.callbacks.length,this.sort()}}const s=new Map;function n(t,e){let n=s.get(t);return null==n&&(n=new r(t),s.set(t,n)),n.add(e),{remove:()=>{if(null==n)return;n.remove(e);n.callbacks.length>0||(s.delete(t),n.destroy()),n=null}}}export{n as addTask};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{b as s}from\"../../../../chunks/vec4f64.js\";class t{constructor(t,i){this.id=t,this.mbs=i,this.renderMbs=s([0,0,0,-1]),this.imModificationImpact=4}}class i extends t{constructor(s,t,i,e,h,o,r,c,n,a){super(s,i),this.index=t,this.childCount=e,this.level=h,this.resources=o,this.version=r,this.lodMetric=c,this.maxError=n,this.numFeatures=a,this.failed=!1,this.hasModifications=!1,this.cacheState=0,this.vertexCount=0,this.memory=0}}class e{constructor(s,t,i,e){this.nodeHasLOD=s,this.isChosen=t,this.lodLevel=i,this.version=e}}export{i as Node,t as NodeBase,e as NodeTraversalState};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t,unwrap as i}from\"../../../../core/maybe.js\";import s from\"../../../../core/PooledArray.js\";import{isAbortError as r}from\"../../../../core/promiseUtils.js\";import{l as n}from\"../../../../chunks/vec3.js\";import{b as o}from\"../../../../chunks/vec4f64.js\";import{NodeBase as a,Node as d,NodeTraversalState as l}from\"./I3SNode.js\";import{addWraparound as h}from\"./I3SUtil.js\";import{clone as u}from\"../../support/orientedBoundingBox.js\";class c{constructor(e,t,i,s,r){this.childOffset=e,this.childCount=t,this.visibilityCache=i,this.ref=s,this.node=r,this.useAsHole=0,this.filterImpact=2}}class g{constructor(e,t,i,r,n,o,a,d,l,h,u,c,g,m){this.streamDataController=i,this.viewportQueries=r,this.logger=n,this.holeFilling=o,this._isLoaded=a,this._isReloading=d,this._isSelected=l,this._enable=h,this._needsUpdate=u,this._canRequest=c,this._computeVisibilityObb=g,this._computeNodeFiltering=m,this._dirty=!0,this._nodePages=[],this.nodeCount=0,this.nodesPerPage=0,this.rootIndex=0,this.lodMetric=0,this.lodConversion=e=>e,this.urlPrefix=\"\",this._loading=new Set,this._failedNodes=new Set,this._failedPages=new Set,this._indexMissing=1,this._maxUnloadedPrio=Number.NEGATIVE_INFINITY,this._maxProcessingPrio=Number.POSITIVE_INFINITY,this._nodeTraversalState=new Map,this._version=b(0),this._visibilityCacheVersion=b(0),this._maxLevel=1,this._featureEstimate={estimate:0,leavesReached:!1},this._unloadedMemoryEstimate=0,this._missing=new s({deallocator:null}),this._prefetch=new s({deallocator:null}),this._updates=new f,this._imModificationUncategorized=new s({deallocator:null}),this.ignoreServiceObb=!1,this.progressiveLoadPenalty=0,this.layerHasModifications=!1,this._layerHasFilter=!1,this.logLayer=e,e.serviceUpdateTimeStamp&&e.serviceUpdateTimeStamp.lastUpdate&&(this.lastUpdate=`${e.serviceUpdateTimeStamp.lastUpdate}`),this._maxLodLevel=this.viewportQueries?this.viewportQueries.maxLodLevel:1,this.init(t)}init(e){if(\"page\"===e.type){switch(this.urlPrefix=e.urlPrefix,this.nodesPerPage=e.pageSize,this.rootIndex=e.rootIndex,e.lodMetric){case\"maxScreenThreshold\":this.lodMetric=1;break;case\"maxScreenThresholdSQ\":this.lodMetric=1,this.lodConversion=M}this.addPage(N(this.rootIndex,this.nodesPerPage),e.rootPage)}else if(\"node\"===e.type){this.urlPrefix=e.urlPrefix,this._nodePages.push({nodes:[],children:[],parents:[]}),this.makeRefNode(new a(e.rootNode.id,null),-1);const t=this._validateNode(e.rootNode.id,e.rootNode);t&&this.addNode(t,0)}}loadPage(e){this._loading.add(e);const t=this.urlPrefix+e;this.streamDataController.request(t,\"json\").then((t=>{this._loading.delete(e),this.addPage(e,t)})).catch((t=>{this._loading.delete(e),r(t)||(this._failedPages.add(e),this.logger.error(\"#loadPage()\",this.logLayer,`Error when loading page ${e}`,t))}))}addPage(e,t){for(let n=this._nodePages.length;n<e;n++)this._nodePages[n]=null;const i=[],s=[],r=t.nodes.map(((t,r)=>{const a=i.length,l=t.children?t.children.length:0;s.push(-1);for(let e=0;e<l;e++)i.push(t.children[e]);const h=`${t.index}`,g=u(t.obb),m=o([g.center[0],g.center[1],g.center[2],n(g.halfSize)]),f=t.mesh&&t.mesh.attribute,_=t.mesh&&t.mesh.geometry,b=t.mesh&&t.mesh.material,p={hasSharedResource:!1,hasFeatureData:!!_,attributes:f&&null!=f.resource?`${f.resource}`:null,geometry:_&&null!=_.resource?`${_.resource}`:null,texture:b&&null!=b.resource?`${b.resource}`:null,geometryDefinition:_?_.definition:-1,materialDefinition:b?b.definition:-1},y=new d(h,e*this.nodesPerPage+r,m,l,0,p,this.lastUpdate,this.lodMetric,this.lodConversion(t.lodThreshold),_?_.featureCount:null);return y.serviceObb=g,y.visibilityObb=this._computeVisibilityObb(y),y.vertexCount=_?_.vertexCount:0,new c(a,l,v(this._visibilityCacheVersion),null,y)}));this._nodePages[e]={nodes:r,children:i,parents:s},this.nodeCount+=r.length,this.updateParentsAndLevel()}updateParentsAndLevel(){const t=new Array,i=(i,s,r)=>{const n=this.getPage(i);if(e(n)){const o=x(i,this.nodesPerPage);n.parents[o]=s;const a=n.nodes[o].node;e(a)&&(a.level=r,t.push(i))}};for(i(this.rootIndex,-1,0);t.length;){const s=t.pop(),r=this.getNode(s);if(e(r))for(let e=0;e<r.childCount;e++){i(this.getChildIndex(r,e),s,r.level+1),this._maxLevel=Math.max(this._maxLevel,r.level+1)}}}getPage(e){return this._nodePages[N(e,this.nodesPerPage)]}getNodeInternal(e){const i=this.getPage(e);return t(i)?null:i.nodes[x(e,this.nodesPerPage)]}addNode(t,s){null!=t.children&&this.populateChildren(s,t.children);const r=this.getParent(s),n=e(r)?r.level+1:0;this._maxLevel=Math.max(this._maxLevel,t.children?n+1:n);const{lodMetric:a,maxError:l}=w(t.lodSelection),h=i(this.getNodeInternal(s));return h.node=new d(t.id,s,o(t.mbs),h.childCount,n,t.resources,t.version,a,l,t.numFeatures),t.obb&&(h.node.serviceObb=u(t.obb)),h.node.visibilityObb=this._computeVisibilityObb(h.node),e(h.ref)&&(null==h.ref.mbs&&(h.ref.mbs=t.mbs),h.node.renderMbs=h.ref.renderMbs,h.node.serviceObbInRenderSR=h.ref.serviceObbInRenderSR,h.ref.visibilityObb=h.node.visibilityObb),h.node}makeRefNode(t,i){const s=this._nodePages[0],r=s.nodes.length;return s.nodes.push(new c(0,0,v(this._visibilityCacheVersion),t,null)),this.nodeCount++,s.parents.push(i),t.renderMbs[3]=-1,e(t.serviceObbInRenderSR)&&(t.serviceObbInRenderSR.halfSize[0]=-1),r}populateChildren(e,t){const s=i(this.getNodeInternal(e)),r=i(this.getPage(e));s.childOffset=r.children.length,s.childCount=t.length;for(let i=0;i<t.length;i++){const s=this.makeRefNode(t[i],e);r.children.push(s)}}getNode(t){const i=this.getNodeInternal(t);return e(i)?i.node:null}getIndexById(t){let i;return this.forAllNodes(((s,r)=>{(e(s.node)&&s.node.id===t||e(s.ref)&&s.ref.id===t)&&(i=r)})),i}getNodeById(e){const t=this.getIndexById(e);return t>=0?this.getNode(t):null}getChildIndex(e,i){const s=this.getPage(e.index);if(t(s))return-1;const r=s.nodes[x(e.index,this.nodesPerPage)];return s.children[r.childOffset+i]}getParentIndex(t){const i=this.getPage(t);return e(i)?i.parents[x(t,this.nodesPerPage)]:-1}getParent(e){return(e=this.getParentIndex(e))>=0?this.getNode(e):null}isLeaf(t){const i=this.getNodeInternal(t);return e(i)&&0===i.childCount}get rootNode(){return this.getNode(this.rootIndex)}get size(){return this.nodeCount}invalidateVisibilityCache(){this._visibilityCacheVersion=b(this._visibilityCacheVersion)}invalidateNodeVisibilityCache(t){const i=this.getNodeInternal(t);e(i)&&this.invalidateNodeVisibilityCacheInternal(i)}invalidateNodeVisibilityCacheInternal(e){e.visibilityCache=v(this._visibilityCacheVersion)}invalidateBoundingVolumeCache(t){const i=this.getNodeInternal(t);e(i)&&(_(i),this.invalidateNodeVisibilityCacheInternal(i))}invalidateGeometryVisibility(t){const i=this.getNodeInternal(t);e(i)&&e(i.node)&&(i.node.geometryObb=null,i.node.renderMbs[3]=-1,e(i.node.serviceObbInRenderSR)&&(i.node.serviceObbInRenderSR.halfSize[0]=-1))}invalidateVisibilityObbs(){t(this.rootNode)||this.traverse(this.rootNode,(e=>(e.visibilityObb=this._computeVisibilityObb(e),e.geometryObb=null,!0)))}isNodeVisible(i){const s=this.getNodeInternal(i);if(t(s)||e(s.ref)&&!s.ref.mbs)return!0;if(!y(s.visibilityCache,this._visibilityCacheVersion)){const i=s.node,r=e(i)&&(t(s.ref)||e(i.visibilityObb))?i:e(s.ref)?s.ref:null;if(this._layerHasFilter&&this._computeNodeFiltering&&(e(i)||e(s.ref))&&2===s.filterImpact){const t=e(i)?i.mbs:e(s.ref)?s.ref.mbs:null;s.filterImpact=null!=t?this._computeNodeFiltering(t):0}const n=e(i)&&1===s.filterImpact,o=!(e(i)&&2===i.imModificationImpact)&&(!r||this.viewportQueries.isNodeVisible(r))&&!n;return s.visibilityCache=p(o,this._visibilityCacheVersion),o}return P(s.visibilityCache)}isGeometryVisible(t){if(!this.isNodeVisible(t))return!1;const i=this.getNodeInternal(t);return!(e(i)&&e(i.node)&&e(i.node.geometryObb)&&(!this.layerHasModifications||4!==i.node.imModificationImpact))||this.viewportQueries.isGeometryVisible(i.node)}_traverseCoverage(s,r,n,o,a){const d=this.getPage(s);if(t(d)||0===r.childCount)return;const l=r.childOffset+r.childCount,h=new Array;for(let t=r.childOffset;t<l;++t){const i=d.children[t],s=this.getNodeInternal(i);e(s)&&e(s.node)&&this.isGeometryVisible(i)&&h.push(s)}o/=h.length;for(const e of h){const t=i(e.node).index;this._isLoaded(t)||this._isReloading(t)?(a.delta=Math.max(a.delta,n),a.coverage+=o):this._traverseCoverage(t,e,n+1,o,a)}}useNodeAsHole(e){if(\"off\"===this.holeFilling)return!1;const i=this.getNodeInternal(e);if(t(i))return!1;if(\"always\"===this.holeFilling)return!0;if(y(i.useAsHole,this._version))return P(i.useAsHole);const s={delta:0,coverage:0};this._traverseCoverage(e,i,0,1,s);const r=s.delta*s.coverage<=.5;return i.useAsHole=p(r,this._version),r}get maxLevel(){return this._maxLevel}get dirty(){return this._dirty}destroy(){this._updates.add.prune(),this._updates.update.prune()}requestUpdate(){this._dirty=!0,this._indexMissing=1,this._version=b(this._version)}imModificationsChanged(t){this.layerHasModifications=t,this.forAllNodes((({node:t})=>{e(t)&&(t.imModificationImpact=4,t.visibilityObb=this._computeVisibilityObb(t),t.hasModifications&&this.invalidateGeometryVisibility(t.index))})),this.invalidateVisibilityCache()}layerFilterChanged(t){this._layerHasFilter=t,this.forAllNodes((t=>{if(e(t)){t.filterImpact=2;const i=t.node;e(i)&&this.invalidateNodeVisibilityCache(i.index)}})),this.invalidateVisibilityCache()}update(s,r,n){if(!this._dirty)return;this._maxUnloadedPrio=Number.NEGATIVE_INFINITY,this._maxProcessingPrio=Number.NEGATIVE_INFINITY,this._missing.clear(),this._prefetch.clear(),this._updates.reset(s,this._missing),m.clear();let o=!0;const a=new C,d=new C,l=this._imModificationUncategorized;l.clear();const h=new Set,u=(u,c,g)=>{if(t(c)){let e=this.entryPriority(u);e===1/0&&(e=this.entryPriority(g));const t=N(u,this.nodesPerPage);return m.set(t,Math.max(e,m.get(t)||0)),this._loading.has(t)||this._failedPages.has(t)||this._missing.push(t),void(this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e))}const f=c.node;if(this._updateNodeFeatureEstimate(f,d),t(f)){const e=this.entryPriority(u);return this._loading.has(u)||this._failedNodes.has(u)||(this._missing.push(u),m.set(u,e)),void(this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e))}const _=i(this.getPage(u));if(0===this._missing.length&&0===this.nodesPerPage)for(let t=0;t<c.childCount;t++){const i=_.children[c.childOffset+t],s=this.getNodeInternal(i);!e(s)||s.node||this._loading.has(i)||this._failedNodes.has(i)||(m.set(i,this.entryPriority(i)),this._prefetch.push(i))}if(f.failed||!f.resources.hasFeatureData)return;if(h.add(f.id),this._isLoaded(u)){if(a.known+=f.memory,++a.knownNodes,this._isSelected(f)?c.childCount>0&&(o=!1):(a.unremoved+=f.memory,o=!1),this._needsUpdate(f)){const e=this.entryPriority(u);m.set(u,e),this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e),this._updates.update.push(u)}return}if(f.memory&&(a.known+=f.memory,++a.knownNodes),!this._isSelected(f))return void(this._isReloading(u)&&this._updates.remove.push(u));if(c.childCount>0&&(o=!1),f.memory?(a.missing+=f.memory,a.known+=f.memory,++a.knownNodes):++a.missingNodes,s.indexOf(f.index)>=0)return this._maxProcessingPrio=Math.max(this._maxProcessingPrio,this.entryPriority(u)),void(this._updates.cancel=this._updates.cancel.filter((e=>e!==f.index)));if(!r.done&&this._enable(f))return void r.madeProgress();const v=this.entryPriority(u);m.set(u,v),this._maxProcessingPrio=Math.max(this._maxProcessingPrio,v),this._updates.add.push(u),this.layerHasModifications&&n&&e(f)&&4===f.imModificationImpact&&l.push(u)};this.traverseVisible(u);const c=this._updates.add;c.length>0&&this.layerHasModifications&&(l.length>0&&n(l),c.filterInPlace((e=>{const i=this.getNodeInternal(e),s=t(i)||t(i.node)||2!==i.node.imModificationImpact;return s||this.invalidateNodeVisibilityCache(e),s}))),this._unloadedMemoryEstimate=a.missing-a.unremoved,a.knownNodes>3&&a.missingNodes>0&&(this._unloadedMemoryEstimate+=a.known/a.knownNodes*a.missingNodes),this._unloadedMemoryEstimate=.8*Math.max(0,this._unloadedMemoryEstimate),this._featureEstimate.estimate=this._computeFeatureEstimate(d),this._featureEstimate.leavesReached=o,this._missing.sort(((e,t)=>e-t)),this._missing.filterInPlace(((e,t)=>t<1||this._missing.data[t-1]!==e)),this._missing.sort(((e,t)=>m.get(e)-m.get(t))),this._missing.length>0&&(this._maxUnloadedPrio=m.get(this._missing.back()),this._prefetch.clear()),this._updates.add.filterInPlace((e=>m.get(e)>=this._maxUnloadedPrio)).sort(((e,t)=>m.get(e)-m.get(t))),this._updates.update.sort(((e,t)=>m.get(e)-m.get(t))),this._indexMissing=this._loading.size+this._missing.length,this._dirty=this._indexMissing>0,m.clear()}checkFeatureTarget(e,t){const i=this.viewportQueries.updateScreenSpaceErrorBias(t);let s=t,r=t,n=i,o=10;for(;o--;){const i=new C;this._updateFeatureEstimate(s,i);if(this._computeFeatureEstimate(i)<=e){if(s>=t||i.missingNodes>0||0===o)break;n=s,s=.5*(s+r)}else r=s,s=.5*(s+n)}return this._version=b(this._version),this.viewportQueries.updateScreenSpaceErrorBias(i),Math.min(t,s)}_updateFeatureEstimate(t,i){this._version=b(this._version),this.viewportQueries.updateScreenSpaceErrorBias(t),this.traverseVisible(((t,s)=>this._updateNodeFeatureEstimate(e(s)&&s.node,i)))}_updateNodeFeatureEstimate(i,s){if(!(t(i)||i.failed||t(i.numFeatures)))return this._isLoaded(i.index)?(s.known+=i.numFeatures,++s.knownNodes,void(this._isSelected(i)||(s.unremoved+=i.numFeatures))):void(this._isSelected(i)&&(e(i.numFeatures)?(s.missing+=i.numFeatures,s.known+=i.numFeatures,++s.knownNodes):++s.missingNodes))}_computeFeatureEstimate(e){let t=e.known-e.unremoved;return e.knownNodes>3&&e.missingNodes>0&&(t+=e.known/e.knownNodes*e.missingNodes),Math.max(0,t)}load(){return this._load(this._missing)}prefetch(){return this._prefetch.sort(((e,t)=>m.get(e)-m.get(t))),this._load(this._prefetch)}_load(e){if(0===e.length||!this._canRequest())return!1;for(;e.length>0&&this._canRequest();)0===this.nodesPerPage?this._loadNode(e.pop()):this.loadPage(e.pop());return!0}isLoading(){return this._indexMissing>0}getIndexLoading(){return this._loading.size}getIndexMissing(){return this._indexMissing}getUnloadedMemoryEstimate(){return this._unloadedMemoryEstimate}get updates(){return this._updates}get featureEstimate(){return this._featureEstimate}nodeTraversalState(e){if(t(e))return null;let i=this._nodeTraversalState.get(e.index);if(i&&y(i.version,this._version))return i;const s=this.viewportQueries.getLodLevel(e),r=this.viewportQueries.hasLOD(e);let n=!0;if(r){const t=this.getParentIndex(e.index);if(t>=0){const e=this._nodeTraversalState.get(t);n=e&&s>e.lodLevel}else n=s>0}else n=0===e.childCount;return i?(i.lodLevel=s,i.isChosen=n,i.version=p(!0,this._version),i):(i=new l(r,n,s,p(!0,this._version)),this._nodeTraversalState.set(e.index,i),i)}_loadNode(e){this._loading.add(e);const s=i(this.getNodeInternal(e)).ref;if(t(s))return void this._failedNodes.add(e);const n=s.id,o=this.urlPrefix+n,a=()=>{this._loading.delete(e),0===this._missing.length&&0===this._loading.size&&this.requestUpdate()};this.streamDataController.request(o,\"json\").then((t=>{a();const i=this._validateNode(n,t);if(null==i)return;i.obb&&this.invalidateNodeVisibilityCache(e);const s=this.addNode(i,e);this.nodeTraversalState(s)}),(t=>{a(),r(t)||(this.logger.error(\"#loadNode()\",this.logLayer,\"Error loading node: \"+o),this._failedNodes.add(e))}))}_validateNode(e,t){if(null==t||\"object\"!=typeof t||t.id!==e)return this.logger.error(\"#validateNode()\",this.logLayer,`Invalid node. Wrong type or wrong id \"${e}\"`),null;if(!Array.isArray(t.mbs))return this.logger.error(\"#validateNode()\",this.logLayer,`Invalid bounding volume on node ${e}.`),null;t.sharedResource&&\"./shared\"!==t.sharedResource.href&&\"./shared/\"!==t.sharedResource.href&&this.logger.warn(\"#validateNode()\",this.logLayer,`Invalid shared resource href on node \"${e}\"`),null==t.geometryData||Array.isArray(t.geometryData)&&1===t.geometryData.length&&\"./geometries/0\"===t.geometryData[0].href||this.logger.warn(\"#validateNode()\",this.logLayer,`Invalid geometry data on node \"${e}\"`),null==t.attributeData||Array.isArray(t.attributeData)&&!t.attributeData.some(((e,t)=>e.href!==`./attributes/f_${t}/0`))||this.logger.warn(\"#validateNode()\",this.logLayer,`Invalid attribute data on node \"${e}\"`),t.featureData&&t.featureData.length>1&&this.logger.warn(\"#validateNode()\",this.logLayer,`Node ${e} has ${t.featureData.length} bundles. Only the first bundle will be loaded.`);const i=t.hasOwnProperty(\"obb\")&&!this.ignoreServiceObb?t.obb:null,s=t.featureData&&1===t.featureData.length&&t.featureData[0].featureRange?t.featureData[0].featureRange[1]-t.featureData[0].featureRange[0]+1:null,r=t=>{if(null==t)return null;const i=t=>this.logger.error(\"#validateNode()\",this.logLayer,`Invalid node reference on node ${e}: ${t}`);if(\"number\"==typeof t.id)i(`id ${t.id} is a number instead of a string.`);else if(\"string\"!=typeof t.id||!Array.isArray(t.mbs))return i(\"Missing or invalid id.\"),null;if(!Array.isArray(t.mbs))return i(`Invalid bounding volume on reference ${t.id}.`),null;t.href&&t.href!==\"../\"+t.id&&this.logger.error(\"#validateNode()\",this.logLayer,`Invalid node href on node \"${e}\"`);const s=t.hasOwnProperty(\"obb\")&&!this.ignoreServiceObb?t.obb:null,r=new a(`${t.id}`,t.mbs);return r.serviceObb=s,r.visibilityObb=this._computeVisibilityObb(r),r},n=Array.isArray(t.children)?t.children.map(r).filter((e=>null!=e)):null;return{id:e,mbs:t.mbs,obb:i,children:n,resources:{hasFeatureData:t.featureData&&t.featureData.length>0,hasSharedResource:null!=t.sharedResource,attributes:t.attributeData?e:null,texture:t.textureData&&t.textureData.length>0?e:null,geometry:null!=t.geometryData?e:null},version:\"string\"==typeof t.version?t.version:null,lodSelection:Array.isArray(t.lodSelection)?t.lodSelection:null,numFeatures:s}}resetFailedNodes(){this._failedNodes.clear(),this._failedPages.clear(),this.forAllNodes((t=>{e(t.node)&&(t.node.failed=!1)}))}entryPriority(i){const s=this.getNodeInternal(i),r=this.getParentIndex(i);if(t(s)||r<0&&null==s.node)return r<0?1/0:this.entryPriority(r);let n=0;if(s.node&&r>=0){const e=this._nodeTraversalState.get(r);null!=e&&(n=e.lodLevel)}let o=this.progressiveLoadPenalty;for(let e=i;e>=0;e=this.getParentIndex(e))if(this._isLoaded(e)){o=0;break}const a=e(s.ref)?this.viewportQueries.distToPOI(s.ref):e(s.node)?this.viewportQueries.distToPOI(s.node):0;return-a-n*(a+this.progressiveLoadPenalty)+o}traverseVisible(e){const i=this.getNodeInternal(this.rootIndex);t(i)?e(this.rootIndex,null,null):this._traverseVisible(this.rootIndex,-1,i,e)}_traverseVisible(t,s,r,n){if(r.node&&0===r.childCount)return void(this.isGeometryVisible(t)&&n(t,r,s));if(!this.isNodeVisible(t))return;if(n(t,r,s),null==r.node)return;const o=this.nodeTraversalState(r.node);if(o.nodeHasLOD&&o.lodLevel===this._maxLodLevel)return;const a=i(this.getPage(t));for(let i=0;i<r.childCount;i++){const s=a.children[r.childOffset+i],o=this.getNodeInternal(s);e(o)?this._traverseVisible(s,t,o,n):n(s,null,t)}}traverse(e,t){t(e)&&this.traverseChildren(e,t)}traverseChildren(t,i){const s=t.index,r=this.getNodeInternal(s);e(r)&&this._traverseChildren(s,r,i)}_traverseChildren(i,s,r){const n=this.getPage(i);if(t(n))return;const o=s.childOffset+s.childCount;for(let t=s.childOffset;t<o;++t){const i=n.children[t],s=this.getNodeInternal(i);e(s)&&e(s.node)&&r(s.node)&&this._traverseChildren(i,s,r)}}updateStats(e){if(this._updates.add.length>0&&(e.nodes+=\" + \"+this._updates.add.length),(this._indexMissing||this._prefetch.length>0)&&(e.index+=\" + \"+this._indexMissing||this._prefetch.length),e.prio=this._maxProcessingPrio,this._featureEstimate.estimate){const t=this._featureEstimate.estimate-e.features;t>0?e.features+=\" + \"+t:t<0&&(e.features+=\" - \"+-t)}}getPriority(){return Math.max(this._maxProcessingPrio,this._maxUnloadedPrio)}updateElevationInfo(e){this.forAllNodes(_),this.viewportQueries.updateElevationInfo(e)}forAllNodes(e){for(let t=0;t<this._nodePages.length;t++){const i=this._nodePages[t];if(i){const s=t*this.nodesPerPage;for(let t=0;t<i.nodes.length;t++)e(i.nodes[t],s+t)}}}get test(){return{addNode:(e,t)=>this.addNode(e,t)}}}const m=new Map;class f{constructor(){this.update=new s({deallocator:null}),this.add=new s({deallocator:null}),this.remove=new s({deallocator:null}),this.cancel=[]}reset(e,t){this.add.clear(),this.update.clear(),this.cancel=e,this.missing=t}}function _(t){e(t.node)&&(t.node.renderMbs[3]=-1,e(t.node.serviceObbInRenderSR)&&(t.node.serviceObbInRenderSR.halfSize[0]=-1)),e(t.ref)&&(t.ref.renderMbs[3]=-1,e(t.ref.serviceObbInRenderSR)&&(t.ref.serviceObbInRenderSR.halfSize[0]=-1))}function v(e){return h(e,-2)}function b(e){return h(e,2)}function p(e,t){return t+(e?1:0)}function y(e,t){return(-2&e)===t}function P(e){return 1==(1&e)}function N(e,t){return 0===t?0:e/t|0}function x(e,t){return 0===t?e:e%t}const I=[[\"maxScreenThreshold\",1],[\"screenSpaceRelative\",2],[\"removedFeatureDiameter\",3],[\"distanceRangeFromDefaultCamera\",4]];function w(e){if(e)for(let t=0;t<e.length;t++)for(const i of I)if(i[0]===e[t].metricType)return{lodMetric:i[1],maxError:e[t].maxError};return{lodMetric:0,maxError:0}}class C{constructor(){this.known=0,this.knownNodes=0,this.missing=0,this.missingNodes=0,this.unremoved=0}}function M(e){return Math.sqrt(e*(4/Math.PI))}export{g as I3SIndex,w as selectErrorMetric};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as i}from\"../../../../core/maybe.js\";import s from\"../../../../core/PooledArray.js\";class o{constructor(e){this.layerView=e,this._lodGlobalDirty=!1}startNodeLoading(e,i,s,o){this._maxLodLevel=o.maxLodLevel,this._index=s,this._isNodeInScaleBounds=e,this._removeNodes=i}shouldLoadNode(i){if(e(i))return!1;const s=this._index.nodeTraversalState(i);return!!this.isChosenMaxLOD(s)||!!s.isChosen&&this._childrenRequireLoading(i)}setLodGlobalDirty(){this._lodGlobalDirty=!0}get requiresLODGlobalHandling(){return null!=this._index&&!0===this._lodGlobalDirty}lodGlobalHandling(e){if(!this.requiresLODGlobalHandling)return!1;this._lodGlobalDirty=!1;const i=this.layerView.view.resourceController.memoryController.usedMemory,s=Math.max(0,Math.floor(10*(i-1)));t.clear(),this._lodGlobalHandling(this._index.rootNode,s,!1);const o=t.length;this._removeNodes(t,e);const d=t.length<o;return 0!==t.length&&(this._lodGlobalDirty=!0),t.clear(),d}_lodGlobalHandling(s,o,d){if(e(s))return!1;const l=s.index,n=this._index,r=this.layerView,a=n.nodeTraversalState(s),h=this.isChosenMaxLOD(a),u=r.isNodeLoaded(l),c=r.nodeCrossfadingEnabled;if(c&&u&&h){const e=!d&&this.hasNoVisibleChildren(s);r.fadeNode(l,0,!e)}const x=u&&(!r.isNodeFullyFadedIn||r.isNodeFullyFadedIn(l));if(u&&(r.updateNodeState(l,h?1:0),h))return x&&this._removeChildrenRecursive(s),x;const _=s.childCount>0;let L=_;if(_)for(let e=0;e<s.childCount;e++){const t=n.getChildIndex(s,e),l=n.getNode(t);if(i(l)){!(!n.isGeometryVisible(t)||this._lodGlobalHandling(l,o,d||x))&&this._isNodeInScaleBounds(l)&&(L=!1)}else n.isNodeVisible(t)&&(L=!1)}const N=u&&!h&&(L||t.length<o);N&&t.push(l),!c||N||!u||d||L||r.fadeNode(l,0,!1);const b=!s.resources.hasFeatureData;return L||x&&!N||b}_removeChildrenRecursive(e){this._index.traverseChildren(e,(e=>((this.layerView.isNodeLoaded(e.index)||this.layerView.isNodeReloading(e.index))&&t.push(e.index),!0)))}hasNoVisibleChildren(e){let i=!0;return this._index.traverseChildren(e,(e=>!(!i||!this._index.isNodeVisible(e.index))&&(!this.layerView.isNodeLoaded(e.index)||(i=!1,!1)))),i}_childrenRequireLoading(e){let i=!1,s=!0;return this._index.traverseChildren(e,(e=>{if(!s||!this._index.isNodeVisible(e.index))return!1;const o=this._index.nodeTraversalState(e);return this.isChosenMaxLOD(o)&&this._index.isGeometryVisible(e.index)&&(i=!0),!this.layerView.isNodeLoaded(e.index)||(s=!1,!1)})),s&&i}isChosenMaxLOD(e){return e.isChosen&&(!e.nodeHasLOD||e.lodLevel===this._maxLodLevel)}}const t=new s({deallocator:null});export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{result as e,assertResult as t}from\"../../../../core/asyncUtils.js\";import r from\"../../../../core/has.js\";import{clone as i}from\"../../../../core/lang.js\";import{isNone as o,isSome as n}from\"../../../../core/maybe.js\";import{eachAlways as s,isAbortError as a}from\"../../../../core/promiseUtils.js\";import{makeAbsolute as u}from\"../../../../core/urlUtils.js\";import{readBinaryAttribute as l,createGeometryDescriptor as f}from\"./I3SBinaryReader.js\";import{getMaterialAndTextures as d,getMaterialAndTexturesFromShared as c,selectEncoding as m}from\"./I3SMaterialUtil.js\";class h{constructor(e,t,r,i,o,n){if(this.streamDataController=t,this.logger=r,this.defaultGeometrySchema=i,this.requiredAttributes=o,this.options=n,this.logLayer=e,this.layerUrl=e.parsedUrl.path,this.geometryDefinitions=e.geometryDefinitions,e.materialDefinitions){const t=e.textureSetDefinitions;this.materialAndTextures=e.materialDefinitions.map((e=>d(t,e)))}}load(e,t,r){return this.streamDataController.request(e,t,r)}loadAttribute(e,t,r){const i=`${this.layerUrl}/nodes/${e.resources.attributes}/attributes/${t.key}/0`;return this.load(i,\"binary\",r).then((e=>l(t,e)))}loadAttributes(e,t,r){return s(t.map((t=>this.loadAttribute(e,t.attributeStorageInfo,r)))).then((r=>{const i={};for(let o=0;o<t.length;++o)if(r[o].value)i[t[o].name]=r[o].value;else{if(a(r[o].error))throw r[o].error;this.logger.error(\"#loadAttributes\",this.logLayer,`Failed to load attributeData for '${t[o].name}' on node '${e.id}'`,r[o].error)}return i}))}async loadNodeData(r,i){const s=null!=this.requiredAttributes&&r.resources.attributes?e(this.loadAttributes(r,this.requiredAttributes,i)):null,{bufferDefinition:a,bufferIndex:u}=p(this.geometryDefinitions,r),l=!!r.resources.geometry,d=l?e(this.loadGeometry(r.resources.geometry,u,i)):null,m=r.resources.hasSharedResource?await this.loadShared(r,i):null,h=this.materialAndTextures&&r.resources.materialDefinition>=0?this.materialAndTextures[r.resources.materialDefinition]:null!=m?c(m):null,x=h&&h.material,A=h&&h.textures,$=`${r.id}`,w=!l&&this.options.loadFeatureData,T=w?await this.loadFeatureData($,i):null,j=w?y(T):g(x),I=o(j)&&b(T),U=null!=A&&A.length>0?e(this.loadTextures(r,A,i)):null;let S=null,q=null;if(d){S=t(await d);const e=D(this.defaultGeometrySchema,m);q=f(a,e)}const v=U?t(await U):null,P=s?t(await s):{},k=P?{attributeData:P,loadedAttributes:this.requiredAttributes}:null;return n(j)?{geometryData:j,attributeDataInfo:k,geometryBuffer:S,geometryDescriptor:q,requiredTextures:A,textureData:v}:n(I)?{pointData:I,attributeDataInfo:k,geometryBuffer:S,geometryDescriptor:q,requiredTextures:A,textureData:v}:Promise.reject()}static addAbsoluteHrefTexture(e,t){const r=e.textureDefinitions;if(null!=r)for(const i of Object.keys(r))for(const e of r[i].images)Array.isArray(e.href)?e.hrefConcat=e.href.map((e=>u(e,t))):e.hrefConcat=u(e.href,t)}static fixTextureEncodings(e){const t=e.textureDefinitions;if(null!=t)for(const r in t){const e=t[r];if(Array.isArray(e.encoding))for(let t=0;t<e.encoding.length;t++){const r=e.encoding[t];\"data:\"===r.substring(0,5)&&(e.encoding[t]=r.substring(5))}else{const t=e.encoding;\"data:\"===t.substring(0,5)&&(e.encoding=t.substring(5))}}}loadShared(e,t){const r=`${this.layerUrl}/nodes/${e.resources.geometry}/shared`;return this.load(r,\"json\",t).then((e=>(h.fixTextureEncodings(e),h.addAbsoluteHrefTexture(e,r),e)))}loadTexture(e,t,r,i,o,n){let s=!1;return 4===o||1===o||2===o?this.load(e,\"binary\",n).then((e=>({id:t,usage:r,data:e,encoding:o,downsampled:s}))):this.load(e,\"image\",n).then((e=>{let n=e;const a=4096,u=2;if(i&&e.width*e.height>=a){const t=Math.ceil(e.width/u),r=Math.ceil(e.height/u),i=document.createElement(\"canvas\");i.width=t,i.height=r;i.getContext(\"2d\").drawImage(e,0,0,t,r),n=i,s=!0}return{id:t,usage:r,data:n,encoding:o,downsampled:s}}))}loadTextures(e,t,r){const i=this.options.uncompressedTextureDownsamplingEnabled,o=this.options.textureUsageMask;return Promise.all(t.map((t=>{if(0==(t.usage&o))return null;const n=m(t.encodings,this.options.textureEncodings);if(null==n)return this.logger.error(\"#loadTextures\",this.logLayer,`No known encoding for texture found on node ${e.id}`),Promise.reject();const s=e.resources.texture||e.id,a=`${this.layerUrl}/nodes/${s}/textures/${n.name}`;return this.loadTexture(a,t.id,t.usage,i,n.encoding,r)})))}loadFeatureData(e,t){const r=`${this.layerUrl}/nodes/${e}/features/0`;return this.load(r,\"json\",t)}loadGeometry(e,t,r){const i=`${this.layerUrl}/nodes/${e}/geometries/${t}`;return this.load(i,\"binary\",r)}}function g(e){return{featureIds:[],geometries:[{type:\"ArrayBufferView\",params:{material:e}}],featureDataPosition:[0,0,0]}}function y(e){for(const t of e.featureData){const e=t.geometries;if(null!=e)for(const r of e)return{featureIds:[t.id],featureDataPosition:t.position,geometries:[r]}}return null}function b(e){const t=new Array;for(const r of e.featureData)null!=r.position&&t.push({featureIds:[r.id],featureDataPosition:r.position,geometries:null});return t}function D(e,t){if(!e||!t||!t.materialDefinitions)return e;const r=Object.keys(t.materialDefinitions)[0];return!t.materialDefinitions[r].params.vertexRegions&&e.vertexAttributes.region&&delete(e=i(e)).vertexAttributes.region,e}function p(e,t){const i={bufferDefinition:null,bufferIndex:0};if(null==e||t.resources.geometryDefinition<0)return i;const o=t.resources.geometryDefinition>=0?e[t.resources.geometryDefinition].geometryBuffers:null;if(null==o)return i;for(let n=0;n<o.length;n++){const e=o[n];if(null==e.compressedAttributes)i.bufferIndex=n,i.bufferDefinition=o[n];else if(\"draco\"===e.compressedAttributes.encoding&&!r(\"disable-feature:i3s-draco\"))return i.bufferIndex=n,i.bufferDefinition=e,i}return i}export{h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{createAbortController as e,onAbortOrThrow as t,always as r}from\"../../../../core/promiseUtils.js\";class s{constructor(e,t){this.requester=e,this.apiKey=t,this.activeRequests=new Set}get busy(){return this.requester.busy}request(s,l,a){const o=e(),n=t(a,(()=>o.abort())),u={signal:o.signal,query:{token:this.apiKey}},i=this.requester.request(s,l,u),c={response:i,abortController:o,abortHandle:n};return this.activeRequests.add(c),r(i,(()=>{var e;c.abortController=null,null==(e=c.abortHandle)||e.remove(),c.abortHandle=null,this.activeRequests.delete(c)})),i}cancelAll(){this.activeRequests.forEach((e=>{var t,r;null==(t=e.abortController)||t.abort(),e.abortController=null,null==(r=e.abortHandle)||r.remove()})),this.activeRequests.clear()}}export{s as I3SStreamDataController,s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as t,isNone as e}from\"../../../../core/maybe.js\";import{h as s,i,l as r,a as n,d as a,p as o,f as h,b as c}from\"../../../../chunks/vec3.js\";import{c as m}from\"../../../../chunks/vec3f64.js\";import{c as u}from\"../../../../chunks/vec4.js\";import{projectBoundingSphere as p}from\"../../../../geometry/projection.js\";import{getSphericalPCPF as l}from\"../../../../geometry/projectionEllipsoid.js\";import{create as d,fromMatrix as _,intersectsSphere as b}from\"../../../../geometry/support/frustum.js\";import{w as x}from\"../../../../chunks/sphere.js\";import{makeDehydratedPoint as f}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{evaluateElevationAlignmentAtPoint as g}from\"../graphics/elevationAlignmentUtils.js\";import{ElevationContext as M}from\"../graphics/ElevationContext.js\";import{createContextWithoutExpressionSupport as v,extractExpressionInfo as D}from\"../graphics/featureExpressionInfoUtils.js\";import{transformObb as C,intersectBoundingBoxWithMbs as P}from\"./I3SUtil.js\";import{create as R,isVisible as S}from\"../../support/orientedBoundingBox.js\";const E=1e5;class L{constructor(t,e,s,i,r,n,a,o={}){this.indexSR=t,this._renderCoordsHelper=e,this.extent=r,this.elevationProvider=n,this.options=o,this._frustum=d(),this._useFrustumCulling=!1,this._poi=m(),this.minDistance=1/0,this.maxDistance=0,this.maxLodLevel=2,this._tmp1=m(),this._tmp2=m(),this._tmp3=m(),this._tmp0=m(),this.screenspaceErrorBias=o.screenspaceErrorBias||1,this.progressiveLoadFactor=o.progressiveLoadFactor||1,this.updateCamera(s,i),this.engineSR=this._renderCoordsHelper.spatialReference,this.updateElevationInfo(a),this.tmpPoint=f(0,0,0,t)}updateElevationInfo(t){null!=t?(this._elevationContext=M.fromElevationInfo(t),this._elevationContext.updateFeatureExpressionInfoContext(v(D(t,!1)))):this._elevationContext=null}updateCamera(t,e){this._useFrustumCulling=e,e&&_(t.viewMatrix,t.projectionMatrix,this._frustum),this._screenSizeFactor=1/(t.perScreenPixelRatio/2),this._camPos=t.eye,this.minDistance=1/0,this.maxDistance=0}setPointOfInterest(t){this._poi=t}updateScreenSpaceErrorBias(t){const e=this.screenspaceErrorBias;return this.screenspaceErrorBias=t,e}updateExtent(t){this.extent=t}getRenderMbs(t){const e=t.renderMbs;return e[3]<0&&(u(e,t.mbs),this._elevationContext&&e[3]<E&&(this.tmpPoint.x=e[0],this.tmpPoint.y=e[1],this.tmpPoint.z=e[2],e[2]=g(this.tmpPoint,this.elevationProvider,this._elevationContext,this._renderCoordsHelper)),p(e,this.indexSR,e,this.engineSR)),e}getVisibilityObb(s){if(t(s.visibilityObb))return s.visibilityObb;const i=s.serviceObb;return e(i)||i.halfSize[0]<0?void 0:(s.serviceObbInRenderSR=this._computeRenderObb(i,s.serviceObbInRenderSR,s.mbs[3]),s.serviceObbInRenderSR)}_computeRenderObb(t,s,i){if(e(s)&&(s=R()),s.halfSize[0]<0){let e=0;this._elevationContext&&i<E&&(this.tmpPoint.x=t.center[0],this.tmpPoint.y=t.center[1],this.tmpPoint.z=t.center[2],e=g(this.tmpPoint,this.elevationProvider,this._elevationContext,this._renderCoordsHelper)-t.center[2]),C(t,this.indexSR,s,this.engineSR,e)}return s}isNodeVisible(e){const s=this.getRenderMbs(e);if(!this.isMBSinExtent(s))return!1;if(!this._useFrustumCulling)return!0;const i=this.getVisibilityObb(e);return t(i)?S(i,this._frustum):b(this._frustum,x(s))}isGeometryVisible(e){if(!this._useFrustumCulling)return!0;const s=e.geometryObb;return t(s)?S(s,this._frustum):this.isNodeVisible(e)}isMBSinExtent(t){return!this.extent||0!==P(this.extent,t)}screenSpaceDiameterMbs(t,e){const i=this.getRenderMbs(t),r=Math.sqrt(s(i,this._camPos)),n=r-i[3];return this._updateMinMaxDistance(r),n<0?.5*Number.MAX_VALUE:e/n*this._screenSizeFactor}calcCameraDistance(t){return this.calcCameraDistanceToCenter(t)-this.getRenderMbs(t)[3]}calcCameraDistanceToCenter(t){const e=this.getRenderMbs(t),s=i(e,this._camPos);return this._updateMinMaxDistance(s),s}calcAngleDependentLoD(t){const e=this.getRenderMbs(t),s=e[3],n=(Math.abs(e[0]*(e[0]-this._camPos[0])+e[1]*(e[1]-this._camPos[1])+e[2]*(e[2]-this._camPos[2]))/r(e)+s)/i(e,this._camPos);return Math.min(1,n)}hasLOD(t){return 0!==t.lodMetric}getDistancePlanarMode(t,e){const s=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2],n=s*s+i*i,a=e[3];if(n<=a*a)return Math.abs(r);const o=Math.sqrt(n)-a;return Math.sqrt(r*r+o*o)}getDistanceGlobeMode(t,e){const m=r(e),u=r(t)-m;n(this._tmp0,t,a(t,e)/o(t));const p=s(e,this._tmp0),l=e[3];if(p<=l*l)return Math.abs(u);{const s=n(this._tmp0,e,1/m),o=m,p=l*l/2/o,d=n(this._tmp1,s,o-p),_=t,b=h(this._tmp2,_,d),x=h(this._tmp2,b,n(this._tmp3,s,a(s,b))),f=c(this._tmp2,d,n(this._tmp2,x,l/r(x)));let g=i(_,f);if(u>=2e5){const t=h(this._tmp1,_,f);let e=a(t,s)/r(t);e<.08&&(e=1e-4),g/=e}return g}}getDistance(t,e){return this.engineSR===l(this.engineSR)?this.getDistanceGlobeMode(t,e):this.getDistancePlanarMode(t,e)}_updateMinMaxDistance(t){t>0?(this.minDistance=Math.min(this.minDistance,t),this.maxDistance=Math.max(this.maxDistance,t)):(this.minDistance=0,this.maxDistance=Math.max(this.maxDistance,-t))}getLodLevel(t){if(0===t.lodMetric||!t.resources.hasFeatureData)return 0;if(0===t.childCount)return this.maxLodLevel;if(this._useFrustumCulling&&this.progressiveLoadFactor<1){const e=this.progressiveLoadFactor*this.screenspaceErrorBias,s=this.screenspaceErrorBias;return this.evaluateLODmetric(t,e)?this.evaluateLODmetric(t,s)?2:1:0}return this.evaluateLODmetric(t,this.screenspaceErrorBias)?this.maxLodLevel:0}evaluateLODmetric(t,e){switch(t.lodMetric){case 2:{const s=this.getRenderMbs(t),i=this.getDistance(this._camPos,s),r=2*i/this._screenSizeFactor,n=i+s[3];return this._updateMinMaxDistance(n),t.maxError*e<=r}case 1:{let s=this.screenSpaceDiameterMbs(t,t.mbs[3]*e);return this.options.angleDependentLoD&&(s*=this.calcAngleDependentLoD(t)),s<t.maxError}case 3:return this.screenSpaceDiameterMbs(t,t.maxError)*e<10;case 4:return this.calcCameraDistance(t)>t.maxError*e}return!1}distToPOI(t){const e=this.getRenderMbs(t);return i(e,this._poi)-e[3]}distCameraToPOI(){return i(this._camPos,this._poi)}}export{L as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import i from\"../../../core/Handles.js\";import s from\"../../../core/has.js\";import a from\"../../../core/Logger.js\";import{isSome as r,isNone as d}from\"../../../core/maybe.js\";import o from\"../../../core/PooledArray.js\";import{EsriPromiseMixin as n}from\"../../../core/Promise.js\";import{createAbortController as h,isAbortError as l}from\"../../../core/promiseUtils.js\";import{init as u}from\"../../../core/watchUtils.js\";import{property as _}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as c}from\"../../../core/accessorSupport/decorators/subclass.js\";import{projectBoundingRect as p}from\"../../../geometry/projection.js\";import{create as g}from\"../../../geometry/support/aaBoundingBox.js\";import{containsPoint as m,create as y}from\"../../../geometry/support/aaBoundingRect.js\";import{makeDehydratedPoint as x}from\"../dehydratedFeatures.js\";import f from\"../../support/PromiseQueue.js\";import{addTask as b}from\"../../../views/3d/layers/i3s/I3SFrameTask.js\";import{I3SIndex as w}from\"../../../views/3d/layers/i3s/I3SIndex.js\";import N from\"../../../views/3d/layers/i3s/I3SLodHandling.js\";import v from\"../../../views/3d/layers/i3s/I3SNodeLoader.js\";import{I3SStreamDataController as C}from\"../../../views/3d/layers/i3s/I3SStreamDataController.js\";import{getVertexCrs as D,getIndexCrs as L,findIntersectingNodes as S}from\"../../../views/3d/layers/i3s/I3SUtil.js\";import V from\"../../../views/3d/layers/i3s/I3SViewportQueries.js\";import{projectToBoundingBox as I}from\"../../../views/3d/support/extentUtils.js\";import{maxDownloadSlots as A}from\"../../../views/3d/support/index.js\";import{extractSafeScaleBounds as F,scaleBoundsPredicate as P}from\"../../../views/support/layerViewUtils.js\";import{noBudget as U}from\"../../../views/support/Scheduler.js\";const O=a.getLogger(\"esri.layers.graphics.controllers.I3SOnDemandController\"),M=100,q=2,G=1e4,Q=1e-4,j=1.2,T=500,B=1.5;let E=class extends(n(t)){constructor(e){super(e),this.screenSizeFactor=0,this.featureTarget=5e4,this.fixedFeatureTarget=!1,this.updating=!0,this.updatingProgress=1,this.leavesReached=!1,this.scaleVisibilityEnabled=!0,this._featureLOD=1,this._stableFeatureLOD=!1,this._isIdle=!1,this._cameraDirty=!0,this._invisibleDirty=!1,this._newLoadingNodes=new o({deallocator:null}),this._loadedNodeScales=new Map,this._modificationsNodeFilteringArray=new o,this._downloadingCount=0,this._loadingNodes=new Map,this._updatingNodes=new Map,this._progressMaxNumNodes=1,this._requiredAttributes=new Array,this._requiredAttributesDirty=!0,this._updatesDisabled=!1,this.disableIDBCache=!1,this._disableMemCache=!1,this._restartNodeLoading=!1,this._fields=null,this._attributeStorageInfo=null,this._handles=new i,this._idleQueue=new f,this._elevationUpdateNodes=new o({deallocator:null}),this._errorCount=0}get isMeshPyramid(){return\"mesh-pyramids\"===this.layer.profile||\"MeshPyramid\"===this.layer.store.lodType}get isGraphics3D(){return\"points\"===this.layer.profile}get indexStreamController(){const e=this.layerView.view.resourceController.createStreamDataRequester(2);return new C(e,this.layer.apiKey)}get dataStreamController(){const e=this.layerView.view.resourceController.createStreamDataRequester(3);return new C(e,this.layer.apiKey)}get crsVertex(){return D(this.layer)}get crsIndex(){return L(this.layer)}get rootNodeVisible(){if(r(this._index)){const e=this._index.rootNode;if(r(e))return this._updateViewData(),this._index.isNodeVisible(e.index)}return!0}get index(){return this._index}initialize(){this._disableMemCache=!this.layerView.loadCachedGPUData||!this.layerView.addCachedGPUData,this._lodHandling=new N(this.layerView);const e=this.layerView.i3slayer;this.layer=e,this._defaultGeometrySchema=e.store.defaultGeometrySchema,this.disableIDBCache=s(\"disable-feature:idb-cache\"),\"fields\"in e&&(this._fields=e.fields,this._attributeStorageInfo=e.attributeStorageInfo),this.addResolvingPromise(Promise.all([this.layer.indexInfo,this.layer.when(),this.layerView.when()]).then((([t])=>{var i;if(this.destroyed||!this.layerView||this.layerView.destroyed)return;const s=this.layerView.view;this._setClippingArea(s.clippingArea);const a=this.layerView.view.resourceController;this._handles.add([u(s,\"pointsOfInterest.focus.renderLocation\",(e=>this._pointOfInterestChanged(e))),a.memoryController.events.on(\"quality-changed\",(()=>this._setCameraDirty())),u(this.layerView,\"suspended\",(e=>{const t=e?()=>this._updateViewData():()=>this._updateIdleState(!0),i=e?()=>{}:()=>this._updateIdleState(!1);this._idleStateCallbacks?(e&&this.cancelNodeLoading(),this.restartNodeLoading(),this._idleStateCallbacks.idleBegin=t,this._idleStateCallbacks.idleEnd=i):this._idleStateCallbacks=a.scheduler.registerIdleStateCallbacks(t,i)})),b(this.layerView.view.resourceController.scheduler,{update:(e,t)=>this._frame(e,t),needsUpdate:()=>this.updating}),this.watch(\"uncompressedTextureDownsamplingEnabled\",(()=>this.restartNodeLoading())),this.watch([\"featureTarget\",\"fixedFeatureTarget\"],(()=>{this._setCameraDirty(),this._stableFeatureLOD=!1})),s.state.watch(\"contentCamera\",(()=>this._setCameraDirty())),this.layer.watch(\"elevationInfo\",(()=>this._elevationInfoChanged())),this.layer.watch([\"minScale\",\"maxScale\"],(()=>this._scaleBoundsChanged())),this.layerView.watch(\"lodFactor\",(()=>this._setCameraDirty())),this.layerView.watch(\"availableFields?\",(()=>this._requiredFieldsChange())),this.layerView.watch(\"holeFilling\",(e=>r(this._index)&&(this._index.holeFilling=e)))]),this._updateScaleHandles(),this._viewportQueries=new V(this.crsIndex,s.renderCoordsHelper,s.state.contentCamera,!s.state.fixedContentCamera||this.isGraphics3D,this._clippingArea,s.elevationProvider,this.layer.elevationInfo,{progressiveLoadFactor:this._getProgressiveLoadFactor(),screenspaceErrorBias:this.lod,angleDependentLoD:this.lod<.5}),this._index=new w(e,t,this.indexStreamController,this._viewportQueries,O,this.layerView.holeFilling,(e=>this.layerView.isNodeLoaded(e)),(e=>this.layerView.isNodeReloading(e)),(e=>this._shouldLoadNode(e)),(e=>this._enableFromGPUCache(e,1)),(e=>this._needsUpdate(e)),(()=>!this.indexStreamController.busy),(e=>this.layerView.computeVisibilityObb?this.layerView.computeVisibilityObb(e):null),null!=(i=this.layerView)&&i.computeNodeFiltering?e=>this.layerView.computeNodeFiltering(e):void 0);const d=r(this.layer.modifications)&&this.layer.modifications&&this.layer.modifications.length>0;this._index.imModificationsChanged(d),this._startNodeLoading()}))),this._tmpPoint=x(0,0,0,this.crsIndex)}updateNodeModificationStatus(e){const t=this._index,i=this.layerView;r(t)&&i&&i.updateNodeModificationStatus&&(this._modificationsNodeFilteringArray.clear(),e.forAll((e=>{const i=t.getNode(e);r(i)&&this._modificationsNodeFilteringArray.push(i)})),i.updateNodeModificationStatus(this._modificationsNodeFilteringArray),this._invisibleDirty=!0)}destroy(){this.cancelNodeLoading(),this._idleStateCallbacks&&(this._isIdle=!1,this._idleStateCallbacks.remove(),this._idleStateCallbacks=null),this._handles.destroy(),this._nodeLoader=null,H.prune(),r(k)&&(k.hide(),k=null)}_getRequiredAttributes(){if(null==this._attributeStorageInfo||!this._fields||!this.layerView.availableFields)return[];const e=this._attributeStorageInfo,t=this._fields,i=this.layer.objectIdField;return this.layerView.availableFields.map((i=>{const s=z(e,i),a=z(t,i);return s>=0&&a>=0?{index:s,name:t[a].name,field:t[a],attributeStorageInfo:e[s]}:null})).filter((e=>null!=e&&e.name!==i))}_requiredFieldsChange(){const e=this._getRequiredAttributes();R(this._requiredAttributes,e)||(this._requiredAttributes=e,this._requiredAttributesDirty=!1,this.restartNodeLoading())}requestUpdate(){this._requiredAttributesDirty=!0,this.restartNodeLoading()}_setClippingArea(e){const t=g();I(e,t,this.layerView.view.renderSpatialReference)?this._clippingArea=t:this._clippingArea=null}_pointOfInterestChanged(e){r(this._viewportQueries)&&(this._viewportQueries.setPointOfInterest(e),r(this._index)&&(this._index.progressiveLoadPenalty=K.distancePenalty*this._viewportQueries.distCameraToPOI(),this._index.requestUpdate()))}updateClippingArea(e){this._setClippingArea(e),r(this._viewportQueries)&&r(this._index)&&(this._viewportQueries.updateExtent(this._clippingArea),this._index.invalidateVisibilityCache()),this._setCameraDirty()}_setCameraDirty(){this._cameraDirty=!0,this.notifyChange(\"rootNodeVisible\"),this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating()}updateElevationChanged(e,t){const i=this._index;if(d(i))return;const s=i.rootNode;if(d(s))return;const a=this._elevationUpdateNodes;a.clear(),S(e,t,s,this.crsIndex,i,(e=>a.push(e.index))),a.forAll((e=>{i.invalidateBoundingVolumeCache(e),e===s.index&&this.notifyChange(\"rootNodeVisible\")})),a.length&&this.restartNodeLoading()}getParentIndex(e){return r(this._index)&&this._index.getParentIndex(e)}_elevationInfoChanged(){r(this._index)&&this._index.updateElevationInfo(this.layer.elevationInfo),this._setCameraDirty()}_updateScaleHandles(){const e=\"scale-bounds\";this._handles.remove(e),this.areScaleBoundsActive&&this._handles.add(this.layerView.view.basemapTerrain.on(\"scale-change\",(e=>this._scaleUpdateHandler(e))),e)}_scaleBoundsChanged(){this.areScaleBoundsActive||this._loadedNodeScales.clear(),this._updateScaleHandles(),this._setCameraDirty()}_scaleUpdateHandler(e){this._updateScaleInBoundingRect(e.scale,e.extent,e.spatialReference),this._setCameraDirty()}_updateScaleInBoundingRect(e,t,i){const s=this._index;if(d(s))return;const a=s.rootNode;!d(a)&&p(t,i,$,this.crsIndex)&&this._loadedNodeScales.forEach(((t,i)=>{const a=s.getNode(i);r(a)&&m($,a.mbs)&&this._loadedNodeScales.set(i,e)}))}restartNodeLoading(){this._restartNodeLoading=!0,this.cancelNodeLoading(),this._evaluateUpdating()}schedule(e,t){return this._idleQueue.push(e,t)}reschedule(e,t){return this._idleQueue.unshift(e,t)}get isIntegratedMesh(){return\"integrated-mesh\"===this.layer.type}get areScaleBoundsActive(){const{minScale:e,maxScale:t}=F(this.layer);return this.scaleVisibilityEnabled&&(e>0||t>0)}get unloadedMemoryEstimate(){return d(this._index)||this.layerView.suspended?0:this._index.getUnloadedMemoryEstimate()*this.lodDropFactor}get indexDepth(){return r(this._index)?this._index.maxLevel:0}set disableMemCache(e){this.layerView.loadCachedGPUData&&this.layerView.addCachedGPUData||(this._disableMemCache=!0),this._disableMemCache=e}_frame(e,t){return this.layerView.suspended?(this._updateViewData(),this._evaluateUpdating(),-1/0):!this.layerView.visible||d(this._index)?-1/0:(this._processLogError(e,t),this._index.getPriority())}_processLogError(e,t){try{this._process(e,t)}catch(i){this._errorCount<50?O.error(\"Error during processing: \"+i):50===this._errorCount&&O.error(\"Too many errors for this layer. Further errors will not be displayed.\"),this._errorCount++}}_process(e,t){if(this._restartNodeLoading&&this._startNodeLoading(),null!=this._nodeLoader&&!d(this._index)){for(this._updateViewData(),this._invisibleDirty&&this._removeInvisibleNodes(e)&&(this._invisibleDirty=!1),this.isIntegratedMesh&&(e.enabled=!1),e.run((()=>this._processIndex(e))),this._updateFeatureLOD(),e.run((()=>this._processCache(e))),this.isIntegratedMesh&&(e.enabled=!0),e.run((()=>this._processNodes(e,t)));!e.done&&this._idleQueue.process();)e.madeProgress();e.run((()=>this._prefetchIndex())),t.numIndexLoading+=this._index.getIndexLoading(),t.numNodesLoading+=this._downloadingCount,e.run((()=>this._lodHandling.lodGlobalHandling(e))),this._evaluateUpdating()}}_processIndex(e){if(d(this._index))return!1;if(this._index.dirty){this._newLoadingNodes.clear(),this._index.update([...this._loadingNodes.keys()],e,(e=>this.updateNodeModificationStatus(e))),this._disableMemCache||(this._newLoadingNodes.pushArray(this._index.updates.add.data,this._index.updates.add.length),this._newLoadingNodes.pushArray(this._index.updates.missing.data,this._index.updates.missing.length));const t=this._index.featureEstimate.leavesReached;this._index.isLoading()||t===this._get(\"leavesReached\")||this._set(\"leavesReached\",t)}return this._index.load()}_prefetchIndex(){return!(d(this._index)||this._loadingNodes.size>0||this._index.updates.add.length>0)&&this._index.prefetch()}_updateFeatureLOD(){if(!this.isGraphics3D||d(this._index)||d(this._viewportQueries))return;const e=!this._index.isLoading(),t=this.featureTarget*this.baseLOD,i=this._index.featureEstimate;if(i.estimate=i.estimate||t/2,this._index.getIndexMissing()>T){if(this._featureLOD<=Q)return;this._featureLOD/=B,this._stableFeatureLOD=!1}else if(e&&i.estimate<t){if(i.leavesReached||this._featureLOD>=G||this._stableFeatureLOD)return;const e=Math.min(10,Math.max(t/i.estimate,1.001));this._featureLOD*=e;const s=this.lod,a=this._index.checkFeatureTarget(t,s);a!==s&&(this._featureLOD=a/this.baseLOD,this._stableFeatureLOD=!0)}else{if(!(i.estimate>t*j||e&&i.estimate>t))return;if(this._featureLOD<=Q)return;this._featureLOD/=1+.25*(i.estimate/t-1),this._stableFeatureLOD=!1}this._featureLOD=Math.min(G,Math.max(Q,this._featureLOD)),this._viewportQueries.updateScreenSpaceErrorBias(this.lod),this._index.requestUpdate()}_processCache(e){const t=this._index;if(d(t))return!1;for(;this._newLoadingNodes.length>0&&!e.done;){const i=this._newLoadingNodes.pop();for(let s=t.getParent(i);r(s)&&(!this.layerView.isNodeLoaded(s.index)&&this._isNodeInScaleBounds(s));s=t.getParent(s.index))if(this._enableFromGPUCache(s,0)){e.madeProgress();break}}return e.hasProgressed}_processNodes(e,t){if(d(this._index))return!1;let i=(this._isIdle?M:q)-this._loadingNodes.size;const s=this._index.updates;for(s.cancel.forEach(this._cancelNode,this),s.cancel=[];s.remove.length>0&&!e.done;)this.layerView.removeNode(s.remove.pop()),e.madeProgress();for(;s.update.length>0&&!e.done;){const t=this._index.getNode(s.update.pop());r(t)&&(this._updateLoadedNode(t),e.madeProgress())}for(;s.add.length>0&&!e.done&&i>0;){--i;const a=this._index.getNode(s.add.back());if(d(a)||2!==a.cacheState&&!this._hasNodeLoadToken(t))break;s.add.pop(),this._loadNode(a),e.madeProgress()}return e.hasProgressed}_cancelAllNodes(){this._loadingNodes.forEach((e=>e.abort())),this._loadingNodes.clear(),this._updatingNodes.forEach((e=>e.abort())),this._updatingNodes.clear()}_cancelNode(e){const t=this._loadingNodes.get(e);t&&(t.abort(),this._loadingNodes.delete(e))}_hasNodeLoadToken(e){return!(!this._isIdle&&e.numNodesLoading+this._loadingNodes.size>=q)&&(this._downloadingCount<A&&!this.dataStreamController.busy)}_evaluateUpdating(){let e=!1,t=0;if(this.layerView.suspended)e=this._cameraDirty,t=e?0:1;else{const i=(r(this._index)?this._index.getIndexMissing():0)+3*(r(this._index)?this._index.updates.add.length:0)+2*this._loadingNodes.size;e=!!(i>0||this._updatingNodes.size>0||this._restartNodeLoading||this._cameraDirty||this._idleQueue.length>0||this._lodHandling&&this._lodHandling.requiresLODGlobalHandling),0===i&&(this._progressMaxNumNodes=1),this._progressMaxNumNodes=Math.max(i,this._progressMaxNumNodes),t=1-i/this._progressMaxNumNodes}this.updating=e,this.updatingProgress=t}_updateViewData(){if(!this._cameraDirty||d(this._index)||d(this._viewportQueries))return;const e=this.layerView.view,{contentCamera:t,fixedContentCamera:i}=e.state;this.screenSizeFactor=1/(t.perScreenPixelRatio/2),this._viewportQueries.updateCamera(t,!i||this.isGraphics3D),this._viewportQueries.setPointOfInterest(e.pointsOfInterest.focus.renderLocation),this._viewportQueries.updateScreenSpaceErrorBias(this.lod),this._index.invalidateVisibilityCache(),this._index.progressiveLoadPenalty=K.distancePenalty*this._viewportQueries.distCameraToPOI(),this._index.requestUpdate(),this._stableFeatureLOD=!1,this._invisibleDirty=!0,this._cameraDirty=!1,this.notifyChange(\"rootNodeVisible\")}_getProgressiveLoadFactor(){return this.layerView.view.resourceController.memoryController.memoryFactor<1?1:this.layerView.progressiveLoadFactor}get lod(){return this._featureLOD*this.baseLOD}get baseLOD(){const e=this.layerView.lodFactor,t=this.layerView.view.resourceController.memoryController.memoryFactor;return this.fixedFeatureTarget?1:(e>0?e:1)*t}get lodDropFactor(){if(this.fixedFeatureTarget)return 1;const e=this.layerView.view.resourceController.memoryController;return(Math.min(e.memoryFactor,.5)-e.minQuality)/(.5-e.minQuality)}isGeometryVisible(e){return r(this._index)&&this._index.isGeometryVisible(e.index)}updateVisibility(e){r(this._index)&&this._index.invalidateNodeVisibilityCache(e)}updateBoundingVolume(e){r(this._index)&&this._index.invalidateBoundingVolumeCache(e)}invalidateGeometryVisibility(e){r(this._index)&&this._index.invalidateGeometryVisibility(e)}invalidateVisibilityObbs(){r(this._index)&&this._index.invalidateVisibilityObbs()}modificationsChanged(){if(r(this._index)){const e=r(this.layer.modifications)&&this.layer.modifications&&this.layer.modifications.length>0;this._index.imModificationsChanged(e)}this._invisibleDirty=!0}_shouldLoadNode(e){return!(!this._lodHandling.shouldLoadNode(e)||this._shouldDropNode(e)||!this._isNodeInScaleBounds(e))&&(!!r(this._index)&&this._index.isGeometryVisible(e.index))}_shouldDropNode(e){if(d(this._viewportQueries))return!1;const t=this.lodDropFactor;if(t>=1||!this._lodHandling.hasNoVisibleChildren(e))return!1;return Math.abs(this._viewportQueries.calcCameraDistanceToCenter(e))-this._viewportQueries.minDistance>(this._viewportQueries.maxDistance-this._viewportQueries.minDistance)*t}_startNodeLoading(){this._restartNodeLoading=!1;const e=this._index;if(this._updatesDisabled||d(e)||d(this._viewportQueries))return;this._updateViewData(),this._requiredAttributesDirty&&(this._requiredAttributes=this._getRequiredAttributes(),this._requiredAttributesDirty=!1);const t={textureEncodings:this.layerView.supportedTextureEncodings,uncompressedTextureDownsamplingEnabled:this.layerView.uncompressedTextureDownsamplingEnabled,textureUsageMask:this.layerView.rendererTextureUsage,loadFeatureData:!this.isMeshPyramid};this._nodeLoader=new v(this.layer,this.dataStreamController,O,this._defaultGeometrySchema,this._requiredAttributes,t),e.requestUpdate(),this._lodHandling.startNodeLoading((e=>this._isNodeInScaleBounds(e)),((e,t)=>this._removeNodes(e,t,1)),e,{maxLodLevel:this._viewportQueries.maxLodLevel}),this._evaluateUpdating()}isNodeLoading(){return null!=this._nodeLoader&&null!=this._index}cancelNodeLoading(){this.isNodeLoading()&&(this.indexStreamController.cancelAll(),this.dataStreamController.cancelAll(),this._idleQueue.cancelAll(),this._cancelAllNodes(),this._nodeLoader=null,this._evaluateUpdating())}_removeInvisibleNodes(e){const t=this._index;if(d(t)||d(this._viewportQueries))return!1;H.clear(),this.layerView.getLoadedNodeIndices(H);const i=0===this._viewportQueries.maxDistance,s=i?()=>!1:e=>this._shouldDropNode(e);return H.filterInPlace((e=>{const i=t.getNode(e);return d(i)||!t.isGeometryVisible(e)||s(i)||!this._isNodeInScaleBounds(i)})),H.length>0&&this._lodHandling.setLodGlobalDirty(),this._removeNodes(H,e,0),!(i&&this.lodDropFactor<1)&&(0===H.length||(H.clear(),!1))}markNodeToRemove(e){H.push(e)}removeMarkedNodes(){this._removeNodes(H,U,0)}_removeNodes(e,t,i){const s=e.length;if(0!==s&&!t.done){for(r(this._index)&&this._index.requestUpdate();e.length>0&&!t.done;){const s=e.pop(),a=this._index;1===i&&this.layerView.nodeFadeoutEnabled&&r(a)&&a.isGeometryVisible(s)?this.layerView.fadeNode(s,1,!0):this.layerView.removeNode(s),t.madeProgress()}if(this._loadedNodeScales.size>0)for(let t=e.length;t<s;t++){const i=e.data[t];this._loadedNodeScales.delete(i)}}}_needsUpdate(e){if(!e.resources.hasFeatureData||this._updatingNodes.has(e.index))return!1;const t=this.layerView.getLoadedAttributes(e.index);return null!=t&&t!==this._requiredAttributes}_updateLoadedNode(e){const t=h();this._updatingNodes.set(e.index,t);(R(this.layerView.getLoadedAttributes(e.index),this._requiredAttributes)?Promise.resolve(this.layerView.getAttributeData(e.index)):this._nodeLoader.loadAttributes(e,this._requiredAttributes,t.signal)).then((i=>this.schedule((()=>this.layerView.updateAttributes(e.index,{loadedAttributes:this._requiredAttributes,attributeData:i},t.signal)),t.signal))).catch((i=>{if(!l(i))return this.layerView.updateAttributes(e.index,{loadedAttributes:this._requiredAttributes,attributeData:{}},t.signal)})).catch((()=>{})).then((()=>{this._updatingNodes.delete(e.index),this._evaluateUpdating()})),this._evaluateUpdating()}_loadNode(e){if(this._loadingNodes.has(e.index))return void O.error(\"already loading node \"+e.index);const t=h();this._loadingNodes.set(e.index,t);const i=()=>{this._loadingNodes.get(e.index)===t&&this._loadingNodes.delete(e.index),this._evaluateUpdating()};this._evaluateUpdating(),this._loadAndAddNode(e,t.signal).then(i).catch((e=>{if(i(),!l(e))throw e}))}_loadAndAddNode(e,t){return 1===e.cacheState?this._loadUncached(e,t):this._loadCached(e,t).then((t=>{t||(e.cacheState=1,r(this._index)&&this._index.updates.add.push(e.index))})).catch((t=>{if(!l(t))throw e.cacheState=1,t}))}_enableFromGPUCache(e,t){if(this._disableMemCache||d(this._index))return!1;if(0===t&&!this._index.useNodeAsHole(e.index))return!0;const i=this._loadCachedGPUData(e);return!!i&&(this.layerView.addCachedGPUData(e,i,t),this._nodeAdded(),!0)}_loadCachedGPUData(e){const t=this.layerView.loadCachedGPUData(e);return r(t)&&r(t.attributeInfo)&&R(t.attributeInfo.loadedAttributes,this._requiredAttributes)?t:(this.layerView.deleteCachedGPUData(t),null)}_nodeAdded(){r(this._index)&&this._index.requestUpdate(),this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating()}_loadCached(e,t){if(this._enableFromGPUCache(e,1))return Promise.resolve(!0);const i=this.layerView;return!this.disableIDBCache&&i.loadCachedNodeData&&i.addCachedNodeData?this.schedule((()=>i.loadCachedNodeData(e,t,((t,i)=>this._nodeLoader.loadTextures(e,t,i)))),t).then((s=>{if(d(s))return!1;const a=this._requiredAttributes;return this.reschedule((()=>this._nodeLoader.loadAttributes(e,a,t)),t).then((r=>this.reschedule((()=>i.addCachedNodeData(e,s,{loadedAttributes:a,attributeData:r},t)),t))).then((()=>(this._nodeAdded(),!0)))})):Promise.resolve(!1)}_loadUncached(e,t){return this._downloadingCount++,this._nodeLoader.loadNodeData(e,t).catch((e=>{throw this._downloadingCount--,e})).then((i=>(this._downloadingCount--,this.schedule((()=>this.layerView.addNode(e,i,t)),t)))).then((()=>{this._nodeAdded(),e.cacheState=2})).catch((t=>{if(!l(t))throw O.error(\"#loadNodeData()\",this.layer,`Failed to load node '${e.id}'`,t),e.failed=!0,r(this._index)&&this._index.requestUpdate(),t}))}_updateIdleState(e){e!==this._isIdle&&(this._isIdle=e,this._evaluateUpdating(),e&&this._index&&r(this._index)&&this._index.resetFailedNodes())}_getScale(e){if(this._loadedNodeScales.has(e.index))return this._loadedNodeScales.get(e.index);this._tmpPoint.x=e.mbs[0],this._tmpPoint.y=e.mbs[1],this._tmpPoint.z=e.mbs[2];const t=this.layerView.view.basemapTerrain.getScale(this._tmpPoint);return this.layerView.isNodeLoaded(e.index)&&this._loadedNodeScales.set(e.index,t),t}_isNodeInScaleBounds(e){if(!this.areScaleBoundsActive)return!0;const t=this._getScale(e),{minScale:i,maxScale:s}=F(this.layer);return P(t,i,s)}updateStats(e){e.index=r(this._index)?this._index.size:0,this.isGraphics3D&&(e.detail=this._featureLOD,e.target=this.featureTarget*this.baseLOD),r(this._index)&&this._index.updateStats(e)}get test(){const e=this;return{index:this._index,set disableUpdates(t){e._updatesDisabled=t,t?e.cancelNodeLoading():e.requestUpdate()},set disableIDBCache(t){e.disableIDBCache=t},set ignoreServiceObb(t){r(e._index)&&(e._index.ignoreServiceObb=t)},shouldLoadNode:t=>e._shouldLoadNode(t)}}notifyLODUpdate(){this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating(),r(this._index)&&this._index.requestUpdate()}geometryFilterChanged(e){const t=this._index;r(t)&&t.layerFilterChanged(e),this.requestUpdate()}};e([_({readOnly:!0})],E.prototype,\"isMeshPyramid\",null),e([_({readOnly:!0})],E.prototype,\"isGraphics3D\",null),e([_({readOnly:!0})],E.prototype,\"indexStreamController\",null),e([_({readOnly:!0})],E.prototype,\"dataStreamController\",null),e([_({readOnly:!0})],E.prototype,\"crsVertex\",null),e([_({readOnly:!0})],E.prototype,\"crsIndex\",null),e([_()],E.prototype,\"screenSizeFactor\",void 0),e([_()],E.prototype,\"featureTarget\",void 0),e([_()],E.prototype,\"fixedFeatureTarget\",void 0),e([_()],E.prototype,\"layerView\",void 0),e([_()],E.prototype,\"layer\",void 0),e([_({})],E.prototype,\"updating\",void 0),e([_({})],E.prototype,\"updatingProgress\",void 0),e([_({readOnly:!0})],E.prototype,\"leavesReached\",void 0),e([_({constructOnly:!0})],E.prototype,\"scaleVisibilityEnabled\",void 0),e([_({readOnly:!0,dependsOn:[]})],E.prototype,\"rootNodeVisible\",null),E=e([c(\"esri.layers.graphics.controllers.I3SOnDemandController\")],E);const H=new o({deallocator:null});let k;function R(e,t){return r(e)&&e.length===t.length&&e.every((e=>z(t,e.name)>=0))}function z(e,t){const i=t.toLowerCase();for(let s=0;s<e.length;s++)if(e[s].name.toLowerCase()===i)return s;return-1}const K={factorIM:.2,factor3dObject:.05,distancePenalty:10},$=y();var J=E;export{J as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../core/maybe.js\";import r from\"../../rest/support/Query.js\";async function t(r,t,o){t=t.clone(),r.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=u(r));const i=a(r),n=r.capabilities.query.supportsPagination;t.start=0,t.num=i;let s=null;for(;;){const a=await r.source.queryFeaturesJSON(t,o);if(e(s)?s=a:s.features=s.features.concat(a.features),s.exceededTransferLimit=a.exceededTransferLimit,!n||!a.exceededTransferLimit)break;t.start+=i}return s}function a(e){return u(e)*o(e)}function o(e){return e.capabilities.query.maxRecordCount||2e3}function u(e){return e.capabilities.query.supportsMaxRecordCountFactor?r.MAX_MAX_RECORD_COUNT_FACTOR:1}export{u as getMaxRecordCountFactor,a as getMaximumQuerySize,o as getMaximumRecordCount,t as queryAllJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import{splitIntoChunks as t,remove as s}from\"../../../../core/arrayUtils.js\";import{resultOrAbort as i,result as r}from\"../../../../core/asyncUtils.js\";import{estimateStringByteSize as a,estimateNumberByteSize as n}from\"../../../../core/byteSizeEstimations.js\";import o from\"../../../../core/Logger.js\";import{isNone as c,unwrap as d,get as h,isSome as l}from\"../../../../core/maybe.js\";import{createAbortController as m,whenOrAbort as u}from\"../../../../core/promiseUtils.js\";import{formatNumber as g}from\"../../../../intl/number.js\";import{getMaximumQuerySize as b,queryAllJSON as p}from\"../../../../layers/support/featureQueryAll.js\";const f=o.getLogger(\"esri.views.3d.layers.i3s.I3SAttributeOverrides\");class y{constructor(e,t){this.layer=e,this.warnMaximumChangedObjectsExceeded=!1,this.changedObjectIds=new Set,this.pendingFetchAbortController=m(),this.interactiveEditingSessions=null,this._maximumNumberOfEditOVerrides=v,this.memCache=t.getMemCache(`${e.uid}-attribute-overrides`),this.pendingFetchChangedObjectIds=this.fetchChangedObjectIds(this.pendingFetchAbortController.signal),this.pendingFetchChangedObjectIds.then((()=>this.pendingFetchAbortController=null))}destroy(){this.layer=null,this.memCache.destroy(),this.memCache=null,this.pendingFetchAbortController&&(this.pendingFetchAbortController.abort(),this.pendingFetchAbortController=null),this.pendingFetchChangedObjectIds=null}createInteractiveEditSession(e){this.changedObjectIds.add(e),c(this.interactiveEditingSessions)&&(this.interactiveEditingSessions=[]);const t=this.interactiveEditingSessions,i=new O(e,{rollback:()=>{s(t,i),0===t.length&&(this.interactiveEditingSessions=null)},commit:t=>{for(const[s,i]of t)this.updateValue(e,s,i)}});return t.unshift(i),i}async apply(e,t,s){if(c(t))return;const{loadedAttributes:i,attributeData:r}=t;if(c(i)||0===i.length||c(r))return;if(await u(this.pendingFetchChangedObjectIds,s),0===this.changedObjectIds.size)return;const a={loadedAttributes:i,attributeData:r},n=this.getOverridesFromCache(e,a,this.changedObjectIds),{objectIds:o,fieldNames:d}=n,h=await this.queryOverridesFromAssociatedLayer(o,d,s);c(h)||this.processOverridesFromAssociatedLayer(e,h,d,a)}updateValue(e,t,s){this.changedObjectIds.add(e),this.cacheValue(e,t,s)}cacheValue(e,t,s){this.memCache.put(this.getCacheKey(e,t),s,this.memCacheValueSize(s))}getOverridesFromCache(e,{loadedAttributes:t,attributeData:s},i){const r=new Set,a=new Array;for(const o of t)a[o.index]=s[o.name];const n=new Set;for(let o=0;o<e.length;o++){const s=e[o];if(i.has(s))for(const e of t){const t=this.fromCache(s,e.index);void 0===t?(r.add(s),n.add(e.name)):a[e.index][o]=t}}return{objectIds:Array.from(r),fieldNames:Array.from(n)}}fromCache(e,t){const s=this.fromInteractiveEditingSession(e,t);if(void 0!==s)return s;const i=this.getCacheKey(e,t);return this.memCache.get(i)}fromInteractiveEditingSession(e,t){if(!c(this.interactiveEditingSessions))for(const s of this.interactiveEditingSessions){if(s.objectId!==e)continue;const i=s.get(t);if(void 0!==i)return i}}getCacheKey(e,t){return`${e}-${t}`}async queryOverridesFromAssociatedLayer(e,s,r){if(0===e.length||0===s.length)return null;e=e.sort(((e,t)=>e-t)),this.warnMaximumChangedObjectsExceeded&&(this.warnMaximumChangedObjectsExceeded=!1,this.logMaximumObjectsExceededWarning());const a=d(this.layer.associatedLayer),n=a.createQuery();n.where=\"1=1\",n.returnGeometry=!1,n.outFields=[a.objectIdField,...s],n.cacheHint=!0,n.objectIds=e;const o=b(a),c=e.length>o?t(e,o).map((e=>{const t=n.clone();return t.objectIds=e,i(p(a,t,{signal:r}))})):[i(p(a,n,{signal:r}))];return(await Promise.all(c)).reduce(((e,t)=>e.concat(t.ok?t.value.features:[])),[])}logMaximumObjectsExceededWarning(){let e=`The number of edited objects that are not yet cached in the scene service exceeds the maximum limit. Attribute changes will only be available for the first ${g(this._maximumNumberOfEditOVerrides)} objects. Please consider re-caching the scene service`;const t=this.layer.portalItem;t&&t.loaded?e+=` (${t.portal.url}/home/item.html?id=${t.id}#settings)`:e+=` (${this.layer.parsedUrl.path})`,f.warn(\"#queryOverrides()\",this.layer.title,`${e}.`)}processOverridesFromAssociatedLayer(e,t,s,{loadedAttributes:i,attributeData:r}){const a=d(this.layer.associatedLayer).objectIdField,n=s.map((e=>r[e])),o=new Map(i.map((e=>[e.name,e.index]))),c=s.map((e=>o.get(e))),h=new Map(Array.from(e,((e,t)=>[e,t])));for(const d of t){const e=d.attributes[a];for(let t=0;t<s.length;t++){const i=c[t],r=h.get(e),a=d.attributes[s[t]];n[t][r]=a,this.cacheValue(e,i,a)}}}memCacheValueSize(e){return\"string\"==typeof e?a(e):n()}async fetchChangedObjectIds(t){var s,i,a;const n=this.layer;if(await n.load({signal:t}),this.changedObjectIds.clear(),c(n.associatedLayer)||null==(s=n.associatedLayer.capabilities)||null==(i=s.operations)||!i.supportsChangeTracking)return;const o=this.getFetchChangedObjectIdsServerGen();if(c(o))return null;const d=n.associatedLayer.layerId,m=await r(e(`${n.associatedLayer.url}/extractChanges`,{method:\"post\",query:{f:\"json\",returnIdsOnly:!0,layers:`${d}`,returnUpdates:!0,returnDeletes:!1,returnInserts:!1,layerServerGens:JSON.stringify([{id:d,serverGen:o}])},timeout:j,signal:t})),u=m.ok&&null!=(a=m.value.data)&&a.edits?h(m.value.data.edits[0],\"objectIds\",\"updates\"):null;if(l(u)){const e=Math.min(this._maximumNumberOfEditOVerrides,u.length);e<u.length&&(this.warnMaximumChangedObjectsExceeded=!0);const t=u.sort(((e,t)=>e-t));for(let s=0;s<e;s++)this.changedObjectIds.add(t[s])}}getFetchChangedObjectIdsServerGen(){const e=this.layer;if(l(e.serviceUpdateTimeStamp)&&l(e.serviceUpdateTimeStamp.lastUpdate))return e.serviceUpdateTimeStamp.lastUpdate;const t=e.associatedLayer;return l(t)&&l(t.serverGens)&&l(t.serverGens.minServerGen)?t.serverGens.minServerGen:null}get test(){const e=Array.from(this.changedObjectIds),t=this.pendingFetchChangedObjectIds,s=this;return{changedObjectIds:e,pendingFetchChangedObjectIds:t,get maximumNumberOfEditOVerrides(){return s._maximumNumberOfEditOVerrides},set maximumNumberOfEditOVerrides(e){s._maximumNumberOfEditOVerrides=e}}}}class O{constructor(e,t){this.objectId=e,this.options=t,this.updates=new Map,this.state=0}get(e){return this.updates.get(e)}set(e,t){this.isActive&&this.updates.set(e,t)}rollback(){this.isActive&&(this.state=2,this.options.rollback())}commit(){this.isActive&&(this.state=1,this.options.commit(this.updates),this.updates.clear())}get isActive(){return 0===this.state}}const j=1e4,v=5e4;export{y as I3SAttributeOverrides};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Logger.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WhereClause as o}from\"../../../../core/sql/WhereClause.js\";import{findFieldsCaseInsensitive as n}from\"../i3s/I3SUtil.js\";const t=e.getLogger(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\"),p=e=>{let p=class extends e{constructor(){super(...arguments),this._definitionExpressionErrors=0,this._maxDefinitionExpressionErrors=20,this.logError=r=>{this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&t.error(\"Error while evaluating definitionExpression: \"+r),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&t.error(\"Further errors are ignored\")}}get parsedDefinitionExpression(){if(!this.i3slayer||!this.i3slayer.definitionExpression)return null;try{const r=o.create(this.i3slayer.definitionExpression,this.i3slayer.fieldsIndex);if(!r.isStandardized)return t.error(\"definitionExpression is using non standard function\"),null;const e=[],i=r.fieldNames;return n(i,this.i3slayer.fields,{missingFields:e}),e.length>0?(t.error(`definitionExpression references unknown fields: ${e.join(\", \")}`),null):(this._definitionExpressionErrors=0,r)}catch(r){return t.error(\"Failed to parse definitionExpression: \"+r),null}}get definitionExpressionFields(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:null}_evaluateClause(r,e){try{return r.testFeature(e)}catch(i){return this.logError(i),!1}}_addDefinitionExpressionToQuery(r){if(!this.parsedDefinitionExpression)return r;const e=this.i3slayer.definitionExpression,i=r.clone();return i.where?i.where=`(${e}) AND (${i.where})`:i.where=e,i}};return r([i()],p.prototype,\"i3slayer\",void 0),r([i({readOnly:!0})],p.prototype,\"parsedDefinitionExpression\",null),r([i({readOnly:!0})],p.prototype,\"definitionExpressionFields\",null),p=r([s(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\")],p),p};export{p as DefinitionExpressionSceneLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Error.js\";import{isSome as s}from\"../../../../core/maybe.js\";import\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{unpackFieldNames as o,populateMissingFields as p}from\"../../../../layers/support/fieldUtils.js\";import{getFetchPopupTemplate as a,getRequiredFields as i}from\"../../../layers/support/popupUtils.js\";const c=c=>{let u=class extends c{_validateFetchPopupFeatures(e){const{layer:s}=this,{popupEnabled:t}=s;if(!t)return new r(\"scenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{layer:s});return a(s,e)?void 0:new r(\"scenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:s})}async prepareFetchPopupFeatures(e){}async fetchPopupFeatures(e,r){const t=this._validateFetchPopupFeatures(r);if(t)return Promise.reject(t);const c=s(r)?r.clientGraphics:null;if(!c||0===c.length)return Promise.resolve([]);const u=[],n=[],l=\"scene\"===this.layer.type&&s(this.layer.associatedLayer)?this.layer.associatedLayer:this.layer,h=o(this.layer.fieldsIndex,await i(l,a(this.layer,r)));await this.prepareFetchPopupFeatures(h);const y=new Set;for(const s of c)p(h,s,y)?n.push(s):u.push(s);return 0===n.length?Promise.resolve(u):this.whenGraphicAttributes(n,[...y]).catch((()=>n)).then((e=>u.concat(e)))}};return u=e([t(\"esri.views.3d.layers.support.PopupSceneLayerView\")],u),u};export{c as PopupSceneLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../../../../core/lang.js\";import{isSome as e,isNone as n}from\"../../../../core/maybe.js\";import{attributeLookup as r}from\"../support/attributeUtils.js\";const o={setAttribute(){},rollback(){},commit(){}};function s(e,r){const s=r.attributes[e.objectIdField],i=e.sessions.get(s);if(i)return i;const a=t(r.attributes),u=new Set;if(null==s)return o;const c=e.attributeOverrides.createInteractiveEditSession(s),f=new Map,l=(t,e)=>{const n=f.get(t);if(null==n){const n=e.indexOf(s);return f.set(t,n),n}return n};let d=0;const b={setAttribute(t,o){if(0!==d)return;const s=e.fieldsIndex.get(t);if(n(s))return;const i=e.attributeStorageInfo.findIndex((t=>t.name===s.name));if(i<0)return;c.set(i,o);const a=e.attributeStorageInfo[i];let f=!1;u.add(t),e.forEachNode(((t,n)=>{const s=l(t,n);if(-1===s)return;const i=e.getAttributeData(t.index);if(i){const n=i[a.name];n&&(n[s]=o,e.setAttributeData(t.index,i,r),f=!0)}})),f&&e.clearMemCache()},rollback(){if(0===d){for(const t of u)this.setAttribute(t,a[t]);c.rollback(),d=1,e.sessions.delete(s)}},commit(){0===d&&(c.commit(),d=2,e.sessions.delete(s))}};return e.sessions.set(s,b),b}function i(t,n){const r=a(t,n);if(0===r.size)return;const o=new Map;for(let e=0;e<t.attributeStorageInfo.length;e++)o.set(t.attributeStorageInfo[e].name,e);let s=!1;r.forEach(((n,r)=>{const i=t.getAttributeData(r);let a=!1;n.forEach(((n,r)=>{const u=e(i)?i[r]:null,c=o.get(r);for(const{featureIndex:e,value:o,featureId:i}of n)u&&(u[e]=o,a=!0,s=!0),t.attributeOverrides.updateValue(i,c,o)})),a&&t.setAttributeData(r,i,null)})),s&&t.clearMemCache()}function a(t,e){const n=e.edits.updateFeatures;if(!n||0===n.length)return new d;const o=f(e),s=new d,i=new Map;for(let r=0;r<t.attributeStorageInfo.length;r++)i.set(t.attributeStorageInfo[r].name,r);const a=t.fieldsIndex,c=t.objectIdField,l=n.filter((t=>{const e=r(a,t.attributes,c);return o.has(e)}));return t.forEachNode(((e,n)=>{const o=new Set(n);for(const i of l){const f=r(a,i.attributes,c);if(!o.has(f))continue;const l=n.indexOf(f);for(const n in i.attributes){const r=t.fieldsIndex.normalizeFieldName(n),o=u(s,e.index,r),a=i.attributes[n];o.push({featureIndex:l,featureId:f,value:a})}}})),s}function u(t,e,n){const r=c(t,e),o=r.get(n);if(o)return o;const s=new Array;return r.set(n,s),s}function c(t,e){const n=t.get(e);if(n)return n;const r=new l;return t.set(e,r),r}function f(t){const e=new Set;if(!t.updatedFeatures)return e;for(const n of t.updatedFeatures)null!=n.objectId&&null==n.error&&e.add(n.objectId);return e}const l=Map,d=Map;export{s as createInteractiveEditSession,i as processAttributeEdits};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{fixFields as e,unpackFieldNames as r}from\"../../../../layers/support/fieldUtils.js\";function i(){return{requiredFields:{type:[String],readOnly:!0},availableFields:{type:[String],readOnly:!0,get:function(){const{layer:i,layer:{fieldsIndex:t},requiredFields:l}=this;return i.outFields?e(t,[...r(t,i.outFields),...l]):e(t,l)}}}}export{i as defineFieldProperties};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/extensions/serializableProperty/reader.js\";import\"../../core/accessorSupport/tracking.js\";import t from\"./LayerView.js\";class o extends t{constructor(){super(...arguments),this.layer=null,this.filter=null}get availableFields(){return[]}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){throw new Error(\"Not implemented\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"Not implemented\")}queryFeatures(e,r){throw new Error(\"Not implemented\")}queryObjectIds(e,r){throw new Error(\"Not implemented\")}queryFeatureCount(e,r){throw new Error(\"Not implemented\")}createQuery(){throw new Error(\"Not implemented\")}queryExtent(e,r){throw new Error(\"Not implemented\")}}e([r()],o.prototype,\"layer\",void 0),e([r()],o.prototype,\"availableFields\",null),e([r()],o.prototype,\"maximumNumberOfFeatures\",null),e([r({readOnly:!0})],o.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([r()],o.prototype,\"filter\",void 0);export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import s from\"./Accessor.js\";import e from\"./Logger.js\";import{runTracked as a}from\"./accessorSupport/tracking.js\";import{subclass as r}from\"./accessorSupport/decorators/subclass.js\";import{SimpleTrackingTarget as n}from\"./accessorSupport/tracking/SimpleTrackingTarget.js\";const c=s=>{let a=class extends s{constructor(){super(...arguments),this.asyncUpdateState=new Map}autoUpdateAsync(t,s){return o((s=>this.updateAsync(t,s)),s)}async updateAsync(t,s){if(!this.startAsyncUpdate(t)){try{const e=await s();this._set(t,e)}catch(a){e.getLogger(this.declaredClass).warn(`Async update of \"${t}\" failed. Async update functions should not throw exceptions.`)}this.endAsyncUpdate(t)&&this.updateAsync(t,s)}}startAsyncUpdate(t){var s;const e=null!=(s=this.asyncUpdateState.get(t))?s:0;return 1&e?(this.asyncUpdateState.set(t,2|e),!0):(this.asyncUpdateState.set(t,1|e),!1)}endAsyncUpdate(t){var s;const e=-2&(null!=(s=this.asyncUpdateState.get(t))?s:0);return 2&e?(this.asyncUpdateState.set(t,-3&e),!0):(this.asyncUpdateState.set(t,e),!1)}};return a=t([r(\"esri.core.AsyncUpdate\")],a),a};function o(t,s){const e=()=>{o&&!p&&t(r)},r=()=>{if(!o||p)return s();o.clear(),p=!0;const t=a(o,s);return p=!1,t},c=()=>{o&&(o.destroy(),o=null)};let o=new n(e),p=!1;return t(r),{remove:c}}let p=class extends(c(s)){};p=t([r(\"esri.core.AsyncUpdate\")],p);export{p as AsyncUpdate,c as AsyncUpdateMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{AsyncUpdateMixin as r}from\"../../../../core/AsyncUpdate.js\";import{HandleOwner as s}from\"../../../../core/HandleOwner.js\";import t from\"../../../../core/Logger.js\";import{unwrapOr as i}from\"../../../../core/maybe.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{fixFields as d,collectLabelingFields as n,collectFilterFields as a}from\"../../../../layers/support/fieldUtils.js\";const p=t.getLogger(\"esri.views.3d.layers.support.SceneLayerViewRequiredFields\");let c=class extends(r(s)){constructor(e){super(e)}get requiredFields(){const{layerView:{layer:{fieldsIndex:e},definitionExpressionFields:r},rendererFields:s,labelingFields:t,viewFilterFields:o}=this;return d(e,[...i(r,[]),...i(s,[]),...i(t,[]),...i(o,[])])}initialize(){const e=this.layerView.layer;this.layer=e,this.handles.add([this.autoUpdateAsync(\"rendererFields\",(()=>{const{fieldsIndex:e,renderer:r}=this.layer;return r?y((s=>r.collectRequiredFields(s,e))):null})),this.autoUpdateAsync(\"labelingFields\",(()=>{const{layer:e}=this;return e.labelsVisible?y((r=>n(r,e))):null})),this.autoUpdateAsync(\"viewFilterFields\",(()=>{const{layer:e,filter:r}=this.layerView;return y((s=>a(s,e,r)))}))])}};async function y(e){const r=new Set;try{return await e(r),Array.from(r).sort()}catch(s){return p.error(s),null}}e([o()],c.prototype,\"layerView\",void 0),e([o()],c.prototype,\"layer\",void 0),e([o()],c.prototype,\"requiredFields\",null),e([o()],c.prototype,\"rendererFields\",void 0),e([o()],c.prototype,\"labelingFields\",void 0),e([o()],c.prototype,\"viewFilterFields\",void 0),c=e([l(\"esri.views.3d.layers.support.SceneLayerViewRequiredFields\")],c);export{c as SceneLayerViewRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{WorkerHandle as r}from\"../../../core/workers/WorkerHandle.js\";class e extends r{constructor(r){super(\"SceneLayerWorker\",\"dracoDecompressPointCloudData\",r,{hasInitialize:!0})}getTransferList(r){return[r.geometryBuffer]}}export{e as I3SPointsWorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Graphic.js\";import r from\"../../../core/Logger.js\";import{destroyMaybe as i,isSome as s,isNone as o,unwrap as a}from\"../../../core/maybe.js\";import{init as n}from\"../../../core/watchUtils.js\";import{property as d}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import{b as l}from\"../../../chunks/vec3.js\";import{f as u,c}from\"../../../chunks/vec3f64.js\";import{projectBuffer as p,projectVectorToVector as g,projectBoundingRect as m}from\"../../../geometry/projection.js\";import{create as y}from\"../../../geometry/support/aaBoundingRect.js\";import{extentContainsCoords3D as f}from\"../../../geometry/support/contains.js\";import{makeDehydratedPoint as _,estimateSize as b}from\"../../../layers/graphics/dehydratedFeatures.js\";import{hydrateGraphic as v}from\"../../../layers/graphics/hydratedFeatures.js\";import E from\"../../../layers/graphics/controllers/I3SOnDemandController.js\";import{getRenderingInfo as x,getRenderingInfoAsync as I}from\"../../../renderers/support/renderingInfoUtils.js\";import{getGeometryZScaler as w}from\"../../../rest/query/operations/zscale.js\";import S from\"../../../rest/support/Query.js\";import{I3SPointsWorkerHandle as C}from\"./I3SPointsWorkerHandle.js\";import{LayerView3D as D}from\"./LayerView3D.js\";import F from\"./graphics/Graphics3DFeatureLikeLayerView.js\";import A from\"./graphics/QueryEngine.js\";import{createInteractiveEditSession as O,processAttributeEdits as N}from\"./i3s/attributeEditing.js\";import{I3SAttributeOverrides as j}from\"./i3s/I3SAttributeOverrides.js\";import{checkSpatialReferences as T,containsDraco as G,whenGraphicAttributes as V,getCachedAttributeValue as M}from\"./i3s/I3SUtil.js\";import{DefinitionExpressionSceneLayerView as R}from\"./support/DefinitionExpressionSceneLayerView.js\";import{defineFieldProperties as P}from\"./support/fieldProperties.js\";import{PopupSceneLayerView as L}from\"./support/PopupSceneLayerView.js\";import{SceneLayerViewRequiredFields as U}from\"./support/SceneLayerViewRequiredFields.js\";import q from\"../support/debugFlags.js\";import{GraphicsMap as H}from\"../support/GraphicsMap.js\";import{compute as Q}from\"../support/orientedBoundingBox.js\";import{updatingProgress as k}from\"../support/updatingProperties.js\";import B from\"../../layers/SceneLayerView.js\";import z from\"../../layers/support/FeatureFilter.js\";import{TaskPriority as W}from\"../../support/Scheduler.js\";const K=r.getLogger(\"esri.views.3d.layers.SceneLayerGraphicsView3D\"),Z=P();let J=class extends(R(L(D(B)))){constructor(){super(...arguments),this.type=\"scene-layer-graphics-3d\",this._nodesAddedToStage=new Map,this.drapeSourceType=1,this._queryEngine=null,this._memCache=null,this._interactiveEditingSessions=new Map,this.loadedGraphics=new H,this.holeFilling=\"always\",this.progressiveLoadFactor=1,this.supportsHeightUnitConversion=!0,this._coordinatesOutsideExtentErrors=0,this._maxCoordinatesOutsideExtentErrors=20}initialize(){var e;const t=this.layer;this.addResolvingPromise(t.indexInfo),this._attributeOverrides=new j(this.layer,null==(e=this.view.resourceController)?void 0:e.memoryController),T(t,this.view.spatialReference,this.view.viewingMode),this.fieldsHelper=new U({layerView:this}),this.updatingHandles.add(t,\"rangeInfos\",(e=>this._rangeInfosChanged(e)),2),this.updatingHandles.add(t,\"renderer\",((e,t)=>this._rendererChange(e,t))),this.updatingHandles.add(this,\"parsedDefinitionExpression\",(()=>this._filterChange())),this.updatingHandles.add(this,\"view.floors\",(()=>this.graphics3d.filterVisibility.filterChanged())),this.handles.add(n(q,\"I3S_TREE_SHOW_TILES\",(e=>{if(e&&!this._treeDebugger){const e=this._controller.crsIndex;import(\"./support/I3STreeDebugger.js\").then((({I3STreeDebugger:t})=>{!this._treeDebugger&&q.I3S_TREE_SHOW_TILES&&(this._treeDebugger=new t({lv:this,view:this.view,nodeSR:e}))}))}else e||!this._treeDebugger||q.I3S_TREE_SHOW_TILES||(this._treeDebugger.destroy(),this._treeDebugger=null)}))),this._set(\"graphics3d\",new F({owner:this,layer:t,preferredUpdatePolicy:0,scaleVisibilityEnabled:!0,filterVisibilityEnabled:!0,timeExtentVisibilityEnabled:!1,frustumVisibilityEnabled:!1,elevationAlignmentEnabled:!0,elevationFeatureExpressionEnabled:!1,suspendResumeExtentMode:\"data\",dataExtent:t.fullExtent,updateClippingExtent:e=>this._updateClippingExtent(e)})),this.graphics3d.elevationAlignment&&this.graphics3d.elevationAlignment.events.on(\"invalidate-elevation\",(e=>this._invalidateElevation(e))),this.supportsHeightUnitConversion&&(this._verticalScale=w(\"point\",t.spatialReference,this.view.spatialReference)),this.addResolvingPromise(this.graphics3d.setup()),this._memCache=this.view.resourceController.memoryController.getMemCache(t.uid),this._controller=new E({layerView:this,scaleVisibilityEnabled:!1}),G(this.layer.geometryDefinitions)&&(this._worker=new C((e=>this.view.resourceController.schedule(e)))),this.handles.add(this.layer.on(\"apply-edits\",(e=>this.updatingHandles.addPromise(e.result)))),this.handles.add(this.layer.on(\"edits\",(e=>this._handleEdits(e)))),this.when((()=>{this._queryEngine=new A({layerView:this,priority:W.FEATURE_QUERY_ENGINE}),this.updatingHandles.add(this,\"maximumNumberOfFeatures\",(e=>this._controller.featureTarget=e),2),this.updatingHandles.add(this,\"suspended\",(e=>{e&&this._removeAllNodeData()}))}))}destroy(){this._treeDebugger=i(this._treeDebugger),this._attributeOverrides=i(this._attributeOverrides),this._set(\"graphics3d\",i(this.graphics3d)),this._controller=i(this._controller),this._queryEngine=i(this._queryEngine),this._worker=i(this._worker),this._memCache=i(this._memCache),this._nodesAddedToStage.clear(),this.fieldsHelper=i(this.fieldsHelper)}get requiredFields(){var e,t;return null!=(e=null==(t=this.fieldsHelper)?void 0:t.requiredFields)?e:[]}get maximumNumberOfFeatures(){const e=this.graphics3d&&this.graphics3d.graphicsCore&&this.graphics3d.graphicsCore.displayFeatureLimit;return e?e.maximumNumberOfFeatures:0}set maximumNumberOfFeatures(e){null!=e?(this._override(\"maximumNumberOfFeatures\",e),this._controller.fixedFeatureTarget=!0):(this._clearOverride(\"maximumNumberOfFeatures\"),this._controller.fixedFeatureTarget=!1)}get maximumNumberOfFeaturesExceeded(){return!this.suspended&&(!!this._controller&&!this._controller.leavesReached)}get hasM(){return!1}get hasZ(){return!0}notifyGraphicGeometryChanged(e){this.graphics3d.graphicsCore.notifyGraphicGeometryChanged(e)}notifyGraphicVisibilityChanged(e){this.graphics3d.graphicsCore.notifyGraphicVisibilityChanged(e)}async whenGraphicAttributes(e,t){return V(this.layer,e,this._getObjectIdField(),t,(()=>[...this._nodesAddedToStage.values()]))}getGraphicFromGraphicUid(e){if(!this.loadedGraphics)return null;const t=v(this.loadedGraphics.find((t=>t.uid===e)),this.layer),r=this._getObjectIdField();return t&&t.attributes&&t.attributes[r]?(t.layer=this.layer,t.sourceLayer=this.layer,t):null}whenGraphicBounds(e,t){return this.graphics3d.graphicsCore.whenGraphicBounds(e,t)}computeAttachmentOrigin(e,t){return this.graphics3d.graphicsCore.computeAttachmentOrigin(e,t)}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}isUpdating(){return!!(this._controller&&this._controller.updating||this.graphics3d&&this.graphics3d.updating)}getRenderingInfo(e,t,r){const i=x(e,{renderer:t,arcade:r});if(s(i)&&i.color){const e=i.color;e[0]=e[0]/255,e[1]=e[1]/255,e[2]=e[2]/255}return i}async getRenderingInfoAsync(e,t,r,i){return I(e,{renderer:t,arcade:r,...i})}get symbolUpdateType(){return this.graphics3d.graphicsCore.symbolUpdateType}highlight(e){return this.graphics3d.highlight(e,this.layer.objectIdField)}get updatePolicy(){return this.graphics3d.graphicsCore.effectiveUpdatePolicy}createInteractiveEditSession(e){return O(this.attributeEditingContext,e)}async extractBinaryPointData(e,t){const r={geometryBuffer:e.geometryBuffer};return o(this._worker)&&(this._worker=new C((e=>this.view.resourceController.schedule(e)))),this._worker.invoke(r,t).then((e=>{if(s(e)){return{positionData:e.positions,featureIds:e.featureIds}}throw new Error(\"Failed to decompress Draco point data\")}))}checkExtent(e,t){e&&!f(e,t)&&(this._coordinatesOutsideExtentErrors<this._maxCoordinatesOutsideExtentErrors&&K.error(\"Service Error: Coordinates outside of layer extent\"),this._coordinatesOutsideExtentErrors+1===this._maxCoordinatesOutsideExtentErrors&&K.error(\"Maximum number of errors reached. Further errors are ignored.\"),this._coordinatesOutsideExtentErrors++)}async addNode(e,t,r){if(!X(t)&&!$(t))return Promise.reject();if(this._nodesAddedToStage.has(e.index))return void K.error(\"I3S node \"+e.id+\" already added\");const i=this.layer.fullExtent,s=i&&te(i.clone(),.5),o=this._controller.crsVertex,a=[],n={graphics:null,featureIds:null,attributeInfo:t.attributeDataInfo,node:e};if(X(t)?await this._addNodeBinaryPointData(e,n,t,s,a,r):$(t)&&this._addNodeLegacyPointData(e,n,t,s,a),await this._attributeOverrides.apply(n.featureIds,t.attributeDataInfo,r),e.numFeatures=n.graphics.length,this._updateNodeMemory(e),ee(n),a.length>0&&(this.computeObb(e,a,o),this._controller.updateVisibility(e.index)),!this._controller.isGeometryVisible(e))return this._cacheNodeData(n),Promise.resolve();if(this._verticalScale)for(const d of n.graphics)this._verticalScale(d.geometry);return this._nodesAddedToStage.set(e.index,n),this.loadedGraphics.addMany(n.graphics),this._filterNode(n),this._treeDebugger&&this._treeDebugger.update(),Promise.resolve()}computeObb(e,t,r){const i=this._controller.crsIndex,s=i.isGeographic?this.view.renderSpatialReference:i;p(t,r,0,t,s,0,t.length/3);const o={data:t,size:3};e.serviceObb=Q(o),i.isGeographic&&g(e.serviceObb.center,s,e.serviceObb.center,i)}isNodeLoaded(e){return this._nodesAddedToStage.has(e)}isNodeReloading(){return!1}updateNodeState(){}async _addNodeBinaryPointData(e,r,i,o,n,d){const h=await this.extractBinaryPointData(i,d);if(null==h)return Promise.reject();const c=this._getObjectIdField(),g=this._controller.crsVertex,m=this.view.spatialReference,y=this.graphics3d.graphicsCore,{positionData:f,featureIds:b}=h,v=3,E=f.length/v,x=new Array;for(let I=0;I<E;I++){const r=s(e.serviceObb)?e.serviceObb.center:[0,0,0],i=I*v,d=u(f[i+0],f[i+1],f[i+2]);l(d,d,r),e.serviceObb||n.push(d[0],d[1],d[2]),o&&this.checkExtent(o,d);const h=b[I],E={};null!=h&&(E[c]=h);const w=null==h?t.generateUID():h;p(d,g,0,ie,m,0,1);const S=_(ie[0],ie[1],ie[2],m),C=this.loadedGraphics.get(w);if(s(C))C.level<e.level&&(se.property=\"geometry\",se.graphic=C,se.oldValue=a(C.geometry),se.newValue=S,C.geometry=S,y.graphicUpdateHandler(se)),x.push(C);else{const r=t.generateUID();x.push({objectId:w,uid:r,geometry:S,attributes:E,visible:!0,level:e.level})}}r.graphics=x,r.featureIds=b}_addNodeLegacyPointData(e,r,i,o,a){const n=this._getObjectIdField(),d=this._controller.crsVertex,h=this.view.spatialReference,l=[0,0,0],u=new Array,c=new Array;for(const g of i.pointData){const r=g.featureDataPosition,i=r.length,m=g.geometries&&g.geometries[0]||re[i],y=g.featureIds[0];if(\"points\"!==m.params.type)continue;o&&this.checkExtent(o,r);const f={};null!=y&&(f[n]=y);const b=null==y?t.generateUID():y;let v;\"Embedded\"===m.type&&(v=m.params.vertexAttributes.position);for(let o=0;o<v.length;o+=i){for(let e=0;e<i;e++)l[e]=r[e]+v[o+e];const n=3===i;e.serviceObb||a.push(l[0],l[1],n?l[2]:0),p(l,d,0,ie,h,0,1);const u=_(ie[0],ie[1],n?ie[2]:void 0,h),g=this.loadedGraphics.get(b);s(g)?c.push(g):c.push({objectId:b,uid:t.generateUID(),geometry:u,attributes:f,visible:!0})}u.push(y)}r.graphics=c,r.featureIds=u}_updateNodeMemory(e){e.memory=4096+(s(e.numFeatures)?e.numFeatures*this.graphics3d.graphicsCore.usedMemoryPerGraphic:0)}_cacheNodeData(e){const t=e.graphics.reduce(((e,t)=>b(t)+e),512+8*e.featureIds.length+1024);this._memCache.put(this._getMemCacheKey(e.node),e,t)}_getMemCacheKey(e){return`${e.index}`}_removeAllNodeData(){this._nodesAddedToStage.forEach((e=>{if(e){const t=e.node;this._updateNodeMemory(t),this._cacheNodeData(e)}})),this._nodesAddedToStage.clear(),this._treeDebugger&&this._treeDebugger.update(),this.loadedGraphics.clear()}removeNode(e){const t=this._removeNodeStageData(e);t&&(this._updateNodeMemory(t.node),this._cacheNodeData(t))}_removeNodeStageData(e){const t=this._nodesAddedToStage.get(e);return t?(this.loadedGraphics.removeMany(t.graphics),this._nodesAddedToStage.delete(e),this._treeDebugger&&this._treeDebugger.update(),t):null}async loadCachedNodeData(e){return this._memCache.pop(this._getMemCacheKey(e))}async addCachedNodeData(e,t,r,i){if(!this._nodesAddedToStage.has(e.index))return this.loadedGraphics.addMany(t.graphics),this._nodesAddedToStage.set(e.index,t),this._updateNodeMemory(e),await this.updateAttributes(e.index,r,i),this._filterNode(t),this._treeDebugger&&this._treeDebugger.update(),Promise.resolve();K.error(\"I3S node \"+e.id+\" already added\")}getLoadedNodeIds(){const e=[];return this._nodesAddedToStage.forEach((t=>e.push(t.node.id))),e.sort()}getVisibleNodes(){const e=new Array;return this._nodesAddedToStage.forEach((t=>e.push(t.node))),e}getLoadedNodeIndices(e){this._nodesAddedToStage.forEach(((t,r)=>e.push(r)))}getLoadedAttributes(e){const t=this._nodesAddedToStage.get(e);if(t&&s(t.attributeInfo))return t.attributeInfo.loadedAttributes}getAttributeData(e){const t=this._nodesAddedToStage.get(e);if(t&&s(t.attributeInfo))return t.attributeInfo.attributeData}setAttributeData(e,t){const r=this._nodesAddedToStage.get(e);r&&!o(r.attributeInfo)&&(r.attributeInfo.attributeData=t,this._attributeValuesChanged(r))}async updateAttributes(e,t,r){const i=this._nodesAddedToStage.get(e);i&&(await this._attributeOverrides.apply(i.featureIds,t,r),i.attributeInfo=t,this._attributeValuesChanged(i))}_attributeValuesChanged(e){if(ee(e),this._filterNode(e),this.graphics3d.graphicsCore.labelsEnabled){const t=e.graphics.map((e=>e.uid));this.graphics3d.graphicsCore.updateLabelingInfo(t)}}_updateClippingExtent(e){return this._controller&&this._controller.updateClippingArea(e),!1}_getObjectIdField(){return this.layer.objectIdField||\"OBJECTID\"}async _rendererChange(e,t){const{layer:{fieldsIndex:r}}=this,i=new Set;let s,o;e?(await e.collectRequiredFields(i,r),s=Array.from(i).sort()):s=[],i.clear(),t?(await t.collectRequiredFields(i,r),o=Array.from(i).sort()):o=[],s.length===o.length&&s.every(((e,t)=>s[t]===o[t]))||this._reloadAllNodes()}_rangeInfosChanged(e){null!=e&&e.length>0&&K.warn(\"Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.\")}_filterChange(){this._nodesAddedToStage.forEach((e=>this._filterNode(e)))}_reloadAllNodes(){this._removeAllNodeData(),this._controller&&this._controller.restartNodeLoading()}_filterNode(e){const t=this.parsedDefinitionExpression;for(const r of e.graphics){const e=r.visible;r.visible=!t||this._evaluateClause(t,r),e!==r.visible&&(se.graphic=r,se.property=\"visible\",se.oldValue=e,se.newValue=r.visible,this.graphics3d.graphicsCore.graphicUpdateHandler(se))}}_invalidateElevation(e){const t=this._controller.crsIndex;m(e.extent,e.spatialReference,oe,t),this._controller.updateElevationChanged(oe,t)}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};return s(this.filter)?this.filter.createQuery(e):new S(e)}queryFeatures(e,t){return this._queryEngine.executeQuery(this._ensureQuery(e),null==t?void 0:t.signal)}queryObjectIds(e,t){return this._queryEngine.executeQueryForIds(this._ensureQuery(e),null==t?void 0:t.signal)}queryFeatureCount(e,t){return this._queryEngine.executeQueryForCount(this._ensureQuery(e),null==t?void 0:t.signal)}queryExtent(e,t){return this._queryEngine.executeQueryForExtent(this._ensureQuery(e),null==t?void 0:t.signal)}_ensureQuery(e){return this._addDefinitionExpressionToQuery(o(e)?this.createQuery():S.from(e))}getUsedMemory(){const e=this.graphics3d&&this.graphics3d.graphicsCore;return e?e.usedMemory:0}getUnloadedMemory(){const e=this.graphics3d&&this.graphics3d.graphicsCore;return.8*((this._controller?this._controller.unloadedMemoryEstimate:0)+(e?e.unprocessedMemoryEstimate:0))}ignoresMemoryFactor(){return this._controller&&this._controller.fixedFeatureTarget}_handleEdits(e){N(this.attributeEditingContext,e)}get attributeEditingContext(){const e=this._getObjectIdField();return{sessions:this._interactiveEditingSessions,fieldsIndex:this.layer.fieldsIndex,objectIdField:e,forEachNode:e=>this._nodesAddedToStage.forEach((t=>e(t.node,t.featureIds))),attributeStorageInfo:this.i3slayer.attributeStorageInfo,attributeOverrides:this._attributeOverrides,getAttributeData:e=>this.getAttributeData(e),setAttributeData:(t,r,i)=>{this.setAttributeData(t,r);const o=this._nodesAddedToStage.get(t);if(s(i)){const t=this.loadedGraphics.get(i.attributes[e]);s(t)&&this.graphics3d.graphicsCore.recreateGraphics([t])}else s(o)&&this.graphics3d.graphicsCore.recreateGraphics(o.graphics)},clearMemCache:()=>{}}}get performanceInfo(){const e={displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:this.maximumNumberOfFeatures,totalNumberOfFeatures:-1,nodes:this._nodesAddedToStage.size,core:this.graphics3d.graphicsCore.performanceInfo};return this._controller&&this._controller.updateStats(e),e}get test(){return{controller:this._controller,numNodes:this._nodesAddedToStage.size,numFeatures:this.loadedGraphics.length}}};e([d()],J.prototype,\"graphics3d\",void 0),e([d({type:z})],J.prototype,\"filter\",void 0),e([d()],J.prototype,\"loadedGraphics\",void 0),e([d({aliasOf:\"layer\"})],J.prototype,\"i3slayer\",void 0),e([d()],J.prototype,\"_controller\",void 0),e([d()],J.prototype,\"updating\",void 0),e([d()],J.prototype,\"suspended\",void 0),e([d()],J.prototype,\"holeFilling\",void 0),e([d(k)],J.prototype,\"updatingProgress\",void 0),e([d({aliasOf:\"_controller.updatingProgress\"})],J.prototype,\"updatingProgressValue\",void 0),e([d(Z.requiredFields)],J.prototype,\"requiredFields\",null),e([d(Z.availableFields)],J.prototype,\"availableFields\",void 0),e([d()],J.prototype,\"fieldsHelper\",void 0),e([d({type:Number})],J.prototype,\"maximumNumberOfFeatures\",null),e([d({readOnly:!0})],J.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([d({readOnly:!0,aliasOf:\"view.qualitySettings.sceneService.point.lodFactor\"})],J.prototype,\"lodFactor\",void 0),e([d({readOnly:!0})],J.prototype,\"hasM\",null),e([d({readOnly:!0})],J.prototype,\"hasZ\",null),J=e([h(\"esri.views.3d.layers.SceneLayerGraphicsView3D\")],J);var Y=J;function $(e){return\"pointData\"in e}function X(e){return\"geometryBuffer\"in e&&null!==e.geometryBuffer}function ee(e){const t=e.attributeInfo;for(let r=0;r<e.graphics.length;r++){const i=e.graphics[r];if(i.attributes||(i.attributes={}),s(t)&&s(t.loadedAttributes))for(const{name:e}of t.loadedAttributes)t.attributeData[e]&&(i.attributes[e]=M(t.attributeData[e],r))}}function te(e,t){return e.xmin-=t,e.ymin-=t,e.xmax+=t,e.ymax+=t,e.hasZ&&(e.zmin-=t,e.zmax+=t),e.hasM&&(e.mmin-=t,e.mmax+=t),e}const re={2:{type:\"Embedded\",params:{type:\"points\",vertexAttributes:{position:[0,0]}}},3:{type:\"Embedded\",params:{type:\"points\",vertexAttributes:{position:[0,0,0]}}}},ie=c(),se={graphic:null,property:null,oldValue:null,newValue:null},oe=y();export{Y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{geometryTypes as t}from\"../../../geometry.js\";import r from\"../../../TimeExtent.js\";import{JSONMap as i}from\"../../../core/jsonMap.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";import{clone as o}from\"../../../core/lang.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../../core/accessorSupport/decorators/writer.js\";import{fromJSON as l}from\"../../../geometry/support/jsonUtils.js\";import c from\"../../../rest/support/Query.js\";var d;const m=new i({esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"envelope-intersects\",esriSpatialRelIndexIntersects:\"index-intersects\",esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:\"relation\"}),u=new i({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"});let h=d=class extends s{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship=\"intersects\",this.hiddenIds=new Set,this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null,this.enabled=!1}writeWhere(e,t){t.where=e||\"1=1\"}enable(){this._set(\"enabled\",!0)}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:s,objectIds:n,units:a,distance:p}=this;return new c({geometry:o(r),objectIds:o(n),spatialRelationship:i,timeExtent:o(s),where:t,units:a,distance:p,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,hiddenIds:i,timeExtent:s,objectIds:n,units:a,distance:p}=this,l=new Set;return i.forEach((e=>l.add(e))),new d({geometry:o(t),hiddenIds:l,objectIds:o(n),spatialRelationship:r,timeExtent:o(s),where:e,units:a,distance:p})}};e([n({type:String})],h.prototype,\"where\",void 0),e([p(\"where\")],h.prototype,\"writeWhere\",null),e([n({types:t,json:{read:l,write:!0}})],h.prototype,\"geometry\",void 0),e([n({type:String,json:{read:{source:\"spatialRel\",reader:m.read},write:{target:\"spatialRel\",writer:m.write}}})],h.prototype,\"spatialRelationship\",void 0),e([n({json:{write:(e,t,r)=>t[r]=Array.from(e),read:e=>new Set(e)}})],h.prototype,\"hiddenIds\",void 0),e([n({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],h.prototype,\"distance\",void 0),e([n({type:[Number],json:{write:!0}})],h.prototype,\"objectIds\",void 0),e([n({type:String,json:{read:u.read,write:{writer:u.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],h.prototype,\"units\",void 0),e([n({type:r,json:{write:!0}})],h.prototype,\"timeExtent\",void 0),e([n({readOnly:!0})],h.prototype,\"enabled\",void 0),h=d=e([a(\"esri.views.layers.support.FeatureFilter\")],h);var y=h;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction n(n,t,e){if(!e||null==t)return null;if(!n)return r(t,e);const o=n.get(e);return o?t[o.name]:null}function r(n,r){const t=r.toLowerCase();for(const e in n)if(e.toLowerCase()===t)return n[e];return null}export{n as attributeLookup};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import r from\"../../../../core/Accessor.js\";import{isNone as t}from\"../../../../core/maybe.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../../geometry/Extent.js\";import o from\"../../../../layers/graphics/data/QueryEngine.js\";import i from\"../../../../rest/support/FeatureSet.js\";import u from\"../../../../rest/support/Query.js\";import{featureGeometryTypeKebabDictionary as y}from\"../../../../geometry/support/typeUtils.js\";const c=o;let l=class extends r{constructor(e){super(e),this._dataQueryEngineInstance=null}get queryGeometryType(){switch(this.layer.geometryType){case\"multipoint\":case\"point\":case\"polygon\":case\"polyline\":return this.layer.geometryType;case\"mesh\":return\"polygon\";default:return}}get defaultQueryJSON(){return new u({outSpatialReference:this.spatialReference}).toJSON()}get dataQueryEngine(){return this.ensureDataQueryEngine()}destroy(){this.clear()}clear(){return!!this._dataQueryEngineInstance&&(this._dataQueryEngineInstance.destroy(),this._dataQueryEngineInstance=null,!0)}async executeQueryForIdSet(e,r){return this.dataQueryEngine.executeQueryForIdSet(this._ensureQueryJSON(e),r)}async executeQueryForCount(e,r){return this.dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(e),r)}async executeQueryForExtent(e,r){const{count:t,extent:s}=await this.dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(e),r);return{count:t,extent:n.fromJSON(s)}}async executeQueryForIds(e,r){return this.dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(e),r)}async executeQueryForLatestObservations(e,r){const t=await this.dataQueryEngine.executeQueryForLatestObservations(this._ensureQueryJSON(e),r),s=i.fromJSON(t);return s.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),s}async executeQuery(e,r){const t=await this.dataQueryEngine.executeQuery(this._ensureQueryJSON(e),r),s=i.fromJSON(t);return s.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),s}_ensureQueryJSON(e){return t(e)?this.defaultQueryJSON:(\"outSpatialReference\"in e&&!e.outSpatialReference&&(e.outSpatialReference=this.spatialReference),e.toJSON())}ensureDataQueryEngine(){if(this._dataQueryEngineInstance)return this._dataQueryEngineInstance;const e=\"timeInfo\"in this.layer&&this.layer.timeInfo&&this.layer.timeInfo.toJSON()||null,r=this.layer.objectIdField,t=y.toJSON(this.queryGeometryType),s=this.layer.fields.map((e=>e.toJSON())),a=this.layerView.view.resourceController.scheduler,n=this.priority,o=this.spatialReference.toJSON(),i=this.layerView.graphics3d.graphicsCore.featureStore,{hasZ:u,hasM:l}=this.layerView;return this._dataQueryEngineInstance=new c({hasZ:u,hasM:l,geometryType:t,fields:s,timeInfo:e,spatialReference:o,objectIdField:r,featureStore:i,scheduler:a,priority:n}),this._dataQueryEngineInstance}};e([s({constructOnly:!0})],l.prototype,\"layerView\",void 0),e([s({constructOnly:!0})],l.prototype,\"priority\",void 0),e([s({readOnly:!0,aliasOf:\"layerView.view.spatialReference\"})],l.prototype,\"spatialReference\",void 0),e([s({readOnly:!0,aliasOf:\"layerView.layer\"})],l.prototype,\"layer\",void 0),e([s({readOnly:!0})],l.prototype,\"queryGeometryType\",null),e([s({readOnly:!0})],l.prototype,\"defaultQueryJSON\",null),l=e([a(\"esri.views.3d.layers.graphics.QueryEngine\")],l);var p=l;export{l as QueryEngine,p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import s from\"../../../../core/Handles.js\";import{init as i}from\"../../../../core/watchUtils.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getReferenceEllipsoid as o}from\"../../../../geometry/projectionEllipsoid.js\";import{FrustumExtentIntersection as a}from\"../../support/FrustumExtentIntersection.js\";import{TaskPriority as l}from\"../../../support/Scheduler.js\";const h=1.2;let u=class extends t{constructor(){super(...arguments),this.suspended=!1,this.extent=null,this.extentIntersectionDirty=!0,this._isVisibleBelowSurface=!1,this.handles=new s,this.layerView=null,this.updating=!0}setup(e){this.layerView=e,this.extentIntersection=new a({renderCoordsHelper:e.view.renderCoordsHelper});const t=e.view,s=t.basemapTerrain,r=t.resourceController.scheduler;this.handles.add([t.on(\"resize\",(()=>this.viewChange())),t.state.watch(\"camera\",(()=>this.viewChange()),!0),r.registerTask(l.FRUSTUM_VISIBILITY,this),s.on(\"elevation-bounds-change\",(()=>this.elevationBoundsChange()))]),\"local\"===t.viewingMode?this.isVisibleBelowSurface=!0:this.handles.add([i(s,[\"opacity\",\"wireframe\"],(()=>this.updateIsVisibleBelowSurface())),i(t,\"map.ground.navigationConstraint.type\",(()=>this.updateIsVisibleBelowSurface()))])}destroy(){this.layerView=null,this.extent=null,this.extentIntersection=null,this.handles&&(this.handles.destroy(),this.handles=null)}_setDirty(){this.updating||this._set(\"updating\",!0)}setExtent(e){this.extent=e,this.extentIntersectionDirty=!0,this._setDirty()}viewChange(){this._setDirty()}elevationBoundsChange(){this._setDirty(),this.extentIntersectionDirty=!0}set isVisibleBelowSurface(e){this._isVisibleBelowSurface=e,this._setDirty(),this.extentIntersectionDirty=!0}updateIsVisibleBelowSurface(){const e=this.layerView.view,t=e.basemapTerrain,s=\"local\"===e.viewingMode,i=e.map.ground&&e.map.ground.navigationConstraint&&\"none\"===e.map.ground.navigationConstraint.type;this.isVisibleBelowSurface=s||!t.opaque||i}updateExtentIntersection(){if(!this.extentIntersectionDirty)return;this.extentIntersectionDirty=!1;const e=this.layerView.view;let t;if(this._isVisibleBelowSurface)t=-.3*o(e.spatialReference).radius;else{const{min:s,max:i}=e.basemapTerrain.elevationBounds;t=s-Math.max(1,(i-s)*(h-1))}this.extentIntersection.update(this.extent,e.spatialReference,t)}get running(){return this.updating}runTask(){if(this._set(\"updating\",!1),!this.extent)return void this._set(\"suspended\",!1);this.updateExtentIntersection();const e=this.layerView.view.frustum,t=o(this.layerView.view.spatialReference).radius;this._set(\"suspended\",!this.extentIntersection.isVisibleInFrustum(e,t))}};e([r({readOnly:!0})],u.prototype,\"suspended\",void 0),e([r({readOnly:!0})],u.prototype,\"updating\",void 0),u=e([n(\"esri.views.3d.layers.graphics.Graphics3DFrustumVisibility\")],u);var p=u;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nclass e{constructor(){this.items=[]}addObject(e,t){this.items.push({type:0,objectStateId:t,object:e})}addRenderGeometry(e,t,s){this.items.push({type:1,objectStateId:t,renderGeometry:e,owner:s})}addExternal(e,t){this.items.push({type:2,objectStateId:t,remove:e})}remove(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];s.objectStateId===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeObject(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];0===s.type&&s.object===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeRenderGeometry(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];1===s.type&&s.renderGeometry===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeAll(){this.items.forEach((e=>{this._removeObjectStateItem(e)})),this.items=[]}_removeObjectStateItem(e){switch(e.type){case 0:0===e.objectStateId.channel?e.object.removeHighlight(e.objectStateId):1===e.objectStateId.channel&&e.object.removeOcclude(e.objectStateId);break;case 1:e.owner.removeRenderGeometryObjectState(e.renderGeometry,e.objectStateId);break;case 2:e.remove(e.objectStateId)}}}export{e as Object3DStateSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{Object3DStateSet as t}from\"../../webgl-engine/lib/Object3DStateSet.js\";class e{constructor(e,i){this.stateType=e,this.objectIdField=i,this.objectStateSet=new t,this.ids=new Set,this.paused=!1}hasGraphic(t){if(this.objectIdField){const e=t.graphic.attributes[this.objectIdField];return this.ids.has(e)}return this.ids.has(t.graphic.uid)}}export{e as Graphics3DObjectStateSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{makeHandle as t}from\"../../../../core/handleUtils.js\";import{Graphics3DObjectStateSet as e}from\"./Graphics3DObjectStateSet.js\";class s{constructor(t){this._graphicsCore=t,this._stateSets=new Array}destroy(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll())),this._stateSets=null}acquireSet(s,a){const i=new e(s,a);this._stateSets.push(i);const h=t((()=>this.releaseSet(i)));return{set:i,handle:h}}releaseSet(t){t.objectStateSet.removeAll();const e=this._stateSets?this._stateSets.indexOf(t):-1;-1!==e&&this._stateSets.splice(e,1)}_addObjectStateSet(t,e){t.addObjectStateSet(e.stateType,e.objectStateSet)}_removeObjectStateSet(t,e){t.removeObjectState(e.objectStateSet)}setUid(t,e){t.ids.add(e);const s=this._graphicsCore.graphics3DGraphics.get(e);s&&this._addObjectStateSet(s,t)}setUids(t,e){e.forEach((e=>this.setUid(t,e)))}setObjectIds(t,e){e.forEach((e=>t.ids.add(e))),this.initializeSet(t)}addGraphic(t){this._stateSets.forEach((e=>{!e.paused&&e.hasGraphic(t)&&this._addObjectStateSet(t,e)}))}removeGraphic(t){this._stateSets.forEach((e=>{e.hasGraphic(t)&&this._removeObjectStateSet(t,e)}))}allGraphicsDeleted(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll()))}initializeSet(t){const e=this._graphicsCore.graphics3DGraphics;t.objectIdField?e.forEach((e=>{e&&t.hasGraphic(e)&&this._addObjectStateSet(e,t)})):t.ids.forEach((s=>{const a=e.get(s);a&&this._addObjectStateSet(a,t)}))}get test(){return{states:this._stateSets}}}export{s as Graphics3DObjectStates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/PooledArray.js\";import{create as e,copy as r,area as s,expand as n,contains as o,containsPoint as i}from\"../../../../geometry/support/aaBoundingRect.js\";import{noBudget as h}from\"../../../support/Scheduler.js\";const a=.05;class c{constructor(){this._extents=new t({allocator:t=>t||e()}),this._tmpExtent=e(),this._dirty=!1}get empty(){return 0===this._extents.length}get size(){return this._extents.length}clear(){this._extents.clear()}add(t){this.contains(t)||(this.removeContained(t),r(this._extents.pushNew(),t),this._dirty=!0)}pop(){return this._dirty&&this.mergeTight(),this._extents.pop()}merge(t){return this.mergeTight(t),t.hasProgressed}mergeTight(t=h){const e=this._extents,o=new Set;let i=0;for(;i!==e.length;){e.sort(((t,e)=>t[0]-e[0])),i=e.length,o.clear();for(let i=0;i<e.length;++i){if(t.done)return;const h=e.getItemAt(i);for(let t=i+1;t<e.length;++t){const r=e.getItemAt(t);if(r[0]>=h[2])break;o.add(r)}o.forEach((i=>{if(h===i)return;if(i[2]<=h[0])return void o.delete(i);const c=s(h),g=s(i),m=this._tmpExtent;n(h,i,m);const d=c+g;(s(m)-d)/d<a&&(r(h,m),o.delete(i),e.remove(i),t.madeProgress())})),o.add(h)}}this._dirty=!1}contains(t){return this._extents.some((e=>o(e,t)))}removeContained(t){this._extents.filterInPlace((e=>!o(t,e)))}get test(){const t=this;return{containsPoint:e=>t._extents.some((t=>i(t,e)))}}}export{c as ExtentSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import i from\"../../../../core/Evented.js\";import s from\"../../../../core/Handles.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{ExtentSet as h}from\"./ExtentSet.js\";import{TaskPriority as o}from\"../../../support/Scheduler.js\";let p=class extends t{constructor(){super(...arguments),this.dirtyExtents=new h,this.globalDirty=!1,this.averageExtentUpdateSize=0,this.dirtyGraphicsSet=new Set,this.handles=new s,this.updateElevation=!1,this.layerView=null,this.graphicsCore=null,this.events=new i}setup(e,t,i,s){this.layerView=e,this.queryGraphicUIDsInExtent=t,this.graphicsCore=i,this.elevationProvider=s;const r=this.layerView.view.resourceController.scheduler;this.handles.add([s.on(\"elevation-change\",(e=>this._elevationChanged(e))),this.layerView.watch(\"suspended\",(()=>this.suspendedChange())),r.registerTask(o.ELEVATION_ALIGNMENT,this)])}destroy(){this.dirtyGraphicsSet.clear(),this.handles.destroy(),this.handles=null,this.layerView=null,this.graphicsCore=null,this.queryGraphicUIDsInExtent=null}clear(){this.dirtyGraphicsSet.clear(),this.notifyChange(\"updating\")}suspendedChange(){!0===this.layerView.suspended?this.updateElevation=!1:!1===this.layerView.suspended&&this.updateElevation&&(this.globalDirty=!0,this.notifyChange(\"updating\"))}elevationInfoChange(){this.globalDirty=!0,this.notifyChange(\"updating\")}get updating(){return this.running}get running(){return this.dirtyGraphicsSet.size>0||this.dirtyExtents&&!this.dirtyExtents.empty||this.globalDirty}get updatingRemaining(){return this.dirtyGraphicsSet.size+this.dirtyExtents.size*this.averageExtentUpdateSize}runTask(e){for(this.globalDirty&&(this.markAllGraphicsElevationDirty(),this.globalDirty=!1,e.madeProgress()),e.run((()=>this.dirtyExtents.merge(e)));this.running&&!e.done;)this._updateDirtyGraphics(e),this._updateDirtyExtents(e);this.layerView.view.deconflictor.setDirty(),this.notifyChange(\"updating\")}_updateDirtyGraphics(e){const t=this.layerView.view.renderCoordsHelper,i=0===this.graphicsCore.effectiveUpdatePolicy;for(const s of this.dirtyGraphicsSet.keys()){const a=this.graphicsCore.getGraphics3DGraphicById(s);if(this.dirtyGraphicsSet.delete(s),r(a)&&(a.alignWithElevation(this.elevationProvider,t,i),e.madeProgress()),e.done)return}}_updateDirtyExtents(e){for(;!this.dirtyExtents.empty&&!e.done;){const t=this.dirtyExtents.pop(),i=this.elevationProvider.spatialReference;this.events.emit(\"invalidate-elevation\",{extent:t,spatialReference:i});const s=this.dirtyGraphicsSet.size;this.queryGraphicUIDsInExtent(t,i,(e=>{const t=this.graphicsCore.getGraphics3DGraphicById(e);r(t)&&t.needsElevationUpdates()&&this.dirtyGraphicsSet.add(e)})),this.averageExtentUpdateSize=.1*(this.dirtyGraphicsSet.size-s)+.9*this.averageExtentUpdateSize,e.madeProgress()}}markAllGraphicsElevationDirty(){this.dirtyExtents.clear(),this.dirtyGraphicsSet.clear(),this.graphicsCore.graphics3DGraphics.forEach(((e,t)=>this.dirtyGraphicsSet.add(t)))}_elevationChanged(e){if(\"scene\"===e.context&&(!this.graphicsCore.layer.elevationInfo||\"relative-to-scene\"!==this.graphicsCore.layer.elevationInfo.mode))return;const{extent:t,spatialReference:i}=e;if(this.layerView.suspended){if(!this.updateElevation){const e=this.graphicsCore.computedExtent;e&&t[2]>e.xmin&&t[0]<e.xmax&&t[3]>e.ymin&&t[1]<e.ymax&&(this.updateElevation=!0)}this.events.emit(\"invalidate-elevation\",{extent:t,spatialReference:i})}else t[0]===-1/0?this.globalDirty=!0:this.dirtyExtents.add(t),this.notifyChange(\"updating\")}};e([a({readOnly:!0})],p.prototype,\"updating\",null),e([a({readOnly:!0})],p.prototype,\"updatingRemaining\",null),p=e([n(\"esri.views.3d.layers.graphics.Graphics3DElevationAlignment\")],p);var d=p;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import i from\"../../../../core/Accessor.js\";import t from\"../../../../core/Handles.js\";import r from\"../../../../core/Logger.js\";import{isNone as s,isSome as h}from\"../../../../core/maybe.js\";import{isAbortError as l}from\"../../../../core/promiseUtils.js\";import{on as o}from\"../../../../core/watchUtils.js\";import{property as n}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import u from\"./QueryEngine.js\";import c from\"../../../layers/support/FeatureFilter.js\";import{getFloorFilterClause as y}from\"../../../support/floorFilterUtils.js\";import{TaskPriority as d}from\"../../../support/Scheduler.js\";const p=r.getLogger(\"esri.views.3d.layers.graphics.Graphics3DFilterVisibility\");let _=class extends i{constructor(...e){super(...e),this.filter=null,this._dirty=!1,this._querying=!1,this._handles=new t}get updating(){return this._dirty||this._querying||null!=this._queryResult}setup(e,i){this._layerView=e,this._core=i,this._objectIdField=e.layer.objectIdField,this._queryEngine=new u({layerView:this._layerView,priority:d.FILTER_VISIBILITY});const t=this._layerView.view.resourceController.scheduler;this._handles.add(t.registerTask(d.FILTER_VISIBILITY,this)),this._handles.add(o(i.owner,\"loadedGraphics\",\"after-changes\",(e=>this._graphicsChanged(e)),(()=>this.dirty=!0))),this.filterChanged()}destroy(){this._handles.destroy(),this._handles=null,this.clear(),this._layerView=null,this._core=null}clear(){this._queryEngine.clear()&&(this._core.modifyGraphics3DGraphicVisibilities((e=>e.clearVisibilityFlag(2))),this._queryResult=null,this._querying=!1),this.dirty=!1,this.notifyChange(\"updating\")}_graphicsChanged(e){this._queryEngine&&0==(1&e.type)||(this.dirty=!0)}updateVisibility(e){this.active&&(e.hasVisibilityFlag(2,0)||e.setVisibilityFlag(2,!1,0),this.dirty=!0)}filterChanged(){const e=this.recomputeFilter();e!==this.filter&&(this.filter=e,this.dirty=!0)}get active(){return this.filter&&this._core.graphics3DGraphics.size>0}recomputeFilter(){const e=\"filter\"in this._layerView?this._layerView.filter:null,i=\"timeExtent\"in this._layerView?this._layerView.timeExtent:null,t=y(this._layerView);if(s(i)&&s(t))return e;const r=h(e)?e.clone():new c;if(h(i)&&(r.timeExtent=h(r.timeExtent)?r.timeExtent.intersection(i):i),h(t)){const e=null==r.where||\"\"===r.where;r.where=e?t:`(${r.where}) AND (${t})`}return r}get running(){return this._dirty&&!this._querying||null!=this._queryResult}runTask(e){this.active?(!this._dirty||this._querying||e.done||(this._querying=!0,this.dirty=!1,this._queryEngine.executeQueryForIdSet(this.filter).then((e=>{this._queryResult=e,this._querying=!1})).catch((e=>{l(e)||(p.warn(\"FeatureFilter query failed: \"+e,{error:e}),this._queryResult=new Set,this._core.graphics3DGraphics.forEach((e=>this._queryResult.add(this._getFeatureId(e.graphic)))),this._querying=!1)})),e.madeProgress()),this._queryResult&&!e.done&&(this._core.modifyGraphics3DGraphicVisibilities((i=>{if(e.done)return!1;const t=this._queryResult.has(this._getFeatureId(i.graphic));return!!i.setVisibilityFlag(2,t,0)&&(e.madeProgress(),!0)})),e.done||(this._queryResult=null)),this.notifyChange(\"updating\")):this.clear()}_getFeatureId(e){return null==e.objectId?e.attributes[this._objectIdField]:e.objectId}set dirty(e){this._dirty!==e&&(this._dirty=e,this.notifyChange(\"updating\"))}};e([n({readOnly:!0})],_.prototype,\"updating\",null),_=e([a(\"esri.views.3d.layers.graphics.Graphics3DFilterVisibility\")],_);export{_ as Graphics3DFilterVisibility};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Graphic.js\";import i from\"../../../../core/Accessor.js\";import{neverReached as s}from\"../../../../core/compilerUtils.js\";import r from\"../../../../core/Handles.js\";import{logOnError as n}from\"../../../../core/promiseUtils.js\";import{init as a}from\"../../../../core/watchUtils.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{diff as p}from\"../../../../core/accessorSupport/diffUtils.js\";import{canProject as h,project as d}from\"../../../../geometry/support/webMercatorUtils.js\";import c from\"../../../../rest/support/Query.js\";import{SUSPEND_RESUME_EXTENT_OPTIMISM as u}from\"./constants.js\";import{Graphics3DCore as g}from\"./Graphics3DCore.js\";import m from\"./Graphics3DElevationAlignment.js\";import{Graphics3DFilterVisibility as y}from\"./Graphics3DFilterVisibility.js\";import f from\"./Graphics3DFrustumVisibility.js\";import{Graphics3DObjectStates as b}from\"./Graphics3DObjectStates.js\";import w from\"./Graphics3DScaleVisibility.js\";import{enlargeExtent as x}from\"./graphicUtils.js\";import{attributeLookup as E}from\"../support/attributeUtils.js\";import{WatchUpdatingTracking as C}from\"../../../support/WatchUpdatingTracking.js\";let V=class extends i{constructor(t){super(t),this._handles=new r,this.watchUpdatingTracking=new C,this.suspendResumeExtentMode=\"computed\",this.dataExtent=null,this.suspendResumeExtent=null}get suspended(){var t;return null==(t=this.scaleVisibility)?void 0:t.suspended}get suspendInfo(){var t,e;const i={};return null!=(t=this.scaleVisibility)&&t.suspended&&(i.outsideScaleRange=!0),null!=(e=this.frustumVisibility)&&e.suspended&&(i.outsideOfView=!0),i}get updating(){var t,e,i;return!!(null!=(t=this.graphicsCore)&&t.updating||null!=(e=this.frustumVisibility)&&e.updating||null!=(i=this.watchUpdatingTracking)&&i.updating)}normalizeCtorArgs(t){const e=t.frustumVisibilityEnabled?new f:null,i=t.scaleVisibilityEnabled?new w:null,s=(t.filterVisibilityEnabled||t.timeExtentVisibilityEnabled)&&\"multipatch\"!==t.layer.geometryType?new y:null,r=t.elevationAlignmentEnabled?new m:null,n=new g({owner:t.owner,layer:t.layer,preferredUpdatePolicy:t.preferredUpdatePolicy,elevationFeatureExpressionEnabled:t.elevationFeatureExpressionEnabled,graphicSymbolSupported:!1,hasZ:t.owner.hasZ,hasM:t.owner.hasM}),{updateClippingExtent:a,suspendResumeExtentMode:o,dataExtent:l}=t;return{graphicsCore:n,frustumVisibility:e,scaleVisibility:i,filterVisibility:s,elevationAlignment:r,updateClippingExtent:a,suspendResumeExtentMode:o,dataExtent:l}}initialize(){this.scaleVisibility&&this.watchUpdatingTracking.add(this.layer,\"scaleRangeId\",(()=>this.scaleVisibility.layerMinMaxScaleChangeHandler())),this.filterVisibility&&(this.watchUpdatingTracking.add(this.owner,\"filter\",(()=>this.filterVisibility.filterChanged())),this.watchUpdatingTracking.add(this.owner,\"timeExtent\",(()=>this.filterVisibility.filterChanged()))),this.elevationAlignment&&this.watchUpdatingTracking.add(this.layer,\"elevationInfo\",((t,e)=>{p(t,e)&&this.watchUpdatingTracking.addPromise(this.graphicsCore.elevationInfoChange())})),this.watchUpdatingTracking.add(this.layer,\"labelsVisible\",(()=>this.graphicsCore.updateVisibilityInfo())),this.watchUpdatingTracking.add(this.layer,\"labelingInfo\",((t,e)=>{p(t,e)&&this.graphicsCore.updateLabelingInfo()}))}async setup(){this.frustumVisibility&&this.frustumVisibility.setup(this.owner);const t=this.owner,e=this.owner.view.basemapTerrain,i=(t,e,i)=>this.graphicsCore.spatialIndex.queryGraphicUIDsInExtent(t,e,i);if(this.scaleVisibility&&this.scaleVisibility.setup(t,this.layer,i,this.graphicsCore,e),this.filterVisibility&&(\"filter\"in t||\"timeExtent\"in t)&&this.filterVisibility.setup(t,this.graphicsCore),this.elevationAlignment){const e=t.view.elevationProvider;this.elevationAlignment.setup(t,i,this.graphicsCore,e)}this._set(\"objectStates\",new b(this.graphicsCore)),this._set(\"labeling\",this.owner.view.labeler.addGraphicsOwner(this.graphicsCore,this.scaleVisibility)),this._set(\"deconfliction\",t.view.deconflictor.addGraphicsOwner(this.graphicsCore)),await n(this.graphicsCore.setup({elevationAlignment:this.elevationAlignment,scaleVisibility:this.scaleVisibility,filterVisibility:this.filterVisibility,deconflictor:this.deconfliction,labeler:this.labeling,objectStates:this.objectStates})),this.watchUpdatingTracking.add(this.layer,\"renderer\",(t=>this.watchUpdatingTracking.addPromise(this.graphicsCore.rendererChange(t)))),this.watchUpdatingTracking.add(t,\"fullOpacity\",(()=>this.graphicsCore.opacityChange())),this.setupSuspendResumeExtent(),this.updateClippingExtent&&(this.watchUpdatingTracking.add(t.view,\"clippingArea\",(()=>this._updateClippingExtent())),this._updateClippingExtent()),this.graphicsCore.startCreateGraphics(),this.graphicsCore.labelsEnabled&&await n(this.graphicsCore.updateLabelingInfo())}destroy(){this._handles&&(this._handles.destroy(),this._handles=null);const t=[\"watchUpdatingTracking\",\"frustumVisibility\",\"scaleVisibility\",\"filterVisibility\",\"elevationAlignment\",\"objectStates\",\"graphicsCore\"];for(const e of t){const t=this[e];t&&(t.destroy(),this._set(e,null))}this._set(\"layer\",null),this._set(\"owner\",null)}maskOccludee(t){const{set:e,handle:i}=this.objectStates.acquireSet(1,null);return this.objectStates.setUid(e,t.uid),i}highlight(t,i){if(t instanceof c){const{set:e,handle:s}=this.objectStates.acquireSet(0,i);return this.owner.queryObjectIds(t).then((t=>this.objectStates.setObjectIds(e,t))),s}if(\"number\"==typeof t||\"string\"==typeof t)return this.highlight([t],i);if(t instanceof e)return this.highlight([t],i);if(\"toArray\"in t&&(t=t.toArray()),Array.isArray(t)&&t.length>0){if(t[0]instanceof e){const e=t;if(null==E(this.layer.fieldsIndex,e[0].attributes,i)){const t=e.map((t=>t.uid)),{set:i,handle:s}=this.objectStates.acquireSet(0,null);return this.objectStates.setUids(i,t),s}t=e.map((t=>E(this.layer.fieldsIndex,t.attributes,i)))}if(\"number\"==typeof t[0]||\"string\"==typeof t[0]){const e=t,{set:s,handle:r}=this.objectStates.acquireSet(0,i);return this.objectStates.setObjectIds(s,e),r}}return S}_updateClippingExtent(){const t=this.owner.view.clippingArea;this.graphicsCore.setClippingExtent(t,this.owner.view.spatialReference)&&(this.updateClippingExtent(t)||this.graphicsCore.recreateAllGraphics())}setupSuspendResumeExtent(){(this.frustumVisibility||this.scaleVisibility)&&this._handles.add(a(this,\"suspendResumeExtentMode\",(()=>{switch(this._handles.remove(j),this.suspendResumeExtentMode){case\"computed\":this._handles.add([a(this.graphicsCore,\"computedExtent\",(t=>this.updateSuspendResumeExtent(t))),this.graphicsCore.watch(\"extentPadding\",(()=>this.updateSuspendResumeExtent(this.graphicsCore.computedExtent)))],j);break;case\"data\":this._handles.add([a(this,\"dataExtent\",(t=>this.updateSuspendResumeExtent(t))),this.graphicsCore.watch(\"extentPadding\",(()=>this.updateSuspendResumeExtent(this.dataExtent)))],j);break;default:s(this.suspendResumeExtentMode)}})))}updateSuspendResumeExtent(t){t?this.suspendResumeExtentChanged(this.extentToSuspendResumeRect(t,this.suspendResumeExtent)):this.suspendResumeExtentChanged(null)}extentToSuspendResumeRect(t,e){const i=this.owner.view.spatialReference;if(!t.spatialReference.equals(i)){if(!h(t,i))return;t=d(t,i)}return x(t,e,u,this.graphicsCore.extentPadding)}suspendResumeExtentChanged(t){this.frustumVisibility&&this.frustumVisibility.setExtent(t),this.scaleVisibility&&this.scaleVisibility.setExtent(t)}};t([o({aliasOf:\"graphicsCore.layer\"})],V.prototype,\"layer\",void 0),t([o({aliasOf:\"graphicsCore.owner\"})],V.prototype,\"owner\",void 0),t([o({constructOnly:!0})],V.prototype,\"updateClippingExtent\",void 0),t([o({constructOnly:!0})],V.prototype,\"graphicsCore\",void 0),t([o({constructOnly:!0})],V.prototype,\"scaleVisibility\",void 0),t([o({constructOnly:!0})],V.prototype,\"filterVisibility\",void 0),t([o({constructOnly:!0})],V.prototype,\"elevationAlignment\",void 0),t([o({constructOnly:!0})],V.prototype,\"frustumVisibility\",void 0),t([o({readOnly:!0})],V.prototype,\"deconfliction\",void 0),t([o({readOnly:!0})],V.prototype,\"labeling\",void 0),t([o({readOnly:!0})],V.prototype,\"objectStates\",void 0),t([o({readOnly:!0})],V.prototype,\"watchUpdatingTracking\",void 0),t([o()],V.prototype,\"suspendResumeExtentMode\",void 0),t([o()],V.prototype,\"dataExtent\",void 0),t([o({readOnly:!0})],V.prototype,\"suspended\",null),t([o({readOnly:!0})],V.prototype,\"suspendInfo\",null),t([o({readOnly:!0,dependsOn:[\"graphicsCore.updating\",\"frustumVisibility.updating\",\"watchUpdatingTracking.updating\"]})],V.prototype,\"updating\",null),V=t([l(\"esri.views.3d.layers.graphics.Graphics3DFeatureLikeLayerView\")],V);var v=V;const j=\"suspendResumeExtentMode\",S={remove(){},pause(){},resume(){}};export{v as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{applySome as e,isSome as t}from\"../../../../../core/maybe.js\";class r{constructor(t,r){this._textureRep=t,this._textureId=r,this._textureRef=e(this._textureId,(e=>this._textureRep.acquire(e)))}dispose(){this._textureRef=e(this._textureId,(e=>{this._textureRep.release(e)}))}bind(e,r,i){if(t(this._textureRef)){const t=this._textureRef.glTexture;e.bindTexture(t,r),e.setUniform2f(i,t.descriptor.width,t.descriptor.height)}}}export{r as RenderTexture};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/has.js\";import{clamp as a,isPowerOfTwo as r}from\"../../../../core/mathUtils.js\";import{isSome as o,isNone as t}from\"../../../../core/maybe.js\";import{RenderTexture as s}from\"../../webgl-engine/core/material/RenderTexture.js\";import{PBRSchematicMRRValues as n}from\"../../webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{defaultMaskAlphaCutoff as l}from\"../../webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{getEllipsoidMode as i}from\"../../webgl-engine/core/shaderLibrary/util/EllipsoidMode.js\";import{Texture as c}from\"../../webgl-engine/lib/Texture.js\";function u(e,a){const r=new Map,s=(e,a)=>{if(t(e))return-1;if(r.has(e.id)){const o=r.get(e.id);return o.usage|=a,o.id}const o=r.size;return r.set(e.id,{id:o,usage:a}),o},l=a.pbrMetallicRoughness,i=l&&l.baseColorFactor,c=a.emissiveFactor,u=null==a.normalTexture&&null==a.emissiveTexture&&null==a.occlusionTexture&&(!l||null==l.metallicRoughnessTexture&&1===l.roughnessFactor&&(1===l.metallicFactor||0===l.metallicFactor)),g=u?n[0]:l?l.metallicFactor:1,p=u?n[1]:l?l.roughnessFactor:1,h=\"mask\"===a.alphaMode?33:1,f={baseColorFactor:i?[i[0],i[1],i[2],i[3]]:[1,1,1,1],baseColorTextureId:s(l&&l.baseColorTexture,h),metallicRoughnessTextureId:s(l&&l.metallicRoughnessTexture,2),metallicFactor:g,roughnessFactor:p},x={alphaMode:a.alphaMode,alphaCutoff:a.alphaCutoff,doubleSided:a.doubleSided,cullFace:\"none\"===a.cullFace?0:\"back\"===a.cullFace?2:\"front\"===a.cullFace?1:void 0,normalTextureId:s(a.normalTexture,4),emissiveTextureId:s(a.emissiveTexture,16),occlusionTextureId:s(a.occlusionTexture,8),emissiveFactor:c?[c[0],c[1],c[2]]:[0,0,0],metallicRoughness:f,wrapTextures:!1,hasParametersFromSource:u},b=[];return r.forEach((({usage:a},r)=>{const t=o(e)&&e[r]&&e[r].formats,s=t?m(t.map((({name:e,format:a})=>({name:e,encoding:d[a]})))):[];b.push({id:r,usage:a,encodings:s})})),{material:x,textures:b}}function m(e){return e.sort(((e,a)=>e.encoding-a.encoding))}const d={ktx2:1,basis:2,dds:4,png:8,jpg:16,\"ktx-etc2\":32},g={[c.KTX2_ENCODING]:2,[c.BASIS_ENCODING]:2,[c.DDS_ENCODING]:4,\"image/png\":8,\"image/jpg\":16,\"image/jpeg\":16,\"image/ktx\":32};function p(e){const r=e&&e.materialDefinitions?Object.keys(e.materialDefinitions)[0]:null,o=e&&e.textureDefinitions?Object.keys(e.textureDefinitions)[0]:null,t=r&&e.materialDefinitions[r],s=o&&e.textureDefinitions[o],n=h();if(null!=t){const e=t.params;e.diffuse&&(n.metallicRoughness.baseColorFactor=[e.diffuse[0],e.diffuse[1],e.diffuse[2],1]),null!=e.doubleSided&&(n.doubleSided=e.doubleSided,n.cullFace=e.doubleSided?0:2),\"none\"!==e.cullFace&&\"front\"!==e.cullFace&&\"back\"!==e.cullFace||(n.cullFace=\"none\"===e.cullFace?0:\"back\"===e.cullFace?2:1),e.transparency&&(n.metallicRoughness.baseColorFactor[3]=a(1-e.transparency,0,1)),(e.useVertexColorAlpha||n.metallicRoughness.baseColorFactor[3]<1)&&(n.alphaMode=\"blend\")}const l=[];if(null!=s){const e=0;!s.wrap||\"repeat\"!==s.wrap[0]&&\"repeat\"!==s.wrap[1]||(n.wrapTextures=!0);let a=1;\"rgba\"===s.channels&&(n.alphaMode=\"blend\",a|=32);const r=s.images.length-1,o=s.images[r],t=e=>e&&e.split(\"/\").pop(),i=Array.isArray(s.encoding)?m(s.encoding.map(((e,a)=>({name:t(o.href[a]),encoding:g[e]||0})))):[{name:t(o.href),encoding:g[s.encoding]||0}];l.push({id:e,usage:a,encodings:i}),n.metallicRoughness.baseColorTextureId=e}return{material:n,textures:l}}const h=()=>({alphaMode:\"opaque\",alphaCutoff:l,doubleSided:!0,cullFace:0,normalTextureId:-1,emissiveTextureId:-1,occlusionTextureId:-1,emissiveFactor:[0,0,0],metallicRoughness:{baseColorFactor:[.8,.8,.8,1],baseColorTextureId:-1,metallicRoughnessTextureId:-1,metallicFactor:0,roughnessFactor:.6},wrapTextures:!1,hasParametersFromSource:!0});function f(e,a,o,s){if(t(e)||null==e.data)return null;const n=e.data,l=!(n instanceof HTMLImageElement)||r(n.width)&&r(n.height),i=s.renderingContext.parameters.maxMaxAnisotropy,u=o&&!s.capabilities.shaderTextureLOD?1:i,m=l&&!e.downsampled&&u>1,d=o||!a.wrapTextures?x:b,g=I(e.encoding),p=1&e.usage?\"opaque\"===a.alphaMode?3:4:3;return new c(n,{mipmap:m,maxAnisotropy:u,encoding:g,wrap:d,components:p,noUnpackFlip:!0})}const x={s:33071,t:33071},b={s:10497,t:10497};function F(e,r,o,t,n,c){const u=c.rendererTextureUsage,m=e=>w(t,o,e&u),d=r.metallicRoughness.baseColorFactor,g=a(r.metallicRoughness.baseColorFactor[3],0,1);e.baseColor=[d[0],d[1],d[2],g],e.hasParametersFromSource=!!r.hasParametersFromSource,e.usePBR=c.usePBR,e.mrrFactors=[r.metallicRoughness.metallicFactor,r.metallicRoughness.roughnessFactor,r.hasParametersFromSource?.2:.5],e.emissiveFactor=r.emissiveFactor,e.isIntegratedMesh=c.isIntegratedMesh,e.alphaCutoff=\"mask\"===r.alphaMode?r.alphaCutoff:l,e.alphaDiscardMode=\"opaque\"===r.alphaMode?1:\"mask\"===r.alphaMode?2:3;const p=m(33);p&&(e.baseColorTexture=new s(n,p));const h=m(2);h&&(e.metallicRoughnessTexture=new s(n,h));const f=m(16);f&&(e.emissionTexture=new s(n,f));const x=m(8);x&&(e.occlusionTexture=new s(n,x));const b=m(4);b&&(e.normalTexture=new s(n,b)),e.commonMaterialParameters.slicePlaneEnabled=c.slicePlaneEnabled,e.commonMaterialParameters.doubleSided=r.doubleSided,e.commonMaterialParameters.cullFace=r.cullFace,e.ellipsoidMode=i(c.viewSpatialReference)}function T(a){const r=!!a.compressedTextureS3TC,o=!!a.compressedTextureETC,t=e(\"disable-feature:i3s-basis\")?0:3;return 24|(r?4|t:0)|(o?t:0)}function C(e,a){return e.find((e=>0!=(e.encoding&a)))}function w(e,a,r){if(t(e)||0===r)return null;for(let t=0;t<e.length;t++){const s=e[t];if(o(s)&&0!=(s.usage&r))return a[t].id}return null}function I(e){switch(e){case 1:return c.KTX2_ENCODING;case 2:return c.BASIS_ENCODING;case 4:return c.DDS_ENCODING;case 8:return\"image/png\";case 16:return\"image/jpeg\";case 32:return\"image/ktx\";default:return\"\"}}export{F as configureMaterial,f as createTexture,u as getMaterialAndTextures,p as getMaterialAndTexturesFromShared,T as getSupportedEncodings,C as selectEncoding};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isMars as e,isMoon as r}from\"../../../../../../geometry/support/spatialReferenceUtils.js\";function t(t){return t&&e(t)?2:t&&r(t)?3:1}export{t as getEllipsoidMode};\n"],"sourceRoot":""}