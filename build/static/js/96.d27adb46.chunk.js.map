{"version":3,"sources":["../node_modules/@arcgis/core/AggregateGraphic.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js","../node_modules/@arcgis/core/views/2d/tiling/TileManager.js","../node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js"],"names":["p","s","arguments","isAggregate","this","popupTemplate","r","sourceLayer","featureReduction","popupEnabled","objectId","cloneProperties","e","t","type","Boolean","prototype","Number","json","read","c","o","a","default","d","some","globalId","n","filter","error","map","Set","values","add","i","delete","u","_hasGlobalIds","_queueProcessor","concurrency","process","clear","length","last","push","finally","notifyChange","popLast","_mergeEdits","edits","addedFeatures","deletedFeatures","updatedFeatures","addOrModified","removed","l","f","h","Array","from","readOnly","isArray","_startupResolver","isReady","_controller","addResolvingPromise","_startWorker","signal","abort","_connection","close","client","tileRenderer","closed","when","source","transferList","service","config","tileInfo","toJSON","tiles","invoke","resolve","_set","promise","query","params","name","value","strategy","_tiles","Map","buffer","acquireTile","releaseTile","tileInfoView","forEach","_releaseTile","getTileCoverage","state","spans","lodInfo","level","row","colFrom","colTo","getId","normalizeCol","getWorldForColumn","_getOrAcquireTile","visible","key","_addPlaceholders","has","id","pool","release","hasMissingTiles","size","added","set","get","_addPlaceholderChildren","Math","abs","_addPlaceholderParent","_getTile","_addPlaceholderChild","hasData","contains","getParentKey","patchCount","D","K","W","getLogger","X","_pipelineIsUpdating","_commandsQueue","q","_doEdit","_doRefresh","_doUpdate","_visibilityOverrides","_effect","_highlightIds","_lastPixelBuffer","_updateHighlight","_proxy","setHighlight","keys","_uploadsLocked","_needsClusterSizeUpdate","effectLists","included","R","excluded","_updateClusterSizeTask","remove","destroy","Promise","all","_initProxy","_initServiceOptions","handles","on","valueRanges","m","effect","includedEffect","excludedEffect","layer","isTable","_createClientOptions","V","_createServiceOptions","_serviceOptions","orderByFields","sublayers","items","suspended","labelingInfo","labelsVisible","enabled","enable","availableFields","view","floors","definitionExpression","renderer","gdbVersion","historicMoment","getTime","timeExtent","JSON","stringify","customParameters","apiKey","geometryDefinition","clips","y","orderBy","g","reduce","sublayerHash","filterHash","effectHash","streamFilter","clipsHash","hasEffects","getObjectId","isCollection","getAttribute","objectIdField","toArray","_addHighlight","_removeHighlight","_hitTest","getAggregates","fromJSON","queryStatistics","valueExpression","viewInfoParams","viewingMode","scale","spatialReference","querySummaryStatistics","_cleanUpQuery","queryFeaturesJSON","then","w","features","_setLayersForFeature","queryFeatures","queryObjectIds","queryFeatureCount","queryExtent","count","extent","M","_update","_tileStrategy","update","updateTiles","requestUpdate","timeline","record","title","N","_acquireTile","featuresTilingScheme","_edit","container","removeAllChildren","uninstall","_tileRendererHash","clientGraphics","popup","defaultPopupTemplateEnabled","validateFetchPopupFeatures","fetchClientPopupFeatures","_fetchServicePopupFeatures","createPopupQuery","event","x","geometry","createFetchPopupFeaturesQueryGeometry","attributes","$","updating","_updatingRequiredFieldsPromise","console","log","setUpdating","emitEvent","emit","geometryType","capabilities","supportsPagination","operations","supportsEditing","mode","featureCount","fullExtent","clone","intersection","width","height","warn","fields","L","timeInfo","globalIdField","getFeatureDefinition","openPorts","parsedUrl","dynamicDataSource","datesInUnknownTimezone","subtypeField","_detectQueryMode","field","timeReferenceUnknownClient","maxRecordCount","tileMaxRecordCount","S","createQuery","outSpatialReference","_validateEdit","includes","destroyed","_hasRequiredSupport","_updateRequiredFields","_getEffectiveRenderer","_createSchemaConfig","E","_createConfiguration","max","schema","pixelBuffer","_createTileRendererHash","_initTileRenderer","effects","onConfigUpdate","tileKeys","startup","hasHighlight","_onceTilesUpdated","mesh","targets","aggregate","_lockGPUUploads","applyUpdate","_unlockGPUUploads","_updateClusterSizeVariable","_forceAttributeTextureUpload","invalidateLabels","onEdits","refresh","_effectiveRenderer","watch","_updateClusterEffectiveRendererSizeVariable","dynamicClusterSize","visualVariables","T","indexOf","C","j","P","_aggregateValueRanges","_createUpdateClusterSizeTask","aggregateFields","once","O","layerView","install","getAttributeHash","floorInfo","where","_addFloorFilterClause","z","hiddenIds","viewAllLevelIds","floorField","replace","join","RegExp","trim","F","_injectOverrides","I","B","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","_","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","token","catch","hitTest","getFeature","_createHittestResult","getAggregate","referenceId","H","k","U","J","v","A","Y","b","left","right","top","bottom","_get","String","write","base","typeMap","polygon","types","path","ofType","rect","moving","attached","lastUpdateId","updateRequested","fadeTransitionEnabled","opacity","blendMode","whenLayerView","attach","detach","isUpdating","minScale","maxScale","isFulfilled","isResolved","isVisibleAtScale","minDataValue","maxDataValue","minSize","maxSize","SIZE_MINMAX_VALUE","expression","stops","SIZE_SCALE_STOPS","levels","SIZE_FIELD_STOPS","valueUnit","SIZE_UNIT_VALUE","NONE","xoffset","yoffset","floor","pointerType","symbol","uniqueValueInfos","classBreakInfos","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","xmin","min","ymin","xmax","ymax"],"mappings":"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","file":"static/js/96.d27adb46.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"./chunks/tslib.es6.js\";import r from\"./Graphic.js\";import{property as t}from\"./core/accessorSupport/decorators/property.js\";import\"./core/has.js\";import\"./core/accessorSupport/ensureType.js\";import\"./core/Logger.js\";import{subclass as o}from\"./core/accessorSupport/decorators/subclass.js\";var p;let s=p=class extends r{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer&&this.sourceLayer.featureReduction;return r&&\"popupTemplate\"in r&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.objectId}clone(){return new p({objectId:this.objectId,...this.cloneProperties()})}};e([t({type:Boolean})],s.prototype,\"isAggregate\",void 0),e([t({type:Number,json:{read:!0}})],s.prototype,\"objectId\",void 0),s=p=e([o(\"esri.AggregateGraphic\")],s);var c=s;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nasync function e(e,a){if(!e)return null;switch(e.type){case\"class-breaks\":case\"simple\":case\"unique-value\":case\"dot-density\":case\"dictionary\":return new((await import(\"./tileRenderers/SymbolTileRenderer.js\")).default)(a);case\"heatmap\":return new((await import(\"./tileRenderers/HeatmapTileRenderer.js\")).default)(a)}}export{e as createOrReuseTileRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{QueueProcessor as o}from\"../../../support/QueueProcessor.js\";function d(e){return e.some((e=>e.globalId))}function n(e){return e.filter((e=>!e.error)).map((e=>{var r;return null!=(r=e.objectId)?r:e.globalId}))}function a(e,r){const s=new Set(e);for(const t of r.values())s.add(t);return s}function i(e,r){const s=new Set(e);for(const t of r.values())s.delete(t);return s}let u=class extends r{constructor(e){super(),this._hasGlobalIds=!1,this._queueProcessor=new o({concurrency:1,process:e.process})}destroy(){this._queueProcessor.clear()}get updating(){return this._queueProcessor.length>0}push(e){const r=this._queueProcessor,s=r.last();switch(e.type){case\"update\":case\"refresh\":if((null==s?void 0:s.type)===e.type)return;r.push(e).finally((()=>this.notifyChange(\"updating\")));break;case\"edit\":{const t=\"processed-edit\"===(null==s?void 0:s.type)?s:null;t&&r.popLast();const o=this._mergeEdits(t,e);for(const e of o)r.push(e).finally((()=>this.notifyChange(\"updating\")));break}}this.notifyChange(\"updating\")}_mergeEdits(e,r){var s,t;const{addedFeatures:o,deletedFeatures:u,updatedFeatures:c}=r.edits;if(this._hasGlobalIds=this._hasGlobalIds||d(o)||d(c)||d(u),this._hasGlobalIds){return[e,{type:\"processed-edit\",edits:{addOrModified:[...o,...c],removed:u}}]}const p=new Set(n(null!=(s=null==e?void 0:e.edits.addOrModified)?s:[])),l=new Set(n(null!=(t=null==e?void 0:e.edits.removed)?t:[])),f=new Set([...n(o),...n(c)]),h=new Set(n(u));return[{type:\"processed-edit\",edits:{addOrModified:Array.from(a(i(p,h),f)).map((e=>({objectId:e}))),removed:Array.from(a(i(l,f),h)).map((e=>({objectId:e})))}}]}};e([s({readOnly:!0})],u.prototype,\"updating\",null),u=e([t(\"esri.views.2d.layers.support.FeatureCommandQueue\")],u);var c=u;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{EsriPromise as e}from\"../../../../core/Promise.js\";import{createResolver as r,createAbortController as s,ignoreAbortErrors as o,throwIfNotAbortError as i}from\"../../../../core/promiseUtils.js\";import{open as n}from\"../../../../core/workers/workers.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";function l(t){return Array.isArray(t)}let u=class extends e{constructor(t){super(t),this._startupResolver=r(),this.isReady=!1}initialize(){this._controller=s(),this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(t){this.client.tileRenderer=t}get closed(){return this._connection.closed}async startup(t,e,r,s){await this.when();const o=this._controller.signal,i=l(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:e,tileInfo:t.tileInfo.toJSON(),tiles:s};await this._connection.invoke(\"startup\",n,i),this._startupResolver.resolve(),this._set(\"isReady\",!0)}async updateTiles(t){return await this._startupResolver.promise,o(this._connection.invoke(\"updateTiles\",t))}async update(t){const e={config:t};return await this._startupResolver.promise,this._connection.invoke(\"update\",e)}async applyUpdate(t){return await this._startupResolver.promise,this._connection.invoke(\"applyUpdate\",t)}async setHighlight(t){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.setHighlight\",t))}async refresh(){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.refresh\"))}async querySummaryStatistics(t,e,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.querySummaryStatistics\",{query:t.toJSON(),params:e},r)}async queryFeatures(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatures\",t.toJSON(),e)}async queryObjectIds(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryObjectIds\",t.toJSON(),e)}async queryFeatureCount(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatureCount\",t.toJSON(),e)}async queryExtent(t,e){return this._connection.invoke(\"controller.queryExtent\",t.toJSON(),e)}async queryLatestObservations(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryLatestObservations\",t.toJSON(),e)}async queryStatistics(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryStatistics\",t)}async getObjectId(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getObjectId\",t)}async getDisplayId(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getDisplayId\",t)}async getFeature(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getFeature\",t)}async getAggregate(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregate\",t)}async getAggregates(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregates\")}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregateValueRanges\")}async mapValidDisplayIds(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.mapValidDisplayIds\",t)}async onEdits(t){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.onEdits\",t))}async enableEvent(t,e){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.enableEvent\",{name:t,value:e}))}async _startWorker(t){try{this._connection=await n(\"Pipeline\",{client:this.client,strategy:\"dedicated\",signal:t})}catch(e){i(e)}}};t([a()],u.prototype,\"isReady\",void 0),t([a()],u.prototype,\"client\",void 0),t([a()],u.prototype,\"tileRenderer\",null),u=t([c(\"esri.views.2d.layers.support.FeatureLayerProxy\")],u);var p=u;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import i from\"./TileCoverage.js\";import t from\"./TileKey.js\";const l=1e-6;class s{constructor(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}destroy(){}clear(){this._tiles.forEach((e=>this._releaseTile(e)))}tileKeys(){const e=[];return this._tiles.forEach(((i,t)=>e.push(t))),e}update(e){const l=this.tileInfoView.getTileCoverage(e.state,this.buffer,\"closest\"),{spans:s,lodInfo:r}=l,{level:a}=r,o=[],d=[],h=new Set,n=new Set;for(const{row:i,colFrom:c,colTo:f}of s)for(let e=c;e<=f;e++){const l=t.getId(a,i,r.normalizeCol(e),r.getWorldForColumn(e)),s=this._getOrAcquireTile(o,l);h.add(l),s.isReady?s.visible=!0:n.add(s.key)}n.forEach((e=>this._addPlaceholders(h,e))),this._tiles.forEach((e=>{h.has(e.key.id)||(d.push(e.key.id),this._releaseTile(e))})),i.pool.release(l);return{hasMissingTiles:n.size>0,added:o,removed:d}}_getOrAcquireTile(e,i){if(!this._tiles.has(i)){const l=this.acquireTile(new t(i));e.push(i),this._tiles.set(i,l),l.visible=!1}return this._tiles.get(i)}_getTile(e){return this._tiles.get(e)}_releaseTile(e){this._tiles.delete(e.key.id),this.releaseTile(e)}_addPlaceholders(e,i){const t=this._addPlaceholderChildren(e,i);if(!(Math.abs(1-t)<l)){if(!this._addPlaceholderParent(e,i)){this._getTile(i.id).visible=!0}}}_addPlaceholderChildren(e,i){let t=0;return this._tiles.forEach((l=>{t+=this._addPlaceholderChild(e,l,i)})),t}_addPlaceholderChild(e,i,t){if(i.key.level<=t.level||!i.hasData||!t.contains(i.key))return 0;i.visible=!0,e.add(i.key.id);return 1/(1<<2*(i.key.level-t.level))}_addPlaceholderParent(i,t){let l=t.getParentKey(),s=0,r=null;for(;e(l);){if(i.has(l.id))return!0;const e=this._getTile(l.id);if(null!=e&&e.isReady)return e.visible=!0,i.add(e.key.id),!0;null!=e&&e.hasData&&e.patchCount>s&&(s=e.patchCount,r=e),l=l.getParentKey()}return!!r&&(r.visible=!0,i.add(r.key.id),!0)}}export{s as TileManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../AggregateGraphic.js\";import\"../../../geometry.js\";import i from\"../../../Graphic.js\";import{flatten as r}from\"../../../core/arrayUtils.js\";import s from\"../../../core/Collection.js\";import a from\"../../../core/Error.js\";import n from\"../../../core/has.js\";import{clone as l}from\"../../../core/lang.js\";import o from\"../../../core/Logger.js\";import{andThen as h,unwrapOr as u,isSome as d,isNone as p}from\"../../../core/maybe.js\";import{debounce as c,eachAlwaysValues as y,isAbortError as f,after as g}from\"../../../core/promiseUtils.js\";import{init as m,whenFalseOnce as _}from\"../../../core/watchUtils.js\";import{property as v}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as b}from\"../../../core/accessorSupport/decorators/subclass.js\";import R from\"../../../layers/effects/EffectList.js\";import{calculateTolerance as x}from\"../../../renderers/support/clickToleranceUtils.js\";import w from\"../../../rest/support/FeatureSet.js\";import S from\"../../../rest/support/Query.js\";import{MAX_FILTERS as F}from\"../engine/webgl/definitions.js\";import{LayerView2DMixin as U}from\"./LayerView2D.js\";import{createSchema as I}from\"./features/schemaUtils.js\";import{createOrReuseTileRenderer as O}from\"./features/tileRenderers.js\";import{computePxBuffer as E}from\"./features/support/pixelBuffering.js\";import{findSizeVV as T,createClusterCountSizeVariable as C,isClusterCompatibleRenderer as j,createClusterRenderer as P}from\"./support/clusterUtils.js\";import q from\"./support/FeatureCommandQueue.js\";import V from\"./support/FeatureLayerProxy.js\";import{toJSONGeometryType as L}from\"./support/util.js\";import{TileManager as N}from\"../tiling/TileManager.js\";import{FeatureLayerView as H}from\"../../layers/FeatureLayerView.js\";import J from\"../../layers/LayerView.js\";import{RefreshableLayerView as k}from\"../../layers/RefreshableLayerView.js\";import z from\"../../layers/support/FeatureFilter.js\";import A from\"../../layers/support/FeatureEffect.js\";import{createQueryGeometry as $}from\"../../support/drapedUtils.js\";import B from\"../../webgl/capabilities.js\";import M from\"../../../geometry/Extent.js\";const Q=2147483648,G=1,D=e=>(e&Q)>>>31===G;function K(e){return e&&\"openPorts\"in e}const W=o.getLogger(\"esri.views.2d.layers.FeatureLayerView2D\");let X=class extends(H(k(U(J)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._commandsQueue=new q({process:e=>{switch(e.type){case\"processed-edit\":return this._doEdit(e);case\"refresh\":return this._doRefresh();case\"update\":return this._doUpdate()}}}),this._visibilityOverrides=new Set,this._effect=null,this._highlightIds=new Map,this._lastPixelBuffer=0,this._updateHighlight=c((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys())))),this._uploadsLocked=!1,this._needsClusterSizeUpdate=!1,this.filter=null,this.effectLists={included:new R,excluded:new R}}destroy(){var e,t;h(this._updateClusterSizeTask,(e=>e.remove())),null==(e=this._proxy)||e.destroy(),null==(t=this.tileRenderer)||t.destroy(),this._commandsQueue.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.handles.add([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),m(this,\"effect\",(e=>{this.effectLists.included.effect=null==e?void 0:e.includedEffect})),m(this,\"effect\",(e=>{this.effectLists.excluded.effect=null==e?void 0:e.excludedEffect}))])}async _initProxy(){if(\"isTable\"in this.layer&&this.layer.isTable)throw new a(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});this._proxy&&this._proxy.destroy();const e=this._createClientOptions();return this._set(\"_proxy\",new V({client:e})),this._proxy.when()}async _initServiceOptions(){this._set(\"_serviceOptions\",await this._createServiceOptions())}get orderByFields(){return\"stream\"!==this._serviceOptions.type&&this._serviceOptions.orderByFields}get labelsVisible(){const e=\"subtype-group\"===this.layer.type?this.layer.sublayers.items:[this.layer];return!this.suspended&&e.some((e=>e.labelingInfo&&e.labelsVisible))}get effect(){return u(this._effect,null)}set effect(e){const t=this._effect;d(t)&&d(t.filter)&&t.filter.enabled&&d(e)&&d(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange(\"effect\")}get effects(){return this.effect&&[this.effect]||[]}get queryMode(){return this._serviceOptions.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,i=this.view.floors,{definitionExpression:r}=t,s=\"subtype-group\"!==this.layer.type&&this.layer.labelsVisible&&this.layer.labelingInfo,a=\"renderer\"in t&&t.renderer,n=\"feature\"===t.type?t.gdbVersion:void 0,l=\"feature\"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,{timeExtent:o}=this,h=\"customParameters\"in t?JSON.stringify(t.customParameters):void 0,u=\"apiKey\"in t?t.apiKey:void 0,p=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,c=JSON.stringify(this.clips),y=t.featureReduction&&t.featureReduction.toJSON(),f=\"orderBy\"in this.layer&&JSON.stringify(this.layer.orderBy),g=\"sublayers\"in this.layer&&this.layer.sublayers.items.reduce(((e,t)=>e+`${t.visible?1:0}.${JSON.stringify(t.renderer)}.${t.labelsVisible}\\n.${JSON.stringify(t.labelingInfo)}`),\"\");return JSON.stringify({orderBy:f,sublayerHash:g,filterHash:d(this.filter)&&this.filter.toJSON(),effectHash:d(this.effect)&&this.effect.toJSON(),streamFilter:p,gdbVersion:n,definitionExpression:r,historicMoment:l,availableFields:e,renderer:a,labelingInfo:s,timeExtent:o,floors:i,clipsHash:c,featureReduction:y,customParameters:h,apiKey:u})}get hasEffects(){return this.effectLists.included.hasEffects||this.effectLists.excluded.hasEffects}highlight(e){let t;return e instanceof i?t=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?t=[e]:s.isCollection(e)?t=e.map((e=>e&&e.getAttribute(this.layer.objectIdField))).toArray():Array.isArray(e)&&e.length>0&&(t=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>e&&e.getAttribute(this.layer.objectIdField)))),t&&t.length?(t=t.filter((e=>null!=e)),this._addHighlight(t),{remove:()=>this._removeHighlight(t)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}hitTest(e,t){return this._hitTest(e,t)}async queryAggregates(){return(await this._proxy.getAggregates()).map((e=>t.fromJSON(e)))}queryStatistics(){return this._proxy.queryStatistics()}async querySummaryStatistics(e,t,i){const r={...t};var s;t.valueExpression&&(r.viewInfoParams={viewingMode:\"map\",scale:this.view.scale,spatialReference:null==(s=this.view.spatialReference)?void 0:s.toJSON()});return this._proxy.querySummaryStatistics(this._cleanUpQuery(e),r,i)}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=w.fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:M.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:i,removed:r}=this._tileStrategy.update(e);(i.length||r.length)&&this._proxy.updateTiles({added:i,removed:r}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new N({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(m(this,\"renderingConfigHash\",(()=>this._update())),\"attach\"),\"stream\"!==this.layer.type&&this.handles.add(this.layer.on(\"edits\",(e=>this._edit(e))),\"attach\")}detach(){this.container.removeAllChildren(),this.handles.remove(\"attach\"),this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}async fetchPopupFeatures(e,i){if(d(i)&&i.clientGraphics.length){const e=i.clientGraphics[0];if(e instanceof t)return[e];i.clientGraphics=i.clientGraphics.filter((e=>{const{layer:t}=e,i=\"popupEnabled\"in t&&t.popupEnabled,r=\"popupTemplate\"in t&&t.popupTemplate,s=this.view.popup.defaultPopupTemplateEnabled;return i&&(r||s)}))}const s=this.validateFetchPopupFeatures(i);if(s)throw s;if(d(i)&&0===i.clientGraphics.length)return[];const a=this.fetchClientPopupFeatures(i);if(!e)return a;const n=this._fetchServicePopupFeatures(e,i);return y([a,n]).then(r)}async _fetchServicePopupFeatures(e,t){if(\"stream\"===this.layer.type||\"ogc-feature\"===this.layer.type)return[];const i=await this.createPopupQuery(t),{layer:r}=this,s=\"renderer\"in r&&r.renderer,a=d(t)?t.event:null,n=x({renderer:s,event:a});i.geometry=this.createFetchPopupFeaturesQueryGeometry(e,n);const l=new Set,{objectIdField:o}=r,h=d(t)?t.clientGraphics:null;if(h)for(const u of h)l.add(u.attributes[o]);return r.queryFeatures(i).then((e=>e.features.filter((e=>!l.has(e.attributes[o])))))}createFetchPopupFeaturesQueryGeometry(e,t){return $(e,t,this.view)}isUpdating(){var e;const t=\"renderer\"in this.layer&&null!=this.layer.renderer,i=this._commandsQueue.updating,r=null!=this._updatingRequiredFieldsPromise,s=!this._proxy||!this._proxy.isReady,a=this._pipelineIsUpdating,l=null===this.tileRenderer||(null==(e=this.tileRenderer)?void 0:e.updating),o=t&&(i||r||s||a||l);return n(\"esri-2d-log-updating\")&&console.log(`Updating FLV2D: ${o}\\n  -> hasRenderer ${t}\\n  -> hasPendingCommand ${i}\\n  -> updatingRequiredFields ${r}\\n  -> updatingProxy ${s}\\n  -> updatingPipeline ${a}\\n  -> updatingTileRenderer ${l}\\n`),o}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){if(\"path\"in e&&(\"feature\"===this.layer.type||\"subtype-group\"===this.layer.type)&&\"point\"===this.layer.geometryType&&this.layer.capabilities.query.supportsPagination&&!this.layer.capabilities.operations.supportsEditing&&n(\"featurelayer-snapshot-enabled\"))try{const e=await this.layer.queryFeatureCount();if(e<=n(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const t=n(\"featurelayer-snapshot-point-max-threshold\"),i=n(\"featurelayer-snapshot-point-coverage\"),r=this.view.extent,s=this.layer.fullExtent,a=null==s?void 0:s.clone().intersection(r),l=d(a)?a.width*a.height:0,o=(null==s?void 0:s.width)*(null==s?void 0:s.height),h=0===o?0:l/o;if(e<=t&&h>=i)return{mode:\"snapshot\",featureCount:e}}catch(t){W.warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:t})}return{mode:\"on-demand\"}}async _createServiceOptions(){var e;const t=this.layer;if(\"stream\"===t.type)return null;const{capabilities:i,objectIdField:r}=t,s=t.fields.map((e=>e.toJSON())),a=t.fullExtent&&t.fullExtent.toJSON(),n=L(t.geometryType),o=t.timeInfo&&t.timeInfo.toJSON()||null,h=t.spatialReference?t.spatialReference.toJSON():null,u=\"feature\"===t.type?t.globalIdField:null;let p;\"ogc-feature\"===t.type?p=t.source.getFeatureDefinition():K(t.source)?p=await t.source.openPorts():t.parsedUrl&&(p=l(t.parsedUrl),\"dynamicDataSource\"in t&&t.dynamicDataSource&&(p.query={layer:JSON.stringify({source:t.dynamicDataSource})}));const c=\"datesInUnknownTimezone\"in this.layer&&this.layer.datesInUnknownTimezone,y=null!=(e=\"subtypeField\"in this.layer&&this.layer.subtypeField)?e:null,{mode:f,featureCount:g}=await this._detectQueryMode(p);let m=this.layer.objectIdField;if(\"feature\"===this.layer.type&&d(this.layer.orderBy)&&this.layer.orderBy.length){const e=!this.layer.orderBy[0].valueExpression&&this.layer.orderBy[0].field;e&&(m=e)}return{type:f,timeReferenceUnknownClient:c,subtypeField:y,featureCount:g,globalIdField:u,maxRecordCount:i.query.maxRecordCount,tileMaxRecordCount:i.query.tileMaxRecordCount,capabilities:i,fields:s,fullExtent:a,geometryType:n,objectIdField:r,source:p,timeInfo:o,spatialReference:h,orderByFields:m}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=S.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}async _update(){return this._commandsQueue.push({type:\"update\"})}async _edit(e){if(this._validateEdit(e))return this._commandsQueue.push({type:\"edit\",edits:e})}async doRefresh(){return this._commandsQueue.push({type:\"refresh\"})}_validateEdit(e){const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,i=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),r=t&&this.availableFields.includes(t);return i&&!r?(W.error(new a(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`)),null):e}async _doUpdate(){try{if(this.destroyed||!this._hasRequiredSupport(this.layer)||!this._tileStrategy)return;const{effect:t,filter:i}=this;await this._updateRequiredFields();const{renderer:r}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",r);const s=this._createSchemaConfig(),a=L(this.layer.geometryType),n=await E(r,a,this.layer.featureReduction),l=this._createConfiguration(s,i,t);this._lastPixelBuffer=0===n?0:Math.max(n,this._lastPixelBuffer),l.schema.source.pixelBuffer=this._lastPixelBuffer;const o=this._createTileRendererHash(r);if(o!==this._tileRendererHash){await this._initTileRenderer(r);const e=this._serviceOptions;this.effects.forEach((e=>d(e)&&d(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r);const t={added:this._tileStrategy.tileKeys(),removed:[]},i=this.layer;\"stream\"!==i.type&&K(i.source)&&(e.source=await i.source.openPorts()),\"stream\"===i.type&&await this._initServiceOptions(),await this._proxy.startup(this.view.featuresTilingScheme,l,e,t),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(r)}else{const t=await this._proxy.update(l);(t.mesh||t.targets.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){f(e)||W.error(e)}(t.mesh||t.targets.aggregate)&&this._unlockGPUUploads(),this.effects.forEach((e=>d(e)&&d(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r),this._updateClusterSizeVariable(),this._forceAttributeTextureUpload()}this._tileRendererHash=o,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}}async _doEdit(e){try{await this._proxy.onEdits(e)}catch(t){f(t),0}}async _doRefresh(){this._lockGPUUploads();try{await this._proxy.refresh()}catch(e){f(e),0}this._unlockGPUUploads()}_updateClusterSizeVariable(){this._needsClusterSizeUpdate&&(this.tileRenderer.onConfigUpdate(this._effectiveRenderer),this._needsClusterSizeUpdate=!1)}_createUpdateClusterSizeTask(e,t){return this.watch(\"_aggregateValueRanges\",(async i=>{this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._needsClusterSizeUpdate=!0,this._uploadsLocked||this._updateClusterSizeVariable()}))}async _updateClusterEffectiveRendererSizeVariable(e,t,i){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const r=T(e.visualVariables);if(d(r)&&\"cluster_count\"===r.field){const s=e.visualVariables.indexOf(r);e.visualVariables[s]=C(t,i);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=\"renderer\"in this.layer&&this.layer.renderer,t=this.layer.featureReduction;if(d(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&\"cluster\"===t.type&&j(e)){const i=t,r=[],s=P(r,e,i,this._aggregateValueRanges);return h(this._updateClusterSizeTask,(e=>e.remove())),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(s,i),{renderer:s,aggregateFields:r,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e){const t=await O(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?null:(this._proxy.tileRenderer=t,this._set(\"tileRenderer\",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${\"heatmap\"===e.type?\"heatmap\":\"symbol\"}.${\"dot-density\"===e.type}`}_createFeatureDataHash(e,t,i){const r=e.getAttributeHash(),s=JSON.stringify(t),a=d(i)&&JSON.stringify(i.filter),n=JSON.stringify(this.timeExtent);let l=\"\";return this._visibilityOverrides.forEach((e=>l+=e)),`${r}.${s}.${a}.${n}.${l}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=d(e)?e.timeExtent:null,i=d(this.timeExtent)&&d(t)?this.timeExtent.intersection(t):this.timeExtent||t;let r=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=d(e)&&e.where;r=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!i&&!s)return e;const a=d(e)&&e.clone()||new z;return a.hiddenIds=this._visibilityOverrides,a.timeExtent=i,r&&(a.where=r),a}_addFloorFilterClause(e){const t=this.layer;let i=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){var r;let e=this.view.floors;if(!e||!e.length)return i;null!=(r=t.floorInfo.viewAllLevelIds)&&r.length&&(e=t.floorInfo.viewAllLevelIds);const s=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));s.push(\"''\");const a=t.floorInfo.floorField;let n=\"(\"+a+\" IN ({ids}) OR \"+a+\" IS NULL)\";if(n=n.replace(\"{ids}\",s.join(\", \")),d(i)&&i.includes(a)){let e=new RegExp(\"AND \\\\(\"+a+\".*NULL\\\\)\",\"g\");i=i.replace(e,\"\"),e=new RegExp(\"\\\\(\"+a+\".*NULL\\\\)\",\"g\"),i=i.replace(e,\"\"),i=i.replace(/\\s+/g,\" \").trim()}i=\"\"!==i?\"(\"+i+\") AND \"+n:n}return\"\"!==i?i:null}_createConfiguration(e,t,i){const r=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion:void 0,a=new Array(F),n=this._injectOverrides(t);a[0]=d(n)?n.toJSON():null,a[1]=d(i)&&i.filter?i.filter.toJSON():null;const l=I(e);if(p(l))return null;const o=B();return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:s,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:a,schema:l,supportsTextureFloat:o.supportsTextureFloat,maxTextureSize:o.maxTextureSize}}_hasRequiredSupport(e){var t;return!(\"renderer\"in e&&\"dot-density\"===(null==(t=e.renderer)?void 0:t.type)&&!B().supportsTextureFloat)||(W.error(new a(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1)}_onceTilesUpdated(){return this.requestUpdate(),_(this,\"_pipelineIsUpdating\",!1)}_lockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!0,this.tileRenderer.lockGPUUploads())}_unlockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!1,this.tileRenderer.unlockGPUUploads())}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_createSchemaConfig(){const e=\"feature\"===this.layer.type?this.layer.historicMoment:null,t=\"feature\"===this.layer.type?this.layer.gdbVersion:null;return{renderer:\"renderer\"in this.layer&&this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:e,labelsVisible:\"labelsVisible\"in this.layer&&this.layer.labelsVisible,labelingInfo:\"labelingInfo\"in this.layer&&this.layer.labelingInfo,availableFields:this.availableFields,effect:this.effect,filter:this.filter,gdbVersion:t,pixelBuffer:0,orderBy:\"orderBy\"in this.layer&&this.layer.orderBy?this.layer.orderBy:null,customParameters:{...\"customParameters\"in this.layer?this.layer.customParameters:void 0,token:\"apiKey\"in this.layer?this.layer.apiKey:void 0}}}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{f(e)||W.error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{f(e)||W.error(e)}))}_setLayersForFeature(e){const t=this.layer;e.layer=t,e.sourceLayer=t}_createHittestResult(e){return this._setLayersForFeature(e),d(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e}async _hitTest(e,r){if(this.suspended||!this.tileRenderer)return null;const s=await this.tileRenderer.hitTest(e,r);if(0===s.length)return await g(1),null;const a=s[0];if(!D(a)){const e=await this._proxy.getFeature(a);return h(e,(e=>this._createHittestResult(i.fromJSON(e))))}const n=await this._proxy.getAggregate(a);if(p(n))return null;if(d(n.referenceId)){const e=await this._proxy.getFeature(n.referenceId);return h(e,(e=>this._createHittestResult(i.fromJSON(e))))}return this._createHittestResult(t.fromJSON(n))}};e([v()],X.prototype,\"_serviceOptions\",void 0),e([v()],X.prototype,\"_proxy\",void 0),e([v()],X.prototype,\"_pipelineIsUpdating\",void 0),e([v()],X.prototype,\"_effectiveRenderer\",void 0),e([v()],X.prototype,\"_aggregateValueRanges\",void 0),e([v()],X.prototype,\"_commandsQueue\",void 0),e([v()],X.prototype,\"labelsVisible\",null),e([v({type:z})],X.prototype,\"filter\",void 0),e([v({type:A})],X.prototype,\"effect\",null),e([v({readOnly:!0})],X.prototype,\"effects\",null),e([v({readOnly:!0})],X.prototype,\"queryMode\",null),e([v()],X.prototype,\"renderingConfigHash\",null),e([v()],X.prototype,\"tileRenderer\",void 0),e([v()],X.prototype,\"updating\",void 0),X=e([b(\"esri.views.2d.layers.FeatureLayerView2D\")],X);var Y=X;export{Y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";import\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../geometry/Geometry.js\";import{fromJSON as s}from\"../../../geometry/support/jsonUtils.js\";import p from\"./ClipArea.js\";import m from\"../../../geometry/Extent.js\";import i from\"../../../geometry/Polygon.js\";var y;const n={base:t,key:\"type\",typeMap:{extent:m,polygon:i}};let c=y=class extends p{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};e([r({types:n,json:{read:s,write:!0}})],c.prototype,\"geometry\",void 0),e([r({readOnly:!0})],c.prototype,\"version\",null),c=y=e([o(\"esri.views.layers.support.Geometry\")],c);var a=c;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";let t=class extends e{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],t.prototype,\"path\",void 0),r([o({readOnly:!0})],t.prototype,\"version\",null),t=r([s(\"esri.views.layers.support.Path\")],t);var p=t;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Collection.js\";import{referenceSetter as s}from\"../../../core/collectionUtils.js\";import{init as i}from\"../../../core/watchUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{Container as a}from\"../engine/Container.js\";import p from\"../../layers/support/ClipArea.js\";import h from\"../../layers/support/ClipRect.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=e.ofType({key:\"type\",base:p,typeMap:{rect:h,path:d,geometry:n}}),l=e=>{let p=class extends e{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new a),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([i(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),i(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),i(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),i(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([r({type:c,set(t){const e=s(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],p.prototype,\"clips\",void 0),t([r()],p.prototype,\"moving\",void 0),t([r()],p.prototype,\"attached\",void 0),t([r()],p.prototype,\"container\",void 0),t([r()],p.prototype,\"suspended\",void 0),t([r({readOnly:!0})],p.prototype,\"updateParameters\",void 0),t([r()],p.prototype,\"updateRequested\",void 0),t([r()],p.prototype,\"updating\",null),t([r()],p.prototype,\"view\",void 0),p=t([o(\"esri.views.2d.layers.LayerView2D\")],p),p};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import s from\"../../../../core/Logger.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";const l=s.getLogger(\"esri.views.2d.engine.webgl\");function o(s){return r(s.minDataValue)&&r(s.maxDataValue)&&null!=s.minSize&&null!=s.maxSize?i.SIZE_MINMAX_VALUE:(s.expression&&\"view.scale\"===s.expression||s.valueExpression&&\"$view.scale\"===s.valueExpression)&&Array.isArray(s.stops)?i.SIZE_SCALE_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&(Array.isArray(s.stops)||\"levels\"in s&&s.levels)?i.SIZE_FIELD_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&null!=s.valueUnit?i.SIZE_UNIT_VALUE:(l.error(new e(\"mapview-bad-type\",\"Found invalid size VisualVariable\",s)),i.NONE)}export{o as getTypeOfSizeVisualVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n"],"sourceRoot":""}