{"version":3,"sources":["../node_modules/@arcgis/core/layers/support/rasterDatasets/EphemeralBlockCache.js","../node_modules/@arcgis/core/layers/support/rasterDatasets/RawBlockCache.js","../node_modules/@arcgis/core/views/2d/engine/RasterTile.js","../node_modules/@arcgis/core/views/2d/engine/RasterTileContainer.js","../node_modules/@arcgis/core/views/2d/layers/imagery/BaseImageryTileSubView2D.js","../node_modules/@arcgis/core/views/2d/layers/imagery/ImageryTileView2D.js","../node_modules/@arcgis/core/views/2d/engine/RasterVFDisplayObject.js","../node_modules/@arcgis/core/views/2d/engine/RasterVFTile.js","../node_modules/@arcgis/core/views/2d/engine/RasterVFTileContainer.js","../node_modules/@arcgis/core/views/2d/layers/imagery/VectorFieldTileView2D.js","../node_modules/@arcgis/core/views/2d/layers/ImageryTileLayerView2D.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/Mesh2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/ClippingInfo.js","../node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js","../node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js","../node_modules/@arcgis/core/layers/support/rasterFunctions/vectorFieldUtils.js"],"names":["t","e","this","_timer","_cachedBlocks","Map","_size","_duration","_interval","Math","min","s","r","has","get","refCount","delete","controller","abort","ts","Date","now","set","block","i","c","trim","updateTimer","clear","clearTimer","size","setInterval","Array","from","length","clearInterval","a","n","extent","rasterInfo","cache","push","u","some","h","decreaseRefCount","o","m","getBlock","l","x","isResolved","isRejected","then","catch","putBlock","d","deleteBlock","y","g","f","xmin","xmax","ymin","ymax","clone","normalize","p","spatialReference","k","transform","M","Set","inverseTransform","pyramidLevel","pyramidResolution","excessiveReading","R","storageInfo","C","origin","j","max","floor","v","ceil","B","b","pyramidBlockWidth","blockWidth","w","pyramidBlockHeight","blockHeight","$","I","H","E","P","add","forEach","bitmap","coordScale","once","ready","destroy","stage","stencilRef","transforms","dvs","tileMat3","arguments","isCustomTilingScheme","_getTileBounds","_tileInfoView","tileInfo","registerRenderPass","name","brushes","raster","target","children","map","drawPhase","MAP","visible","getTileBounds","world","lodAt","level","resolution","_emptyTilePixelBlock","container","layer","tileSize","useWebGLForProcessing","fetchTile","row","col","join","width","height","pixels","Uint8Array","mask","pixelType","prototype","type","symbolizer","canRenderInWebGL","interpolation","_canUseMajorityInterpolationOnDataSource","bandIds","_getLayerInterpolation","canUseWebGLForProcessing","source","symbolizerParams","globalSymbolizerParams","suspended","coords","pixelBlock","rawPixelData","isRendereredSource","applyRenderer","symbolizerParameters","transformGrid","createEmptyTilePixelBlock","invalidateTexture","local","global","tileInfoView","addChild","removeAllChildren","remove","bandCount","attributeTable","colormap","renderer","colorRamp","_source","_symbolizerParameters","_vaoInvalidated","vaoData","magdir","vao","dispose","scalar","JSON","stringify","invalidateVAO","requestRender","style","_createVectorFieldVAO","context","vertexData","indexData","createVertex","Float32Array","createIndex","Uint32Array","geometry","location","count","normalized","attributes","bufferLayouts","elementCount","tileData","pixelRatio","offset","toScreenNoRotation","symbolTileSize","round","D","rangeX","rangeY","displayViewMat3","symbolTypes","renderPass","_handle","dataType","convertVectorFieldData","key","_getTileSymbolOffset","_sampleVectorFieldData","Promise","resolve","_updateSymbolType","watch","L","getLogger","V","q","_tileStrategy","_fetchQueue","_blockCacheRegistryUrl","_blockCacheRegistryId","_srcResolutions","_previousLOD","_needBlockCacheUpdate","_globalSymbolizerParams","_symbolizerParams","_abortController","_globalUpdateRequested","_isCustomTilingScheme","subview","_redrawOrRefetch","doRefresh","_redrawImage","updateFullExtent","addResolvingPromise","_get","_set","useProgressiveUpdate","_getCacheSize","cachePolicy","acquireTile","releaseTile","cacheSize","requestUpdate","view","toMap","pause","state","update","resume","scale","getClosestInfoForScale","toJSON","F","fromJSON","ioConfig","sampling","hasTilingEffects","_updateSymbolizerParams","updateCacheSize","notifyChange","increaseRasterJobHandlerUsage","supportsTextureFloat","_initializeTileInfo","fullExtent","_computeFetchConcurrency","S","concurrency","process","_updatesubview","handles","error","blendMode","effect","_updateBlockCacheRegistry","decreaseRasterJobHandlerUsage","uninstall","signal","updateRenderer","reset","tiles","_enqueueTileFetch","createTile","id","removeChild","allowPartialFill","registryId","requestRawData","srcResolution","datumTransformation","_isVectorField","install","scales","srcResolutions","create","blockBoundary","maxCol","minCol","maxRow","minRow","moving","getTileCoords","getTileResolution","updateTileSource","_updateGlobalSymbolizerParams","updateTileSymbolizerParameters","fetchPixels","generateWebGLParameters","isGCS","isGeographic","factor","outMin","outMax","url","multidimensionalDefinition","multidimensionalInfo","getSliceIndex","_","U","z","T","G","left","right","top","bottom","Number","String","json","write","readOnly","base","typeMap","polygon","types","read","path","ofType","rect","clips","attached","lastUpdateId","updateRequested","fadeTransitionEnabled","opacity","on","whenLayerView","destroyed","attach","when","detach","isUpdating","minScale","maxScale","isFulfilled","isVisibleAtScale","lengths","slice","_cache","vertices","indices","primitiveType","isMapSpace","indexBuffer","vertexBuffers","BYTES_PER_ELEMENT","Object","keys","reduce","fromScreenExtent","fromPolygon","fromMapExtent","fromRect","toScreen","parseFloat","_clip","_invalidate","mesh","_destroyGL","_lastWidth","_lastHeight","_createMesh","getIndexBuffer","getVertexBuffers","_createScreenRect","fromPath","fromGeometry","constructor","_clips","_updateClippingInfo","createRenderParams","painter","globalOpacity","profiler","LABEL","computedOpacity","recordContainerStart","beforeRenderLayer","_clippingInfos","updateTransforms","renderChildren","compositeLayer","recordContainerEnd","_renderPasses","prepareRenderPasses","beforeRender","render","afterRender","requireFBO","requiresDedicatedFBO","clip","LABEL_ALPHA","DEBUG","HIGHLIGHT","setTransform","items","fromClipArea","sortChildren","setStencilReference","requiredLevel","displayLevel","scaleToZoom","getStencilTarget","PI","esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour","sqrt","atan2","cos","sin","createEmptyBand","validPixelCount","maskIsAlpha","updateStatistics","equals","A","N","J","pennants","barbs","shaft","MAX_VALUE","inputUnit","random","outputUnit","breakValues","filter"],"mappings":"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","file":"static/js/32.d389ef2d.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nclass t{constructor(t=15e3,e=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=t,this._interval=Math.min(t,e)}decreaseRefCount(t,e){const s=t+\"/\"+e,r=this._cachedBlocks;if(r.has(s)){const t=r.get(s);return t.refCount--,t.refCount<=0&&(r.delete(s),t.controller&&t.controller.abort()),t.refCount}return 0}getBlock(t,e){const s=t+\"/\"+e,r=this._cachedBlocks;if(r.has(s)){const t=r.get(s);return t.ts=Date.now(),t.refCount++,r.delete(s),r.set(s,t),t.block}return null}putBlock(t,e,s,r=null){const i=this._cachedBlocks,c=t+\"/\"+e;if(i.has(c)){const t=i.get(c);t.ts=Date.now(),t.refCount++}else i.set(c,{block:s,ts:Date.now(),refCount:1,controller:r});this.trim(),this.updateTimer()}deleteBlock(t,e){const s=this._cachedBlocks,r=t+\"/\"+e;s.has(r)&&s.delete(r)}updateMaxSize(t){this._size=t,this.trim()}empty(){this._cachedBlocks.clear(),this.clearTimer()}getCurrentSize(){return this._cachedBlocks.size}updateTimer(){if(null!=this._timer)return;const t=this._cachedBlocks;this._timer=setInterval((()=>{const e=Array.from(t),s=Date.now();for(let r=0;r<e.length&&e[r][1].ts<=s-this._duration;r++)t.delete(e[r][0]);0===t.size&&this.clearTimer()}),this._interval)}trim(){const t=this._cachedBlocks;if(-1===this._size||this._size>=t.size)return;const e=Array.from(t);for(let s=0;s<e.length-this._size;s++)t.delete(e[s][0])}clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}}export{t as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../../geometry.js\";import{isSome as e}from\"../../../core/maybe.js\";import t from\"./EphemeralBlockCache.js\";import{projectExtent as n,projectResolution as o,snapPyramid as r}from\"../rasterFunctions/rasterProjectionHelper.js\";import l from\"../../../geometry/Point.js\";const c=new Map,a=new t;function i(e,t){return null==t?e:`${e}?sliceId=${t}`}function s(e,t){const n={extent:null,rasterInfo:t,cache:new Map};if(c.has(e)){const t=c.get(e);return t.push(n),t.length-1}return c.set(e,[n]),0}function u(e,t){if(c.has(e)){const n=c.get(e);n[t]=null,n.some((e=>null!=e))||c.delete(e)}}function f(e){c.delete(e)}function h(e,t,n){if(!c.has(e))return null==t?a.decreaseRefCount(e,n):0;const o=c.get(e);if(null==o[t])return a.decreaseRefCount(e,n);const r=o[t].cache;if(r.has(n)){const e=r.get(n);if(e.refCount--,0===e.refCount){r.delete(n);for(let e=0;e<o.length;e++)o[e]&&o[e].cache.has(n)&&o[e].cache.delete(n);e.controller&&e.controller.abort()}return e.refCount}return 0}function m(e,t,n){if(!c.has(e))return null==t?a.getBlock(e,n):null;const o=c.get(e);if(null==o[t]){for(let e=0;e<o.length;e++)if(o[e]&&o[e].cache.has(n)){const t=o[e].cache.get(n);return t.refCount++,t.block}return a.getBlock(e,n)}const r=o[t].cache;if(r.has(n)){const e=r.get(n);return e.refCount++,e.block}for(let l=0;l<o.length;l++)if(l!==t&&o[l]&&o[l]&&o[l].cache.has(n)){const e=o[l].cache.get(n);return e.refCount++,r.set(n,e),e.block}return null}function x(e,t,n,o,r=null){if(!c.has(e))return void(null==t&&a.putBlock(e,n,o,r));const l=c.get(e);if(null==l[t])return void a.putBlock(e,n,o,r);const i={refCount:1,block:o,isResolved:!1,isRejected:!1,controller:r};o.then((()=>i.isResolved=!0)).catch((()=>i.isRejected=!0)),l[t].cache.set(n,i)}function d(e,t,n){if(!c.has(e))return void(null==t&&a.deleteBlock(e,n));const o=c.get(e);null!=o[t]?o[t].cache.delete(n):a.deleteBlock(e,n)}function y(e,t){if(!c.has(e))return null;const n=c.get(e);return null==n[t]?null:n[t]}function g(t,c,a,i,s,u,f=null){const h=y(t,c),m=h.extent,{cache:x,rasterInfo:d}=h;if(m&&m.xmin===a.xmin&&m.xmax===a.xmax&&m.ymin===a.ymin&&m.ymax===a.ymax)return;const g=a.clone().normalize(),{spatialReference:p,transform:k}=d,M=new Set;for(let y=0;y<g.length;y++){const t=g[y];if(t.xmax-t.xmin<=i||t.ymax-t.ymin<=i)continue;let c=n(t,p,f);e(k)&&(c=k.inverseTransform(c));const a=new l({x:i,y:i,spatialReference:t.spatialReference});if(null==s&&!(s=o(a,p,t,f)))return;const{pyramidLevel:h,pyramidResolution:m,excessiveReading:x}=r(s,d,u||\"closest\");if(x)return;const{storageInfo:R}=d,{origin:C}=R,j={x:Math.max(0,Math.floor((c.xmin-C.x)/m.x)),y:Math.max(0,Math.floor((C.y-c.ymax)/m.y))},v=Math.ceil((c.xmax-c.xmin)/m.x-.1),B=Math.ceil((c.ymax-c.ymin)/m.y-.1),b=h>0?R.pyramidBlockWidth:R.blockWidth,w=h>0?R.pyramidBlockHeight:R.blockHeight,$=1,I=Math.max(0,Math.floor(j.x/b)-$),H=Math.max(0,Math.floor(j.y/w)-$),E=Math.floor((j.x+v-1)/b)+$,P=Math.floor((j.y+B-1)/w)+$;for(let e=H;e<=P;e++)for(let t=I;t<=E;t++)M.add(`${h}/${e}/${t}`)}x.forEach(((e,t)=>{if(!M.has(t)){const e=x.get(t);(null==e||e.isResolved||e.isRejected)&&x.delete(t)}})),h.extent={xmin:a.xmin,ymin:a.ymin,xmax:a.xmax,ymax:a.ymax}}export{h as decreaseRefCount,d as deleteBlock,f as deleteRaster,m as getBlock,i as getRasterId,x as putBlock,s as register,u as unregister,g as update};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{c as t}from\"../../../chunks/mat3f32.js\";import{RasterBitmap as s}from\"./RasterBitmap.js\";import{TiledDisplayObject as e}from\"./webgl/TiledDisplayObject.js\";class i extends e{constructor(t,e,i,r,a,n=null){super(t,e,i,r,a),this.bitmap=new s(n,null,null),this.bitmap.coordScale=[r,a],this.bitmap.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.bitmap.destroy(),this.bitmap=null,this.stage=null}set stencilRef(t){this.bitmap.stencilRef=t}get stencilRef(){return this.bitmap.stencilRef}setTransform(t,s){super.setTransform(t,s),this.bitmap.transforms.dvs=this.transforms.dvs}_createTransforms(){return{dvs:t(),tileMat3:t()}}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap.stage=null}}export{i as RasterTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{getWorldWidth as s}from\"../viewpointUtils.js\";import{brushes as r}from\"./brushes.js\";import{RasterTile as i}from\"./RasterTile.js\";import{WGLDrawPhase as t}from\"./webgl/enums.js\";import o from\"./webgl/TileContainer.js\";class n extends o{constructor(){super(...arguments),this.isCustomTilingScheme=!1}createTile(e){const s=this._getTileBounds(e),[r,t]=this._tileInfoView.tileInfo.size;return new i(e,s[0],s[3],r,t)}destroyTile(){}prepareRenderPasses(e){const s=e.registerRenderPass({name:\"imagery (tile)\",brushes:[r.raster],target:()=>this.children.map((e=>e.bitmap)),drawPhase:t.MAP});return[...super.prepareRenderPasses(e),s]}doRender(e){this.visible&&e.drawPhase===t.MAP&&super.doRender(e)}_getTileBounds(r){const i=this._tileInfoView.getTileBounds(e(),r);if(this.isCustomTilingScheme&&r.world){const{tileInfo:e}=this._tileInfoView,t=s(e.spatialReference);if(t){const{resolution:s}=e.lodAt(r.level),o=t/s%e.size[0],n=o?(e.size[0]-o)*s:0;i[0]-=n*r.world,i[2]-=n*r.world}}return i}}export{n as RasterTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{isSome as o}from\"../../../../core/maybe.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../../layers/support/PixelBlock.js\";let l=class extends r{constructor(){super(...arguments),this._emptyTilePixelBlock=null,this.container=null,this.layer=null,this.tileSize=null,this.useWebGLForProcessing=!0}fetchTile(e,r){return this.layer.fetchTile(e.level,e.row,e.col,r)}createEmptyTilePixelBlock(e=null){const r=null==e||e.join(\",\")===this.tileSize.join(\",\");if(r&&o(this._emptyTilePixelBlock))return this._emptyTilePixelBlock;e=e||this.tileSize;const[t,i]=e,l=new s({width:t,height:i,pixels:[new Uint8Array(t*i)],mask:new Uint8Array(t*i),pixelType:\"u8\"});return r&&(this._emptyTilePixelBlock=l),l}};e([t()],l.prototype,\"container\",void 0),e([t()],l.prototype,\"layer\",void 0),e([t()],l.prototype,\"tileSize\",void 0),e([t()],l.prototype,\"type\",void 0),e([t()],l.prototype,\"useWebGLForProcessing\",void 0),l=e([i(\"esri.views.2d.layers.imagery.BaseImageryTileSubView2D\")],l);export{l as BaseImageryTileSubView2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{RasterTileContainer as s}from\"../../engine/RasterTileContainer.js\";import{BaseImageryTileSubView2D as i}from\"./BaseImageryTileSubView2D.js\";let l=class extends i{constructor(){super(...arguments),this.container=null,this.layer=null,this.tileSize=null,this.type=\"raster\",this.useWebGLForProcessing=!0}canUseWebGLForProcessing(){return this.useWebGLForProcessing&&this.layer.symbolizer.canRenderInWebGL&&!(\"majority\"===this.layer.interpolation&&this._canUseMajorityInterpolationOnDataSource())}fetchTile(e,r){return this.layer.fetchTile(e.level,e.row,e.col,r)}async updateTileSource(e,t){const{bandIds:o}=this.layer,s=this._getLayerInterpolation(),i=this.canUseWebGLForProcessing(),{source:l,symbolizerParams:a,globalSymbolizerParams:n,suspended:c,coords:p,resolution:u}=t,{bitmap:d}=e;if([d.x,d.y]=p,d.resolution=u,l&&r(l)&&r(l.pixelBlock)){const e={extent:l.extent,pixelBlock:l.pixelBlock};if(d.rawPixelData=e,i)d.source=l.pixelBlock,d.isRendereredSource=!1;else{const r=await this.layer.applyRenderer(e,\"stretch\"===(null==n?void 0:n.type)?n:null);d.source=r,d.isRendereredSource=!0}d.symbolizerParameters=i?a:null,i?d.transformGrid||(d.transformGrid=l.transformGrid):d.transformGrid=null}else{const e=this.createEmptyTilePixelBlock();d.source=e,d.symbolizerParameters=i?a:null,d.transformGrid=null}d.bandIds=i?o:null,d.width=this.tileSize[0],d.height=this.tileSize[1],d.interpolation=s,d.suspended=c,d.invalidateTexture()}async updateTileSymbolizerParameters(e,t){const{local:o,global:s}=t,{bandIds:i}=this.layer,l=this._getLayerInterpolation(),a=this.canUseWebGLForProcessing(),{bitmap:n}=e,{rawPixelData:c}=n;!a&&r(c)?(n.source=await this.layer.applyRenderer(c,\"stretch\"===(null==s?void 0:s.type)?s:null),n.isRendereredSource=!0):(n.isRendereredSource&&r(c)&&(n.source=c.pixelBlock),n.isRendereredSource=!1),n.symbolizerParameters=a?s||o:null,n.bandIds=a?i:null,n.interpolation=l,n.suspended=!1}install(e,r){this.container=new s(r.tileInfoView),this.container.isCustomTilingScheme=r.isCustomTilingScheme,e.addChild(this.container)}uninstall(){this.container.removeAllChildren(),this.container.remove()}_canUseMajorityInterpolationOnDataSource(){const{bandCount:e,attributeTable:r,colormap:t,pixelType:o}=this.layer.rasterInfo;return 1===e&&(null!=r||null!=t||\"u8\"===o||\"s8\"===o)}_getLayerInterpolation(){const e=this.layer.renderer.type;if(\"raster-colormap\"===e||\"unique-value\"===e||\"class-breaks\"===e)return\"nearest\";const{interpolation:r}=this.layer,{renderer:t}=this.layer;return\"raster-stretch\"===t.type&&null!=t.colorRamp?\"bilinear\"===r||\"cubic\"===r?\"bilinear\":\"nearest\":r}};e([t()],l.prototype,\"container\",void 0),e([t()],l.prototype,\"layer\",void 0),e([t()],l.prototype,\"tileSize\",void 0),e([t()],l.prototype,\"type\",void 0),e([t()],l.prototype,\"useWebGLForProcessing\",void 0),l=e([o(\"esri.views.2d.layers.imagery.ImageryTileView2D\")],l);var a=l;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";import{isSome as e}from\"../../../core/maybe.js\";import{c as t}from\"../../../chunks/mat3f32.js\";import{createVFMesh as a,createVFMeshScalar as s}from\"../../../layers/support/rasterFunctions/vectorFieldUtils.js\";import r from\"../../webgl/BufferObject.js\";import\"../../webgl/FramebufferObject.js\";import\"../../webgl/checkWebGLError.js\";import\"../../webgl/enums.js\";import\"../../../chunks/builtins.js\";import\"../../webgl/renderState.js\";import\"../../webgl/Texture.js\";import i from\"../../webgl/VertexArrayObject.js\";import{DisplayObject as o}from\"./DisplayObject.js\";import{createProgramDescriptor as l}from\"./webgl/Utils.js\";class c extends o{constructor(e=null){super(),this._source=null,this._symbolizerParameters=null,this._vaoInvalidated=!0,this.coordScale=[1,1],this.height=null,this.stencilRef=0,this.rawPixelData=null,this.width=null,this.source=e}destroy(){var t,a;e(this.vaoData)&&(null==(t=this.vaoData.magdir)||t.vao.dispose(),null==(a=this.vaoData.scalar)||a.vao.dispose(),this.vaoData=null)}get symbolizerParameters(){return this._symbolizerParameters}set symbolizerParameters(e){JSON.stringify(this._symbolizerParameters)!==JSON.stringify(e)&&(this._symbolizerParameters=e,this.invalidateVAO())}get source(){return this._source}set source(e){this._source=e,this.invalidateVAO()}invalidateVAO(){var t,a;!this._vaoInvalidated&&e(this.vaoData)&&(null==(t=this.vaoData.magdir)||t.vao.dispose(),null==(a=this.vaoData.scalar)||a.vao.dispose(),this.vaoData=null,this._vaoInvalidated=!0,this.requestRender())}updateVectorFieldVAO(t){if(this._vaoInvalidated){if(this._vaoInvalidated=!1,e(this.source)&&!e(this.vaoData)){const{style:e}=this.symbolizerParameters;switch(e){case\"beaufort_ft\":case\"beaufort_km\":case\"beaufort_kn\":case\"beaufort_m\":case\"beaufort_mi\":case\"classified_arrow\":case\"ocean_current_kn\":case\"ocean_current_m\":case\"single_arrow\":{const e=a(this.source,this.symbolizerParameters),s=this._createVectorFieldVAO(t.context,e);this.vaoData={magdir:s}}break;case\"simple_scalar\":{const e=s(this.source,this.symbolizerParameters),a=this._createVectorFieldVAO(t.context,e);this.vaoData={scalar:a}}break;case\"wind_speed\":{const e=a(this.source,this.symbolizerParameters),r=this._createVectorFieldVAO(t.context,e),i=s(this.source,this.symbolizerParameters),o=this._createVectorFieldVAO(t.context,i);this.vaoData={magdir:r,scalar:o}}}}this.ready(),this.requestRender()}}_createTransforms(){return{dvs:t()}}onAttach(){this.invalidateVAO()}onDetach(){this.invalidateVAO()}_createVectorFieldVAO(e,t){const{vertexData:a,indexData:s}=t,o=r.createVertex(e,35044,new Float32Array(a)),c=r.createIndex(e,35044,new Uint32Array(s)),n=l(\"vector-field\",{geometry:[{location:0,name:\"a_pos\",count:2,type:5126,normalized:!1},{location:1,name:\"a_offset\",count:2,type:5126,normalized:!1},{location:2,name:\"a_vv\",count:2,type:5126,normalized:!1}]});return{vao:new i(e,n.attributes,n.bufferLayouts,{geometry:o},c),elementCount:s.length}}}export{c as RasterVFDisplayObject};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{s as t,m as s}from\"../../../chunks/mat3.js\";import{c as e}from\"../../../chunks/mat3f32.js\";import{RasterVFDisplayObject as a}from\"./RasterVFDisplayObject.js\";import{TiledDisplayObject as i}from\"./webgl/TiledDisplayObject.js\";class r extends i{constructor(t,s,e,i,r,o=null){super(t,s,e,i,r),this.tileData=new a(o),this.tileData.coordScale=[i,r],this.tileData.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.tileData.destroy(),this.tileData=null,this.stage=null}set stencilRef(t){this.tileData.stencilRef=t}get stencilRef(){return this.tileData.stencilRef}_createTransforms(){return{dvs:e(),tileMat3:e()}}setTransform(e,a){super.setTransform(e,a);const i=a/(e.resolution*e.pixelRatio),r=this.transforms.tileMat3,[o,l]=this.tileData.offset,h=[this.x+o*a,this.y-l*a],[n,f]=e.toScreenNoRotation([0,0],h),{symbolTileSize:m}=this.tileData.symbolizerParameters,c=Math.round((this.width-this.tileData.offset[0])/m)*m,D=Math.round((this.height-this.tileData.offset[1])/m)*m,d=c/this.rangeX*i,u=D/this.rangeY*i;t(r,d,0,0,0,u,0,n,f,1),s(this.transforms.dvs,e.displayViewMat3,r),this.tileData.transforms.dvs=this.transforms.dvs}onAttach(){this.tileData.stage=this.stage}onDetach(){this.tileData.stage=null}}export{r as RasterVFTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{RasterVFTile as s}from\"./RasterVFTile.js\";import{WGLDrawPhase as r}from\"./webgl/enums.js\";import t from\"./webgl/TileContainer.js\";import i from\"./webgl/brushes/raster/BrushVectorField.js\";class o extends t{constructor(){super(...arguments),this.isCustomTilingScheme=!1,this.symbolTypes=[\"triangle\"]}createTile(r){const t=this._tileInfoView.getTileBounds(e(),r),[i,o]=this._tileInfoView.tileInfo.size;return new s(r,t[0],t[3],i,o)}destroyTile(){}prepareRenderPasses(e){const s=e.registerRenderPass({name:\"imagery (vf tile)\",brushes:[i],target:()=>this.children.map((e=>e.tileData)),drawPhase:r.MAP});return[...super.prepareRenderPasses(e),s]}doRender(e){this.visible&&e.drawPhase===r.MAP&&this.symbolTypes.forEach((s=>{e.renderPass=s,super.doRender(e)}))}}export{o as RasterVFTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{isSome as t}from\"../../../../core/maybe.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{sampleVectorField as s}from\"../../../../layers/support/rasterFunctions/vectorFieldUtils.js\";import{RasterVFTileContainer as o}from\"../../engine/RasterVFTileContainer.js\";import{BaseImageryTileSubView2D as l}from\"./BaseImageryTileSubView2D.js\";let a=class extends l{constructor(){super(...arguments),this._handle=null,this.container=null,this.layer=null,this.tileSize=null,this.type=\"rasterVF\",this.useWebGLForProcessing=!0}canUseWebGLForProcessing(){return!1}async fetchTile(e,t){const i=await this.layer.fetchTile(e.level,e.row,e.col,t);return\"vector-magdir\"===this.layer.rasterInfo.dataType&&null!=i&&i.pixelBlock&&(i.pixelBlock=await this.layer.convertVectorFieldData(i.pixelBlock,t)),i}updateTileSource(e,i){const r=i.symbolizerParams,{tileData:s}=e;s.key=e.key,s.width=this.tileSize[0],s.height=this.tileSize[1];const{symbolTileSize:o}=r,{source:l}=i;if(s.offset=this._getTileSymbolOffset(s.key,o),t(l)&&t(l.pixelBlock)){const e={extent:l.extent,pixelBlock:l.pixelBlock};s.rawPixelData=e,s.source=this._sampleVectorFieldData(l.pixelBlock,r,s.offset),s.symbolizerParameters=r}else{const e=[Math.round((this.tileSize[0]-s.offset[0])/o),Math.round((this.tileSize[1]-s.offset[1])/o)],t=this.createEmptyTilePixelBlock(e);s.source=t,s.symbolizerParameters=r}return s.invalidateVAO(),Promise.resolve(null)}updateTileSymbolizerParameters(e,i){var r;const s=i.local,{symbolTileSize:o}=s,{tileData:l}=e;l.offset=this._getTileSymbolOffset(l.key,o);const a=l.symbolizerParameters.symbolTileSize;return l.symbolizerParameters=s,t(null==(r=l.rawPixelData)?void 0:r.pixelBlock)&&a!==o&&(l.source=this._sampleVectorFieldData(l.rawPixelData.pixelBlock,l.symbolizerParameters,l.offset)),Promise.resolve(null)}install(e,t){this.container=new o(t.tileInfoView),this.container.isCustomTilingScheme=t.isCustomTilingScheme,this._updateSymbolType(this.layer.renderer),this._handle=this.layer.watch(\"renderer\",(e=>this._updateSymbolType(e))),e.addChild(this.container)}uninstall(){this.container.removeAllChildren(),this._handle.remove(),this._handle=null,this.container.remove()}_getTileSymbolOffset(e,t){const i=e.col*this.tileSize[0]%t,r=e.row*this.tileSize[1]%t;return[i>t/2?t-i:-i,r>t/2?t-r:-r]}_sampleVectorFieldData(e,t,i){const{symbolTileSize:r}=t;return s(e,\"vector-uv\",r,i)}_updateSymbolType(e){\"vector-field\"===e.type&&(this.container.symbolTypes=\"wind-barb\"===e.style?[\"scalar\",\"triangle\"]:\"simple-scalar\"===e.style?[\"scalar\"]:[\"triangle\"])}};e([i()],a.prototype,\"container\",void 0),e([i()],a.prototype,\"layer\",void 0),e([i()],a.prototype,\"tileSize\",void 0),e([i()],a.prototype,\"type\",void 0),e([i()],a.prototype,\"useWebGLForProcessing\",void 0),a=e([r(\"esri.views.2d.layers.imagery.VectorFieldTileView2D\")],a);var c=a;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import t from\"../../../Graphic.js\";import i from\"../../../core/Logger.js\";import{isNone as s,unwrap as r}from\"../../../core/maybe.js\";import{debounce as o,isAbortError as a,createAbortController as l,eachAlways as h}from\"../../../core/promiseUtils.js\";import{createScreenPoint as n}from\"../../../core/screenUtils.js\";import{watch as c,init as u}from\"../../../core/watchUtils.js\";import{property as d}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../../core/accessorSupport/decorators/subclass.js\";import m from\"../../../layers/support/TileInfo.js\";import{update as y,unregister as g,register as f,getRasterId as _}from\"../../../layers/support/rasterDatasets/RawBlockCache.js\";import{extractBands as b}from\"../../../layers/support/rasterFunctions/pixelUtils.js\";import{computeProjectedScales as w}from\"../../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{LayerView2DMixin as v}from\"./LayerView2D.js\";import I from\"./imagery/ImageryTileView2D.js\";import C from\"./imagery/VectorFieldTileView2D.js\";import P from\"../tiling/TileInfoView.js\";import S from\"../tiling/TileQueue.js\";import R from\"../tiling/TileStrategy.js\";import{ImageryTileLayerView as U}from\"../../layers/ImageryTileLayerView.js\";import T from\"../../layers/LayerView.js\";import{RefreshableLayerView as z}from\"../../layers/RefreshableLayerView.js\";import{createQueryGeometry as j}from\"../../support/drapedUtils.js\";import k from\"../../webgl/capabilities.js\";import F from\"../../../geometry/Extent.js\";import x from\"../../../geometry/Point.js\";const L=i.getLogger(\"esri.views.2d.layers.ImageryTileLayerView2D\"),V=[0,0];let q=class extends(U(z(v(T)))){constructor(){super(...arguments),this._tileStrategy=null,this._tileInfoView=null,this._fetchQueue=null,this._blockCacheRegistryUrl=null,this._blockCacheRegistryId=null,this._srcResolutions=null,this._previousLOD=null,this._needBlockCacheUpdate=!1,this._globalSymbolizerParams=null,this._symbolizerParams=null,this._abortController=null,this._globalUpdateRequested=!1,this._isCustomTilingScheme=!1,this.subview=null,this._redrawOrRefetch=o(((e,t)=>e?this.doRefresh():this._redrawImage(t)))}initialize(){const e=this.updateFullExtent();this.addResolvingPromise(e)}get useWebGLForProcessing(){var e;return null==(e=this._get(\"useWebGLForProcessing\"))||e}set useWebGLForProcessing(e){this.subview&&(this.subview.useWebGLForProcessing=e),this._set(\"useWebGLForProcessing\",e)}get useProgressiveUpdate(){return null==this._get(\"useProgressiveUpdate\")||this._get(\"useProgressiveUpdate\")}set useProgressiveUpdate(e){if(this._tileStrategy&&this.useProgressiveUpdate!==e){var t;this._tileStrategy.destroy(),null==(t=this.subview)||t.container.removeAllChildren();const i=this._getCacheSize(e);this._tileStrategy=new R({cachePolicy:\"purge\",acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:i,tileInfoView:this._tileInfoView}),this._set(\"useProgressiveUpdate\",e),this.requestUpdate()}}hitTest(e,i){if(this.suspended)return Promise.resolve(null);const s=this.view.toMap(n(e,i));return Promise.resolve(new t({attributes:{},geometry:s}))}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume();const{extent:t,resolution:i,scale:s}=e.state,r=this._tileInfoView.getClosestInfoForScale(s);if(this.layer.raster){var o;if(!this.useProgressiveUpdate||this._needBlockCacheUpdate){const e=this._srcResolutions[r.level],s=t.toJSON?t:F.fromJSON(t);y(this._blockCacheRegistryUrl,this._blockCacheRegistryId,s,i,e,this.layer.raster.ioConfig.sampling)}this._needBlockCacheUpdate=!1,(null==(o=this._previousLOD)?void 0:o.level)!==r.level&&(this._previousLOD=r,null==this._symbolizerParams||this.hasTilingEffects||this._updateSymbolizerParams(),this._tileStrategy.updateCacheSize(0))}this.notifyChange(\"updating\")}attach(){this.layer.increaseRasterJobHandlerUsage(),k().supportsTextureFloat||(this.useWebGLForProcessing=!1),this._initializeTileInfo(),this._tileInfoView=new P(this.tileInfo,this.fullExtent);const e=this._computeFetchConcurrency();this._fetchQueue=new S({tileInfoView:this._tileInfoView,concurrency:e,process:(e,t)=>this.fetchTile(e,t)});const t=this._getCacheSize(this.useProgressiveUpdate);this._tileStrategy=new R({cachePolicy:\"purge\",acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:t,tileInfoView:this._tileInfoView}),this._updatesubview(),this.handles.add([c(this.layer,[\"bandIds\",\"renderer\",\"interpolation\",\"multidimensionalDefinition\"],((e,t,i)=>{const s=\"multidimensionalDefinition\"===i,r=\"interpolation\"===i&&(\"majority\"===e||\"majority\"===t)&&this._canUseMajorityInterpolationOnDataSource(),o=\"renderer\"===i&&\"vector-field\"===t.type!=(\"vector-field\"===t.type);o&&this._updatesubview();const l=s||r||o;this._redrawOrRefetch(l).catch((e=>{a(e)||L.error(e)}))})),u(this,[\"layer.blendMode\"],(e=>{this.subview&&(this.subview.container.blendMode=e)}),!0),u(this,[\"layer.effect\"],(e=>{this.subview&&(this.subview.container.effect=e)}),!0)],\"attach\"),this._updateBlockCacheRegistry()}detach(){var e;this.handles.remove(\"attach\"),this.layer.decreaseRasterJobHandlerUsage(),null==(e=this.subview)||e.uninstall(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null,g(this._blockCacheRegistryUrl,this._blockCacheRegistryId)}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){!this.hasTilingEffects&&this.useProgressiveUpdate||(this._abortController&&this._abortController.abort(),this._abortController=l(),0===this._fetchQueue.length&&this._redrawImage(this._abortController.signal).then((()=>{this._globalUpdateRequested=!1,this.requestUpdate()})));const e=this._getCacheSize(this.useProgressiveUpdate);this._tileStrategy.updateCacheSize(e),this.requestUpdate()}createFetchPopupFeaturesQueryGeometry(e,t){return j(e,t,this.view)}async doRefresh(){if(this.suspended)return;await this.layer.updateRenderer(),this._updateSymbolizerParams(),this._updateBlockCacheRegistry(!0),this._fetchQueue.reset();const e=[];this._tileStrategy.tiles.forEach((t=>e.push(this._enqueueTileFetch(t)))),await h(e),this.notifyChange(\"updating\")}isUpdating(){return this._fetchQueue.length>0||this._globalUpdateRequested}acquireTile(e){const t=this.subview.container.createTile(e);return this._enqueueTileFetch(t),this.requestUpdate(),this._needBlockCacheUpdate=!0,this._globalUpdateRequested=this.hasTilingEffects||!this.useProgressiveUpdate,t}releaseTile(e){var t;this._fetchQueue.abort(e.key.id),null==(t=this.subview)||t.container.removeChild(e),e.once(\"detach\",(()=>{e.destroy(),this.requestUpdate()})),this.requestUpdate()}fetchTile(e,t){const i=!s(t)&&t.signal,o=this.subview.canUseWebGLForProcessing(),a={allowPartialFill:!0,tileInfo:this.tileInfo,signal:r(i),registryId:this._blockCacheRegistryId,requestRawData:o,srcResolution:this._srcResolutions[e.level],datumTransformation:this.datumTransformation,interpolation:o?\"nearest\":this.layer.interpolation};return this.subview.fetchTile(e,a)}_updatesubview(){const e=this._isVectorField()?\"rasterVF\":\"raster\";if(this.subview){if(this.subview.type===e)return;this.subview.uninstall()}const{layer:t}=this,i=new(\"rasterVF\"===e?C:I)({layer:t,tileSize:this.tileInfo.size,useWebGLForProcessing:this.useWebGLForProcessing});i.install(this.container,{tileInfoView:this._tileInfoView,isCustomTilingScheme:this._isCustomTilingScheme}),i.container.blendMode=t.blendMode,i.container.effect=t.effect,this.subview=i}_isVectorField(){return\"vector-field\"===this.layer.renderer.type}_getCacheSize(e){return e?40:0}_initializeTileInfo(){const e=this.view.spatialReference,t=new x({x:this.fullExtent.xmin,y:this.fullExtent.ymax,spatialReference:e}),{scales:i,srcResolutions:s,isCustomTilingScheme:r}=w(this.layer.rasterInfo,e),o=m.create({spatialReference:e,size:512,scales:i});(0===o.origin.x||o.origin.x>t.x)&&(o.origin=t),this._isCustomTilingScheme=r,this._set(\"tileInfo\",o),this._srcResolutions=null!=s?s:[]}_computeFetchConcurrency(){const{blockBoundary:e}=this.layer.rasterInfo.storageInfo,t=e[e.length-1];return(t.maxCol-t.minCol+1)*(t.maxRow-t.minRow+1)>64?2:10}async _enqueueTileFetch(e,t){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key),{bandIds:s}=this.layer;let r=!this.useProgressiveUpdate||this.hasTilingEffects&&!this._globalSymbolizerParams;if(this._globalUpdateRequested&&!this.moving&&0===this._fetchQueue.length){r=!1;try{await this._redrawImage(this._abortController&&this._abortController.signal)}catch(i){a(i)&&L.error(i)}this._globalUpdateRequested=!1}!this.subview.canUseWebGLForProcessing()&&!this._isVectorField()||this.hasTilingEffects||null!=this._symbolizerParams||this._updateSymbolizerParams();const o=this._tileInfoView.getTileCoords(V,e.key),l=this._tileInfoView.getTileResolution(e.key);await this.subview.updateTileSource(e,{source:t,symbolizerParams:this._symbolizerParams,globalSymbolizerParams:this._globalSymbolizerParams,suspended:r,bandIds:s,coords:o,resolution:l}),e.once(\"attach\",(()=>this.requestUpdate())),this.subview.container.addChild(e)}catch(i){a(i)||L.error(i)}this.requestUpdate()}}async _redrawImage(e){if(0===this.subview.container.children.length)return;await this.layer.updateRenderer(),this.hasTilingEffects?await this._updateGlobalSymbolizerParams(e):(this._updateSymbolizerParams(),this._globalSymbolizerParams=null);const t=this.subview.container.children.map((async e=>this.subview.updateTileSymbolizerParameters(e,{local:this._symbolizerParams,global:this._globalSymbolizerParams})));await h(t),this.container.requestRender()}async _updateGlobalSymbolizerParams(e){const t={srcResolution:this._srcResolutions[this._previousLOD.level],registryId:this._blockCacheRegistryId,signal:e},i=await this.layer.fetchPixels(this.view.extent,this.view.width,this.view.height,t);if(!i||!i.pixelBlock)return;const s=this.layer.symbolizer.generateWebGLParameters({pixelBlock:b(i.pixelBlock,this.layer.bandIds),isGCS:this.view.spatialReference.isGeographic,resolution:{x:this._previousLOD.resolution,y:this._previousLOD.resolution},bandIds:this.layer.bandIds});!this.subview.canUseWebGLForProcessing()&&s&&\"stretch\"===s.type&&this.layer.renderer&&\"raster-stretch\"===this.layer.renderer.type&&(s.factor=s.factor.map((e=>255*e)),s.outMin=Math.round(255*s.outMin),s.outMax=Math.round(255*s.outMax)),this._globalSymbolizerParams=s}_updateSymbolizerParams(){this._symbolizerParams=this.layer.symbolizer.generateWebGLParameters({pixelBlock:null,isGCS:this.view.spatialReference.isGeographic,resolution:{x:this._previousLOD.resolution,y:this._previousLOD.resolution},bandIds:this.layer.bandIds})}_updateBlockCacheRegistry(e=!1){const{url:t,rasterInfo:i,multidimensionalDefinition:s,raster:r}=this.layer,o=null!=i&&i.multidimensionalInfo?r.getSliceIndex(s):null,a=_(t,o);if(a!==this._blockCacheRegistryUrl){if(null!=this._blockCacheRegistryUrl&&g(this._blockCacheRegistryUrl,this._blockCacheRegistryId),this._blockCacheRegistryId=f(a,this.layer.raster.rasterInfo),e){const e=this._tileInfoView.getClosestInfoForScale(this.view.scale),t=this._srcResolutions[e.level];y(a,this._blockCacheRegistryId,this.view.extent,this.view.resolution,t,this.layer.raster.ioConfig.sampling)}this._blockCacheRegistryUrl=a}}_canUseMajorityInterpolationOnDataSource(){const{bandCount:e,attributeTable:t,colormap:i,pixelType:s}=this.layer.rasterInfo;return 1===e&&(null!=t||null!=i||\"u8\"===s||\"s8\"===s)}};e([d()],q.prototype,\"subview\",void 0),e([d()],q.prototype,\"useWebGLForProcessing\",null),e([d()],q.prototype,\"useProgressiveUpdate\",null),q=e([p(\"esri.views.2d.layers.ImageryTileLayerView2D\")],q);var G=q;export{G as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";import\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../geometry/Geometry.js\";import{fromJSON as s}from\"../../../geometry/support/jsonUtils.js\";import p from\"./ClipArea.js\";import m from\"../../../geometry/Extent.js\";import i from\"../../../geometry/Polygon.js\";var y;const n={base:t,key:\"type\",typeMap:{extent:m,polygon:i}};let c=y=class extends p{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};e([r({types:n,json:{read:s,write:!0}})],c.prototype,\"geometry\",void 0),e([r({readOnly:!0})],c.prototype,\"version\",null),c=y=e([o(\"esri.views.layers.support.Geometry\")],c);var a=c;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";let t=class extends e{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],t.prototype,\"path\",void 0),r([o({readOnly:!0})],t.prototype,\"version\",null),t=r([s(\"esri.views.layers.support.Path\")],t);var p=t;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Collection.js\";import{referenceSetter as s}from\"../../../core/collectionUtils.js\";import{init as i}from\"../../../core/watchUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{Container as a}from\"../engine/Container.js\";import p from\"../../layers/support/ClipArea.js\";import h from\"../../layers/support/ClipRect.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=e.ofType({key:\"type\",base:p,typeMap:{rect:h,path:d,geometry:n}}),l=e=>{let p=class extends e{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new a),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([i(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),i(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),i(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),i(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([r({type:c,set(t){const e=s(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],p.prototype,\"clips\",void 0),t([r()],p.prototype,\"moving\",void 0),t([r()],p.prototype,\"attached\",void 0),t([r()],p.prototype,\"container\",void 0),t([r()],p.prototype,\"suspended\",void 0),t([r({readOnly:!0})],p.prototype,\"updateParameters\",void 0),t([r()],p.prototype,\"updateRequested\",void 0),t([r()],p.prototype,\"updating\",null),t([r()],p.prototype,\"view\",void 0),p=t([o(\"esri.views.2d.layers.LayerView2D\")],p),p};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import t from\"../../../../core/Logger.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{e as s}from\"../../../../chunks/earcut.js\";import{s as n}from\"../../../../chunks/vec2.js\";import{a as o}from\"../../../../chunks/vec2f64.js\";import{convertFromNestedArray as c,convertFromPolygon as i}from\"../../../../layers/graphics/featureConversionUtils.js\";import a from\"../../../../layers/graphics/OptimizedGeometry.js\";import{i1616to32 as f}from\"./number.js\";import h from\"../../../webgl/BufferObject.js\";const m=t.getLogger(\"esri.views.2d.engine.webgl.Mesh2D\"),u=t=>{switch(t.BYTES_PER_ELEMENT){case 1:return 5121;case 2:return 5123;case 4:return 5125;default:throw new e(\"Cannot get DataType of array\")}},y=(e,t,r,s)=>{let n=0;for(let o=1;o<r;o++){const r=e[2*(t+o-1)],s=e[2*(t+o-1)+1];n+=(e[2*(t+o)]-r)*(e[2*(t+o)+1]+s)}return s?n>0:n<0},x=({coords:e,lengths:t},r)=>{const n=[];for(let o=0,c=0;o<t.length;c+=t[o],o+=1){const i=c,a=[];for(;o<t.length-1&&y(e,c+t[o],t[o+1],r);o+=1,c+=t[o])a.push(c+t[o]-i);const f=e.slice(2*i,2*(c+t[o])),h=s(f,a,2);for(const e of h)n.push(e+i)}return n};class g{constructor(e,t,r,s=!1){this._cache={},this.vertices=e,this.indices=t,this.primitiveType=r,this.isMapSpace=s}static fromRect({x:e,y:t,width:r,height:s}){const n=e,o=t,c=n+r,i=o+s;return g.fromScreenExtent({xmin:n,ymin:o,xmax:c,ymax:i})}static fromPath(e){const t=c(new a,e.path,!1,!1),r=t.coords,s=new Uint32Array(x(t,!0)),n=new Uint32Array(r.length/2);for(let o=0;o<n.length;o++)n[o]=f(Math.floor(r[2*o]),Math.floor(r[2*o+1]));return new g({geometry:n},s,4)}static fromGeometry(t,r){const s=r.geometry.type;switch(s){case\"polygon\":return g.fromPolygon(t,r.geometry);case\"extent\":return g.fromMapExtent(t,r.geometry);default:return m.error(new e(\"mapview-bad-type\",`Unable to create a mesh from type ${s}`,r)),g.fromRect({x:0,y:0,width:1,height:1})}}static fromPolygon(e,t){const r=i(new a,t,!1,!1),s=r.coords,c=new Uint32Array(x(r,!1)),h=new Uint32Array(s.length/2),m=o(),u=o();for(let o=0;o<h.length;o++)n(m,s[2*o],s[2*o+1]),e.toScreen(u,m),h[o]=f(Math.floor(u[0]),Math.floor(u[1]));return new g({geometry:h},c,4,!0)}static fromScreenExtent({xmin:e,xmax:t,ymin:r,ymax:s}){const n={geometry:new Uint32Array([f(e,r),f(t,r),f(e,s),f(e,s),f(t,r),f(t,s)])},o=new Uint32Array([0,1,2,3,4,5]);return new g(n,o,4)}static fromMapExtent(e,t){const[r,s]=e.toScreen([0,0],[t.xmin,t.ymin]),[n,o]=e.toScreen([0,0],[t.xmax,t.ymax]),c={geometry:new Uint32Array([f(r,s),f(n,s),f(r,o),f(r,o),f(n,s),f(n,o)])},i=new Uint32Array([0,1,2,3,4,5]);return new g(c,i,4)}destroy(){r(this._cache.indexBuffer)&&this._cache.indexBuffer.dispose();for(const e in this._cache.vertexBuffers)r(this._cache.vertexBuffers[e])&&this._cache.vertexBuffers[e].dispose()}get elementType(){return u(this.indices)}getIndexBuffer(e,t=35044){return this._cache.indexBuffer||(this._cache.indexBuffer=h.createIndex(e,t,this.indices)),this._cache.indexBuffer}getVertexBuffers(e,t=35044){return this._cache.vertexBuffers||(this._cache.vertexBuffers=Object.keys(this.vertices).reduce(((r,s)=>({...r,[s]:h.createVertex(e,t,this.vertices[s])})),{})),this._cache.vertexBuffers}}export{g as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/Error.js\";import e from\"../../../../core/Logger.js\";import{isSome as r,isNone as s}from\"../../../../core/maybe.js\";import{c as i}from\"../../../../chunks/mat3f32.js\";import{DisplayObject as o}from\"../DisplayObject.js\";import h from\"./Mesh2D.js\";import a from\"../../../webgl/VertexArrayObject.js\";const c=e.getLogger(\"esri.views.2d.engine.webgl.ClippingInfo\"),n=t=>parseFloat(t)/100;class m extends o{constructor(t,e){super(),this._clip=e,this._cache={},this.stage=t,this._handle=e.watch(\"version\",(()=>this._invalidate())),this.ready()}static fromClipArea(t,e){return new m(t,e)}_destroyGL(){r(this._cache.mesh)&&(this._cache.mesh.destroy(),this._cache.mesh=null),r(this._cache.vao)&&(this._cache.vao.dispose(),this._cache.vao=null)}destroy(){this._destroyGL(),this._handle.remove()}getVAO(t,e,r,i){const[o,h]=e.size;if(\"geometry\"!==this._clip.type&&this._lastWidth===o&&this._lastHeight===h||(this._lastWidth=o,this._lastHeight=h,this._destroyGL()),s(this._cache.vao)){const s=this._createMesh(e,this._clip),o=s.getIndexBuffer(t),h=s.getVertexBuffers(t);this._cache.mesh=s,this._cache.vao=new a(t,r,i,h,o)}return this._cache.vao}_createTransforms(){return{dvs:i()}}_invalidate(){this._destroyGL(),this.requestRender()}_createScreenRect(t,e){const[r,s]=t.size,i=\"string\"==typeof e.left?n(e.left)*r:e.left,o=\"string\"==typeof e.right?n(e.right)*r:e.right,h=\"string\"==typeof e.top?n(e.top)*s:e.top,a=\"string\"==typeof e.bottom?n(e.bottom)*s:e.bottom,c=i,m=h;return{x:c,y:m,width:Math.max(r-o-c,0),height:Math.max(s-a-m,0)}}_createMesh(e,r){switch(r.type){case\"rect\":return h.fromRect(this._createScreenRect(e,r));case\"path\":return h.fromPath(r);case\"geometry\":return h.fromGeometry(e,r);default:return c.error(new t(\"mapview-bad-type\",\"Unable to create ClippingInfo mesh from clip of type: ${clip.type}\")),h.fromRect({x:0,y:0,width:1,height:1})}}}export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{isNone as e,isSome as r}from\"../../../../core/maybe.js\";import{c as s}from\"../../../../chunks/mat3f32.js\";import{brushes as t}from\"../brushes.js\";import{Container as i}from\"../Container.js\";import n from\"./ClippingInfo.js\";import{WGLDrawPhase as o}from\"./enums.js\";class a extends i{constructor(){super(...arguments),this.name=this.constructor.name}set clips(e){this._clips=e,this.children.forEach((r=>r.clips=e)),this._updateClippingInfo()}_createTransforms(){return{dvs:s()}}doRender(e){const r=this.createRenderParams(e),{painter:s,globalOpacity:t,profiler:i,drawPhase:n}=r,a=n===o.LABEL?1:t*this.computedOpacity;i.recordContainerStart(this.name),s.beforeRenderLayer(r,this._clippingInfos?255:0,a),this.updateTransforms(e.state),this.renderChildren(r),s.compositeLayer(r,a),i.recordContainerEnd()}renderChildren(r){e(this._renderPasses)&&(this._renderPasses=this.prepareRenderPasses(r.painter));for(const e of this.children)e.beforeRender(r);for(const e of this._renderPasses)try{e.render(r)}catch(s){}for(const e of this.children)e.afterRender(r)}createRenderParams(e){return e.requireFBO=this.requiresDedicatedFBO,e}prepareRenderPasses(e){return[e.registerRenderPass({name:\"clip\",brushes:[t.clip],target:()=>this._clippingInfos,drawPhase:o.MAP|o.LABEL|o.LABEL_ALPHA|o.DEBUG|o.HIGHLIGHT})]}updateTransforms(e){for(const r of this.children)r.setTransform(e)}onAttach(){super.onAttach(),this._updateClippingInfo()}onDetach(){super.onDetach(),this._updateClippingInfo()}_updateClippingInfo(){if(r(this._clippingInfos)&&(this._clippingInfos.forEach((e=>e.destroy())),this._clippingInfos=null),!this.stage)return;const e=this._clips;r(e)&&e.length&&(this._clippingInfos=e.items.map((e=>n.fromClipArea(this.stage,e)))),this.requestRender()}}export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/has.js\";import{WGLDrawPhase as r}from\"./enums.js\";import s from\"./WGLContainer.js\";import t from\"./brushes/WGLBrushInfo.js\";import n from\"./brushes/WGLBrushStencil.js\";const i=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class o extends s{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(i),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(s){const i=super.prepareRenderPasses(s);return i.push(s.registerRenderPass({name:\"stencil\",brushes:[n],drawPhase:r.DEBUG|r.MAP|r.HIGHLIGHT,target:()=>this.getStencilTarget()})),e(\"esri-tiles-debug\")&&i.push(s.registerRenderPass({name:\"tileInfo\",brushes:[t],drawPhase:r.DEBUG,target:()=>this.children})),i}getStencilTarget(){return this.children}updateTransforms(e){for(const r of this.children){const s=this._tileInfoView.getTileResolution(r.key);r.setTransform(e,s)}}setStencilReference(){let e=1;for(const r of this.children)r.stencilRef=e++}}export{o as default,i as sortByLevel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{JSONMap as t}from\"../../../core/jsonMap.js\";import{isSome as e}from\"../../../core/maybe.js\";import n from\"../PixelBlock.js\";import{isValidPixelBlock as r}from\"./pixelUtils.js\";const o=new Map;o.set(\"meter-per-second\",1),o.set(\"kilometer-per-hour\",.277778),o.set(\"knots\",.514444),o.set(\"feet-per-second\",.3048),o.set(\"mile-per-hour\",.44704);const a=180/Math.PI,s=5,i=new t({esriMetersPerSecond:\"meter-per-second\",esriKilometersPerHour:\"kilometer-per-hour\",esriKnots:\"knots\",esriFeetPerSecond:\"feet-per-second\",esriMilesPerHour:\"mile-per-hour\"});function h(t,e){return o.get(t)/o.get(e)||1}function l(t){return(450-t)%360}function c(t,e=\"geographic\"){const[n,r]=t,o=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n)*a;return s=(360+s)%360,\"geographic\"===e&&(s=l(s)),[o,s]}function u(t,e=\"geographic\"){let n=t[1];\"geographic\"===e&&(n=l(n)),n%=360;const r=t[0];return[r*Math.cos(n/a),r*Math.sin(n/a)]}function f(t,e,o=\"geographic\",a=1){if(!r(t))return t;const{pixels:s,width:i,height:h}=t,l=i*h,f=s[0],p=s[1],m=n.createEmptyBand(t.pixelType,l),M=n.createEmptyBand(t.pixelType,l);let x=0;for(let n=0;n<h;n++)for(let t=0;t<i;t++)\"vector-uv\"===e?([m[x],M[x]]=c([f[x],p[x]],o),m[x]*=a):([m[x],M[x]]=u([f[x],p[x]],o),m[x]*=a,M[x]*=a),x++;const d=new n({pixelType:t.pixelType,width:t.width,height:t.height,mask:t.mask,validPixelCount:t.validPixelCount,maskIsAlpha:t.maskIsAlpha,pixels:[m,M]});return d.updateStatistics(),d}function p(t,e,n=1){if(1===n||!r(t))return t;const o=t.clone(),{pixels:a,width:s,height:i}=o,h=a[0],l=a[1];let c=0;for(let r=0;r<i;r++)for(let t=0;t<s;t++)\"vector-uv\"===e?(h[c]*=n,l[c]*=n):h[c]*=n,c++;return o.updateStatistics(),o}function m(t,n,r,o,a){if(!e(a)||!a.spatialReference.equals(t.spatialReference))return{extent:t,width:n,height:r,resolution:t.width/n};const s=a.xmin,i=a.ymax;o=Math.max(o||0,30);const h=Math.ceil(n*(1/o)),l=Math.ceil(r*(1/o)),c=((t.xmax-t.xmin)/h+(t.ymax-t.ymin)/l)/2;return t.xmin=s+Math.floor((t.xmin-s)/c)*c,t.xmax=s+Math.ceil((t.xmax-s)/c)*c,t.ymin=i+Math.floor((t.ymin-i)/c)*c,t.ymax=i+Math.ceil((t.ymax-i)/c)*c,{extent:t,width:Math.round(t.width/c),height:Math.round(t.height/c),resolution:c}}const M=x(0,0,0);function x(t=0,e=0,n=Math.PI,r=!0){r&&(n=(2*Math.PI-n)%(2*Math.PI));const o=r?-1:1,a=13*o,s=-7*o,i=-2*o,h=-16*o,l=29,[c,u]=g(0,e+a,n,l),[f,p]=g(t-5.5,e+s,n,l),[m,M]=g(t+5.5,e+s,n,l),[x,d]=g(t-1.5,e+i,n,l),[k,w]=g(t+1.5,e+i,n,l),[y,P]=g(t-1.5,e+h,n,l),[b,I]=g(t+1.5,e+h,n,l);return[c,u,f,p,x,d,k,w,m,M,y,P,b,I]}function d(t=0,e=Math.PI,n=!0){n&&(e=(2*Math.PI-e)%(2*Math.PI));const r=10,o=n?-1:1,a=5*o,i=20*o,h=25*o,l=45,c=0,u=0,f=2,p=0,m=f*o;let[M,x]=[c+r/2,u-i],[d,k]=[M+f,x],[w,y]=[d-p,k+m],[P,b]=[c-r/2,u-h],[I,v]=[P+p,b-m],A=Math.ceil(t/s),_=Math.floor(A/10);A-=8*_;const U=[],S=[];for(let s=0;s<A/2;s++,_--){_<=0&&A%2==1&&s===(A-1)/2&&(P=c,I=P+p,b=(b+x)/2,v=b-m);const[t,n]=g(P,b,e,l);if(_>0){const[r,o]=g(d,b,e,l),[a,s]=g(M,x,e,l);U.push(r),U.push(o),U.push(t),U.push(n),U.push(a),U.push(s)}else{const[r,o]=g(d,k,e,l),[a,s]=g(w,y,e,l),[i,h]=g(I,v,e,l);S.push(t),S.push(n),S.push(i),S.push(h),S.push(a),S.push(s),S.push(r),S.push(o)}b+=a,x+=a,k+=a,y+=a,v+=a}const[D,F]=g(c+r/2,u+i,e,l),j=r/2+f,[N,T]=g(c+j,u+i,e,l),[q,B]=g(c+r/2,u-h,e,l),[E,J]=g(c+j,u-h,e,l);return{pennants:U,barbs:S,shaft:[D,F,N,T,q,B,E,J]}}function g(t,e,n,r=1){const o=Math.sqrt(t*t+e*e)/r,a=(2*Math.PI+Math.atan2(e,t))%(2*Math.PI);return[o,(2*Math.PI+a-n)%(2*Math.PI)]}const k=[0,1,3,6,10,16,21,27,33,40,47,55,63],w=[0,.5,1,1.5,2],y=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function P(t,e,n,r){const o=h(r||\"knots\",n);let a;for(a=1;a<e.length;a++)if(a===e.length-1){if(t<e[a]*o)break}else if(t<=e[a]*o)break;return Math.min(a-1,e.length-2)}function b(t,e,n,r,o){let a=0;switch(e){case\"beaufort_kn\":a=P(t,k,\"knots\",n);break;case\"beaufort_km\":a=P(t,k,\"kilometer-per-hour\",n);break;case\"beaufort_ft\":a=P(t,k,\"feet-per-second\",n);break;case\"beaufort_m\":a=P(t,k,\"meter-per-second\",n);break;case\"classified_arrow\":a=P(t,o,r,n);break;case\"ocean_current_m\":a=P(t,w,\"meter-per-second\",n);break;case\"ocean_current_kn\":a=P(t,y,\"knots\",n)}return a}function I(t,e){const{style:n,inputUnit:r,outputUnit:o,breakValues:a}=e,s=i.fromJSON(r),h=i.fromJSON(o),l=7*6,c=15;let u=0,f=0;const{width:p,height:m,mask:x}=t,d=t.pixels[0],g=t.pixels[1],k=x?x.filter((t=>t>0)).length:p*m,w=new Float32Array(k*l),y=new Uint32Array(c*k);for(let i=0;i<m;i++)for(let t=0;t<p;t++){const e=i*p+t;if(!x||x[i*p+t]){var P;const r=null!=(P=(g[e]+360)%360/180*Math.PI)?P:2*Math.PI*Math.random(),o=b(d[e],n,s,h,a);for(let n=0;n<M.length;n+=2)w[u++]=(t+.5)/p,w[u++]=(i+.5)/m,w[u++]=M[n],w[u++]=M[n+1]+r,w[u++]=o,w[u++]=d[e];const c=7*(u/l-1);y[f++]=c,y[f++]=c+1,y[f++]=c+2,y[f++]=c+0,y[f++]=c+4,y[f++]=c+3,y[f++]=c+0,y[f++]=c+2,y[f++]=c+3,y[f++]=c+2,y[f++]=c+5,y[f++]=c+3,y[f++]=c+5,y[f++]=c+6,y[f++]=c+3}}return{vertexData:w,indexData:y}}const v=[];function A(t,e){if(0===v.length)for(let s=0;s<30;s++)v.push(d(5*s,0));const n=h(i.fromJSON(e.inputUnit),\"knots\"),{width:r,height:o,mask:a}=t,l=t.pixels[0],c=t.pixels[1],u=6,f=[],p=[];let m=0,M=0;for(let i=0;i<o;i++)for(let t=0;t<r;t++){const e=i*r+t,h=l[e]*n;if((!a||a[i*r+t])&&h>=s){var x;const n=null!=(x=(c[e]+360)%360/180*Math.PI)?x:2*Math.PI*Math.random(),{pennants:a,barbs:s,shaft:l}=v[Math.min(Math.floor(h/5),29)];if(a.length+s.length===0)continue;let d=f.length/u;const g=(t+.5)/r,k=(i+.5)/o;for(let t=0;t<a.length;t+=2)f[m++]=g,f[m++]=k,f[m++]=a[t],f[m++]=a[t+1]+n,f[m++]=0,f[m++]=h;for(let t=0;t<s.length;t+=2)f[m++]=g,f[m++]=k,f[m++]=s[t],f[m++]=s[t+1]+n,f[m++]=0,f[m++]=h;for(let t=0;t<l.length;t+=2)f[m++]=g,f[m++]=k,f[m++]=l[t],f[m++]=l[t+1]+n,f[m++]=0,f[m++]=h;for(let t=0;t<a.length/6;t++)p[M++]=d,p[M++]=d+1,p[M++]=d+2,d+=3;for(let t=0;t<s.length/8;t++)p[M++]=d,p[M++]=d+1,p[M++]=d+2,p[M++]=d+1,p[M++]=d+2,p[M++]=d+3,d+=4;p[M++]=d+0,p[M++]=d+1,p[M++]=d+2,p[M++]=d+1,p[M++]=d+3,p[M++]=d+2,d+=4}}return{vertexData:new Float32Array(f),indexData:new Uint32Array(p)}}function _(t,e){const n=4*6;let r=0,o=0;const{width:a,height:i,mask:h}=t,l=t.pixels[0],c=[],u=[],f=\"wind_speed\"===e.style?s:Number.MAX_VALUE;for(let s=0;s<i;s++)for(let t=0;t<a;t++){const e=s*a+t;if((!h||h[s*a+t])&&l[e]<f){for(let n=0;n<4;n++)c[r++]=(t+.5)/a,c[r++]=(s+.5)/i,c[r++]=n<2?-.5:.5,c[r++]=n%2==0?-.5:.5,c[r++]=0,c[r++]=l[e];const h=4*(r/n-1);u[o++]=h,u[o++]=h+1,u[o++]=h+2,u[o++]=h+1,u[o++]=h+2,u[o++]=h+3}}return{vertexData:new Float32Array(c),indexData:new Uint32Array(u)}}function U(t,e){return\"simple_scalar\"===e.style?_(t,e):\"wind_speed\"===e.style?A(t,e):I(t,e)}function S(t,e,r,o=[0,0],a=.5){const{width:s,height:i,mask:h}=t,[l,f]=t.pixels,[p,m]=o,M=Math.round((s-p)/r),x=Math.round((i-m)/r),d=M*x,g=new Float32Array(d),k=new Float32Array(d),w=new Uint8Array(d),y=\"vector-uv\"===e;for(let n=0;n<x;n++)for(let t=0;t<M;t++){let e=0;const o=n*M+t,x=Math.max(0,n*r+m),d=Math.max(0,t*r+p),P=Math.min(i,x+r),b=Math.min(s,d+r);for(let t=x;t<P;t++)for(let n=d;n<b;n++){const r=t*s+n;if(!h||h[r]){e++;const t=y?[l[r],f[r]]:[l[r],(360+f[r])%360],[n,a]=y?t:u(t);g[o]+=n,k[o]+=a}}if(e>=(P-x)*(b-d)*(1-a)){w[o]=1;const[t,n]=c([g[o]/e,k[o]/e]);g[o]=t,k[o]=n}else w[o]=0,g[o]=0,k[o]=0}const P=new n({width:M,height:x,pixels:[g,k],mask:w});return P.updateStatistics(),P}export{f as convertVectorFieldData,p as convertVectorFieldUnit,U as createVFMesh,_ as createVFMeshScalar,h as getUnitConversionFactor,S as sampleVectorField,m as snapImageToSymbolTile,i as unitKebabDict,c as uvComponentToVector};\n"],"sourceRoot":""}