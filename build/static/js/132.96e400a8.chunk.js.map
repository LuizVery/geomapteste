{"version":3,"sources":["../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/BaseTileRenderer.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/HeatmapSource.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/HeatmapTileRenderer.js"],"names":["i","e","tiles","Map","this","clear","layer","layerView","tileInfoView","isUpdating","t","createTile","once","notifyChange","set","id","forEach","delete","key","disposeTile","isReady","requestUpdate","r","prototype","o","s","gradient","height","width","intensities","minPixelIntensity","maxPixelIntensity","_intensityInfo","featuresView","attributeView","initialize","requestRender","_container","getTileCoords","bitmap","resolution","getTileResolution","renderer","type","_gradient","toJSON","source","invalidateTexture","Promise","resolve","addChild","removeAllChildren","removeChild","destroy","get","tileKey","intensityInfo","n","matrix","console","error","a"],"mappings":"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","file":"static/js/132.96e400a8.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{HandleOwner as t}from\"../../../../../core/HandleOwner.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as s}from\"../../../../../core/accessorSupport/decorators/subclass.js\";let i=class extends t{constructor(e){super(e),this.tiles=new Map}destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(e){const t=this.createTile(e);return t.once(\"isReady\",(()=>this.notifyChange(\"updating\"))),this.tiles.set(e.id,t),t}forceAttributeTextureUpload(){}forEachTile(e){this.tiles.forEach(e)}releaseTile(e){this.tiles.delete(e.key.id),this.disposeTile(e)}isUpdating(){let e=!0;return this.tiles.forEach((t=>{e=e&&t.isReady})),!e}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}};e([r()],i.prototype,\"layer\",void 0),e([r()],i.prototype,\"layerView\",void 0),e([r()],i.prototype,\"tileInfoView\",void 0),e([r()],i.prototype,\"updating\",null),i=e([s(\"esri.views.2d.layers.features.tileRenderers.BaseTileRenderer\")],i);var o=i;export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{drawHeatmap as t}from\"../../../../../../renderers/support/heatmapUtils.js\";class i{constructor(){this.gradient=null,this.height=512,this.width=512}render(i){t(i,512,this.intensities,this.gradient,this.minPixelIntensity,this.maxPixelIntensity)}}export{i as HeatmapSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as t}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{generateGradient as i}from\"../../../../../renderers/support/heatmapUtils.js\";import{BitmapTileContainer as s}from\"../../../engine/BitmapTileContainer.js\";import r from\"./BaseTileRenderer.js\";import{HeatmapSource as n}from\"./support/HeatmapSource.js\";let o=class extends r{constructor(e){super(e),this._intensityInfo={minPixelIntensity:0,maxPixelIntensity:0},this.featuresView={attributeView:{initialize:()=>{},requestUpdate:()=>{}},requestRender:()=>{}},this._container=new s(e.tileInfoView)}createTile(e){const t=this._container.createTile(e);return this.tileInfoView.getTileCoords(t.bitmap,e),t.bitmap.resolution=this.tileInfoView.getTileResolution(e),t}onConfigUpdate(){const e=this.layer.renderer;if(\"heatmap\"===e.type){const{minPixelIntensity:t,maxPixelIntensity:s}=e;this._intensityInfo.minPixelIntensity=t,this._intensityInfo.maxPixelIntensity=s,this._gradient=i(e.toJSON()),this.tiles.forEach((e=>{const i=e.bitmap.source;i&&(i.minPixelIntensity=t,i.maxPixelIntensity=s,i.gradient=this._gradient,e.bitmap.invalidateTexture())}))}}hitTest(){return Promise.resolve([])}install(e){e.addChild(this._container)}uninstall(e){this._container.removeAllChildren(),e.removeChild(this._container)}disposeTile(e){this._container.removeChild(e),e.destroy()}supportsRenderer(e){return e&&\"heatmap\"===e.type}onTileData(e){const t=this.tiles.get(e.tileKey);if(!t)return;const i=e.intensityInfo,{minPixelIntensity:s,maxPixelIntensity:r}=this._intensityInfo,o=t.bitmap.source||new n;o.intensities=i&&i.matrix||null,o.minPixelIntensity=s,o.maxPixelIntensity=r,o.gradient=this._gradient,t.bitmap.source=o,this._container.addChild(t),this.requestUpdate()}onTileError(e){console.error(e)}lockGPUUploads(){}unlockGPUUploads(){}};o=e([t(\"esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer\")],o);var a=o;export{a as default};\n"],"sourceRoot":""}